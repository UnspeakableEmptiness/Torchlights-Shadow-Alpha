const _0x1a99ef=_0x4a83;(function(_0x1d8eaa,_0x595b3d){const _0x568c52=_0x4a83,_0x1a2f3b=_0x1d8eaa();while(!![]){try{const _0x29860e=-parseInt(_0x568c52(0x440))/0x1+-parseInt(_0x568c52(0x1e7))/0x2*(-parseInt(_0x568c52(0x223))/0x3)+parseInt(_0x568c52(0x474))/0x4*(-parseInt(_0x568c52(0x445))/0x5)+-parseInt(_0x568c52(0x49c))/0x6+parseInt(_0x568c52(0x329))/0x7*(-parseInt(_0x568c52(0x2e7))/0x8)+-parseInt(_0x568c52(0x260))/0x9+parseInt(_0x568c52(0x35f))/0xa*(parseInt(_0x568c52(0x396))/0xb);if(_0x29860e===_0x595b3d)break;else _0x1a2f3b['push'](_0x1a2f3b['shift']());}catch(_0x24d06f){_0x1a2f3b['push'](_0x1a2f3b['shift']());}}}(_0x55a6,0xc9951));const audioContext=new(window['AudioContext']||window[(_0x1a99ef(0x324))])();class Envelope{constructor(_0x47d25e,_0x4dd7b3,_0x4fadf5){const _0x18f758=_0x1a99ef;this[_0x18f758(0x41b)]=_0x47d25e,this['grainsize']=_0x4dd7b3,this[_0x18f758(0x28a)]=_0x4fadf5;}}class SoundManager{constructor(_0x429786,_0x3a5114){const _0x32135c=_0x1a99ef;this['context']=_0x429786,this[_0x32135c(0x271)]=_0x429786['createGain'](),this[_0x32135c(0x271)][_0x32135c(0x38f)][_0x32135c(0x45b)]=0x1,this[_0x32135c(0x361)]=_0x429786[_0x32135c(0x31f)](),this[_0x32135c(0x361)][_0x32135c(0x38f)]['value']=0x1,this[_0x32135c(0x1f0)]=_0x429786[_0x32135c(0x234)](),this[_0x32135c(0x271)][_0x32135c(0x484)](this[_0x32135c(0x1f0)]),this[_0x32135c(0x361)][_0x32135c(0x484)](this[_0x32135c(0x1f0)]),this[_0x32135c(0x1f0)][_0x32135c(0x484)](this[_0x32135c(0x27c)][_0x32135c(0x30b)]),this[_0x32135c(0x3b4)]=new Array(_0x3a5114),this['ambientsources']=new Array(_0x3a5114),this[_0x32135c(0x461)]=0x0,this['nextsource']=0x0,this['oldestambientsource']=0x0,this[_0x32135c(0x35d)]=0x0;for(let _0x3352a9=0x0;_0x3352a9<this[_0x32135c(0x3b4)][_0x32135c(0x2e1)];_0x3352a9++){this['sources'][_0x3352a9]=new SoundSource(this[_0x32135c(0x27c)],this);}for(let _0x21ce7c=0x0;_0x21ce7c<this['ambientsources'][_0x32135c(0x2e1)];_0x21ce7c++){this[_0x32135c(0x412)][_0x21ce7c]=new SoundSource(this[_0x32135c(0x27c)],this);}this[_0x32135c(0x1f0)][_0x32135c(0x432)][_0x32135c(0x45b)]=0x0,this[_0x32135c(0x1f0)][_0x32135c(0x472)][_0x32135c(0x45b)]=0x0,this[_0x32135c(0x1f0)]['ratio'][_0x32135c(0x45b)]=0x14,this[_0x32135c(0x1f0)][_0x32135c(0x1e9)][_0x32135c(0x45b)]=0x0,this[_0x32135c(0x1f0)][_0x32135c(0x2b8)]['value']=0.25;}['requestSource'](){const _0x4e2b35=_0x1a99ef,_0x5a5982=this['sources'][this[_0x4e2b35(0x461)]];return _0x5a5982[_0x4e2b35(0x404)]&&(_0x5a5982[_0x4e2b35(0x301)][_0x4e2b35(0x49d)](),_0x5a5982[_0x4e2b35(0x404)]['stop'](),_0x5a5982[_0x4e2b35(0x33b)]=null),this[_0x4e2b35(0x278)]=_0x5a5982,this[_0x4e2b35(0x461)]++,this[_0x4e2b35(0x461)]>=this[_0x4e2b35(0x3b4)]['length']&&(this[_0x4e2b35(0x461)]=0x0),_0x5a5982;}[_0x1a99ef(0x2dd)](_0x7854b9){const _0x89081f=_0x1a99ef;if(!this[_0x89081f(0x3e9)])this[_0x89081f(0x3e9)]=[];this[_0x89081f(0x3e9)][_0x89081f(0x23c)](_0x7854b9),this[_0x89081f(0x3f3)]();}[_0x1a99ef(0x3f3)](){const _0x456e77=_0x1a99ef;let _0x597636=this[_0x456e77(0x271)];this[_0x456e77(0x3e9)][_0x456e77(0x348)](function(_0x52690b){const _0x4ce19c=_0x456e77;_0x597636[_0x4ce19c(0x484)](_0x52690b),_0x597636=_0x52690b;}),_0x597636['connect'](this[_0x456e77(0x1f0)]);}[_0x1a99ef(0x3ee)](){const _0x2d5532=_0x1a99ef,_0x36fc80=this['ambientsources'][this['oldestambientsource']];return _0x36fc80[_0x2d5532(0x404)]&&(_0x36fc80['output'][_0x2d5532(0x49d)](),_0x36fc80[_0x2d5532(0x404)]['stop'](),_0x36fc80[_0x2d5532(0x33b)]=null),this[_0x2d5532(0x35d)]=_0x36fc80,this[_0x2d5532(0x43d)]++,this['oldestambientsource']>=this[_0x2d5532(0x412)][_0x2d5532(0x2e1)]&&(this[_0x2d5532(0x43d)]=0x0),_0x36fc80;}[_0x1a99ef(0x2b0)](){const _0x21b20=_0x1a99ef;this['soundmaker']=this['nextsource'],this[_0x21b20(0x404)]['start'](),this[_0x21b20(0x404)][_0x21b20(0x301)]['connect'](this['masterGainNode']);}['playAmbientSound'](){const _0x305754=_0x1a99ef;this[_0x305754(0x291)]=this['nextambientsource'],this[_0x305754(0x291)][_0x305754(0x241)](),this[_0x305754(0x291)][_0x305754(0x301)][_0x305754(0x484)](this[_0x305754(0x361)]);}}class SoundSource{constructor(_0x1bf198,_0x3f5cd4,_0x307784,_0x1c35b4,_0x4c5e95,_0x54a0dd,_0x415400,_0x16e50b,_0x1afd6e){const _0x35570b=_0x1a99ef;this[_0x35570b(0x27c)]=_0x1bf198,this['soundManager']=_0x3f5cd4,this[_0x35570b(0x4c8)]=_0x307784,this['freq']=_0x1c35b4,this[_0x35570b(0x269)]=_0x4c5e95,this[_0x35570b(0x3ad)]=_0x54a0dd||0x1,this['fx']=[],this[_0x35570b(0x449)]=[];if(_0x415400)this['fx']=_0x415400[_0x35570b(0x428)]();this['overtones']=[];if(_0x16e50b)this[_0x35570b(0x49f)]=_0x16e50b[_0x35570b(0x428)]();this[_0x35570b(0x454)]=[],this[_0x35570b(0x389)]=[],this[_0x35570b(0x3b3)]=[];if(_0x1afd6e)this['freqmod']=_0x1afd6e[_0x35570b(0x428)]();this['gainNode']=_0x1bf198[_0x35570b(0x31f)](),this['limiter']=this[_0x35570b(0x27c)]['createDynamicsCompressor'](),this['masterGainNode']=_0x1bf198[_0x35570b(0x31f)](),this[_0x35570b(0x301)]=this['masterGainNode'],this[_0x35570b(0x1f0)]['threshold'][_0x35570b(0x45b)]=0x0,this[_0x35570b(0x1f0)][_0x35570b(0x472)]['value']=0x0,this[_0x35570b(0x1f0)]['ratio'][_0x35570b(0x45b)]=0xa,this[_0x35570b(0x1f0)][_0x35570b(0x1e9)][_0x35570b(0x45b)]=0.003,this['limiter'][_0x35570b(0x2b8)][_0x35570b(0x45b)]=0.25;}['start'](){const _0x3e2b6a=_0x1a99ef;this['masterGainNode'][_0x3e2b6a(0x38f)][_0x3e2b6a(0x45b)]=this[_0x3e2b6a(0x3ad)];const _0x5cc99e=this;this[_0x3e2b6a(0x301)][_0x3e2b6a(0x49d)](),this[_0x3e2b6a(0x464)][_0x3e2b6a(0x49d)]();if(this[_0x3e2b6a(0x404)])this[_0x3e2b6a(0x404)]['disconnect']();let _0x407374=this[_0x3e2b6a(0x464)];this[_0x3e2b6a(0x464)][_0x3e2b6a(0x38f)][_0x3e2b6a(0x45b)]=0x0,this['gainNode'][_0x3e2b6a(0x38f)][_0x3e2b6a(0x2a6)](0x0,this[_0x3e2b6a(0x27c)][_0x3e2b6a(0x43e)]),this[_0x3e2b6a(0x449)][_0x3e2b6a(0x348)](function(_0x620efd){const _0x3017af=_0x3e2b6a;_0x620efd[_0x3017af(0x49d)](),_0x620efd['buffer']=null;}),this['fxnodes']=[];this['fx'][_0x3e2b6a(0x2e1)]>0x0&&this['fx'][_0x3e2b6a(0x348)](function(_0xfc8f4,_0xf5abe0){const _0x1aa81d=_0x3e2b6a;_0x5cc99e[_0x1aa81d(0x449)][_0x1aa81d(0x23c)](_0xfc8f4()),_0x407374['connect'](_0x5cc99e[_0x1aa81d(0x449)][_0xf5abe0]),_0x407374=_0x5cc99e['fxnodes'][_0xf5abe0];});_0x407374[_0x3e2b6a(0x484)](this[_0x3e2b6a(0x271)]);if(this[_0x3e2b6a(0x4c8)]===_0x3e2b6a(0x29c)||this[_0x3e2b6a(0x4c8)]===_0x3e2b6a(0x442)||this[_0x3e2b6a(0x4c8)]===_0x3e2b6a(0x3c6)){const _0x4bb48b=this[_0x3e2b6a(0x27c)][_0x3e2b6a(0x1f9)]*this[_0x3e2b6a(0x269)][_0x3e2b6a(0x28a)],_0x3a55f5=this['context'][_0x3e2b6a(0x399)](0x1,_0x4bb48b,this[_0x3e2b6a(0x27c)][_0x3e2b6a(0x1f9)]),_0xab0763=_0x3a55f5['getChannelData'](0x0);if(this[_0x3e2b6a(0x4c8)]==='lowpass-noise-white')for(let _0x35cb87=0x0;_0x35cb87<_0x4bb48b;_0x35cb87++){_0xab0763[_0x35cb87]=Math[_0x3e2b6a(0x282)]()*0x2-0x1;}else{let _0x6f6d87=0x0;const _0x1ec9b9=0x32;let _0x12158e=0x0;const _0x2411fd=Array(_0x1ec9b9)[_0x3e2b6a(0x4a1)](0x0);for(let _0x13504a=0x0;_0x13504a<_0x4bb48b;_0x13504a++){let _0x399afe=Math[_0x3e2b6a(0x282)]()*0x2-0x1;_0x12158e-=_0x2411fd[_0x13504a%_0x1ec9b9],_0x2411fd[_0x13504a%_0x1ec9b9]=_0x399afe,_0x12158e+=_0x399afe;let _0x46f83f=_0x12158e/_0x1ec9b9,_0x403410=0.02;_0xab0763[_0x13504a]=(_0x6f6d87+_0x403410*_0x46f83f)/(0x1+_0x403410),_0x6f6d87=_0xab0763[_0x13504a],_0xab0763[_0x13504a]*=3.5;}}this[_0x3e2b6a(0x29c)]=this[_0x3e2b6a(0x27c)]['createBufferSource'](),this[_0x3e2b6a(0x29c)][_0x3e2b6a(0x33b)]=_0x3a55f5,this['noise'][_0x3e2b6a(0x327)]=!![],this[_0x3e2b6a(0x404)]=this[_0x3e2b6a(0x29c)];if(this[_0x3e2b6a(0x4c8)]===_0x3e2b6a(0x442)||this[_0x3e2b6a(0x4c8)]===_0x3e2b6a(0x3c6)){const _0x4071d6=this['context'][_0x3e2b6a(0x3db)]();_0x4071d6[_0x3e2b6a(0x4c8)]=_0x3e2b6a(0x287),_0x4071d6[_0x3e2b6a(0x28c)]['value']=this['freq'],this['lowpassFilter']=_0x4071d6,this[_0x3e2b6a(0x404)][_0x3e2b6a(0x484)](this[_0x3e2b6a(0x3ac)]),this[_0x3e2b6a(0x3ac)][_0x3e2b6a(0x484)](this[_0x3e2b6a(0x464)]);}else this[_0x3e2b6a(0x404)][_0x3e2b6a(0x484)](this[_0x3e2b6a(0x464)]);}else this['soundmaker']=this['context'][_0x3e2b6a(0x3ab)](this['type'],this[_0x3e2b6a(0x4c3)]),this[_0x3e2b6a(0x404)][_0x3e2b6a(0x4c8)]=this[_0x3e2b6a(0x4c8)],this[_0x3e2b6a(0x404)][_0x3e2b6a(0x28c)][_0x3e2b6a(0x45b)]=this[_0x3e2b6a(0x4c3)],this['soundmaker'][_0x3e2b6a(0x484)](this['gainNode']);this[_0x3e2b6a(0x404)][_0x3e2b6a(0x241)]();this[_0x3e2b6a(0x269)]?(this[_0x3e2b6a(0x464)][_0x3e2b6a(0x38f)]['value']=0x0,modulateparam(this['env'],this['gainNode'][_0x3e2b6a(0x38f)],this[_0x3e2b6a(0x27c)],0x1),this[_0x3e2b6a(0x464)]['gain']['linearRampToValueAtTime'](0x0,this[_0x3e2b6a(0x27c)][_0x3e2b6a(0x43e)]+this[_0x3e2b6a(0x269)][_0x3e2b6a(0x28a)])):console[_0x3e2b6a(0x2b1)](_0x3e2b6a(0x4b5));this[_0x3e2b6a(0x3b3)]&&(this[_0x3e2b6a(0x4c8)]!==_0x3e2b6a(0x442)&&this['type']!=='noise'&&this[_0x3e2b6a(0x4c8)]!==_0x3e2b6a(0x3c6)&&modulateparam(this[_0x3e2b6a(0x3b3)],this[_0x3e2b6a(0x404)][_0x3e2b6a(0x28c)],this['context'],this['freq']),(this['type']==_0x3e2b6a(0x442)||this[_0x3e2b6a(0x4c8)]==_0x3e2b6a(0x3c6))&&modulateparam(this[_0x3e2b6a(0x3b3)],this[_0x3e2b6a(0x3ac)][_0x3e2b6a(0x28c)],this[_0x3e2b6a(0x27c)],this[_0x3e2b6a(0x4c3)]));this[_0x3e2b6a(0x454)][_0x3e2b6a(0x348)](function(_0xc68b73){const _0x16fef6=_0x3e2b6a;_0xc68b73[_0x16fef6(0x49d)](),_0xc68b73['stop']();}),this[_0x3e2b6a(0x389)][_0x3e2b6a(0x348)](function(_0x5c12c5){const _0xd67faf=_0x3e2b6a;_0x5c12c5 instanceof OscillatorNode&&_0x5c12c5['stop'](),_0x5c12c5[_0xd67faf(0x49d)]();}),this[_0x3e2b6a(0x454)]=[],this[_0x3e2b6a(0x389)]=[];if(this[_0x3e2b6a(0x49f)])for(let _0xe3af1a=0x0;_0xe3af1a<this['overtones'][_0x3e2b6a(0x2e1)];_0xe3af1a++){if(this[_0x3e2b6a(0x4c8)]!==_0x3e2b6a(0x29c)&&this[_0x3e2b6a(0x4c8)]!==_0x3e2b6a(0x442)&&this[_0x3e2b6a(0x4c8)]!==_0x3e2b6a(0x3c6))this[_0x3e2b6a(0x389)][_0x3e2b6a(0x23c)](this[_0x3e2b6a(0x27c)]['createOscillator'](this[_0x3e2b6a(0x4c8)])),this[_0x3e2b6a(0x389)][_0xe3af1a][_0x3e2b6a(0x241)]();else(this[_0x3e2b6a(0x4c8)]==_0x3e2b6a(0x442)||this[_0x3e2b6a(0x4c8)]==_0x3e2b6a(0x3c6))&&(this[_0x3e2b6a(0x454)][_0x3e2b6a(0x23c)](this['context']['createBufferSource']()),this['overtonenoisemakers'][_0xe3af1a][_0x3e2b6a(0x33b)]=this[_0x3e2b6a(0x29c)][_0x3e2b6a(0x33b)],this['overtonenoisemakers'][_0xe3af1a][_0x3e2b6a(0x327)]=!![],this[_0x3e2b6a(0x389)][_0x3e2b6a(0x23c)](this['context'][_0x3e2b6a(0x3db)]()),this[_0x3e2b6a(0x454)][_0xe3af1a][_0x3e2b6a(0x484)](this[_0x3e2b6a(0x389)][_0xe3af1a]),this['overtonenoisemakers'][_0xe3af1a][_0x3e2b6a(0x241)]());this[_0x3e2b6a(0x389)][_0xe3af1a][_0x3e2b6a(0x28c)][_0x3e2b6a(0x2a6)](this['freq']*this[_0x3e2b6a(0x49f)][_0xe3af1a],this['context'][_0x3e2b6a(0x43e)]),this[_0x3e2b6a(0x389)][_0xe3af1a][_0x3e2b6a(0x484)](this[_0x3e2b6a(0x464)]),this[_0x3e2b6a(0x3b3)]&&(this[_0x3e2b6a(0x389)][_0xe3af1a][_0x3e2b6a(0x28c)][_0x3e2b6a(0x45b)]=this[_0x3e2b6a(0x4c3)]*this['overtones'][_0xe3af1a],modulateparam(this['freqmod'],this[_0x3e2b6a(0x389)][_0xe3af1a]['frequency'],this[_0x3e2b6a(0x27c)],this['freq']*this[_0x3e2b6a(0x49f)][_0xe3af1a]));}}}function modulateparam(_0x5a2517,_0x3b0581,_0x47dc67,_0x503b35,_0x5392e0=!![]){const _0x52b54c=_0x1a99ef,{grainsize:_0x1a03b8,duration:_0x102321,func:_0x3de8e1}=_0x5a2517;_0x3b0581['cancelScheduledValues'](_0x47dc67['currentTime']);for(let _0xc1b35e=0x0;_0xc1b35e<_0x102321;_0xc1b35e+=_0x1a03b8*(Math[_0x52b54c(0x282)]()*0.5+0.5)){_0x3b0581[_0x52b54c(0x3a9)](_0x3de8e1(_0xc1b35e)*_0x503b35,_0x47dc67[_0x52b54c(0x43e)]+_0xc1b35e);}}const soundManager=new SoundManager(audioContext,0xa);let verb=createReverb(audioContext,0x1)(),lowpass=createLowpassFilter(audioContext,0x2710)(),delaychain=createDelayChain(audioContext,0.25,0.9,[lowpass,verb])();soundManager[_0x1a99ef(0x3e9)]=[delaychain],soundManager[_0x1a99ef(0x3f3)]();const envelopes={'random1sec':new Envelope(_0x178f76=>Math['random'](),0.01,0x1),'crack':new Envelope(_0x511209=>0x1,0.01,0.2),'stab':new Envelope(_0x41081e=>0x1,0.01,0.1),'boom':new Envelope(_0x465b9f=>0x1,0.1,0.5),'oldcrack':new Envelope(adsrconvert([0.01,0.05,0x1,0.02],0.01),0.01,0.3),'rainfall':new Envelope(_0x410c00=>Math[_0x1a99ef(0x282)](),0.1,0x14),'fire':new Envelope(_0x2e2e68=>adsrconvert([0x3,0.05,0x1,0.02],0x5a)(_0x2e2e68)*(Math[_0x1a99ef(0x282)]()/0x2+0.5),0.03,0x6),'randomboom':new Envelope(_0x114fba=>0x1*Math['random'](),0.1,0x1),'randomstab':new Envelope(_0x58e408=>Math['random']()*Math['min'](0x1,_0x58e408*0xa),0.1,0.2),'linearfall':new Envelope(_0x25b1d4=>Math['max'](0x1-_0x25b1d4,0.1),0.2,0x1),'linearfallhalf':new Envelope(_0x2a1847=>Math[_0x1a99ef(0x4bb)](0x1-0x4*_0x2a1847,0x0),0.01,0.5),'negabsval':new Envelope(linearspike(0x1),0.1,0x1)};let sounds={'caveambience':[0x64,_0x1a99ef(0x442),envelopes['fire'],[createReverb(audioContext,0x5)],new Envelope(_0x6ff51=>Math['random']()*0.5+0.5,0.1,0x1),[0x2,0x4,0x8],0.25],'deepspookybong':[0x64,'sine',new Envelope(_0x1b3735=>linearspike(0x1)(_0x1b3735)*Math[_0x1a99ef(0x282)](),0.01,0x1),[createReverb(audioContext,0xa)],new Envelope(_0x511b3b=>Math[_0x1a99ef(0x282)]()*0.1+0.95,0.1,0x1),[2.1],0.1],'highshrillbing':[0x3e8,_0x1a99ef(0x225),new Envelope(linearspike(0x1),0.01,0x1),[createReverb(audioContext,0xa)],new Envelope(_0x29127a=>Math['random']()*0.1+0.95,0.1,0x1),[2.1],0.1],'footstep2':[0x64,'sine',envelopes[_0x1a99ef(0x430)],[createReverb(audioContext,0.5)],null,[0x1/0x2]],'footstep':[0x1f4,_0x1a99ef(0x3c6),new Envelope(_0x1ca634=>Math[_0x1a99ef(0x4bb)](linearspike(0.1)(_0x1ca634)**0.3*Math['random']()**0x2,linearspike(0.1)(Math['max'](_0x1ca634-0.15,0x0))**0.3*Math[_0x1a99ef(0x282)]()**0x2),0.015,0.3),[],null,[],0.25],'footstepverb':[0x1f4,'lowpass-noise-white',new Envelope(_0x52ca93=>Math[_0x1a99ef(0x4bb)](linearspike(0.1)(_0x52ca93)**0.3*Math[_0x1a99ef(0x282)]()**0x2,linearspike(0.1)(Math[_0x1a99ef(0x4bb)](_0x52ca93-0.15,0x0))**0.3*Math[_0x1a99ef(0x282)]()**0x2),0.015,0.3),[createReverb(audioContext,0.5)],null,[],0.25],'weirdtone':[0x1b8,_0x1a99ef(0x225),envelopes[_0x1a99ef(0x42a)],[],envelopes[_0x1a99ef(0x298)],[0x2,0x4]],'weirdnoise':[0x1f4,_0x1a99ef(0x442),envelopes[_0x1a99ef(0x42a)],[]],'footsteptap':[0xc8,'lowpass-noise-white',new Envelope(_0x86dfc9=>Math[_0x1a99ef(0x4bb)](linearspike(0.1)(_0x86dfc9)**0x5*Math['random']()/0x2,linearspike(0.1)(Math[_0x1a99ef(0x4bb)](_0x86dfc9-0.15,0x0))**0x5*Math[_0x1a99ef(0x282)]()/0x2),0.005,0.3),[],null,[1.1,1.2,1.3,0x2],0.5],'footsteptapverb':[0xc8,_0x1a99ef(0x3c6),new Envelope(_0xf122d5=>Math[_0x1a99ef(0x4bb)](linearspike(0.1)(_0xf122d5)**0x5,linearspike(0.1)(Math[_0x1a99ef(0x4bb)](_0xf122d5-0.15,0x0))**0x5*Math[_0x1a99ef(0x282)]()/0x2),0.005,0.3),[createReverb(audioContext,0.5)],null,[1.1,1.2,1.3,0x2],0.25],'frogribbit':[0x3e8,'sine',new Envelope(_0x2b19e9=>Math[_0x1a99ef(0x4bb)](linearspike(0.1)(_0x2b19e9)**0x19,linearspike(0.1)(Math['max'](_0x2b19e9-0.15,0x0))**0x19),0.01,0.3),[],null,[1.1,1.2,1.3,1.4,1.5,1.6,1.7,1.8,1.9,0x2],0x1],'softsine':[0x190,_0x1a99ef(0x225),envelopes[_0x1a99ef(0x3ae)],[]],'arrowwhoosh':[0x190,_0x1a99ef(0x3c6),new Envelope(linearspike(0.8),0.01,0.3),[],new Envelope(_0x4cf1ba=>Math['max'](0x1-_0x4cf1ba*0x4,0.5),0.2,0.5),[0x2]],'arrowwhistle':[0xc8,_0x1a99ef(0x225),new Envelope(_0x456648=>linearspike(0.8)(_0x456648)*Math[_0x1a99ef(0x282)](),0.1,0.3),[createReverb(audioContext,0.2),createLowpassFilter(audioContext,0xc8)],new Envelope(_0x105a96=>Math[_0x1a99ef(0x4bb)](0x1-_0x105a96*0x4,0.8),0.2,0.5),[0.9,0.95,1.05,1.1]],'arrowthudnoise':[0x96,'lowpass-noise',new Envelope(_0xe7e714=>_0xe7e714**0.01*Math[_0x1a99ef(0x4bb)](0x1-_0xe7e714*0xa,0x0),0.01,0.2),[createPause(audioContext,0.2)],null,[1.1,1.2,1.3,1.4,1.5,1.6,1.7,1.8,1.9,0x2],0.1],'arrowthudtone':[0x96,_0x1a99ef(0x225),new Envelope(_0x1ec444=>Math['max'](0x1-_0x1ec444*0xa,0x0),0.01,0.2),[createReverb(audioContext,0.2),createPause(audioContext,0.2)],new Envelope(_0x21e2a5=>Math[_0x1a99ef(0x282)]()*0x2,0.005,0.2),[1.1,1.2,1.3,1.4,1.5,1.6,1.7,1.8,1.9,0x2],0.1],'clubwhoosh':[0x190,_0x1a99ef(0x3c6),new Envelope(linearspike(0.8),0.01,0.3),[],new Envelope(_0x912880=>Math['max'](0x1-_0x912880*0x4,0.5),0.2,0.5),[0x2]],'clubwhoom':[0xc8,_0x1a99ef(0x225),new Envelope(_0x39d690=>linearspike(0.2)(_0x39d690)*Math[_0x1a99ef(0x282)](),0.1,0.2),[createReverb(audioContext,0.2),createLowpassFilter(audioContext,0xc8)],new Envelope(_0x30e67a=>Math[_0x1a99ef(0x4bb)](0x1-_0x30e67a*0x4,0.8),0.2,0.5),[0.9,0.95,1.05,1.1]],'clubhitnoise':[0x64,_0x1a99ef(0x442),new Envelope(_0x4bf33a=>_0x4bf33a**0.01*Math[_0x1a99ef(0x4bb)](0x1-_0x4bf33a*0x5,0x0),0.01,0.4),[createDistortion(audioContext,0.5),createPause(audioContext,0.2)],null,[1.1,1.2,1.3,1.4,1.5,1.6,1.7,1.8,1.9,0x2],0.5],'clubhittone':[0x32,_0x1a99ef(0x225),new Envelope(_0x1e6fd7=>Math[_0x1a99ef(0x4bb)](0x1-_0x1e6fd7*0x5,0x0),0.01,0.4),[createReverb(audioContext,0.2),createPause(audioContext,0.2)],new Envelope(_0x557ad4=>Math['random']()*0x2,0.005,0.1),[1.1,1.2,1.3,1.4,1.5,1.6,1.7,1.8,1.9,0x2],0.5],'clubhitcrack':[0x64,_0x1a99ef(0x442),new Envelope(_0x2b0281=>_0x2b0281**0.01*Math[_0x1a99ef(0x4bb)](0x1-_0x2b0281*2.5,0x0)*Math[_0x1a99ef(0x282)]()**0xa,0.005,0.2),[createPause(audioContext,0.2)],new Envelope(_0x27917c=>0x1+_0x27917c*0x1*Math[_0x1a99ef(0x282)](),0.01,0.2),[1.1,1.2,1.3,1.4,1.5,1.6,1.7,1.8,1.9,0x2,0x4,0x8,0x10,0x20,0x40,0x80],0.1],'swordswingbig':[0xc8,_0x1a99ef(0x3c6),new Envelope(linearspike(0.4),0.1,0.4),[],new Envelope(_0x57a5ab=>Math[_0x1a99ef(0x4bb)](0x1-_0x57a5ab*0x6,0.5)),[]],'swordswingsmall':[0x190,_0x1a99ef(0x3c6),new Envelope(linearspike(0.2),0.1,0.2),[],new Envelope(_0x4069d7=>Math[_0x1a99ef(0x4bb)](0x1-_0x4069d7*0xc,0.25)),[]],'swordswingxs':[0x258,_0x1a99ef(0x3c6),new Envelope(linearspike(0.15),0.1,0.15),[],new Envelope(_0x2049c5=>Math[_0x1a99ef(0x4bb)](0x1-_0x2049c5*0x12,0.2)),[]],'swordswingsmallverb':[0x190,'lowpass-noise-white',new Envelope(linearspike(0.2),0.1,0.2),[createReverb(audioContext,0.5)],new Envelope(_0x12e8c2=>Math[_0x1a99ef(0x4bb)](0x1-_0x12e8c2*0xc,0.25)),[]],'deepthudnoise':[0x19,'lowpass-noise',new Envelope(_0x33a5b6=>_0x33a5b6**0.01*Math['max'](0x1-_0x33a5b6*0x5,0x0),0.01,0.4),[],null,[1.1,1.2,1.3,1.4,1.5,1.6,1.7,1.8,1.9,0x2],0x1],'deepthudtone':[0x19,'sine',new Envelope(_0x34e307=>Math[_0x1a99ef(0x4bb)](0x1-_0x34e307*0x5,0x0),0.01,0.4),[createReverb(audioContext,0.4)],new Envelope(_0x14ddda=>Math[_0x1a99ef(0x282)]()*0x2,0.005,0.1),[1.1,1.2,1.3,1.4,1.5,1.6,1.7,1.8,1.9,0x2],0x1],'medthudnoise':[0x32,_0x1a99ef(0x442),new Envelope(_0x4e1774=>_0x4e1774**0.01*Math[_0x1a99ef(0x4bb)](0x1-_0x4e1774*0xa,0x0),0.01,0.2),[],null,[1.1,1.2,1.3,1.4,1.5,1.6,1.7,1.8,1.9,0x2],0.1],'medthudtone':[0x32,_0x1a99ef(0x225),new Envelope(_0x3da8c1=>Math[_0x1a99ef(0x4bb)](0x1-_0x3da8c1*0xa,0x0),0.01,0.2),[createReverb(audioContext,0.2)],new Envelope(_0x3e0097=>Math[_0x1a99ef(0x282)]()*0x2,0.005,0.1),[1.1,1.2,1.3,1.4,1.5,1.6,1.7,1.8,1.9,0x2],0.1],'drumtemplate':[0x32,_0x1a99ef(0x225),new Envelope(_0x128168=>Math[_0x1a99ef(0x4bb)](0x1-_0x128168*0xa,0x0),0.01,0.1),[createReverb(audioContext,0x1)],new Envelope(_0x1fa362=>Math[_0x1a99ef(0x282)]()*0x2,0.005,0.1),[1.1,1.2,1.3,1.4,1.5,1.6,1.7,1.8,1.9,0x2],0x1],'stringplucktemplate':[0x258,_0x1a99ef(0x225),new Envelope(_0x5ea32b=>Math[_0x1a99ef(0x4bb)](0x1-_0x5ea32b*0x3,0x0),0.01,0.5),[createReverb(audioContext,0.2)],new Envelope(_0x585937=>Math[_0x1a99ef(0x4bb)](0x1-_0x585937*0x4,0.25),0.005,0.5),[1.1,1.2,1.3,1.4,1.5,1.6,1.7,1.8,1.9,0x2],0.5],'stringsine':[0x1b8,'sine',new Envelope(linearspike(0x1),0.01,0x1),[createReverb(audioContext,0.2)],new Envelope(_0x24b4b1=>0.95+Math[_0x1a99ef(0x282)]()*0.025,0.1,0x1),[1.1,1.2,1.3,1.4,1.5,1.6,1.7,1.8,1.9,0x2]],'highthudnoise':[0x96,_0x1a99ef(0x442),new Envelope(_0x362acf=>0x3*_0x362acf**0.01*Math['max'](0x1-_0x362acf*0xa,0x0),0.01,0.2),[],null,[1.1,1.2,1.3,1.4,1.5,1.6,1.7,1.8,1.9,0x2],0.1],'highthudnoiseverb':[0x96,_0x1a99ef(0x442),new Envelope(_0x1f0af4=>_0x1f0af4**0.01*Math[_0x1a99ef(0x4bb)](0x1-_0x1f0af4*0xa,0x0),0.01,0.2),[createReverb(audioContext,0.2)],null,[1.1,1.2,1.3,1.4,1.5,1.6,1.7,1.8,1.9,0x2],0.1],'highthudtone':[0x96,_0x1a99ef(0x225),new Envelope(_0x217e63=>Math[_0x1a99ef(0x4bb)](0x1-_0x217e63*0xa,0x0),0.01,0.2),[createReverb(audioContext,0.2)],new Envelope(_0x396e2d=>Math[_0x1a99ef(0x282)]()*0x2,0.005,0.2),[1.1,1.2,1.3,1.4,1.5,1.6,1.7,1.8,1.9,0x2],0.1],'bassdrum':[0x64,_0x1a99ef(0x225),new Envelope(_0x58b750=>linearspike(0.08)(_0x58b750)*Math[_0x1a99ef(0x282)](),0.01,0.1),[createReverb(audioContext,0x2)],null,[1.1,1.2,0x1/0x2],0x2],'snaredrum':[0xc8,'lowpass-noise-white',new Envelope(_0x1043ad=>linearspike(0.04)(_0x1043ad)*Math['random'](),0.01,0.1),[],null,[1.1,1.2,0x1/0x2],0x2],'whee':[0x7d0,_0x1a99ef(0x442),new Envelope(linearspike(0.5),0.01,0.5),[],new Envelope(linearspike(0.5),0.01,0.5),[]],'goblinchat':[0x190,_0x1a99ef(0x225),new Envelope(_0x112fc3=>linearspike(0x1)(_0x112fc3)**0.01*Math[_0x1a99ef(0x282)]()**0x2,0.05,0x1),[],new Envelope(_0x199a3c=>Math['random']()**0x2*0x2,0.0005,0x1),[1.1,1.2,0.9,0.8,0.4,0.3,2.2,3.3],0.01],'goblinchatverb':[0x190,'sine',new Envelope(_0x1b60fc=>linearspike(0x1)(_0x1b60fc)**0.01*Math['random']()**0x2,0.05,0x1),[createReverb(audioContext,0.1)],new Envelope(_0x40a704=>Math[_0x1a99ef(0x282)]()**0x2*0x2,0.0005,0x1),[1.1,1.2,0.9,0.8,0.4,0.3,2.2,3.3],0.01],'goblinchat2':[0x190,_0x1a99ef(0x225),new Envelope(_0x2edf56=>linearspike(0x1)(_0x2edf56)**0.01*Math[_0x1a99ef(0x282)]()**0x2,0.05,0x1),[],new Envelope(_0x4830f8=>Math[_0x1a99ef(0x282)]()**0x2*0x2,0.002,0x1),[1.1,1.2,0.9,0.8,0.4,0.3,2.2,3.3],0.02],'goblinchat2old':[0x190,_0x1a99ef(0x225),new Envelope(_0x2dd0f6=>linearspike(1.5)(_0x2dd0f6)**0.01*Math[_0x1a99ef(0x282)]()**0x2,0.05,1.5),[createReverb(audioContext,0.1)],new Envelope(_0xb11776=>Math['random']()**0x2*0x2,0.002,1.6),[1.1,1.2,0.9,0.8,0.4,0.3,2.2,3.3]],'goblinchat3old':[0x258,_0x1a99ef(0x225),new Envelope(_0x4378e7=>linearspike(1.5)(_0x4378e7)**0.01*Math['random']()**0x2,0.05,1.5),[createReverb(audioContext,0.1)],new Envelope(_0x117536=>Math[_0x1a99ef(0x282)]()**0x2*0x2,0.003,1.6),[1.1,1.2,0.9,0.8,0.4,0.3,2.2,3.3]],'something':[0x2,_0x1a99ef(0x29c),new Envelope(_0x290c3c=>linearspike(1.5)(_0x290c3c)**0.01*Math['random'](),0.00005,1.5),[createReverb(audioContext,0.1)],new Envelope(_0x22814c=>Math[_0x1a99ef(0x282)]()*0x5,0.01,1.5)],'goblinchatnoise':[0x320,_0x1a99ef(0x3c6),new Envelope(_0x334aa9=>linearspike(1.5)(_0x334aa9)**0.01*Math[_0x1a99ef(0x282)]()**0x4,0.05,1.5),[],new Envelope(_0x1f3c4a=>Math[_0x1a99ef(0x282)]()**0x2*0x2,0.0025,1.6),[1.1,1.2,0.9,0.8,0.4,0.3,2.2,3.3]],'goblinscream':[0x190,_0x1a99ef(0x225),new Envelope(_0x27b5da=>linearspike(1.5)(_0x27b5da)**0.01,0.05,1.5),[],new Envelope(_0x1ab867=>Math[_0x1a99ef(0x282)]()**0x2*0x2,0.0025,1.5),[1.5,1.6,0.5,0.6,0.4,0.3],0.05],'goblinyelpold':[0x320,_0x1a99ef(0x225),new Envelope(_0xa08f06=>linearspike(0.25)(_0xa08f06)**0.01,0.005,0.25),[],new Envelope(_0x1ca9e0=>Math[_0x1a99ef(0x282)]()**0x2*0x2,0.0005,0.5),[1.5,1.6,0.5,0.6,0.4,0.3],0.01],'goblindeath':[0x320,_0x1a99ef(0x225),new Envelope(_0x94d947=>_0x94d947**0.2*(0x1-_0x94d947)*Math[_0x1a99ef(0x282)]()**0.5,0.01,0x1),[createDistortion(audioContext,0x1)],new Envelope(_0x378838=>_0x378838**0.2*Math[_0x1a99ef(0x282)]()**0.5*0x2*(0x1-_0x378838/0x4)*Math['random']()*0x2,0.005,0x5),[1.5,1.6,0.5,0.6,0.4,0.3],0.05],'ogredeath':[0x190,_0x1a99ef(0x225),new Envelope(_0x2698fe=>_0x2698fe**0.2*(0x1-_0x2698fe)*Math[_0x1a99ef(0x282)]()**0.5,0.01,0x1),[createDistortion(audioContext,0x1)],new Envelope(_0x915613=>_0x915613**0.2*Math[_0x1a99ef(0x282)]()**0.5*0x2*(0x1-_0x915613/0x4)*Math['random']()*0x2,0.005,0x5),[1.4,1.2,0.5,0.6,0.4,0.3],0.05],'goblinshriek':[0x4b0,'sine',new Envelope(_0x51e077=>_0x51e077**0.2*(0x1-_0x51e077/0x2)*Math[_0x1a99ef(0x282)]()**0.5,0.01,0x2),[createDistortion(audioContext,0x1)],new Envelope(_0x4037e6=>_0x4037e6**0.2*Math[_0x1a99ef(0x282)]()**0.5*0x2*(0x1-_0x4037e6/0x6)*Math[_0x1a99ef(0x282)]()*0x2,0.005,0x5),[1.5,1.6,0.5,0.6,0.4,0.3],0.05],'deathshriek':[0x4b0,_0x1a99ef(0x225),new Envelope(_0x2b5a2e=>_0x2b5a2e**0.2*(0x1-_0x2b5a2e/0x5)*Math[_0x1a99ef(0x282)]()**0.5,0.01,0x5),[createDistortion(audioContext,0x1)],new Envelope(_0x5ad429=>_0x5ad429**0.2*Math[_0x1a99ef(0x282)]()**0.5*0x2*(0x1-_0x5ad429/0x6)*Math[_0x1a99ef(0x282)]()*0x2,0.005,0x5),[1.5,1.6,0.5,0.6,0.4,0.3],0.05],'goblinyelp':[0x320,_0x1a99ef(0x225),new Envelope(_0x28268b=>linearspike(0.25)(_0x28268b)**0.01,0.005,0.25),[],new Envelope(_0x4297b0=>Math[_0x1a99ef(0x282)]()**0x2*0x2,0.005,0.5),[1.5,1.6,0.5,0.6,0.4,0.3],0.01],'rustle':[0x1f4,'lowpass-noise-white',envelopes[_0x1a99ef(0x2d3)],[]],'rustleverb':[0x1f4,_0x1a99ef(0x3c6),envelopes[_0x1a99ef(0x2d3)],[createReverb(audioContext,0.5)]],'eeesound':[0x7d,_0x1a99ef(0x3d0),new Envelope(_0x392a2=>linearspike(0.25)(_0x392a2)**0.25*(0.5+Math[_0x1a99ef(0x282)]()/0x2),0.005,0x3),[createReverb(audioContext,0.25),createBandpassFilter(audioContext,0x12c)],null,[0x1/0x2,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0x9,0xa,0xc]],'eeesound2':[0x7d,_0x1a99ef(0x3d0),new Envelope(_0x51b386=>linearspike(0.25)(_0x51b386)**0.25*(0.5+Math['random']()/0x2),0.005,0x3),[createReverb(audioContext,0.25),createBandpassFilter(audioContext,0x898)],null,[0x1/0x2,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0x9,0xa,0xc]],'eeesound3':[0x7d,_0x1a99ef(0x3d0),new Envelope(_0x5a36b6=>linearspike(0.25)(_0x5a36b6)**0.25*(0.5+Math[_0x1a99ef(0x282)]()/0x2),0.005,0x3),[createReverb(audioContext,0.25),createBandpassFilter(audioContext,0xbb8)],null,[0x1/0x2,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0x9,0xa,0xc]],'aaasound':[0x7d,_0x1a99ef(0x3d0),new Envelope(_0xb3c98b=>linearspike(0.25)(_0xb3c98b)**0.25*(0.5+Math[_0x1a99ef(0x282)]()/0x2),0.005,0x3),[createReverb(audioContext,0.25),createBandpassFilter(audioContext,0x3e8)],null,[0x1/0x2,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0x9,0xa,0xc]],'aaasound2':[0x7d,_0x1a99ef(0x3d0),new Envelope(_0x5a23dc=>linearspike(0.25)(_0x5a23dc)**0.25*(0.5+Math[_0x1a99ef(0x282)]()/0x2),0.005,0x3),[createReverb(audioContext,0.25),createBandpassFilter(audioContext,0x514)],null,[0x1/0x2,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0x9,0xa,0xc]],'aaasound3':[0x7d,_0x1a99ef(0x3d0),new Envelope(_0x3d8d26=>linearspike(0.25)(_0x3d8d26)**0.25*(0.5+Math[_0x1a99ef(0x282)]()/0x2),0.005,0x3),[createReverb(audioContext,0.25),createBandpassFilter(audioContext,0x960)],null,[0x1/0x2,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0x9,0xa,0xc]],'sine':[0x4b,_0x1a99ef(0x225),new Envelope(_0x4d2130=>linearspike(0.08)(_0x4d2130)*Math['random'](),0.01,0.1),[createDistortion(audioContext,0x19)]],'bowstring':[0x64,_0x1a99ef(0x3c6),new Envelope(_0x5579dc=>linearspike(0x1)(_0x5579dc)*Math[_0x1a99ef(0x282)]()**0xa,0.0005,0x1),[],new Envelope(_0x1ab482=>Math[_0x1a99ef(0x373)](Math[_0x1a99ef(0x4bb)]((_0x1ab482*0xa)**0x2,0x0),0x19),0.1,0x1),[],0.1],'treecreakinginthewind':[0x64,_0x1a99ef(0x3c6),new Envelope(_0x19f41d=>linearspike(0x5)(_0x19f41d)**0x4*Math[_0x1a99ef(0x282)]()**0.5,0.00015,0x5)],'tap':[0x64,_0x1a99ef(0x3c6),new Envelope(_0x5233b0=>linearspike(0.5)(_0x5233b0)**0x4*Math['random']()**0.5,0.0002,0.5)],'sworddraw':[0x19,_0x1a99ef(0x3c6),new Envelope(_0x11f999=>linearspike(0.5)(_0x11f999)*Math[_0x1a99ef(0x282)]()**0.2,0.01,0x1),[],new Envelope(_0x26363a=>Math[_0x1a99ef(0x373)](0xc8*(_0x26363a+0x1),0x4b),0.01,0x1),[0x1/0x2,0x1/0x4],0.05],'swordring':[0x320,'sine',new Envelope(_0x2af9eb=>linearspike(0x1)(_0x2af9eb)*Math[_0x1a99ef(0x282)](),0.03,0x1),[createReverb(audioContext,0.5)],new Envelope(_0x19f2ee=>Math[_0x1a99ef(0x373)](_0x19f2ee*0xa,0x1),0.01,0x1),[],0.01],'swordring2':[0x320/0x3,_0x1a99ef(0x225),new Envelope(_0xaf4254=>linearspike(0x1)(_0xaf4254)*Math['random'](),0.03,0x1),[createReverb(audioContext,0.75)],new Envelope(_0x1aa570=>Math[_0x1a99ef(0x373)](_0x1aa570*0xa,0x1),0.01,0x1),[],0.1],'swordring3':[0xc8,_0x1a99ef(0x225),new Envelope(_0x304934=>linearspike(0x1)(_0x304934)*Math[_0x1a99ef(0x282)](),0.03,0x1),[createReverb(audioContext,0.5)],new Envelope(_0x856ea0=>Math[_0x1a99ef(0x373)](_0x856ea0*0xa,0x1),0.01,0x1),[],0.025],'shortsworddraw':[0x19,_0x1a99ef(0x3c6),new Envelope(_0x57551e=>linearspike(0.35)(_0x57551e)*Math['random']()**0.2,0.01,0.5),[],new Envelope(_0x1d2b7a=>Math[_0x1a99ef(0x373)](0x12c*(_0x1d2b7a+0x1),0x64),0.01,0.5),[],0.05],'daggerdraw':[0x19,_0x1a99ef(0x3c6),new Envelope(_0x2616ab=>linearspike(0.25)(_0x2616ab)*Math[_0x1a99ef(0x282)]()**0.4,0.01,0.5),[],new Envelope(_0x446fd3=>Math[_0x1a99ef(0x373)](0x190*(_0x446fd3+0x1),0x64),0.01,0.5),[],0.05],'daggerdraw2':[0x7d0,_0x1a99ef(0x3c6),new Envelope(_0x43c9a2=>0xa*linearspike(0.25)(_0x43c9a2)*Math[_0x1a99ef(0x282)]()**0.4,0.01,0.5),[],new Envelope(_0x13d999=>Math[_0x1a99ef(0x373)](0x1*_0x13d999,0x5),0.01,0.5),[],0.05],'puncture':[0x9c4,_0x1a99ef(0x3c6),new Envelope(_0x5e00f2=>linearspike(0.25)(_0x5e00f2)*Math['random']()**0.3,0.01,0.5),[],new Envelope(_0x132721=>0x1-_0x132721*0x2,0.01,0.5),[],0.1],'spurt1':[0x32,_0x1a99ef(0x3c6),new Envelope(_0x4d01e9=>linearspike(0.2)(_0x4d01e9)**0x2*Math[_0x1a99ef(0x282)]()**0x2,0.001,0x1),[createPause(audioContext,0.1)],new Envelope(_0x592861=>Math['max']((_0x592861+0x1)*0x2*Math[_0x1a99ef(0x282)]()**0x2*0x4,0x1),0.01,0.5),[1.1,1.2,1.3,0x2,0x4,0x8],0.1],'spurt2':[0x32,_0x1a99ef(0x3c6),new Envelope(_0x28f4ac=>linearspike(0.2)(_0x28f4ac)**0x2*Math['random']()**0x2,0.001,0x1),[createPause(audioContext,0.1)],new Envelope(_0x5870ce=>Math[_0x1a99ef(0x4bb)]((_0x5870ce+0x1)*0x2*Math['random']()**0x2*0x4,0x1),0.01,0.5),[0x6,0xc],0.1],'spurt1verb':[0x32,_0x1a99ef(0x3c6),new Envelope(_0x5f0bb7=>linearspike(0.2)(_0x5f0bb7)**0x4*Math[_0x1a99ef(0x282)]()**0x2,0.001,0x1),[createReverb(audioContext,0.2),createPause(audioContext,0.1)],new Envelope(_0x7ffc05=>Math[_0x1a99ef(0x4bb)]((_0x7ffc05+0x1)*0x2*Math[_0x1a99ef(0x282)]()**0x2*0x4,0x1),0.01,0.5),[1.1,1.2,1.3,0x2,0x4,0x8],0.5],'spurt2verb':[0x32,_0x1a99ef(0x3c6),new Envelope(_0x2a91ff=>linearspike(0.2)(_0x2a91ff)**0x4*Math[_0x1a99ef(0x282)]()**0x2,0.001,0x1),[createReverb(audioContext,0.2),createPause(audioContext,0.1)],new Envelope(_0x2feaaf=>Math[_0x1a99ef(0x4bb)]((_0x2feaaf+0x1)*0x2*Math[_0x1a99ef(0x282)]()**0x2*0x4,0x1),0.01,0.5),[0x6,0xc],0.5],'woodbreaking':[0x64,_0x1a99ef(0x3c6),new Envelope(_0x4832a6=>(0x1-_0x4832a6/0.7)*Math[_0x1a99ef(0x282)]()**(_0x4832a6*0x2),0.00015,0.7),[],new Envelope(_0x5a55ce=>(_0x5a55ce+0x1)*Math[_0x1a99ef(0x282)](),0.01,0.7),[1.1,1.5,0x2,0x4],0.2],'woodbreaking2':[0x64,'lowpass-noise-white',new Envelope(_0x4b83e9=>(0x1-_0x4b83e9/0x2)*Math[_0x1a99ef(0x282)]()**(_0x4b83e9*0xa+0x1),0.01,0x2),[createReverb(audioContext,0.1)],new Envelope(_0x358f30=>Math[_0x1a99ef(0x4bb)](Math['random']()**0x4*0x10,0.5),0.01,1.5),[1.1,1.5,0x2,0x4],0.2],'woodbreakingdeep':[0x32,'lowpass-noise-white',new Envelope(_0x5147b3=>(0x1-_0x5147b3/0.7)*Math[_0x1a99ef(0x282)]()**(_0x5147b3*0x2),0.00015,0.7),[],new Envelope(_0x1b7db5=>(_0x1b7db5+0x1)*Math[_0x1a99ef(0x282)](),0.01,0.7),[0.5,1.1,1.5,0x2],0.2],'woodbreaking2deep':[0x32,_0x1a99ef(0x3c6),new Envelope(_0x4beaf7=>(0x1-_0x4beaf7/0x2)*Math[_0x1a99ef(0x282)]()**(_0x4beaf7*0xa+0x1),0.01,0x2),[createReverb(audioContext,0.1)],new Envelope(_0xaa1e86=>Math[_0x1a99ef(0x4bb)](Math[_0x1a99ef(0x282)]()**0x4*0x10,0.5),0.01,1.5),[0.5,1.1,1.5,0x2],0.2]};function linearspike(_0x51aab6){return function(_0x5e31ed){if(_0x5e31ed==0x0)return 0x0;if(_0x5e31ed>_0x51aab6)return 0x0;return _0x5e31ed<=_0x51aab6/0x2?_0x5e31ed/(_0x51aab6/0x2):0x1-(_0x5e31ed-_0x51aab6/0x2)/(_0x51aab6/0x2);};}const soundeffects={'footstep':[sounds[_0x1a99ef(0x39f)]],'footsteptap':[sounds[_0x1a99ef(0x2cf)]],'arrowflight':[sounds[_0x1a99ef(0x34d)],sounds[_0x1a99ef(0x448)],sounds[_0x1a99ef(0x3a7)],sounds[_0x1a99ef(0x21d)]],'swordswing':[sounds[_0x1a99ef(0x3a7)],sounds['swordswingsmallverb']],'swordhit':[sounds[_0x1a99ef(0x3a7)],sounds[_0x1a99ef(0x21d)],sounds[_0x1a99ef(0x33c)],sounds[_0x1a99ef(0x475)]],'clubswing':[sounds[_0x1a99ef(0x414)],sounds[_0x1a99ef(0x467)]],'clubhit':[sounds[_0x1a99ef(0x450)],sounds[_0x1a99ef(0x438)],sounds[_0x1a99ef(0x311)],sounds[_0x1a99ef(0x414)],sounds[_0x1a99ef(0x467)]],'woodbreaking':[sounds[_0x1a99ef(0x4a8)],sounds[_0x1a99ef(0x205)]],'woodbreakingdeep':[sounds[_0x1a99ef(0x326)],sounds[_0x1a99ef(0x494)]],'caveambience':[sounds[_0x1a99ef(0x421)]],'deepspookybong':[sounds['deepspookybong']],'highshrillbing':[sounds['highshrillbing']],'bassdrum':[sounds[_0x1a99ef(0x2d4)]],'highthud':[sounds[_0x1a99ef(0x33c)],sounds[_0x1a99ef(0x475)]],'medthud':[sounds[_0x1a99ef(0x1fa)],sounds[_0x1a99ef(0x1e8)]],'deepthud':[sounds['deepthudtone'],sounds[_0x1a99ef(0x29d)]],'goblinchat':[sounds['goblinchat'],sounds[_0x1a99ef(0x343)],sounds[_0x1a99ef(0x26c)]],'goblinyelp':[sounds['goblinyelp']],'goblindeath':[sounds[_0x1a99ef(0x4ca)]],'ogredeath':[sounds['ogredeath']],'goblinscream':[sounds[_0x1a99ef(0x2bd)]],'goblinshriek':[sounds[_0x1a99ef(0x212)]],'deathshriek':[sounds[_0x1a99ef(0x3b6)]],'aaasound':[sounds[_0x1a99ef(0x4a5)],sounds[_0x1a99ef(0x294)],sounds[_0x1a99ef(0x29a)]],'eeesound':[sounds[_0x1a99ef(0x2ff)],sounds[_0x1a99ef(0x4a3)],sounds[_0x1a99ef(0x332)]],'sworddraw':[sounds[_0x1a99ef(0x403)],sounds[_0x1a99ef(0x30e)],sounds[_0x1a99ef(0x274)],sounds[_0x1a99ef(0x2a0)]],'bowdraw':[sounds[_0x1a99ef(0x244)]],'shortsworddraw':[sounds[_0x1a99ef(0x2eb)]],'daggerdraw':[sounds[_0x1a99ef(0x30f)]],'daggerdraw2':[sounds['daggerdraw2']],'tap':[sounds[_0x1a99ef(0x257)]],'puncture':[sounds[_0x1a99ef(0x477)],sounds[_0x1a99ef(0x345)],sounds['spurt2'],sounds['spurt1verb'],sounds[_0x1a99ef(0x408)]]};function playsoundeffect(_0x213bf2){const _0x21d1c5=_0x1a99ef;_0x213bf2[_0x21d1c5(0x348)](function([_0x5e651a,_0x230a50,_0x5dd14d,_0x18c568,_0x1fc41b,_0x331a2a,_0x448e50]){const _0x44933d=_0x21d1c5,_0xebbbda=soundManager[_0x44933d(0x3e3)]();_0xebbbda[_0x44933d(0x3b3)]=null,_0xebbbda['overtones']=[];if(_0x1fc41b)_0xebbbda[_0x44933d(0x3b3)]=_0x1fc41b;if(_0x331a2a)_0xebbbda['overtones']=_0x331a2a[_0x44933d(0x428)]();_0xebbbda[_0x44933d(0x3ad)]=0x1;if(_0x448e50!==undefined)_0xebbbda[_0x44933d(0x3ad)]=_0x448e50;_0xebbbda[_0x44933d(0x4c3)]=null,_0xebbbda['freq']=_0x5e651a,_0xebbbda['type']=null,_0xebbbda['type']=_0x230a50,_0xebbbda['env']=null,_0xebbbda['env']=_0x5dd14d,_0xebbbda['fx']=[];if(_0x18c568)_0xebbbda['fx']=_0x18c568['slice']();soundManager['playSound']();});}function playambientsound(_0x5dcd47){_0x5dcd47['forEach'](function([_0x1e1593,_0x3e127d,_0x76bab1,_0x270b15,_0x3e899c,_0x30e350,_0x3a18c0]){const _0x5dfd63=_0x4a83,_0x427dfd=soundManager[_0x5dfd63(0x3ee)]();_0x427dfd[_0x5dfd63(0x3b3)]=null,_0x427dfd[_0x5dfd63(0x49f)]=[];if(_0x3e899c)_0x427dfd[_0x5dfd63(0x3b3)]=_0x3e899c;if(_0x30e350)_0x427dfd[_0x5dfd63(0x49f)]=_0x30e350[_0x5dfd63(0x428)]();_0x427dfd[_0x5dfd63(0x3ad)]=0.2;if(_0x3a18c0)_0x427dfd[_0x5dfd63(0x3ad)]=_0x3a18c0/0x5;_0x427dfd['freq']=null,_0x427dfd['freq']=_0x1e1593,_0x427dfd['type']=null,_0x427dfd[_0x5dfd63(0x4c8)]=_0x3e127d,_0x427dfd[_0x5dfd63(0x269)]=null,_0x427dfd['env']=_0x76bab1,_0x427dfd['fx']=[];if(_0x270b15)_0x427dfd['fx']=_0x270b15['slice']();soundManager['playAmbientSound']();});}function adsrconvert([_0x3154ac,_0x2e022f,_0x501fed,_0x43a43d],_0x22f667){const _0x5d4d11=_0x22f667-(_0x3154ac+_0x2e022f+_0x43a43d);return function(_0x1dfeb9){if(_0x1dfeb9<0x0)return 0x0;if(_0x1dfeb9>=0x0&&_0x1dfeb9<=_0x3154ac)return _0x1dfeb9/_0x3154ac;if(_0x1dfeb9>_0x3154ac&&_0x1dfeb9<=_0x3154ac+_0x2e022f)return 0x1-(_0x1dfeb9-_0x3154ac)/_0x2e022f*(0x1-_0x501fed);if(_0x1dfeb9>_0x3154ac+_0x2e022f&&_0x1dfeb9<=_0x3154ac+_0x2e022f+_0x5d4d11)return _0x501fed;if(_0x1dfeb9>_0x3154ac+_0x2e022f+_0x5d4d11&&_0x1dfeb9<=_0x3154ac+_0x2e022f+_0x5d4d11+_0x43a43d)return _0x501fed*(0x1-(_0x1dfeb9-(_0x3154ac+_0x2e022f+_0x5d4d11))/_0x43a43d);return 0x0;};}function calculateGain(_0x5040bf,_0x296988,_0x14f306){const _0x3282ca=_0x1a99ef,_0x5625a3=0x400,_0x22ec7f=_0x296988/0x2,_0x39dab6=_0x22ec7f/_0x5625a3,_0x31fdc9=new Float32Array(_0x5625a3),_0x562f4f=new Float32Array(_0x5625a3),_0xb9cfd5=new Float32Array(_0x5625a3);for(let _0x36c8e7=0x0;_0x36c8e7<_0x5625a3;_0x36c8e7++){_0x31fdc9[_0x36c8e7]=_0x36c8e7*_0x39dab6;}_0x5040bf[_0x3282ca(0x29e)](_0x31fdc9,_0x562f4f,_0xb9cfd5);let _0x52f2e0=0x0,_0xb7e3d9=0x0;for(let _0x33a77f=0x0;_0x33a77f<_0x5625a3;_0x33a77f++){_0x52f2e0+=0x1,_0xb7e3d9+=_0x562f4f[_0x33a77f];}const _0x1a97c4=_0x52f2e0*_0x39dab6*_0x14f306,_0x38580f=_0xb7e3d9*_0x39dab6*_0x14f306,_0x10788c=Math[_0x3282ca(0x1f6)](_0x1a97c4/_0x38580f);return _0x10788c;}function createReverb(_0x2eb8f0,_0x3f9656=0x2){return function(){const _0x4df802=_0x4a83,_0xd8d980=_0x2eb8f0['createConvolver'](),_0x5073cf=_0x2eb8f0[_0x4df802(0x1f9)],_0x45fa0e=_0x5073cf*_0x3f9656,_0x1e2166=_0x2eb8f0['createBuffer'](0x2,_0x45fa0e,_0x5073cf),_0x2ca358=_0x1e2166[_0x4df802(0x2c4)](0x0),_0xcd338d=_0x1e2166[_0x4df802(0x2c4)](0x1);for(let _0x36e93e=0x0;_0x36e93e<_0x45fa0e;_0x36e93e++){_0x2ca358[_0x36e93e]=(Math['random']()*0x2-0x1)*Math[_0x4df802(0x2f9)](0x1-_0x36e93e/_0x45fa0e,0x2),_0xcd338d[_0x36e93e]=(Math[_0x4df802(0x282)]()*0x2-0x1)*Math[_0x4df802(0x2f9)](0x1-_0x36e93e/_0x45fa0e,0x2);}return _0xd8d980[_0x4df802(0x33b)]=_0x1e2166,_0xd8d980['normalize']=!![],_0xd8d980;};}function createDistortion(_0x24ba37,_0x458c9b){return function(){const _0x3b50ee=_0x4a83,_0x52800b=_0x24ba37[_0x3b50ee(0x495)]();return _0x52800b['curve']=makeSoftClippingCurve(_0x458c9b),_0x52800b;};}function makeDistortionCurve(_0x3ae91b){const _0x45394e=_0x1a99ef,_0x457204=typeof _0x3ae91b===_0x45394e(0x21a)?_0x3ae91b:0x32,_0x3841b0=0xac44,_0x375af9=new Float32Array(_0x3841b0),_0x122358=Math['PI']/0xb4;for(let _0x40ce9e=0x0;_0x40ce9e<_0x3841b0;++_0x40ce9e){const _0x3547d0=_0x40ce9e*0x2/_0x3841b0-0x1;_0x375af9[_0x40ce9e]=(0x3+_0x457204)*_0x3547d0*0x14*_0x122358/(Math['PI']+_0x457204*Math[_0x45394e(0x3cf)](_0x3547d0));}return _0x375af9;}function makeSoftClippingCurve(_0x28e579){const _0xc91ec5=_0x1a99ef,_0xd9b79c=typeof _0x28e579===_0xc91ec5(0x21a)?_0x28e579:0x32,_0x14f1fb=0xac44,_0x1384b2=new Float32Array(_0x14f1fb),_0x2c82e8=Math['PI']/0xb4;for(let _0x223920=0x0;_0x223920<_0x14f1fb;++_0x223920){const _0x566427=_0x223920*0x2/_0x14f1fb-0x1;_0x1384b2[_0x223920]=_0x566427/(0x1+_0xd9b79c*Math[_0xc91ec5(0x3cf)](_0x566427));}return _0x1384b2;}function makeExponentialDistortionCurve(_0x19a07b){const _0x2ad2c6=_0x1a99ef,_0x23a49c=typeof _0x19a07b===_0x2ad2c6(0x21a)?_0x19a07b:0x32,_0x3ff427=0xac44,_0x50498e=new Float32Array(_0x3ff427);for(let _0x475f90=0x0;_0x475f90<_0x3ff427;++_0x475f90){const _0x22a3c3=_0x475f90*0x2/_0x3ff427-0x1;_0x50498e[_0x475f90]=(0x1-Math[_0x2ad2c6(0x42f)](-_0x23a49c*Math['abs'](_0x22a3c3)))*(_0x22a3c3<0x0?-0x1:0x1);}return _0x50498e;}function createDelay(_0x2cdf0a,_0x1c97d9=0x1,_0x4f7e16=0.5){return function(){const _0x5201aa=_0x4a83,_0x17ad8f=_0x2cdf0a[_0x5201aa(0x2a2)](),_0x201094=_0x2cdf0a[_0x5201aa(0x31f)]();return _0x201094[_0x5201aa(0x38f)]['value']=_0x4f7e16,_0x17ad8f[_0x5201aa(0x484)](_0x201094),_0x201094[_0x5201aa(0x484)](_0x17ad8f),_0x17ad8f[_0x5201aa(0x2c5)][_0x5201aa(0x45b)]=_0x1c97d9,_0x201094;};}function createPause(_0x2a0fa6,_0x8dd800=0x1,_0x2e3310=0x0){return function(){const _0x151368=_0x4a83,_0x304546=_0x2a0fa6[_0x151368(0x2a2)](),_0xa95c87=_0x2a0fa6['createGain']();return _0xa95c87[_0x151368(0x38f)][_0x151368(0x45b)]=_0x2e3310,_0x304546[_0x151368(0x484)](_0xa95c87),_0xa95c87[_0x151368(0x484)](_0x304546),_0x304546['delayTime'][_0x151368(0x45b)]=_0x8dd800,_0x304546;};}function createDelayChain(_0x8d8fdf,_0x2afc65=0x1,_0x1f91cb=0.5,_0x24e669){return function(){const _0x59ace7=_0x4a83,_0x1c03f3=_0x8d8fdf[_0x59ace7(0x2a2)](),_0x55e93a=_0x8d8fdf[_0x59ace7(0x31f)]();_0x55e93a['gain'][_0x59ace7(0x45b)]=_0x1f91cb,_0x1c03f3[_0x59ace7(0x484)](_0x55e93a);let _0x4f0bd8=_0x55e93a;return _0x24e669[_0x59ace7(0x348)](function(_0x398358){const _0x4eab51=_0x59ace7;_0x4f0bd8[_0x4eab51(0x484)](_0x398358),_0x4f0bd8=_0x398358;}),_0x4f0bd8['connect'](_0x1c03f3),_0x1c03f3[_0x59ace7(0x2c5)][_0x59ace7(0x45b)]=_0x2afc65,_0x55e93a;};}function createLowpassFilter(_0x3e7ca0,_0x1913a8){return function(){const _0x43fcad=_0x4a83,_0x44f3c7=_0x3e7ca0[_0x43fcad(0x3db)]();return _0x44f3c7[_0x43fcad(0x28c)][_0x43fcad(0x2a6)](_0x1913a8,_0x3e7ca0[_0x43fcad(0x43e)]),_0x44f3c7[_0x43fcad(0x4c8)]=_0x43fcad(0x287),_0x44f3c7;};}function createBandpassFilter(_0x1634cb,_0x372ffe){return function(){const _0xbc923b=_0x4a83,_0x332a03=_0x1634cb['createBiquadFilter']();return _0x332a03[_0xbc923b(0x4c8)]=_0xbc923b(0x1ef),_0x332a03[_0xbc923b(0x28c)][_0xbc923b(0x45b)]=_0x372ffe,_0x332a03['Q'][_0xbc923b(0x45b)]=0x1,_0x332a03;};}class ambientSound{constructor(_0xd85744,_0x41f738,_0x7d9902){const _0x1440ae=_0x1a99ef;this['sound']=_0xd85744,this[_0x1440ae(0x238)]=_0x41f738,this['maxcadence']=_0x7d9902,this[_0x1440ae(0x4a7)]=0x0,this['thiscadence']=_0x41f738+Math[_0x1440ae(0x282)]()*(_0x7d9902-_0x41f738),this[_0x1440ae(0x466)]=!![];}}let ambientsounds=[new ambientSound(soundeffects[_0x1a99ef(0x421)],0x1388,0x1b58),new ambientSound(soundeffects['deepspookybong'],0x1388,0x3a98),new ambientSound(soundeffects[_0x1a99ef(0x2d4)],0x5dc,0x5dc)];ambientsounds[0x2][_0x1a99ef(0x466)]=![];function updateambientsound(){ambientsounds['forEach'](function(_0x4a9b7d){const _0x316cc9=_0x4a83;if(performance[_0x316cc9(0x2c3)]()-_0x4a9b7d[_0x316cc9(0x4a7)]>_0x4a9b7d[_0x316cc9(0x3fa)]){if(_0x4a9b7d[_0x316cc9(0x466)]==!![])_0x4a9b7d[_0x316cc9(0x216)][0x0][0x0]=Math[_0x316cc9(0x282)]()*0x3e8;playambientsound(_0x4a9b7d[_0x316cc9(0x216)]),_0x4a9b7d[_0x316cc9(0x4a7)]=performance[_0x316cc9(0x2c3)](),_0x4a9b7d[_0x316cc9(0x3fa)]=_0x4a9b7d[_0x316cc9(0x238)]+Math[_0x316cc9(0x282)]()*(_0x4a9b7d['maxcadence']-_0x4a9b7d[_0x316cc9(0x238)]);}});}class character{constructor(_0x389f98,_0x5a5618,_0x4bc712,_0x23f71c,_0x50606d,_0x339915,_0x110e3c,_0x207914,_0x2ac3d1,_0xbb4fa7,_0x541925,_0x2db77a){const _0x526366=_0x1a99ef;this[_0x526366(0x295)]=[],this['pos']=_0x389f98['slice'](),this[_0x526366(0x41d)]=_0x5a5618,this['stats']=_0x4bc712||[0x0,0x0,0x0],this[_0x526366(0x486)]=_0x23f71c,this['hp']=_0x23f71c,this[_0x526366(0x435)]=_0x50606d[_0x526366(0x428)]();if(this[_0x526366(0x435)]['length']<0x4)this['tcmax'][0x3]=0x1;this['tc']=this['tcmax']['slice'](),this['pc']=_0x339915,this[_0x526366(0x1f5)]=_0x110e3c,this['dead']=![],this[_0x526366(0x3a8)]=[],this[_0x526366(0x310)]=_0x389f98[_0x526366(0x428)](),this[_0x526366(0x40e)]=_0x207914[_0x526366(0x428)](),this['ac']=_0x2ac3d1,this[_0x526366(0x331)]=_0xbb4fa7[_0x526366(0x4a9)](_0x34cfda=>new trait(_0x34cfda[_0x526366(0x41d)],_0x34cfda[_0x526366(0x273)],_0x34cfda['effect'],_0x34cfda[_0x526366(0x476)],_0x34cfda['passive'],this)),this[_0x526366(0x37e)]=[],this[_0x526366(0x40a)]=[],this[_0x526366(0x44c)]=new Unarmed(),this['equipment']=[];if(_0x541925&&_0x541925[_0x526366(0x2e1)]>0x0)this['equipment']=_0x541925[_0x526366(0x428)]()||[];this[_0x526366(0x375)]=this[_0x526366(0x44c)],this['secondaryitem']=this['unarmed'],this['offhanditem']=this['unarmed'],this[_0x526366(0x3dc)]={};const _0x55a1ce=this;this[_0x526366(0x217)]['forEach'](function(_0x21cd47){const _0x50b76f=_0x526366;_0x55a1ce[_0x50b76f(0x20b)](_0x21cd47,!![]);}),this[_0x526366(0x43c)]=_0x2db77a||null,this[_0x526366(0x2df)]=[],this[_0x526366(0x306)]=characterindex,characterindex++,this['visibletiles']=[],this['pc']==!![]?playercs[_0x526366(0x23c)](this):nonpcs['push'](this);}[_0x1a99ef(0x224)](_0x4a9047){const _0x4edc61=_0x1a99ef;if(_0x4a9047==0x0)return;let _0x5cf23f=0x0;if(this[_0x4edc61(0x325)]){let _0x147ac5='';for(let _0x5e922e=0x0;_0x5e922e<this[_0x4edc61(0x325)][_0x4edc61(0x2e1)];_0x5e922e++){let _0x3cc28b=this[_0x4edc61(0x325)][_0x5e922e];if(_0x3cc28b[_0x4edc61(0x1e5)][0x0]<now)continue;_0x3cc28b[_0x4edc61(0x1e5)][0x0]=0x0,_0x147ac5+=_0x3cc28b[_0x4edc61(0x1f5)];}_0x5cf23f=parseInt(_0x147ac5);if(isNaN(_0x5cf23f))_0x5cf23f=0x0;}else this[_0x4edc61(0x325)]=[];let _0x3ab21d=(_0x4a9047+_0x5cf23f)[_0x4edc61(0x38d)]();for(let _0x4eedd9=0x0;_0x4eedd9<this[_0x4edc61(0x325)][_0x4edc61(0x2e1)];_0x4eedd9++){let _0x32c3b1=this['ownedelements'][_0x4eedd9],[_0x36de3f,_0x3fd524]=_0x32c3b1['pos'];newgrid[_0x36de3f][_0x3fd524][_0x4edc61(0x3f9)]=newgrid[_0x36de3f][_0x3fd524][_0x4edc61(0x3f9)][_0x4edc61(0x3ef)](_0x55aeab=>_0x55aeab!=_0x32c3b1);}this['ownedelements']=adduilabel(_0x3ab21d,this[_0x4edc61(0x295)],[0x80,0x0,0x0],0x1,!![]),this['hp']-=_0x4a9047;if(this['hp']<=0x0){if(this['dead']==![])this[_0x4edc61(0x1fd)]();}this[_0x4edc61(0x433)]();}['bleed'](){const _0x49336c=_0x1a99ef,_0x2c73b9=new blood();newgrid[this[_0x49336c(0x295)][0x0]][this[_0x49336c(0x295)][0x1]][_0x49336c(0x307)](_0x2c73b9);}[_0x1a99ef(0x1f3)](_0x231152){const _0x1e3e83=_0x1a99ef;this['hp']+=_0x231152,adduilabel(_0x231152[_0x1e3e83(0x38d)](),this[_0x1e3e83(0x295)],[0x0,0x80,0x0],0x1,!![],![],![],!![],0x1);}[_0x1a99ef(0x1fd)](){const _0x39d9ec=_0x1a99ef,[_0x49867f,_0x58e94b]=this[_0x39d9ec(0x295)];this[_0x39d9ec(0x3a8)]=[];let _0x25875e=null;if(this['deathsound'])_0x25875e=this[_0x39d9ec(0x2fb)];const _0x567945=new action(_0x39d9ec(0x417),_0xe42bef=>_0xe42bef,[0x0,0x0,0x0],0x0,this[_0x39d9ec(0x295)],this,this['pos'],[],_0x25875e,0x6);_0x567945[_0x39d9ec(0x3e1)]=![],this[_0x39d9ec(0x3a8)][_0x39d9ec(0x23c)](_0x567945),move(this),this[_0x39d9ec(0x304)]=!![],adduilabel('x',this['pos'],[0x80,0x0,0x0],0x0,!![],![],![],![]),this[_0x39d9ec(0x40e)][0x1]*=0.5,this[_0x39d9ec(0x40e)][0x2]*=0.5,this[_0x39d9ec(0x40e)][0x0]*=0.5;const _0xf54f3a=new corpse(_0x39d9ec(0x340),this['symbol'],convertColortoAbs(this[_0x39d9ec(0x40e)])[_0x39d9ec(0x4a9)]((_0x1abe17,_0xa853eb)=>_0x1abe17*[0.5,0.1,0.1][_0xa853eb]),null,0x0,!![],0x0);_0xf54f3a[_0x39d9ec(0x3d8)]=![],newgrid[this[_0x39d9ec(0x295)][0x0]][this[_0x39d9ec(0x295)][0x1]][_0x39d9ec(0x444)](_0xf54f3a),this['dropAll'](),newgrid[this[_0x39d9ec(0x295)][0x0]][this[_0x39d9ec(0x295)][0x1]]['character']=null;}[_0x1a99ef(0x20b)](_0x327364,_0x29c5d8=![]){const _0x1adec3=_0x1a99ef;if(_0x327364 instanceof Ammunition){this[_0x1adec3(0x213)](_0x327364[_0x1adec3(0x367)],_0x327364[_0x1adec3(0x21a)]);return;}if(this[_0x1adec3(0x375)]&&this[_0x1adec3(0x375)]['basename']==_0x327364['basename']&&this['primaryitem'][_0x1adec3(0x4cf)]>this[_0x1adec3(0x375)]['number']){this[_0x1adec3(0x375)][_0x1adec3(0x21a)]++,this[_0x1adec3(0x375)][_0x1adec3(0x41d)]=this[_0x1adec3(0x375)][_0x1adec3(0x367)]+'('+this['primaryitem']['number']+')';if(!_0x29c5d8)adduilabel(this[_0x1adec3(0x375)]['name'],this[_0x1adec3(0x295)],this['color'],0x1,!![]);}else{if(this[_0x1adec3(0x34b)]&&this[_0x1adec3(0x34b)][_0x1adec3(0x367)]==_0x327364[_0x1adec3(0x367)]&&this[_0x1adec3(0x34b)][_0x1adec3(0x4cf)]>this['secondaryitem'][_0x1adec3(0x21a)]){this[_0x1adec3(0x34b)][_0x1adec3(0x21a)]++,this['secondaryitem']['name']=this[_0x1adec3(0x34b)][_0x1adec3(0x367)]+'('+this[_0x1adec3(0x34b)][_0x1adec3(0x21a)]+')';if(!_0x29c5d8)adduilabel(this[_0x1adec3(0x34b)]['name'],this['pos'],this['color'],0x1,!![]);}else{this[_0x1adec3(0x34b)]['name']==this[_0x1adec3(0x44c)][_0x1adec3(0x41d)]&&this['itemSwap']();this[_0x1adec3(0x21b)](),this[_0x1adec3(0x375)]=_0x327364;if(_0x327364['ammotype']){let _0x148fe2=this[_0x1adec3(0x3dc)][_0x327364[_0x1adec3(0x3f4)]];if(!_0x148fe2)_0x148fe2=0x0;_0x327364[_0x1adec3(0x41d)]=_0x327364['basename']+'('+_0x148fe2+')';}if(!_0x29c5d8)adduilabel(this[_0x1adec3(0x375)][_0x1adec3(0x41d)],this[_0x1adec3(0x295)],this[_0x1adec3(0x40e)],0x1,!![]);}}}['itemSwap'](){const _0x494e57=_0x1a99ef,_0x56c3d0=this[_0x494e57(0x375)];this[_0x494e57(0x375)]=this[_0x494e57(0x34b)],this[_0x494e57(0x34b)]=_0x56c3d0;}[_0x1a99ef(0x21b)](_0x59694b=_0x1a99ef(0x375)){const _0x37276c=_0x1a99ef,[_0x3b9264,_0x295eee]=this['pos'],_0x53bbb7=this[_0x59694b];if(!_0x53bbb7||_0x53bbb7[_0x37276c(0x367)]==this[_0x37276c(0x44c)]['basename'])return;if(_0x53bbb7['ammotype']){const _0x54b81a=this[_0x37276c(0x3dc)][_0x53bbb7[_0x37276c(0x3f4)]];this[_0x37276c(0x3dc)][_0x53bbb7['ammotype']]=0x0;if(!_0x54b81a){}else{const _0x141e59=new _0x53bbb7['ammoconstructor']();_0x141e59[_0x37276c(0x21a)]=_0x54b81a,newgrid[_0x3b9264][_0x295eee][_0x37276c(0x444)](_0x141e59),_0x53bbb7[_0x37276c(0x41d)]=_0x53bbb7[_0x37276c(0x367)];}}newgrid[_0x3b9264][_0x295eee]['addObject'](_0x53bbb7),_0x53bbb7[_0x37276c(0x21b)](),this[_0x59694b]=this[_0x37276c(0x44c)];}['dropoffhand'](){const _0x5df7ce=_0x1a99ef;this[_0x5df7ce(0x21b)](_0x5df7ce(0x2be));}[_0x1a99ef(0x218)](){const _0x131e87=_0x1a99ef;this[_0x131e87(0x21b)](),this[_0x131e87(0x21b)]('secondaryitem'),this[_0x131e87(0x21b)](_0x131e87(0x2be));}[_0x1a99ef(0x2e9)](_0xdd30f3){const _0x6b444f=_0x1a99ef;if(this[_0x6b444f(0x375)]['basename']==_0xdd30f3['basename']){this[_0x6b444f(0x375)][_0x6b444f(0x21a)]--;this[_0x6b444f(0x375)][_0x6b444f(0x21a)]<=0x0?this['primaryitem']=this[_0x6b444f(0x44c)]:adduilabel(this['primaryitem'][_0x6b444f(0x21a)][_0x6b444f(0x38d)](),this['pos'],this[_0x6b444f(0x40e)],0x1,!![]);if(this[_0x6b444f(0x375)][_0x6b444f(0x21a)]==0x1)this[_0x6b444f(0x375)][_0x6b444f(0x41d)]=this[_0x6b444f(0x375)]['basename'];else this['primaryitem']['number']>0x1&&(this[_0x6b444f(0x375)][_0x6b444f(0x41d)]=this[_0x6b444f(0x375)]['basename']+'('+this[_0x6b444f(0x375)]['number']+')');}else{if(this[_0x6b444f(0x34b)][_0x6b444f(0x367)]==_0xdd30f3[_0x6b444f(0x367)]){this[_0x6b444f(0x34b)][_0x6b444f(0x21a)]--;this[_0x6b444f(0x34b)][_0x6b444f(0x21a)]<=0x0?this[_0x6b444f(0x34b)]=this[_0x6b444f(0x44c)]:adduilabel(this[_0x6b444f(0x34b)][_0x6b444f(0x21a)][_0x6b444f(0x38d)](),this[_0x6b444f(0x295)],this[_0x6b444f(0x40e)],0x1,!![]);if(this['secondaryitem']['number']==0x1)this[_0x6b444f(0x34b)]['name']=this[_0x6b444f(0x34b)]['basename'];else this[_0x6b444f(0x34b)][_0x6b444f(0x21a)]>0x1&&(this[_0x6b444f(0x34b)][_0x6b444f(0x41d)]=this['secondaryitem'][_0x6b444f(0x367)]+'('+this[_0x6b444f(0x34b)]['number']+')');}else{if(this[_0x6b444f(0x2be)]['basename']==_0xdd30f3[_0x6b444f(0x367)]){this['offhanditem'][_0x6b444f(0x21a)]--;this[_0x6b444f(0x2be)][_0x6b444f(0x21a)]<=0x0?this[_0x6b444f(0x2be)]=this[_0x6b444f(0x44c)]:adduilabel(this[_0x6b444f(0x2be)][_0x6b444f(0x21a)][_0x6b444f(0x38d)](),this[_0x6b444f(0x295)],this[_0x6b444f(0x40e)],0x1,!![]);if(this[_0x6b444f(0x2be)][_0x6b444f(0x21a)]==0x1)this[_0x6b444f(0x2be)]['name']=this[_0x6b444f(0x2be)][_0x6b444f(0x367)];else this[_0x6b444f(0x2be)][_0x6b444f(0x21a)]>0x1&&(this[_0x6b444f(0x2be)][_0x6b444f(0x41d)]=this[_0x6b444f(0x2be)]['basename']+'('+this[_0x6b444f(0x2be)][_0x6b444f(0x21a)]+')');}}}}[_0x1a99ef(0x22d)](_0x2c73c2){const _0x5f59be=_0x1a99ef;this['ammunition'][_0x2c73c2]--,adduilabel(this['ammunition'][_0x2c73c2][_0x5f59be(0x38d)](),this[_0x5f59be(0x295)],this[_0x5f59be(0x40e)],0x1,!![]),this[_0x5f59be(0x3a2)]();}[_0x1a99ef(0x213)](_0x2ce8fc,_0x40dc56){const _0x35ceda=_0x1a99ef;if(!this[_0x35ceda(0x3dc)][_0x2ce8fc]||this[_0x35ceda(0x3dc)][_0x2ce8fc]<=0x0)this[_0x35ceda(0x3dc)][_0x2ce8fc]=_0x40dc56;else this[_0x35ceda(0x3dc)][_0x2ce8fc]+=_0x40dc56;adduilabel(this[_0x35ceda(0x3dc)][_0x2ce8fc][_0x35ceda(0x38d)](),this['pos'],this[_0x35ceda(0x40e)],0x1,!![]),this[_0x35ceda(0x3a2)]();}['updateAmmo'](){const _0x1f4e39=_0x1a99ef,_0x45a6a4=[this[_0x1f4e39(0x375)],this[_0x1f4e39(0x34b)]],_0x4b0809=this;_0x45a6a4['forEach'](function(_0x5b9452){const _0x30056c=_0x1f4e39;if(_0x5b9452['ammotype']){if(!_0x4b0809[_0x30056c(0x3dc)][_0x5b9452[_0x30056c(0x3f4)]])_0x4b0809[_0x30056c(0x3dc)][_0x5b9452[_0x30056c(0x3f4)]]=0x0;_0x5b9452[_0x30056c(0x41d)]=_0x5b9452[_0x30056c(0x367)]+'('+_0x4b0809[_0x30056c(0x3dc)][_0x5b9452[_0x30056c(0x3f4)]]+')';}});}['getatkbonus'](_0x4f6631=this[_0x1a99ef(0x375)]){const _0x4fcd7f=_0x4f6631['bonus']+this['stats'][_0x4f6631['stat']];return _0x4fcd7f;}['getdamage'](){const _0x1ba9a3=_0x1a99ef,_0x5cff6b=this[_0x1ba9a3(0x375)],_0x208945=_0x5cff6b[_0x1ba9a3(0x25d)]+this[_0x1ba9a3(0x265)][_0x5cff6b[_0x1ba9a3(0x23b)]],_0x49e907=roll(_0x5cff6b['damagedie'],_0x208945);return _0x49e907;}[_0x1a99ef(0x453)](_0x5d4010=this[_0x1a99ef(0x375)]){const _0xc1004c=_0x1a99ef,_0x384d18=_0x5d4010[_0xc1004c(0x25d)]+this[_0xc1004c(0x265)][_0x5d4010[_0xc1004c(0x23b)]],_0xb33008=[0x1+_0x384d18,_0x5d4010[_0xc1004c(0x219)]+_0x384d18];return _0xb33008;}['getrange'](_0x15d773){const _0x10c99a=_0x1a99ef;if(!_0x15d773)_0x15d773=this[_0x10c99a(0x375)];if(_0x15d773['ammotype']&&!this['ammunition'][_0x15d773[_0x10c99a(0x3f4)]])return 0x0;return _0x15d773['range'];}[_0x1a99ef(0x3c3)](_0x176c5f){const _0xbb7793=_0x1a99ef;if(!_0x176c5f)_0x176c5f=this[_0xbb7793(0x375)];if(_0x176c5f[_0xbb7793(0x3f4)]&&!this[_0xbb7793(0x3dc)][_0x176c5f['ammotype']])return 0x0;return _0x176c5f[_0xbb7793(0x2fc)];}[_0x1a99ef(0x347)](){const _0x711ced=_0x1a99ef,[_0x3bd7fa,_0x577425]=this[_0x711ced(0x295)],_0x448a69=this;let _0x5d190e=[],_0x51b8b4=[],_0x5506df=new Set();_0x51b8b4[_0x711ced(0x23c)](newgrid[_0x3bd7fa][_0x577425]);let _0x3086dd=0x0;for(let _0x43ef9b=0x0;_0x43ef9b<this[_0x711ced(0x400)][_0x711ced(0x2e1)];_0x43ef9b++){const _0x1d2c98=this['visibletiles'][_0x43ef9b];_0x1d2c98[_0x711ced(0x24d)](_0x448a69);}while(_0x51b8b4['length']>0x0&&_0x3086dd<0x2710){_0x3086dd++;const _0x137f39=_0x51b8b4[_0x711ced(0x1f7)](),[_0x578dfa,_0x25ac9f]=_0x137f39[_0x711ced(0x295)];if(newgrid[_0x578dfa][_0x25ac9f][_0x711ced(0x4cb)]()>=0x1)continue;let _0x44305f=dist([_0x3bd7fa,_0x577425],[_0x578dfa,_0x25ac9f]);if(_0x44305f>enemysightrange)continue;let [_0x5b8901,_0x2d26a4]=[0x0,0x0],[_0x44df59,_0x5d7dfc]=[0x0,0x0],_0x2b9818=newgrid[_0x3bd7fa][_0x577425][_0x711ced(0x439)],_0x3592f3=newgrid[_0x578dfa][_0x25ac9f][_0x711ced(0x439)];if(drawLine3D([_0x3bd7fa,_0x577425,_0x2b9818+0x1],[_0x578dfa,_0x25ac9f,_0x3592f3])<0x1){_0x5d190e[_0x711ced(0x23c)](_0x137f39),_0x137f39[_0x711ced(0x284)](_0x448a69);const _0x4d4c0c=_0x137f39[_0x711ced(0x295)][0x0]+','+_0x137f39[_0x711ced(0x295)][0x1];_0x448a69[_0x711ced(0x458)][_0x4d4c0c]=turncounter;if(_0x44305f<enemysightrange)for(let _0x3bb295=0x0;_0x3bb295<0x8;_0x3bb295++){[_0x5b8901,_0x2d26a4]=directions[_0x3bb295],[_0x44df59,_0x5d7dfc]=[_0x578dfa+_0x5b8901,_0x25ac9f+_0x2d26a4];const _0x9c4aed=_0x44df59+','+_0x5d7dfc;!_0x5506df['has'](_0x9c4aed)&&newgrid[_0x44df59]&&newgrid[_0x44df59][_0x5d7dfc]&&(_0x5506df[_0x711ced(0x2ea)](_0x9c4aed),_0x51b8b4[_0x711ced(0x23c)](newgrid[_0x44df59][_0x5d7dfc]));}}else{if(_0x2b9818!==_0x3592f3&&drawline([_0x3bd7fa,_0x577425],[_0x578dfa,_0x25ac9f],!![])<0x1)for(let _0x372982=_0x578dfa-0x1;_0x372982<=_0x578dfa+0x1;_0x372982++){for(let _0x18de80=_0x25ac9f-0x1;_0x18de80<=_0x25ac9f+0x1;_0x18de80++){const _0x29806b=_0x372982+','+_0x18de80;!_0x5506df['has'](_0x29806b)&&newgrid[_0x372982]&&newgrid[_0x372982][_0x18de80]&&(_0x5506df[_0x711ced(0x2ea)](_0x29806b),_0x51b8b4[_0x711ced(0x23c)](newgrid[_0x372982][_0x18de80]));}}}}this['visibletiles']=_0x5d190e;}[_0x1a99ef(0x497)](){const _0x1a8f4d=_0x1a99ef,[_0x308172,_0x3b6d4e]=this['pos'],_0x47757c=[_0x308172,_0x3b6d4e];let _0x4fec76=[],_0x329f01={},_0xc94c43=[];_0xc94c43['push'](newgrid[_0x308172][_0x3b6d4e]);let _0x347681=0x0;class _0x547276{constructor(_0x540004,_0x558a67,_0x35efd9){const _0x2fbe49=_0x4a83;this['min']=_0x540004,this[_0x2fbe49(0x4bb)]=_0x558a67,this[_0x2fbe49(0x335)]=_0x35efd9,this['left']=null,this['right']=null;}}class _0x315c25{constructor(){const _0x21b342=_0x4a83;this[_0x21b342(0x214)]=null;}[_0x1a8f4d(0x2a9)](_0x42765f,_0x2e49bb,_0x3ef6f2){const _0x3bd2d3=_0x1a8f4d,_0x5dd062=new _0x547276(_0x42765f,_0x2e49bb,_0x3ef6f2);this[_0x3bd2d3(0x214)]===null?this[_0x3bd2d3(0x214)]=_0x5dd062:this['root']=this[_0x3bd2d3(0x409)](this[_0x3bd2d3(0x214)],_0x5dd062);}[_0x1a8f4d(0x409)](_0x59798d,_0x598217){const _0x4eb11f=_0x1a8f4d;return _0x598217['min']<_0x59798d[_0x4eb11f(0x373)]?_0x59798d[_0x4eb11f(0x4be)]===null?_0x59798d['left']=_0x598217:_0x59798d[_0x4eb11f(0x4be)]=this[_0x4eb11f(0x409)](_0x59798d[_0x4eb11f(0x4be)],_0x598217):_0x59798d['right']===null?_0x59798d[_0x4eb11f(0x2ae)]=_0x598217:_0x59798d[_0x4eb11f(0x2ae)]=this['_insert'](_0x59798d[_0x4eb11f(0x2ae)],_0x598217),_0x59798d;}['find'](_0x56ba59){const _0x17ecf2=_0x1a8f4d;return this[_0x17ecf2(0x374)](this[_0x17ecf2(0x214)],_0x56ba59);}[_0x1a8f4d(0x374)](_0xe0021d,_0x19cc78){const _0x411b7f=_0x1a8f4d;if(_0xe0021d===null)return null;if(_0x19cc78>=_0xe0021d['min']&&_0x19cc78<=_0xe0021d[_0x411b7f(0x4bb)])return _0xe0021d[_0x411b7f(0x335)];return _0x19cc78<_0xe0021d['min']?this[_0x411b7f(0x374)](_0xe0021d['left'],_0x19cc78):this[_0x411b7f(0x374)](_0xe0021d[_0x411b7f(0x2ae)],_0x19cc78);}[_0x1a8f4d(0x222)](_0xbc31a6,_0x1019cb){const _0x1e172f=_0x1a8f4d;return this[_0x1e172f(0x380)](this['root'],_0xbc31a6,_0x1019cb);}[_0x1a8f4d(0x380)](_0x56f34c,_0x39a91d,_0x4a83ec){const _0x4b9245=_0x1a8f4d;if(_0x56f34c===null)return-0x63;if(_0x56f34c[_0x4b9245(0x4bb)]<_0x39a91d||_0x56f34c[_0x4b9245(0x373)]>_0x4a83ec)return-0x63;if(_0x56f34c['min']>=_0x39a91d&&_0x56f34c[_0x4b9245(0x4bb)]<=_0x4a83ec)return _0x56f34c[_0x4b9245(0x456)];let _0x59f2eb=-0x63;return _0x56f34c['min']<=_0x4a83ec&&_0x56f34c['max']>=_0x39a91d&&(_0x59f2eb=_0x56f34c['distance']),_0x59f2eb=Math[_0x4b9245(0x4bb)](_0x59f2eb,this['_findMaxDistanceInRange'](_0x56f34c[_0x4b9245(0x4be)],_0x39a91d,_0x4a83ec),this['_findMaxDistanceInRange'](_0x56f34c[_0x4b9245(0x2ae)],_0x39a91d,_0x4a83ec)),_0x59f2eb;}}let _0x5b4c7c=new Array(0x168)[_0x1a8f4d(0x4a1)](0x63);function _0x3eb423(_0x55c472,_0xf1ec1a){const _0xad137e=_0x1a8f4d;let [_0x42a4ba,_0x36ecd2]=_0x55c472,[_0x6e99a5,_0x1607f3]=_0xf1ec1a,_0x306cf7=[[_0x6e99a5-0.5,_0x1607f3-0.5],[_0x6e99a5+0.5,_0x1607f3-0.5],[_0x6e99a5-0.5,_0x1607f3+0.5],[_0x6e99a5+0.5,_0x1607f3+0.5]],_0x2e2bb7=_0x306cf7[_0xad137e(0x4a9)](([_0xaf3451,_0x7fe3af])=>{const _0x5ee521=_0xad137e;let _0x8d1e04=Math[_0x5ee521(0x2a5)](_0x7fe3af-_0x36ecd2,_0xaf3451-_0x42a4ba),_0x14dde0=_0x8d1e04*(0xb4/Math['PI']);return _0x14dde0=(_0x14dde0+0x168)%0x168,Math[_0x5ee521(0x37a)](_0x14dde0);}),_0x549719=Math[_0xad137e(0x373)](..._0x2e2bb7),_0x371e23=Math['max'](..._0x2e2bb7);if(Math[_0xad137e(0x3cf)](_0x549719-_0x371e23)>0x10e)return[_0x549719,_0x549719,chebyshevDistance(_0x55c472,_0xf1ec1a)];return[_0x549719,_0x371e23,chebyshevDistance(_0x55c472,_0xf1ec1a)];}function _0x29ac08(_0x4928d5){const _0x5106ce=_0x1a8f4d,[_0x42935b,_0x3d2df5]=_0x4928d5[_0x5106ce(0x295)],_0x43c7b1=_0x3eb423(_0x47757c,_0x4928d5['pos']);console[_0x5106ce(0x2b1)](_0x5b4c7c);const _0x2d5f6c=_0x5b4c7c[_0x5106ce(0x222)](_0x43c7b1[0x0],_0x43c7b1[0x1]);if(_0x2d5f6c>=_0x43c7b1[0x2]||_0x2d5f6c===-0x63)return!![];return![];}function _0x26fc52(_0x42f821){const _0x4d604c=_0x3eb423(_0x47757c,_0x42f821['pos']);for(let _0x5f40ab=_0x4d604c[0x0];_0x5f40ab<=_0x4d604c[0x1];_0x5f40ab++){if(_0x4d604c[0x2]<=_0x5b4c7c[_0x5f40ab])return!![];}return![];}while(_0xc94c43[_0x1a8f4d(0x2e1)]>0x0&&_0x347681<0x1388){let _0x1b949b=_0xc94c43['shift']();const [_0x2ca421,_0x64b576]=_0x1b949b[_0x1a8f4d(0x295)];_0x347681++,_0x4fec76[_0x1a8f4d(0x23c)](_0x1b949b);if(_0x26fc52(_0x1b949b)==![])continue;if(_0x1b949b[_0x1a8f4d(0x4cb)]()<0x1)for(let _0x4a2fdd=_0x2ca421-0x1;_0x4a2fdd<=_0x2ca421+0x1;_0x4a2fdd++){for(let _0x3c2edd=_0x64b576-0x1;_0x3c2edd<=_0x64b576+0x1;_0x3c2edd++){if(!_0x329f01[_0x4a2fdd])_0x329f01[_0x4a2fdd]={};!_0x329f01[_0x4a2fdd][_0x3c2edd]&&(_0x329f01[_0x4a2fdd][_0x3c2edd]=0x1,_0xc94c43[_0x1a8f4d(0x23c)](newgrid[_0x4a2fdd][_0x3c2edd]));}}if(_0x1b949b[_0x1a8f4d(0x4cb)]()>=0x1){let _0x5c0bdd=_0x3eb423(_0x47757c,_0x1b949b[_0x1a8f4d(0x295)]);for(let _0x144f22=_0x5c0bdd[0x0];_0x144f22<=_0x5c0bdd[0x1];_0x144f22++){_0x5b4c7c[_0x144f22]=Math[_0x1a8f4d(0x373)](_0x5b4c7c[_0x144f22],_0x5c0bdd[0x2]);}}}return _0x4fec76[_0x1a8f4d(0x348)](function(_0x4146e8){}),_0x4fec76;}[_0x1a99ef(0x36d)](){const _0x14fba7=_0x1a99ef,[_0x561a33,_0x5763e5]=this[_0x14fba7(0x295)],_0xd7c4bc=[_0x561a33,_0x5763e5];let _0x5676b3=newgrid[_0x561a33][_0x5763e5][_0x14fba7(0x439)]+0x1,_0x1b8ee2=[],_0x31b9f9={},_0x1e7bd2=[];_0x1e7bd2[_0x14fba7(0x23c)](newgrid[_0x561a33][_0x5763e5]);let _0x17cb9e=0x0,_0x277a47=new Array(0x168)[_0x14fba7(0x4a1)](0x63);function _0x5483f7(_0x258501,_0x30c49a){const _0x2d8311=_0x14fba7;let [_0x2cb6a2,_0x19a5ad]=_0x258501,[_0xd7805,_0x27a0e8]=_0x30c49a,_0x4584d2=[[_0xd7805-0.5,_0x27a0e8-0.5],[_0xd7805+0.5,_0x27a0e8-0.5],[_0xd7805-0.5,_0x27a0e8+0.5],[_0xd7805+0.5,_0x27a0e8+0.5]],[_0x227438,_0x4e0edd]=[0x0,0x0],_0x50f5a4,_0x3f6643,_0x21da0c=[];for(let _0x21531f=0x0;_0x21531f<0x4;_0x21531f++){[_0x227438,_0x4e0edd]=_0x4584d2[_0x21531f],_0x50f5a4=Math['atan2'](_0x4e0edd-_0x19a5ad,_0x227438-_0x2cb6a2),_0x3f6643=_0x50f5a4*(0xb4/Math['PI']),_0x3f6643=(_0x3f6643+0x168)%0x168,_0x21da0c[_0x21531f]=Math['round'](_0x3f6643);}let _0x59cbde=Math['min'](..._0x21da0c),_0x2b0dee=Math[_0x2d8311(0x4bb)](..._0x21da0c);if(Math['abs'](_0x59cbde-_0x2b0dee)>0x10e)return[_0x59cbde,_0x59cbde,chebyshevDistance(_0x258501,_0x30c49a)];return[_0x59cbde,_0x2b0dee,chebyshevDistance(_0x258501,_0x30c49a)];}function _0x21cb70(_0x440041){const _0xb0177a=_0x14fba7,_0x118c7a=_0x5483f7(_0xd7c4bc,_0x440041[_0xb0177a(0x295)]);for(let _0x1eaf02=_0x118c7a[0x0];_0x1eaf02<=_0x118c7a[0x1];_0x1eaf02++){if(_0x118c7a[0x2]<=_0x277a47[_0x1eaf02])return!![];}return![];}while(_0x1e7bd2[_0x14fba7(0x2e1)]>0x0){let _0x358407=_0x1e7bd2[_0x14fba7(0x2ed)]();const [_0x4d9d9c,_0x508156]=_0x358407['pos'];_0x17cb9e++,_0x1b8ee2['push'](_0x358407);if(_0x21cb70(_0x358407)==![])continue;if(_0x358407[_0x14fba7(0x4cb)](undefined,_0xd7c4bc)<0x1)for(let _0x30edc7=_0x4d9d9c-0x1;_0x30edc7<=_0x4d9d9c+0x1;_0x30edc7++){for(let _0x469e02=_0x508156-0x1;_0x469e02<=_0x508156+0x1;_0x469e02++){if(!_0x31b9f9[_0x30edc7])_0x31b9f9[_0x30edc7]={};!_0x31b9f9[_0x30edc7][_0x469e02]&&(_0x31b9f9[_0x30edc7][_0x469e02]=0x1,_0x1e7bd2[_0x14fba7(0x23c)](newgrid[_0x30edc7][_0x469e02]));}}if(_0x358407[_0x14fba7(0x4cb)](undefined,_0xd7c4bc)>=0x1){let _0x33dc1b=_0x5483f7(_0xd7c4bc,_0x358407[_0x14fba7(0x295)]);for(let _0xd04bc2=_0x33dc1b[0x0];_0xd04bc2<=_0x33dc1b[0x1];_0xd04bc2++){_0x277a47[_0xd04bc2]=Math[_0x14fba7(0x373)](_0x277a47[_0xd04bc2],_0x33dc1b[0x2]);}}}return _0x1b8ee2;}[_0x1a99ef(0x289)](){}}class playerCharacter extends character{constructor(_0x51e3ba,_0x18d9c6,_0x48df2e,_0x3ac8a8,_0x383c66,_0xe0aef5,_0x45f367,_0x5bbdf5,_0x285259,_0x44bc88,_0x43a20b,_0x17e5f8){super(_0x51e3ba,_0x18d9c6,_0x48df2e,_0x3ac8a8,_0x383c66,_0xe0aef5,_0x45f367,_0x5bbdf5,_0x285259,_0x44bc88,_0x43a20b,_0x17e5f8),this['reactions']=[attackofop,overwatch,autopickup,block];}[_0x1a99ef(0x2f2)](_0x3c8642,_0x302a79){const _0x3f2484=_0x1a99ef;if(_0x302a79<0x1)return;if(this[_0x3f2484(0x304)]&&!(gameover==!![]&&deathcharacter==this))return;if(_0x3c8642[_0x3f2484(0x29f)]===!![])return;const _0x197991=this,[_0x188ab3,_0x2fe2af]=_0x3c8642[_0x3f2484(0x295)];_0x3c8642['heard']=!![];let _0x1647ee=[];if(_0x3c8642['soundeffect'])_0x1647ee=_0x3c8642[_0x3f2484(0x338)][_0x3f2484(0x428)]();let _0x50893b=[];_0x1647ee[_0x3f2484(0x348)](function(_0x545548,_0x520f92){const _0x16d7c7=_0x3f2484;_0x50893b[_0x520f92]=[],_0x50893b[_0x520f92]=_0x545548['slice']();if(_0x50893b[_0x520f92][0x6]===undefined)_0x50893b[_0x520f92][0x6]=0x1;if(_0x50893b[_0x520f92][0x6]!==0x0)_0x50893b[_0x520f92][0x6]*=Math['max'](Math['min']((_0x302a79/_0x3c8642[_0x16d7c7(0x363)])**0.5,0x1),0.1);});if(_0x3c8642[_0x3f2484(0x3fd)]['pc']==!![]){playsoundeffect(_0x50893b);return;}if(newgrid[_0x188ab3][_0x2fe2af][_0x3f2484(0x2de)]==![]){setTimeout(()=>{const _0x59bcec=_0x3f2484;adduilabel('^',_0x3c8642[_0x59bcec(0x295)],_0x197991['color'],0x0,!![],![],![],!![],0x1),playsoundeffect(_0x50893b);},(_0x3c8642['volume']-_0x302a79)*0x32);return;}playsoundeffect(_0x50893b);}['die'](){const _0x264915=_0x1a99ef;super[_0x264915(0x1fd)]();let _0x5f21b2=!![];for(let _0x121305=0x0;_0x121305<playercs[_0x264915(0x2e1)];_0x121305++){let _0x443286=playercs[_0x121305];if(_0x443286[_0x264915(0x304)]!==!![])_0x5f21b2=![];}_0x5f21b2&&(gameover=!![],deathcharacter=this);}}class Fugitive extends playerCharacter{constructor(_0x519ea4){const _0x371b87=_0x1a99ef;super(_0x519ea4,'Fugitive',statblocks[_0x371b87(0x43b)],0x7,[0x4,0x1,0x1],!![],'@',[0x0,0x20,0x0],0xe,[],[],sneakattackpermute);const _0x492f7d=this[_0x371b87(0x43c)],_0x54e901=function(_0x304bbc,_0x3f4d4a){const _0xa236fc=_0x371b87,_0x322fd2=_0x492f7d[_0xa236fc(0x455)](this),_0x37eb02=dualwieldpermute['bind'](this);return _0x37eb02(_0x322fd2(_0x304bbc,_0x3f4d4a),_0x3f4d4a);};this[_0x371b87(0x43c)]=_0x54e901;}}class Huntsman extends playerCharacter{constructor(_0x3a33f4){const _0x562ce9=_0x1a99ef;super(_0x3a33f4,_0x562ce9(0x393),statblocks['Wanderer'],0x6,[0x4,0x1,0x1],!![],'@',[0x80,0x60,0x40],0xe,[],[],sharpshooterpermute);const _0x1a5048=this[_0x562ce9(0x43c)],_0x33bc8b=function(_0x16b5a4,_0x1d5938){const _0x138910=_0x562ce9,_0x37f8de=_0x1a5048[_0x138910(0x455)](this),_0x1837d0=dualwieldpermute[_0x138910(0x455)](this);return _0x1837d0(_0x37f8de(_0x16b5a4,_0x1d5938),_0x1d5938);};this['specialattack']=_0x33bc8b;}}class Deserter extends playerCharacter{constructor(_0x30aee5){const _0x19625a=_0x1a99ef;super(_0x30aee5,_0x19625a(0x35a),statblocks[_0x19625a(0x35a)],0x9,[0x4,0x1,0x1],!![],'@',[0x80,0x80,0x80],0xe,[],[],torchbearerpermute),this[_0x19625a(0x2be)]=new Torch(0xc8);const _0x4a1865=this[_0x19625a(0x43c)],_0x244553=function(_0x2cd5e9,_0x75a70b){const _0x5d0d57=_0x19625a,_0x22e231=_0x4a1865[_0x5d0d57(0x455)](this),_0x1dccdd=dualwieldpermute[_0x5d0d57(0x455)](this);return _0x1dccdd(_0x22e231(_0x2cd5e9,_0x75a70b),_0x75a70b);};this[_0x19625a(0x43c)]=_0x244553;}}class Berserker extends playerCharacter{constructor(_0xcec110){const _0x1bcaa1=_0x1a99ef;super(_0xcec110,_0x1bcaa1(0x34c),statblocks['Berserker'],0xa,[0x4,0x1,0x1],!![],'@',[0xa0,0x40,0x20],0xe,[],[],savageattack);const _0x3ac4f2=this,_0x2f8962=this[_0x1bcaa1(0x43c)],_0x3d2872=function(_0x152e8f,_0x111571){const _0x357982=_0x1bcaa1,_0x4c2c33=_0x2f8962[_0x357982(0x455)](this),_0x4b83f5=dualwieldpermute[_0x357982(0x455)](this);return _0x4b83f5(_0x4c2c33(_0x152e8f,_0x111571),_0x111571);};this['specialattack']=_0x3d2872;}}class Sentinel extends playerCharacter{constructor(_0x20000f){const _0x1bac2c=_0x1a99ef;super(_0x20000f,_0x1bac2c(0x39c),statblocks[_0x1bac2c(0x35a)],0xa,[0x4,0x1,0x1],!![],'@',[0x40,0x80,0x80],0xa,[],[],_0xcb23e=>_0xcb23e);const _0x114ecc=this['specialattack'],_0x2dc642=function(_0x772d51,_0x2cc3d6){const _0x1f1698=_0x1bac2c,_0x38c0ce=_0x114ecc[_0x1f1698(0x455)](this),_0x4f5319=dualwieldpermute[_0x1f1698(0x455)](this);return _0x4f5319(_0x38c0ce(_0x772d51,_0x2cc3d6),_0x2cc3d6);};this[_0x1bac2c(0x43c)]=_0x2dc642,this[_0x1bac2c(0x2dc)]=this['reactions'][_0x1bac2c(0x3ef)](_0x273508=>_0x273508!==block),this[_0x1bac2c(0x2dc)][_0x1bac2c(0x23c)](defender),this['reactions'][_0x1bac2c(0x23c)](riposte);}}class Ranger extends playerCharacter{constructor(_0x52b178){const _0x447591=_0x1a99ef;super(_0x52b178,_0x447591(0x250),[0x2,0x2,0x2],0xa,[0x4,0x1,0x1],!![],'@',[0x40,0x80,0x40],0xa,[],[],_0x248f03=>_0x248f03);const _0x420cf0=this[_0x447591(0x43c)],_0x1e9561=function(_0x55eaf6,_0x5d8583){const _0xf3bfae=_0x447591,_0xe21201=_0x420cf0[_0xf3bfae(0x455)](this),_0x4f767f=dualwieldpluspermute['bind'](this);return _0x4f767f(_0xe21201(_0x55eaf6,_0x5d8583),_0x5d8583);};this['specialattack']=_0x1e9561;}}class Prisoner extends playerCharacter{constructor(_0x501a8e){const _0x31c94e=_0x1a99ef;super(_0x501a8e,_0x31c94e(0x209),[0x1,0x1,0x1],0x7,[0x4,0x1,0x1],!![],'@',[0x40,0x20,0x0],0xa,[],[],_0x11ab23=>_0x11ab23);const _0x2f3afe=this[_0x31c94e(0x43c)],_0x4cc175=function(_0x50b9a5,_0x2cb099){const _0x3a4756=_0x31c94e,_0x28d3ca=_0x2f3afe[_0x3a4756(0x455)](this),_0x52a143=dualwieldpermute[_0x3a4756(0x455)](this);return _0x52a143(_0x28d3ca(_0x50b9a5,_0x2cb099),_0x2cb099);};this[_0x31c94e(0x43c)]=_0x4cc175;}}class enemy extends character{constructor(_0x32fd98,_0x3378dd,_0x514f2e,_0x43fb9a,_0x3a8ce2,_0x41d468,_0x1fbe1d,_0x283fbc,_0x2fa8a4,_0x5c5ed1,_0xc1ceb4,_0x1c7d96,_0x1dd6fb){const _0xf2beea=_0x1a99ef;super(_0x32fd98,_0x3378dd,_0x514f2e,_0x43fb9a,_0x3a8ce2,_0x41d468,_0x1fbe1d,_0x283fbc,_0x2fa8a4,_0x5c5ed1,_0xc1ceb4,_0x1dd6fb),this['startingpos']=_0x32fd98[_0xf2beea(0x428)](),this[_0xf2beea(0x458)]={},this[_0xf2beea(0x200)]=[],this['knownenemies']=[],this[_0xf2beea(0x388)],this[_0xf2beea(0x276)],this['huntedcharacters']={},this[_0xf2beea(0x429)]={},this[_0xf2beea(0x4aa)]={},this['utilityfunctions']=[],this[_0xf2beea(0x452)]=[],this[_0xf2beea(0x2dc)]=_0x1c7d96||[],this['hp']+=Math[_0xf2beea(0x37a)](Math['random']()*0x4),this[_0xf2beea(0x486)]=this['hp'],this[_0xf2beea(0x452)]=[moveusecase,attackusecase,dashusecase,chatusecase,standgroundusecase,alertusecase],this['states']=[new State('idle',defaultidle,null,[0x0,0x3]),new State(_0xf2beea(0x28f),defaulthostile,defaulttemperment,[0x0,0x1]),new State(_0xf2beea(0x2b6),defaulthunting,null,[0x0]),new State(_0xf2beea(0x2e6),defaultfleeing,null,[0x0,0x1,0x5])],this[_0xf2beea(0x333)](),this['deathsound']=soundeffects[_0xf2beea(0x4ca)],spot(this);}['damage'](_0xb2b8ec){const _0x50668a=_0x1a99ef;super[_0x50668a(0x224)](_0xb2b8ec),this[_0x50668a(0x304)]==![]&&this['hp']<=Math[_0x50668a(0x3de)](this[_0x50668a(0x486)]/0x4)&&(this[_0x50668a(0x3c7)]=this[_0x50668a(0x28b)][0x3]);}[_0x1a99ef(0x333)](){const _0x46e221=_0x1a99ef,_0x14a990=this;!this[_0x46e221(0x3c7)]&&(this[_0x46e221(0x3c7)]=this[_0x46e221(0x28b)][0x0]);let _0x5cc62a=![],_0x16bd50=![];Object[_0x46e221(0x263)](_0x14a990[_0x46e221(0x4aa)])[_0x46e221(0x348)](function(_0x319ba2){const _0x1232b4=_0x46e221,_0x2ffad3=_0x319ba2[_0x1232b4(0x3ec)];_0x2ffad3['pc']!=_0x14a990['pc']&&(_0x5cc62a=!![],_0x16bd50=!![]);});this['state'][_0x46e221(0x41d)]==this[_0x46e221(0x28b)][0x0]['name']&&_0x16bd50==!![]&&(this['state']=this[_0x46e221(0x28b)][0x1],this[_0x46e221(0x3a8)]=[],addconditiondynamic(conditions['Surprised'],!![],this)());if(this[_0x46e221(0x3c7)][_0x46e221(0x41d)]==this[_0x46e221(0x28b)][0x1][_0x46e221(0x41d)]&&_0x16bd50==![])this['huntmap']=null,this['state']=this[_0x46e221(0x28b)][0x2],this[_0x46e221(0x3a8)]=[];else this[_0x46e221(0x3c7)][_0x46e221(0x41d)]==this[_0x46e221(0x28b)][0x2][_0x46e221(0x41d)]&&(_0x5cc62a==!![]&&(this['state']=this['states'][0x1],this[_0x46e221(0x3a8)]=[]));}[_0x1a99ef(0x2f2)](_0x54d542,_0x3dc511){const _0x55a7be=_0x1a99ef,_0x35d73a=this;if(_0x54d542[_0x55a7be(0x3fd)]==_0x35d73a)return;if(_0x54d542['origin']['pc']!==this['pc'])this[_0x55a7be(0x4aa)][_0x54d542[_0x55a7be(0x3fd)]['index']]=new CharacterMemory(_0x54d542[_0x55a7be(0x3fd)],_0x54d542[_0x55a7be(0x3fd)][_0x55a7be(0x295)][_0x55a7be(0x428)]()),this['knowncharacters'][_0x54d542['origin'][_0x55a7be(0x306)]]=new CharacterMemory(_0x54d542[_0x55a7be(0x3fd)],_0x54d542[_0x55a7be(0x3fd)][_0x55a7be(0x295)][_0x55a7be(0x428)]()),this[_0x55a7be(0x333)]();else{if(_0x54d542[_0x55a7be(0x201)]==_0x55a7be(0x493)||_0x54d542[_0x55a7be(0x201)]=='Miss'){const [_0x1e3af5,_0x30f675]=_0x54d542[_0x55a7be(0x295)];let _0x11b341;if(newgrid[_0x1e3af5][_0x30f675][_0x55a7be(0x3ec)]&&newgrid[_0x1e3af5][_0x30f675][_0x55a7be(0x3ec)]['pc']!==this['pc'])_0x11b341=newgrid[_0x1e3af5][_0x30f675][_0x55a7be(0x3ec)];_0x11b341&&(this['visiblecharacters'][_0x11b341[_0x55a7be(0x306)]]=new CharacterMemory(_0x11b341,_0x11b341[_0x55a7be(0x295)]['slice']()),this[_0x55a7be(0x429)][_0x11b341['index']]=new CharacterMemory(_0x11b341,_0x11b341[_0x55a7be(0x295)][_0x55a7be(0x428)]())),this[_0x55a7be(0x333)]();}else{if(_0x54d542[_0x55a7be(0x201)]==_0x55a7be(0x2c2)||_0x54d542[_0x55a7be(0x201)]==_0x55a7be(0x44e)){if(_0x54d542[_0x55a7be(0x3fd)][_0x55a7be(0x429)]){let _0x220136=![];Object[_0x55a7be(0x263)](_0x54d542[_0x55a7be(0x3fd)]['knowncharacters'])['forEach'](function(_0x1835b6){const _0x81e27f=_0x55a7be,_0x236708=_0x1835b6[_0x81e27f(0x3ec)],_0x4c0d2a=_0x1835b6['lastseen'];if((!_0x35d73a[_0x81e27f(0x4aa)][_0x236708[_0x81e27f(0x306)]]||_0x35d73a[_0x81e27f(0x4aa)][_0x236708[_0x81e27f(0x306)]][_0x81e27f(0x2f6)]<_0x1835b6['time'])&&_0x236708['pc']!==_0x35d73a['pc']){const _0x10eeac=new CharacterMemory(_0x236708,_0x4c0d2a);_0x35d73a[_0x81e27f(0x4aa)][_0x236708['index']]=_0x10eeac;if(_0x35d73a[_0x81e27f(0x3c7)]['name']==_0x35d73a[_0x81e27f(0x28b)][0x0][_0x81e27f(0x41d)])_0x220136=!![];}}),_0x220136&&_0x35d73a[_0x55a7be(0x333)]();}else console['log'](_0x55a7be(0x2bf));}}}}['getrange'](_0x5d96c8=this[_0x1a99ef(0x375)]){const _0xcdff6=_0x1a99ef;let _0x41bf24=super[_0xcdff6(0x398)](_0x5d96c8);return _0x5d96c8[_0xcdff6(0x3fe)]==!![]&&_0x5d96c8['number']<0x2&&(this['primaryitem']['name']==this['unarmed'][_0xcdff6(0x41d)]||this[_0xcdff6(0x34b)][_0xcdff6(0x41d)]==this[_0xcdff6(0x44c)][_0xcdff6(0x41d)])&&(_0x41bf24=1.9),_0x5d96c8[_0xcdff6(0x3f4)]&&!this[_0xcdff6(0x3dc)][_0x5d96c8['ammotype']]&&(_0x41bf24=0x0),_0x41bf24;}}class Human extends enemy{constructor(_0x487d0a,_0x896119,_0x493514,_0x5c7a05){super(_0x487d0a,_0x896119,statblocks['Goblin'],0x4,[0x4,0x1,0x1],![],'@',_0x493514,0xa,[],_0x5c7a05,[spot,attackofop]);}[_0x1a99ef(0x347)](){const _0x30642e=_0x1a99ef,[_0x5569da,_0x41ba6a]=this[_0x30642e(0x295)],_0x30f5be=this;let _0x451f05=[],_0x26adaa=[],_0x1244fa=new Set();_0x26adaa['push'](newgrid[_0x5569da][_0x41ba6a]);let _0x55734d=0x0;for(let _0x1d5d16=0x0;_0x1d5d16<this[_0x30642e(0x400)][_0x30642e(0x2e1)];_0x1d5d16++){const _0xadd10d=this[_0x30642e(0x400)][_0x1d5d16];_0xadd10d[_0x30642e(0x24d)](_0x30f5be);}while(_0x26adaa[_0x30642e(0x2e1)]>0x0&&_0x55734d<0x3e8){_0x55734d++;const _0x504d8f=_0x26adaa[_0x30642e(0x2ed)](),[_0x3c21d5,_0x5b5e87]=_0x504d8f[_0x30642e(0x295)];if(drawLine3D([_0x5569da,_0x41ba6a,newgrid[_0x5569da][_0x41ba6a][_0x30642e(0x439)]+0x1],[_0x3c21d5,_0x5b5e87,newgrid[_0x3c21d5][_0x5b5e87][_0x30642e(0x439)]])<0x1){const _0x58d7cb=_0x504d8f['pos'][0x0]+','+_0x504d8f['pos'][0x1];newgrid[_0x3c21d5][_0x5b5e87]['lightlevel']>0x0&&(_0x451f05[_0x30642e(0x23c)](_0x504d8f),_0x504d8f[_0x30642e(0x284)](_0x30f5be),_0x30f5be[_0x30642e(0x458)][_0x58d7cb]=turncounter);if(dist([_0x5569da,_0x41ba6a],[_0x3c21d5,_0x5b5e87])<enemysightrange)for(let _0x51ac44=_0x3c21d5-0x1;_0x51ac44<=_0x3c21d5+0x1;_0x51ac44++){for(let _0x2cbc7f=_0x5b5e87-0x1;_0x2cbc7f<=_0x5b5e87+0x1;_0x2cbc7f++){const _0x4d1e86=_0x51ac44+','+_0x2cbc7f;!_0x1244fa['has'](_0x4d1e86)&&newgrid[_0x51ac44]&&newgrid[_0x51ac44][_0x2cbc7f]&&(_0x1244fa['add'](_0x4d1e86),_0x26adaa[_0x30642e(0x23c)](newgrid[_0x51ac44][_0x2cbc7f]));}}}else{if(drawline([_0x5569da,_0x41ba6a],[_0x3c21d5,_0x5b5e87],!![]))for(let _0x7a7a95=_0x3c21d5-0x1;_0x7a7a95<=_0x3c21d5+0x1;_0x7a7a95++){for(let _0x23eb9f=_0x5b5e87-0x1;_0x23eb9f<=_0x5b5e87+0x1;_0x23eb9f++){const _0x483d63=_0x7a7a95+','+_0x23eb9f;!_0x1244fa['has'](_0x483d63)&&newgrid[_0x7a7a95]&&newgrid[_0x7a7a95][_0x23eb9f]&&(_0x1244fa[_0x30642e(0x2ea)](_0x483d63),_0x26adaa['push'](newgrid[_0x7a7a95][_0x23eb9f]));}}}}this[_0x30642e(0x400)]=_0x451f05;}}class Bandit extends Human{constructor(_0x3d276d){const _0xa80b6=_0x1a99ef;super(_0x3d276d,_0xa80b6(0x441),[0x40,0x40,0x20],[]),this[_0xa80b6(0x2be)]=new Torch(0x19);}}class Goblin extends enemy{constructor(_0x1d5620,_0x2d2252,_0x38e640,_0x294ab9){const _0x4a2c5c=_0x1a99ef;if(!_0x2d2252)_0x2d2252=_0x4a2c5c(0x4af);if(!_0x38e640)_0x38e640=[0x96,0x7d,0x0];if(!_0x294ab9){if(Math['random']()>0.5)_0x294ab9=[new Shiv()];else _0x294ab9=[new Club()];}super(_0x1d5620,_0x2d2252,statblocks[_0x4a2c5c(0x4af)],0x4,[0x5,0x1,0x1],![],'g',_0x38e640,0x8,[],_0x294ab9,[spot,attackofop,lightsensitive],darkattackpermute);}}class Goblin_Dagger extends Goblin{constructor(_0x5e2c6a){const _0x3f6cc4=_0x1a99ef;let _0x476541;Math[_0x3f6cc4(0x282)]()>0.5?_0x476541=new Dagger(0x1):_0x476541=new Javelin(0x1),super(_0x5e2c6a,_0x3f6cc4(0x4af),[0x96,0x7d,0x0],[_0x476541]);}}class Goblin_Swordsman extends Goblin{constructor(_0x3532fa){const _0x10b994=_0x1a99ef;let _0x4fc353=[];Math[_0x10b994(0x282)]()>0.5?_0x4fc353[_0x10b994(0x23c)](new Shortsword()):_0x4fc353[_0x10b994(0x23c)](new Scimitar());if(Math[_0x10b994(0x282)]()>0.5)_0x4fc353[_0x10b994(0x23c)](new Dagger(randomNumber(0x2,0x1)));super(_0x3532fa,_0x10b994(0x377),[0x96,0x7d,0x0],_0x4fc353);}}class Goblin_Spearman extends Goblin{constructor(_0x16baac){const _0x119eac=_0x1a99ef;super(_0x16baac,_0x119eac(0x248),[0x96,0x7d,0x0],[new Spear()]);}}class Hobgoblin extends Goblin{constructor(_0x387797){const _0x381093=_0x1a99ef;super(_0x387797,'Hobgoblin',[0x64,0xf,0xf],[]);if(Math[_0x381093(0x282)]()<0.25)this[_0x381093(0x375)]=new Longsword();else{if(Math['random']()<0.33)this['primaryitem']=new Longbow(),this[_0x381093(0x3dc)][_0x381093(0x342)]=0x5+Math[_0x381093(0x3de)](Math[_0x381093(0x282)]()*0x5);else Math['random']()<0.5?this[_0x381093(0x375)]=new Mace():this[_0x381093(0x375)]=new Battleaxe();}this[_0x381093(0x486)]+=0x7,this['hp']=this[_0x381093(0x486)];}}class Hobgoblin_Warlord extends Hobgoblin{constructor(_0x3d53ae){const _0x128ad4=_0x1a99ef;super(_0x3d53ae),this[_0x128ad4(0x41d)]=_0x128ad4(0x321),this[_0x128ad4(0x375)]=this[_0x128ad4(0x44c)],this['secondaryitem']=this[_0x128ad4(0x44c)],this[_0x128ad4(0x2be)]=this['unarmed'];let _0xd6cbf=[[Handaxe,Shield]];this[_0x128ad4(0x375)]=new _0xd6cbf[0x0][0x0](),this[_0x128ad4(0x2be)]=new _0xd6cbf[0x0][0x1](),this[_0x128ad4(0x486)]+=0x7,this['hp']=this[_0x128ad4(0x486)];let _0x35cee2=this[_0x128ad4(0x43c)];const _0x2302be=function(_0x340717,_0x7952bc){const _0x4e44ca=_0x128ad4,_0x1513e4=_0x35cee2[_0x4e44ca(0x455)](this),_0x4d8b21=dualwieldpermute[_0x4e44ca(0x455)](this);return _0x4d8b21(_0x1513e4(_0x340717,_0x7952bc),_0x7952bc);};this[_0x128ad4(0x43c)]=_0x2302be,this[_0x128ad4(0x2dc)][_0x128ad4(0x23c)](block);}}class Goblin_Longbow extends Goblin{constructor(_0x16788b){const _0x1521e8=_0x1a99ef;super(_0x16788b,_0x1521e8(0x288),[0x64,0x96,0x0],[]),this['ammunition']['Arrow']=randomNumber(0x5,0x2),this[_0x1521e8(0x375)]=new Longbow();}}class Goblin_Shortbow extends Goblin{constructor(_0x1f33aa){const _0x1e6098=_0x1a99ef;super(_0x1f33aa,_0x1e6098(0x288),[0x64,0x96,0x0],[]),this[_0x1e6098(0x3dc)][_0x1e6098(0x342)]=randomNumber(0x5,0x2),this['primaryitem']=new Shortbow();}}class Goblin_Wargmaster extends Goblin{constructor(_0x5a6d22){const _0x106f79=_0x1a99ef;let _0x3b3c5e;Math['random']()>0.5?_0x3b3c5e=new Dagger(0x1):_0x3b3c5e=new Javelin(0x1);super(_0x5a6d22,'Goblin',[0x96,0x7d,0x0],[_0x3b3c5e]);let _0x15ad02=new Warg_Tame(_0x5a6d22),_0x2e222c=new Leash();_0x15ad02['master']=this,_0x15ad02[_0x106f79(0x2f3)]=_0x2e222c,newgrid[_0x5a6d22[0x0]][_0x5a6d22[0x1]][_0x106f79(0x25c)](_0x15ad02),newgrid[_0x5a6d22[0x0]][_0x5a6d22[0x1]][_0x106f79(0x444)](_0x2e222c);}}class Goblin_Hivequeen extends Goblin{constructor(_0x5d443f){const _0x31e9ca=_0x1a99ef;super(_0x5d443f,_0x31e9ca(0x2cb),[0x80,0x80,0x80],[new Athame(0x1)]),this['ac']=0xc,this[_0x31e9ca(0x486)]*=0x3,this['hp']=this[_0x31e9ca(0x486)],this[_0x31e9ca(0x236)]=-0x3,this[_0x31e9ca(0x2be)]=new Light('Glowing\x20Jade','.',[0.6,0.4,0.6]),this['offhanditem'][_0x31e9ca(0x2df)]=[new lightsource(null,[0x100,0xa4,0x100],[0x1,0x1,0x1],0x2)],this['deathsound']=soundeffects['deathshriek'];}[_0x1a99ef(0x224)](_0x307b86){const _0x42c860=_0x1a99ef;super[_0x42c860(0x224)](_0x307b86);if(this['dead']==!![])return;this[_0x42c860(0x246)]();}['Shriek'](){const _0x4c389a=_0x1a99ef;if(turncounter-this[_0x4c389a(0x236)]<0x3)return;this[_0x4c389a(0x236)]=turncounter;let _0x56f1c2=this['color'];const [_0x30c2a0,_0x28478f]=this[_0x4c389a(0x295)];let _0xd6a972=new Sound([_0x30c2a0,_0x28478f],0x10,this,_0x4c389a(0x246),soundeffects[_0x4c389a(0x212)]);hear(_0xd6a972,0x10,0x0,[0x6,0x4,0x6]),adduilabel(_0x4c389a(0x246),this['pos'],_0x56f1c2,0x1,!![]);let _0xe05e44=0xa;for(let _0x707795=_0x30c2a0-_0xe05e44;_0x707795<_0x30c2a0+_0xe05e44;_0x707795++){for(let _0x3c63ad=_0x28478f-_0xe05e44;_0x3c63ad<_0x28478f+_0xe05e44;_0x3c63ad++){newgrid[_0x707795]&&newgrid[_0x707795][_0x3c63ad]&&(dist([_0x30c2a0,_0x28478f],[_0x707795,_0x3c63ad])<_0xe05e44&&(newgrid[_0x707795][_0x3c63ad]['objects']['length']>0x0&&(Math['random']()>0.5&&newgrid[_0x707795][_0x3c63ad][_0x4c389a(0x312)][0x0][_0x4c389a(0x41d)]==_0x4c389a(0x355)&&newgrid[_0x707795][_0x3c63ad][_0x4c389a(0x312)][0x0][_0x4c389a(0x224)](0x1)),newgrid[_0x707795][_0x3c63ad][_0x4c389a(0x3ec)]!==null&&newgrid[_0x707795][_0x3c63ad][_0x4c389a(0x3ec)]['pc']!==this['pc']&&addconditiondynamic(conditions[_0x4c389a(0x488)],!![],newgrid[_0x707795][_0x3c63ad]['character'])()));}}}[_0x1a99ef(0x1fd)](){const _0x4d2534=_0x1a99ef,[_0x319a5b,_0x16aa33]=this['pos'];super[_0x4d2534(0x1fd)]();for(let _0x2842fd=_0x319a5b-0x19;_0x2842fd<_0x319a5b+0x19;_0x2842fd++){for(let _0x22f31a=_0x16aa33-0x19;_0x22f31a<_0x16aa33+0x19;_0x22f31a++){if(newgrid[_0x2842fd]&&newgrid[_0x2842fd][_0x22f31a]){const _0x319ea9=newgrid[_0x2842fd][_0x22f31a]['character'];_0x319ea9!=null&&(_0x319ea9 instanceof Goblin||_0x319ea9 instanceof Ogre||_0x319ea9 instanceof Giant)&&(_0x319ea9['pc']=Math[_0x4d2534(0x37a)](Math[_0x4d2534(0x282)]()*0x3e8)+0x2);}}}won=!![];}}class Necromancer extends enemy{constructor(_0x497fdc){const _0xa4d86e=_0x1a99ef;super(_0x497fdc,_0xa4d86e(0x2ec),[0x0,0x0,0x0],0x10,[0x4,0x1,0x1],0x3,'@',[0x100,0x100,0x100],0xa,[],[new Athame()],[spot,attackofop]);}[_0x1a99ef(0x224)](_0x21b711){const _0x1709d0=_0x1a99ef;super['damage'](_0x21b711),this['dead']!==!![]&&this[_0x1709d0(0x34f)]();}[_0x1a99ef(0x34f)](){const _0x31e0a5=_0x1a99ef,[_0x57cae7,_0x13c471]=this[_0x31e0a5(0x295)],_0x480c44=0x5;for(let _0x3c2023=_0x57cae7-_0x480c44;_0x3c2023<_0x57cae7+_0x480c44;_0x3c2023++){for(let _0x439fc2=_0x13c471-_0x480c44;_0x439fc2<_0x13c471+_0x480c44;_0x439fc2++){if(newgrid[_0x3c2023]&&newgrid[_0x3c2023][_0x439fc2]&&newgrid[_0x3c2023][_0x439fc2][_0x31e0a5(0x312)]['length']>0x0){const _0x490de8=newgrid[_0x3c2023][_0x439fc2][_0x31e0a5(0x312)][0x0];_0x490de8 instanceof corpse&&(!_0x490de8[_0x31e0a5(0x235)]&&!_0x490de8['burnt']&&(_0x490de8[_0x31e0a5(0x48c)](),newgrid[_0x3c2023][_0x439fc2]['addCharacter'](new Zombie([_0x3c2023,_0x439fc2]))));}}}}}class Zombie extends enemy{constructor(_0x409af6){super(_0x409af6,'Zombie',[0x0,0x0,0x0],0x8,[0x3,0x1,0x0],0x3,'z',[0x40,0x80,0x20],0xa,[],[],[]);}}class ElderSpider extends enemy{constructor(_0x49b5e1){const _0xf1f52a=_0x1a99ef;super(_0x49b5e1,_0xf1f52a(0x4cd),[0x0,0x2,0x0],0x12,[0x5,0x1,0x1],0x2,'S',[0x30,0x0,0x10],0xe,[],[],[spot,attackofop]),this[_0xf1f52a(0x375)][_0xf1f52a(0x3d4)]=conditionattackpermute(conditions['Poisoned']),this[_0xf1f52a(0x34b)][_0xf1f52a(0x41d)]=_0xf1f52a(0x3c1),this[_0xf1f52a(0x34b)]['ammotype']=_0xf1f52a(0x3c1),this[_0xf1f52a(0x3dc)][_0xf1f52a(0x3c1)]=0xa,this['secondaryitem'][_0xf1f52a(0x2fc)]=0x3,this[_0xf1f52a(0x34b)][_0xf1f52a(0x47f)]=0xa,this[_0xf1f52a(0x34b)]['specialeffect']=function(_0xe8cc40,_0x24c417){const _0x2c9f54=_0xf1f52a,[_0xc566b5,_0x4643dc]=_0x24c417,_0x99b8df=function(){const _0x1a4512=_0x4a83;newgrid[_0xc566b5][_0x4643dc][_0x1a4512(0x444)](new Spiderweb()),newgrid[_0xc566b5][_0x4643dc][_0x1a4512(0x444)](new Spiderweb()),newgrid[_0xc566b5][_0x4643dc][_0x1a4512(0x444)](new Spiderweb());};return _0xe8cc40[_0x2c9f54(0x2a7)][_0x2c9f54(0x23c)](_0x99b8df),_0xe8cc40[_0x2c9f54(0x38a)][_0x2c9f54(0x23c)](_0x99b8df),_0xe8cc40;};}}class GiantSpider extends enemy{constructor(_0xf9d948){const _0x30eb4a=_0x1a99ef;super(_0xf9d948,_0x30eb4a(0x2e5),[0x0,0x0,0x0],0x9,[0x5,0x1,0x1],0x2,'s',[0x18,0x18,0x18],0xa,[],[],[spot,attackofop]),this[_0x30eb4a(0x375)]['specialeffect']=conditionattackpermute(conditions[_0x30eb4a(0x24c)]),this[_0x30eb4a(0x34b)][_0x30eb4a(0x41d)]=_0x30eb4a(0x3c1),this['secondaryitem'][_0x30eb4a(0x3f4)]=_0x30eb4a(0x3c1),this[_0x30eb4a(0x3dc)]['Web']=0x1,this[_0x30eb4a(0x34b)][_0x30eb4a(0x2fc)]=0x3,this[_0x30eb4a(0x34b)][_0x30eb4a(0x47f)]=0x5,this[_0x30eb4a(0x34b)][_0x30eb4a(0x3d4)]=function(_0x49f788,_0x490504){const _0x130cb5=_0x30eb4a,[_0xcf6885,_0x1b628f]=_0x490504,_0x241124=function(){const _0x202a0a=_0x4a83;newgrid[_0xcf6885][_0x1b628f][_0x202a0a(0x444)](new Spiderweb()),newgrid[_0xcf6885][_0x1b628f][_0x202a0a(0x444)](new Spiderweb()),newgrid[_0xcf6885][_0x1b628f][_0x202a0a(0x444)](new Spiderweb());};return _0x49f788[_0x130cb5(0x2a7)][_0x130cb5(0x23c)](_0x241124),_0x49f788['onmisseffects']['push'](_0x241124),_0x49f788;};}}class SpiderBroodMother extends enemy{constructor(_0xbc1e59){const _0x50e8fb=_0x1a99ef;super(_0xbc1e59,_0x50e8fb(0x406),[0x0,0x0,0x0],0x9,[0x5,0x1,0x1],0x2,'s',[0x40,0x18,0x40],0xa,[],[],[spot,attackofop]),this[_0x50e8fb(0x34b)][_0x50e8fb(0x41d)]=_0x50e8fb(0x3c1),this[_0x50e8fb(0x34b)]['ammotype']='Web',this[_0x50e8fb(0x3dc)][_0x50e8fb(0x3c1)]=0x1,this['secondaryitem'][_0x50e8fb(0x2fc)]=0x3,this[_0x50e8fb(0x34b)]['range']=0x5,this['secondaryitem'][_0x50e8fb(0x3d4)]=function(_0x3b6666,_0xa3c82a){const _0xac0834=_0x50e8fb,[_0x4cbd2d,_0x295a6b]=_0xa3c82a,_0x517395=function(){const _0x34982b=_0x4a83;newgrid[_0x4cbd2d][_0x295a6b][_0x34982b(0x444)](new Spiderweb()),newgrid[_0x4cbd2d][_0x295a6b][_0x34982b(0x444)](new Spiderweb()),newgrid[_0x4cbd2d][_0x295a6b][_0x34982b(0x444)](new Spiderweb());};return _0x3b6666[_0xac0834(0x2a7)][_0xac0834(0x23c)](_0x517395),_0x3b6666[_0xac0834(0x38a)][_0xac0834(0x23c)](_0x517395),_0x3b6666;};}[_0x1a99ef(0x1fd)](){const _0x1cfe3d=_0x1a99ef,[_0x49e72b,_0x432946]=this[_0x1cfe3d(0x295)];for(let _0x59883c=0x0;_0x59883c<0x4;_0x59883c++){newgrid[_0x49e72b][_0x432946][_0x1cfe3d(0x25c)](new Spiderling([_0x49e72b,_0x432946]));}super[_0x1cfe3d(0x1fd)]();}}class Spiderling extends enemy{constructor(_0x555618){const _0x414755=_0x1a99ef;super(_0x555618,_0x414755(0x4d0),[0x0,0x0,0x0],0x3,[0x3,0x1,0x1],0x2,'s',[0x30,0x30,0x30],0x8,[],[],[spot,attackofop]);}}class Ogre extends enemy{constructor(_0x4477ff){const _0x21ac74=_0x1a99ef;super(_0x4477ff,_0x21ac74(0x460),[0x3,0x0,0x4],0xc,[0x3,0x1,0x1],![],'o',[0x96,0x7d,0x0],0x8,[],[new Warhammer()],[spot,attackofop],darkattackpermute),this['deathsound']=soundeffects['ogredeath'],this['large']=!![];}}class Giant extends enemy{constructor(_0xa6ef42){const _0x4dc22f=_0x1a99ef;super(_0xa6ef42,'Giant',[0x3,0x0,0x4],0x18,[0x3,0x1,0x1],![],'G',[0x96,0x7d,0x0],0x8,[],[new Polehammer()],[spot,attackofop],darkattackpermute);if(Math[_0x4dc22f(0x282)]()>0.33){if(Math['random']()>0.5)this[_0x4dc22f(0x375)]=new Halberd();else this[_0x4dc22f(0x375)]=new Greatsword();}this[_0x4dc22f(0x2fb)]=soundeffects[_0x4dc22f(0x1e6)],this[_0x4dc22f(0x3f7)]=!![];}}class Skulker extends enemy{constructor(_0xa85a3){const _0x261ee7=_0x1a99ef;super(_0xa85a3,_0x261ee7(0x4b7),[0x0,0x2,0x0],0x5,[0xa,0x1,0x1],![],'s',[0x20,0x20,0x20],0xc,[],[new Bolas(randomNumber(0x3,0x1))],[spot,attackofop,lightsensitive],darkattackpermute),this[_0x261ee7(0x34b)]=new Kukri();}}class Wolf extends enemy{constructor(_0x75eb9b){const _0x26429f=_0x1a99ef;super(_0x75eb9b,_0x26429f(0x31d),[0x0,0x0,0x0],0x5,[0x8,0x2,0x1],0x2,'w',[0x40,0x40,0x40],0x8,[],[new Dagger()],[spot,attackofop]);}}class Warg extends enemy{constructor(_0x2a0077){super(_0x2a0077,'Warg',[0x0,0x0,0x0],0x5,[0x8,0x1,0x1],0x2,'w',[0x60,0x40,0x40],0x8,[],[],[spot,attackofop]);}}class Warg_Tame extends enemy{constructor(_0x2ff796){const _0x89f071=_0x1a99ef;super(_0x2ff796,_0x89f071(0x498),[0x0,0x0,0x0],0x5,[0x8,0x1,0x1],![],'w',[0x60,0x40,0x40],0x8,[],[],[spot,attackofop]);}}class Carrion_Insect extends enemy{constructor(_0xd4e6cd){const _0xf9720a=_0x1a99ef;super(_0xd4e6cd,_0xf9720a(0x349),[0x0,0x0,0x0],0x5,[0x8,0x2,0x1],0x2,'c',[0x80,0x80,0x80],0x8,[],[],[spot,attackofop]);}}class State{constructor(_0x192dae,_0x479a6e,_0xaf8d3d,_0x451988){const _0x340957=_0x1a99ef;this[_0x340957(0x41d)]=_0x192dae,this[_0x340957(0x3e6)]=_0x479a6e,this[_0x340957(0x427)]=_0xaf8d3d||function(){return 0x0;},this[_0x340957(0x452)]=[];if(_0x451988)this['actions']=_0x451988[_0x340957(0x428)]();}}class CharacterMemory{constructor(_0x1bee2f,_0x258716){const _0x3b0d4a=_0x1a99ef;this[_0x3b0d4a(0x3ec)]=_0x1bee2f,this['lastseen']=_0x258716[_0x3b0d4a(0x428)](),this['time']=turncounter;}[_0x1a99ef(0x337)](){const _0x46d72e=_0x1a99ef;return turncounter-this[_0x46d72e(0x2f6)];}}class Statblock{constructor(_0x17daba,_0x3c0858,_0x2f7a16){const _0x3e8ff7=_0x1a99ef;this['strength']=_0x17daba,this[_0x3e8ff7(0x41e)]=_0x3c0858,this[_0x3e8ff7(0x41f)]=_0x2f7a16;}}class lightsource{constructor(_0x15055c,_0x4ac798,_0x5a362c,_0x3fcaef){const _0x4fb819=_0x1a99ef;this[_0x4fb819(0x295)]=_0x15055c,this[_0x4fb819(0x40e)]=_0x4ac798,this[_0x4fb819(0x3d3)]=_0x5a362c,this[_0x4fb819(0x3cb)]=_0x3fcaef||0x2;}}class uielement{constructor(_0x3fc7a7,_0x57bbb5,_0x91420e,_0x46cf14,_0x55a88f,_0x393312,_0x43ed12){const _0x910cb0=_0x1a99ef;this['symbol']=_0x3fc7a7||'',this[_0x910cb0(0x40e)]=_0x57bbb5,this['pos']=_0x91420e,this[_0x910cb0(0x309)]=_0x46cf14||![],!this[_0x910cb0(0x1f5)]&&(this['symbol']='$'),this['ui']=_0x55a88f||![],this[_0x910cb0(0x1e5)]=_0x393312||null,this[_0x910cb0(0x457)]=_0x43ed12;}}class PriorityQueue{constructor(_0x3d2989){const _0x1a25a1=_0x1a99ef;this[_0x1a25a1(0x3af)]=[],this['comparator']=_0x3d2989;}[_0x1a99ef(0x2aa)](_0x5717b2){const _0xe447fb=_0x1a99ef;let _0x557eb5=0x0,_0xa5ff11=this[_0xe447fb(0x3af)]['length'];while(_0x557eb5<_0xa5ff11){let _0x1cae73=Math[_0xe447fb(0x1f4)]((_0x557eb5+_0xa5ff11)/0x2);this[_0xe447fb(0x2ad)](this[_0xe447fb(0x3af)][_0x1cae73],_0x5717b2)<0x0?_0x557eb5=_0x1cae73+0x1:_0xa5ff11=_0x1cae73;}this[_0xe447fb(0x3af)][_0xe447fb(0x358)](_0x557eb5,0x0,_0x5717b2);}[_0x1a99ef(0x39d)](){const _0x35f3c7=_0x1a99ef;return this[_0x35f3c7(0x3af)][_0x35f3c7(0x2ed)]();}['isEmpty'](){const _0x24e736=_0x1a99ef;return this['array'][_0x24e736(0x2e1)]===0x0;}}class condition{constructor(_0x4ec450,_0x18507a,_0x49e843,_0x103969,_0x226a97,_0x366961,_0x57f88f){const _0x15788e=_0x1a99ef;this[_0x15788e(0x41d)]=_0x4ec450,this['starteffect']=_0x18507a||(()=>{}),this['turneffect']=_0x49e843||(()=>{}),this[_0x15788e(0x28a)]=_0x103969,this[_0x15788e(0x328)]=_0x226a97,this['character']=_0x57f88f||null,this[_0x15788e(0x341)]=_0x366961;}}class trait{constructor(_0x3e1f05,_0x168cd3,_0x52a9b5,_0x53ac6f,_0x9df5bb,_0x3763e2){const _0x28dc22=_0x1a99ef;this[_0x28dc22(0x41d)]=_0x3e1f05,this['trigger']=_0x168cd3,this['effect']=_0x52a9b5,this['character']=_0x3763e2||null,this[_0x28dc22(0x258)]=_0x53ac6f||![],this[_0x28dc22(0x476)]=_0x9df5bb||![];}}class trigger{constructor(_0x390b27,_0x422350,_0x7723dd){const _0x4daa35=_0x1a99ef;this['isactive']=_0x390b27,this[_0x4daa35(0x2e2)]=_0x422350,this['cb']=_0x7723dd;}}class action{constructor(_0x1388bf,_0x11126d,_0x13eba3,_0x682d11,_0x417ef9,_0x19518d,_0x3b0696,_0x5a713e,_0x1e0fe8,_0x17e86d){const _0x15034e=_0x1a99ef;this[_0x15034e(0x41d)]=_0x1388bf,this['target']=_0x417ef9[_0x15034e(0x428)](),this['func']=_0x11126d,this[_0x15034e(0x3ec)]=_0x19518d,this['cost']=_0x13eba3[_0x15034e(0x428)](),this[_0x15034e(0x47f)]=_0x682d11||1.9,this[_0x15034e(0x295)]=_0x3b0696||null,this[_0x15034e(0x3b8)]=[];if(_0x5a713e)this[_0x15034e(0x3b8)]=_0x5a713e[_0x15034e(0x428)]();this[_0x15034e(0x338)]=_0x1e0fe8,this[_0x15034e(0x26b)]=_0x17e86d||0x1,this[_0x15034e(0x3e1)]=!![];}}class Move extends action{constructor(_0x18026f,_0x215614,_0x23563b,_0xf18fb7,_0xf259e5,_0x329842,_0x2f6461,_0x29d0b3){const _0x5cb0d1=_0x1a99ef;super(_0x18026f,_0x215614,_0x23563b,_0xf18fb7,_0xf259e5,_0x329842,_0x2f6461,_0x29d0b3);const [_0x3945d0,_0x7d9ecc]=this[_0x5cb0d1(0x310)];this['cost'][0x0]=newgrid[_0x3945d0][_0x7d9ecc]['moveCost'];if(this[_0x5cb0d1(0x295)]&&this[_0x5cb0d1(0x3ec)]&&this['target']){checkforaoomove(this['pos'],this[_0x5cb0d1(0x310)],this[_0x5cb0d1(0x3ec)])&&this[_0x5cb0d1(0x3b8)][_0x5cb0d1(0x23c)]('!');const _0x21869b=newgrid[_0x3945d0][_0x7d9ecc][_0x5cb0d1(0x4a6)](_0x329842['pc']);_0x21869b[_0x5cb0d1(0x491)](_0xb13f30=>_0xb13f30>0x0)&&this[_0x5cb0d1(0x3b8)][_0x5cb0d1(0x23c)]('!');}this[_0x5cb0d1(0x26b)]=0x6;if(this[_0x5cb0d1(0x3ec)][_0x5cb0d1(0x3c7)]&&this[_0x5cb0d1(0x3ec)]['state'][_0x5cb0d1(0x41d)]==this[_0x5cb0d1(0x3ec)][_0x5cb0d1(0x28b)][0x0][_0x5cb0d1(0x41d)]){}this[_0x5cb0d1(0x338)]=soundeffects[_0x5cb0d1(0x39f)];if(newgrid[_0x3945d0][_0x7d9ecc]['absorbtionBase']==materials[_0x5cb0d1(0x334)])this[_0x5cb0d1(0x338)]=soundeffects['footsteptap'];_0x329842[_0x5cb0d1(0x3f7)]==!![]&&(this[_0x5cb0d1(0x338)]=soundeffects[_0x5cb0d1(0x2e0)],this[_0x5cb0d1(0x26b)]=0xc);}}class Sneak extends Move{constructor(_0x308703,_0x424664,_0x3d0359,_0x3394d5,_0xe74d0a,_0x2c03e2,_0x544b5f,_0xd03b23){const _0x271962=_0x1a99ef;super(_0x308703,_0x424664,_0x3d0359,_0x3394d5,_0xe74d0a,_0x2c03e2,_0x544b5f,_0xd03b23),this[_0x271962(0x26b)]=0x1;}}class Fall extends action{constructor(_0x582b0b,_0x2d15fe,_0x57a2a1){const _0xaaad1=_0x1a99ef;super(_0xaaad1(0x426),movefunc,[0x0,0x0,0x0],0x1,_0x582b0b,_0x2d15fe,_0x57a2a1),this[_0xaaad1(0x3e1)]=!![],this[_0xaaad1(0x41b)]=function(){const _0xea6330=_0xaaad1,[_0x2925bd,_0x334d36]=_0x582b0b;if(newgrid[_0x2925bd][_0x334d36]['character'])newgrid[_0x2925bd][_0x334d36]['character'][_0xea6330(0x224)](0x1);let _0x53e937=!![];if(movefunc[_0xea6330(0x455)](this)(!![])===![])_0x53e937=![],_0x2d15fe[_0xea6330(0x224)](0x1);else{if(newgrid[_0x2925bd][_0x334d36][_0xea6330(0x315)]>0x1)addconditiondynamic(conditions[_0xea6330(0x469)],!![],_0x2d15fe)();}newgrid[_0x2925bd][_0x334d36][_0xea6330(0x312)][_0xea6330(0x2e1)]>0x0&&newgrid[_0x2925bd][_0x334d36][_0xea6330(0x312)][_0xea6330(0x348)](_0x12de52=>_0x12de52[_0xea6330(0x224)](0x1));};}}class Attack extends action{constructor(_0x37004f,_0x232718,_0x379fda,_0x99ea1c,_0x710938,_0x316172,_0x1b0f33,_0x9e0a99){const _0x39914f=_0x1a99ef;super(_0x37004f,_0x232718,_0x379fda,_0x99ea1c,_0x710938,_0x316172,_0x1b0f33,_0x9e0a99);this['character'][_0x39914f(0x375)]['reloading']==!![]&&(this[_0x39914f(0x302)][0x1]=0x2);const [_0xe7c23f,_0x4b8f4b]=this[_0x39914f(0x310)]['slice']();this[_0x39914f(0x295)]&&this[_0x39914f(0x3ec)]&&this['target']&&(checkforaooattack(this['pos'],this[_0x39914f(0x310)],this['character'])&&this[_0x39914f(0x3b8)]['push'](_0x39914f(0x27e))),this[_0x39914f(0x26b)]=0xc;}}class Jump extends action{constructor(_0x170277,_0x2a5290,_0x29fa2c,_0x574d7c){const _0x24a862=_0x1a99ef,_0x2ff30a=chebyshevDistance(_0x2a5290,_0x574d7c);super(_0x24a862(0x23e),jumpfunc,[0x0,0x1,0x0],_0x170277,_0x2a5290,_0x29fa2c,_0x574d7c);const _0x38619e=newgrid[_0x2a5290[0x0]][_0x2a5290[0x1]]['elevation']-newgrid[_0x574d7c[0x0]][_0x574d7c[0x1]][_0x24a862(0x439)];if(_0x38619e<-0x1)this['warnings'][_0x24a862(0x23c)]('fall');}}class Kick extends Attack{constructor(_0x808441,_0x2293bd,_0x4ad3a7){const _0x2b4645=_0x1a99ef;super(_0x2b4645(0x2d5),null,[0x0,0x1,0x0],1.9,_0x808441,_0x2293bd,_0x4ad3a7);let _0x442516=this,_0x5578bb=function(_0x7f3bcf,_0x1196e8){const _0x23e38c=_0x2b4645;return attackfunc[_0x23e38c(0x4c6)](_0x442516,[_0x7f3bcf,new Foot()]);};this[_0x2b4645(0x41b)]=_0x5578bb;}}class Offhandattack extends Attack{constructor(_0x3db269,_0x305245,_0x32aac7){const _0x69d29a=_0x1a99ef;super(_0x69d29a(0x493),null,[0x0,0x0,0x0],_0x305245[_0x69d29a(0x2be)][_0x69d29a(0x47f)],_0x3db269,_0x305245,_0x32aac7);let _0x55a265=this,_0x3000cd=function(_0x1be588,_0x585759){const _0x5047c3=_0x69d29a;return attackfunc[_0x5047c3(0x4c6)](_0x55a265,[_0x1be588,_0x305245[_0x5047c3(0x2be)]]);};this['func']=_0x3000cd;}}function jumpfunc(){const _0x1c8bc1=_0x1a99ef;let _0x845778=this[_0x1c8bc1(0x3ec)];const _0xa36cdd=newgrid[_0x845778['pos'][0x0]][_0x845778[_0x1c8bc1(0x295)][0x1]],[_0x55ca14,_0x1f8b1d]=this[_0x1c8bc1(0x310)],_0x7cfe6f=newgrid[_0x55ca14][_0x1f8b1d]['elevation']-_0xa36cdd[_0x1c8bc1(0x439)];if(dist(_0x845778[_0x1c8bc1(0x295)],this[_0x1c8bc1(0x310)],![],!![])>this['range'])return![];let _0x3fc44d=bresenhamLine(_0x845778[_0x1c8bc1(0x295)],this[_0x1c8bc1(0x310)]);if(_0x3fc44d[_0x1c8bc1(0x2e1)]==0x0||_0x3fc44d[_0x1c8bc1(0x2e1)]==0x1)return![];for(let _0x578e86=0x0;_0x578e86<_0x3fc44d[_0x1c8bc1(0x2e1)];_0x578e86++){const _0x473f41=newgrid[_0x3fc44d[_0x578e86][0x0]][_0x3fc44d[_0x578e86][0x1]];if(_0x473f41[_0x1c8bc1(0x3b2)]==![]&&!_0x473f41['slope'])return![];}if(newgrid[_0x55ca14][_0x1f8b1d][_0x1c8bc1(0x3b2)]!==![]&&newgrid[_0x55ca14][_0x1f8b1d][_0x1c8bc1(0x3ec)]==null){newgrid[_0x845778[_0x1c8bc1(0x295)][0x0]][_0x845778[_0x1c8bc1(0x295)][0x1]][_0x1c8bc1(0x3ec)]=null,_0x845778[_0x1c8bc1(0x295)]=[_0x55ca14,_0x1f8b1d],newgrid[_0x55ca14][_0x1f8b1d][_0x1c8bc1(0x3ec)]=this['character'],removecondition(_0x845778,'Prone');if(_0x7cfe6f<-0x1){let _0x21bb6e=0x0,_0x150244=Math[_0x1c8bc1(0x1f4)](_0x7cfe6f/0x2)**0x2;for(let _0x53fe16=0x0;_0x53fe16<_0x150244;_0x53fe16++){_0x21bb6e+=randomNumber(0x3,0x1);}this[_0x1c8bc1(0x338)]=soundeffects[_0x1c8bc1(0x2e0)],this[_0x1c8bc1(0x26b)]=0xa,addconditiondynamic(conditions[_0x1c8bc1(0x469)],!![],_0x845778)(),this['character'][_0x1c8bc1(0x224)](_0x21bb6e);}return;}else{if(newgrid[_0x55ca14][_0x1f8b1d]['traversable']!==![]&&newgrid[_0x55ca14][_0x1f8b1d][_0x1c8bc1(0x3ec)]!==null){if(_0x7cfe6f<-0x1){newgrid[_0x845778[_0x1c8bc1(0x295)][0x0]][_0x845778[_0x1c8bc1(0x295)][0x1]][_0x1c8bc1(0x3ec)]=null,_0x845778[_0x1c8bc1(0x295)]=[_0x55ca14,_0x1f8b1d],newgrid[_0x55ca14][_0x1f8b1d][_0x1c8bc1(0x25c)](this[_0x1c8bc1(0x3ec)]),removecondition(_0x845778,'Prone');let _0xf2505a=0x0,_0x18a990=Math[_0x1c8bc1(0x1f4)](_0x7cfe6f/0x2)**0x2;for(let _0x865e48=0x0;_0x865e48<_0x18a990;_0x865e48++){_0xf2505a+=randomNumber(0x3,0x1);}this[_0x1c8bc1(0x338)]=soundeffects[_0x1c8bc1(0x2e0)],this['loudness']=0xa,addconditiondynamic(conditions[_0x1c8bc1(0x469)],!![],_0x845778)(),this['character']['damage'](_0xf2505a),newgrid[_0x55ca14][_0x1f8b1d][_0x1c8bc1(0x3ec)][_0x1c8bc1(0x224)](_0xf2505a);return;}}}return _0x845778[_0x1c8bc1(0x3a8)]=[],![];}class Get extends action{constructor(_0xb6b9d1,_0xa26f2d,_0x343b01,_0x361e17,_0x5d0347,_0x1eee2b,_0x3ab48d,_0x2addab,_0x53fe63,_0x11bc27){const _0x306244=_0x1a99ef;super(_0xb6b9d1,_0xa26f2d,_0x343b01,_0x361e17,_0x5d0347,_0x1eee2b,_0x3ab48d,_0x2addab,_0x53fe63,_0x11bc27),this[_0x306244(0x3e1)]=![];}}class endTurn extends action{constructor(_0x2d7d96,_0x3a033d,_0x2a54e9,_0x452694,_0x5d6738,_0x4652d2,_0x429581,_0x555b44){const _0x2993e9=_0x1a99ef;super(_0x2d7d96,_0x3a033d,_0x2a54e9,_0x452694,_0x5d6738,_0x4652d2,_0x429581,_0x555b44);if(this[_0x2993e9(0x295)]){const [_0x17b785,_0xa30078]=this[_0x2993e9(0x295)];newgrid[_0x17b785][_0xa30078][_0x2993e9(0x312)]['length']>0x0&&newgrid[_0x17b785][_0xa30078]['objects'][0x0]['burning']&&this['warnings'][_0x2993e9(0x23c)]('!');}}}class Tile{constructor(_0x2cb6b5,_0x6811e8,_0x116657,_0x987e64,_0x5899af,_0x513ebb,_0x4414fd){const _0x39fa46=_0x1a99ef;this[_0x39fa46(0x41d)],this[_0x39fa46(0x481)]=_0x6811e8,this[_0x39fa46(0x3b5)]=_0x116657,this[_0x39fa46(0x2de)]=![],this[_0x39fa46(0x2ba)]=[0x0,0x0,0x0],this[_0x39fa46(0x30d)]=0x0,this[_0x39fa46(0x312)]=[],this[_0x39fa46(0x3ec)]=null,this[_0x39fa46(0x3f9)]=[],this[_0x39fa46(0x3b2)]=_0x987e64,this[_0x39fa46(0x315)]=_0x5899af,this['baseMoveCost']=_0x5899af,this['pos']=_0x4414fd,this[_0x39fa46(0x24b)]=_0x513ebb,this[_0x39fa46(0x23f)]=0x0,this[_0x39fa46(0x318)]=[],this[_0x39fa46(0x35b)]=[],this[_0x39fa46(0x439)]=0x0;}['read'](_0x3bc568=![]){const _0xf099ca=_0x1a99ef,_0x5714f9=this[_0xf099ca(0x4cb)]();procgendebug&&(this['visible']=!![],this[_0xf099ca(0x2ba)]=[0x40,0x40,0x40]);const [_0x3a1877,_0x113dc2]=this['pos'];let _0x3a2668=this[_0xf099ca(0x2ba)][_0xf099ca(0x428)](),_0x415fa7=![];if((_0x5714f9>=0x1||_0x415fa7)&&this[_0xf099ca(0x3ec)]==null){let _0x105081=[0x0,0x0,0x0],_0x36b4fb=0x0;for(let _0x439df1=0x0;_0x439df1<0x8;_0x439df1++){let [_0x1e39bf,_0x2b5f2d]=directions[_0x439df1],[_0x5bce10,_0x465c8c]=[_0x3a1877+_0x1e39bf,_0x113dc2+_0x2b5f2d];if(!newgrid[_0x5bce10]||!newgrid[_0x5bce10][_0x465c8c])continue;if(newgrid[_0x5bce10][_0x465c8c][_0xf099ca(0x2de)]==![])continue;let _0x2728fb=newgrid[_0x5bce10][_0x465c8c]['light'];if(newgrid[_0x5bce10][_0x465c8c][_0xf099ca(0x4cb)]()<0x1){let _0x4368a2=_0x2728fb[0x0]+_0x2728fb[0x1]+_0x2728fb[0x2];_0x4368a2>_0x36b4fb&&(_0x105081[0x0]=_0x2728fb[0x0],_0x105081[0x1]=_0x2728fb[0x1],_0x105081[0x2]=_0x2728fb[0x2],_0x36b4fb=_0x4368a2);}}_0x3a2668=_0x105081;}let _0x4c9466=[0x0,0x0,0x0],_0x137268=[0x0,0x0,0x0],_0x4174ed=_0xf099ca(0x1eb),_0x4c2e31=0x1,_0x146d3a=0x1;_0x5714f9>=0x1&&(_0x4c2e31=0.25);if(this[_0xf099ca(0x2de)]!==![]){let _0x1f150a=0x0;for(let _0x1d3eca=0x0;_0x1d3eca<0x3;_0x1d3eca++){_0x4c9466[_0x1d3eca]=0x100*(Math[_0xf099ca(0x4bb)](_0x3a2668[_0x1d3eca]*this[_0xf099ca(0x481)][_0x1d3eca]*_0x4c2e31,0x0)*noisemap[_0x3a1877][_0x113dc2]/0x100)**(0x1/gamma),_0x137268[_0x1d3eca]=_0x146d3a*_0x4c9466[_0x1d3eca]/0x2,_0x1f150a+=_0x4c9466[_0x1d3eca];}if(_0x1f150a<memorytilebrightness*0x3){_0x1f150a=Math[_0xf099ca(0x4bb)](_0x1f150a,0.5);let _0x2361a1=memorytilebrightness*0x3/_0x1f150a;for(let _0x23b6d3=0x0;_0x23b6d3<0x3;_0x23b6d3++){_0x4c9466[_0x23b6d3]*=_0x2361a1;}}_0x4174ed=this[_0xf099ca(0x3b5)];}if(this['fluids']['length']>0x0&&this[_0xf099ca(0x2de)]!==![]){let _0x465b48=[0x1,0x1,0x1];this[_0xf099ca(0x35b)]['forEach'](function(_0x2be761){const _0x5616d9=_0xf099ca;_0x2be761[_0x5616d9(0x1f5)]&&(_0x4174ed=_0x2be761[_0x5616d9(0x1f5)]);if(_0x2be761['bgabsorbtion']!==null){let _0x5c9f69=0x1;if(_0x2be761[_0x5616d9(0x423)])_0x5c9f69=_0x2be761[_0x5616d9(0x423)];for(let _0x321672=0x0;_0x321672<_0x5c9f69;_0x321672++){_0x465b48=_0x465b48[_0x5616d9(0x4a9)]((_0x2594e9,_0x21cbd7)=>_0x2594e9*_0x2be761[_0x5616d9(0x239)][_0x21cbd7]);}}});for(let _0x40a2fe=0x0;_0x40a2fe<0x3;_0x40a2fe++){_0x4c9466[_0x40a2fe]=Math[_0xf099ca(0x4bb)](_0x4c9466[_0x40a2fe]*_0x465b48[_0x40a2fe],0x0),_0x137268[_0x40a2fe]=_0x4c9466[_0x40a2fe]/0x2;}}if(this['objects'][_0xf099ca(0x2e1)]>0x0&&this['visible']!==![]){const _0x20d00b=this[_0xf099ca(0x312)][0x0];_0x20d00b['symbol']&&(_0x4174ed=_0x20d00b['symbol']);if(_0x20d00b[_0xf099ca(0x2bc)])for(let _0x34db9c=0x0;_0x34db9c<0x3;_0x34db9c++){_0x4c9466[_0x34db9c]=0x100*(Math['max'](_0x3a2668[_0x34db9c]*_0x20d00b['absorbtion'][_0x34db9c],0x0)/0x100);}if(_0x20d00b[_0xf099ca(0x239)]!==null)for(let _0x4c3c5c=0x0;_0x4c3c5c<0x3;_0x4c3c5c++){_0x137268[_0x4c3c5c]=_0x3a2668[_0x4c3c5c]*_0x20d00b['bgabsorbtion'][_0x4c3c5c]*0.5;}}if(this[_0xf099ca(0x3ec)]!==null&&this[_0xf099ca(0x2de)]!==![]){const _0x3c42ae=this[_0xf099ca(0x3ec)];if(_0x3c42ae!==![]){let _0x5e13bd=takeav(newgrid[_0x3a1877][_0x113dc2]['light'])/0x100;_0x4c9466=_0x3c42ae[_0xf099ca(0x40e)][_0xf099ca(0x4a9)](_0x26b5f0=>Math[_0xf099ca(0x4bb)](_0x26b5f0/0x2,_0x5e13bd*_0x26b5f0)),_0x137268=_0x137268[_0xf099ca(0x4a9)](_0x368621=>_0x368621*0.75),_0x4174ed=_0x3c42ae['symbol'];}}this[_0xf099ca(0x2d8)]==!![]&&this[_0xf099ca(0x2de)]!==!![]&&(_0x4174ed=this[_0xf099ca(0x3b5)],_0x4c9466=[memorytilebrightness,memorytilebrightness,memorytilebrightness]);!this[_0xf099ca(0x2d8)]&&this[_0xf099ca(0x2de)]&&(this[_0xf099ca(0x2d8)]=!![]);if(this['uiElements'][_0xf099ca(0x2e1)]>0x0)for(let _0x58e5d2=0x0;_0x58e5d2<this[_0xf099ca(0x3f9)]['length'];_0x58e5d2++){const _0x4c1c74=this[_0xf099ca(0x3f9)][_0x58e5d2];if(_0x4c1c74[_0xf099ca(0x1e5)]){updatedlighting=!![];if(_0x4c1c74[_0xf099ca(0x1e5)][0x1]>=now)continue;if(_0x4c1c74['lifespan'][0x0]<now){updatedsomething=!![],this['uiElements']['splice'](_0x58e5d2,0x1),_0x58e5d2--;continue;}}if(_0x4c1c74[_0xf099ca(0x1f5)]==='$')for(let _0x417441=0x0;_0x417441<0x3;_0x417441++){_0x4c9466[_0x417441]+=_0x4c1c74[_0xf099ca(0x40e)][_0x417441]*0x100,_0x137268[_0x417441]+=_0x4c1c74[_0xf099ca(0x40e)][_0x417441]*0x80;}else{if(_0x4c1c74['symbol']==='^'){_0x4c1c74[_0xf099ca(0x1f5)]='B7',_0x4174ed=_0x4c1c74[_0xf099ca(0x1f5)];for(let _0x3a414f=0x0;_0x3a414f<0x3;_0x3a414f++){_0x4c9466[_0x3a414f]=_0x4c1c74[_0xf099ca(0x40e)][_0x3a414f];}}else{if(_0x4c1c74[_0xf099ca(0x1f5)]=='_')for(let _0x5ceb14=0x0;_0x5ceb14<0x3;_0x5ceb14++){_0x4c9466[_0x5ceb14]=_0x4c1c74[_0xf099ca(0x40e)][_0x5ceb14]*0x100,_0x137268[_0x5ceb14]=_0x4c1c74[_0xf099ca(0x40e)][_0x5ceb14]*0x100;}else{if(_0x4c1c74['symbol']==='\x20');else{_0x4174ed=_0x4c1c74['symbol'];for(let _0x262468=0x0;_0x262468<0x3;_0x262468++){_0x4c9466[_0x262468]=_0x4c1c74['color'][_0x262468];}}}}}!_0x4c1c74[_0xf099ca(0x1e5)]&&(_0x4c1c74[_0xf099ca(0x1e5)]=[],_0x4c1c74[_0xf099ca(0x1e5)][0x0]=0x0);}for(let _0x61c89a=0x0;_0x61c89a<0x3;_0x61c89a++){_0x4c9466[_0x61c89a]=Math['round'](_0x4c9466[_0x61c89a]*brightnessadjust),_0x137268[_0x61c89a]=Math['round'](_0x137268[_0x61c89a]*brightnessadjust);}if(_0x3bc568)return[_0x4c9466,_0x137268,_0x4174ed];if(_0x4174ed==_0xf099ca(0x1eb))return'<span\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20y\x20=\x20'+_0x3a1877+_0xf099ca(0x20e)+_0x113dc2+_0xf099ca(0x46f);const _0x255ff2='<span\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20y='+_0x3a1877+_0xf099ca(0x3b0)+_0x113dc2+_0xf099ca(0x391)+_0x4c9466+_0xf099ca(0x384)+_0x137268+_0xf099ca(0x2e4)+_0x4174ed+_0xf099ca(0x45e);return _0x255ff2;}[_0x1a99ef(0x255)](_0x53f730=![]){const _0x21ef30=_0x1a99ef,_0x4d60e1=this;let _0x12e54a=0x0;const _0x6a11ef=this[_0x21ef30(0x3ec)];let _0x26e032=![];for(let _0x284070=0x0;_0x284070<this[_0x21ef30(0x3f9)][_0x21ef30(0x2e1)];_0x284070++){let _0x4f9ef=this[_0x21ef30(0x3f9)][_0x284070];if(_0x4f9ef[_0x21ef30(0x3bc)]!==undefined){}_0x4f9ef[_0x21ef30(0x457)]&&adduilabel(_0x4f9ef[_0x21ef30(0x457)],cursorpos,_0x4f9ef['color'],0x1,![],![],![],!![]);if(_0x26e032)break;}if(_0x26e032)return;this['fluids'][_0x21ef30(0x2e1)]>0x0&&this[_0x21ef30(0x35b)][_0x21ef30(0x348)](function(_0x12a598){const _0x318113=_0x21ef30;_0x12e54a++,adduilabel(_0x12a598[_0x318113(0x41d)],_0x4d60e1[_0x318113(0x295)],[0x40,0x40,0x40],_0x12e54a);});this[_0x21ef30(0x312)]['length']>0x0&&this['objects'][_0x21ef30(0x348)](function(_0x42fc9e){const _0x5886e9=_0x21ef30;_0x12e54a++;let _0x24694d=adduilabel(_0x42fc9e[_0x5886e9(0x41d)],_0x4d60e1[_0x5886e9(0x295)],[0x40,0x40,0x40],_0x12e54a);if(_0x42fc9e instanceof Weapon){for(let _0x2da698=0x0;_0x2da698<_0x24694d['length'];_0x2da698++){let _0x189735=_0x24694d[_0x2da698];_0x189735[_0x5886e9(0x3bc)]=_0x4d60e1;}let _0x521c5a=[],_0x1bec84=0x0,_0xc82aae='1-'+_0x42fc9e['damagedie'][_0x5886e9(0x38d)]();_0x5b3d41(_0x5886e9(0x1fe)),_0xc82aae+='+'+activecharacternonindex[_0x5886e9(0x351)](_0x42fc9e),_0x5b3d41(_0x5886e9(0x299));_0x42fc9e[_0x5886e9(0x3fe)]&&(_0xc82aae+=_0x5886e9(0x32a),_0x5b3d41());_0x42fc9e['twohanded']&&(_0xc82aae+='(Two-handed)',_0x5b3d41());_0x42fc9e[_0x5886e9(0x23b)]==0x1&&(_0xc82aae+=_0x5886e9(0x26e),_0x5b3d41(_0x5886e9(0x22c)));_0x42fc9e[_0x5886e9(0x3d1)]&&(_0xc82aae+=_0x5886e9(0x2ee),_0x5b3d41('Can\x20be\x20wielded\x20with\x201\x20or\x202\x20hands'));_0x42fc9e['light']&&(_0xc82aae+=_0x5886e9(0x431),_0x5b3d41('Can\x20be\x20wielded\x20in\x20offhand'));_0x12e54a++;let _0x2fd324=adduilabel(_0xc82aae,_0x4d60e1['pos'],[0x40,0x40,0x40],_0x12e54a);for(let _0x9914a7=0x0;_0x9914a7<_0x2fd324['length'];_0x9914a7++){let _0x152ecf=_0x2fd324[_0x9914a7];_0x152ecf[_0x5886e9(0x3bc)]=_0x4d60e1;if(_0x521c5a[_0x9914a7])_0x152ecf[_0x5886e9(0x457)]=_0x521c5a[_0x9914a7];}function _0x5b3d41(_0x296ce7){const _0x810a5b=_0x5886e9;for(let _0xa02f5e=_0x1bec84;_0xa02f5e<_0xc82aae[_0x810a5b(0x2e1)];_0xa02f5e++){_0x521c5a[_0x810a5b(0x23c)](_0x296ce7);}_0x1bec84=_0xc82aae[_0x810a5b(0x2e1)];}}if(_0x42fc9e instanceof Shield){let _0x3bcee8=_0x5886e9(0x4ac)+activecharacternonindex[_0x5886e9(0x265)][0x0];_0x12e54a++,adduilabel(_0x3bcee8,_0x4d60e1[_0x5886e9(0x295)],[0x40,0x40,0x40],_0x12e54a);}if(_0x42fc9e[_0x5886e9(0x405)]){const _0x4ed997=_0x42fc9e[_0x5886e9(0x405)]();_0x12e54a++,adduilabel(_0x4ed997,_0x4d60e1['pos'],[0x100,0x100,0x100],_0x12e54a);}});if(_0x6a11ef!==null){const _0x2c003b=_0x6a11ef[_0x21ef30(0x41d)],_0x113091=_0x6a11ef['hp'],_0x9d5f24=_0x6a11ef[_0x21ef30(0x295)];let _0x295f72=_0x113091['toString'](),_0x3614b2=_0x6a11ef[_0x21ef30(0x486)],_0x41d8f9;_0x12e54a++,_0x41d8f9=adduilabel(_0x295f72+'/'+_0x3614b2,_0x9d5f24,_0x6a11ef[_0x21ef30(0x40e)],0x1);for(let _0x1d26cb=0x0;_0x1d26cb<_0x41d8f9[_0x21ef30(0x2e1)];_0x1d26cb++){let _0x473c65=_0x41d8f9[_0x1d26cb];_0x473c65[_0x21ef30(0x3bc)]=_0x4d60e1;}_0x12e54a++,_0x41d8f9=adduilabel(_0x2c003b,_0x9d5f24,_0x6a11ef['color'],_0x12e54a);for(let _0xe34e33=0x0;_0xe34e33<_0x41d8f9[_0x21ef30(0x2e1)];_0xe34e33++){let _0x1a8971=_0x41d8f9[_0xe34e33];_0x1a8971[_0x21ef30(0x3bc)]=_0x4d60e1;}for(let _0x217fb6=0x0;_0x217fb6<_0x6a11ef[_0x21ef30(0x37e)][_0x21ef30(0x2e1)];_0x217fb6++){_0x12e54a++;const _0x47e47=_0x6a11ef[_0x21ef30(0x37e)][_0x217fb6][_0x21ef30(0x41d)]+'('+_0x6a11ef[_0x21ef30(0x37e)][_0x217fb6][_0x21ef30(0x28a)][_0x21ef30(0x38d)]()+')';_0x41d8f9=adduilabel(_0x47e47,_0x9d5f24,_0x6a11ef['color'],_0x12e54a);for(let _0x2f8331=0x0;_0x2f8331<_0x41d8f9['length'];_0x2f8331++){let _0x44b611=_0x41d8f9[_0x2f8331];_0x44b611['redirect']=_0x4d60e1;}}const _0x5f07a3=[_0x6a11ef[_0x21ef30(0x375)],_0x6a11ef[_0x21ef30(0x34b)],_0x6a11ef[_0x21ef30(0x2be)]];for(let _0x5c06d9=0x0;_0x5c06d9<0x3;_0x5c06d9++){const _0x158b39=_0x5f07a3[_0x5c06d9][_0x21ef30(0x41d)];if(_0x158b39==_0x21ef30(0x2d9))continue;_0x12e54a++,_0x41d8f9=adduilabel(_0x158b39,_0x6a11ef['pos'],_0x6a11ef[_0x21ef30(0x40e)],_0x12e54a);for(let _0x50a586=0x0;_0x50a586<_0x41d8f9[_0x21ef30(0x2e1)];_0x50a586++){let _0x47f351=_0x41d8f9[_0x50a586];_0x47f351[_0x21ef30(0x3bc)]=_0x4d60e1;}}}}[_0x1a99ef(0x4cb)](_0x21d6a4=undefined,_0x4164af){const _0x50bea1=_0x1a99ef;if(_0x21d6a4!==undefined&&_0x21d6a4<this[_0x50bea1(0x439)])return 0x1;let _0x57e3fd=this['transparancy'];if(this[_0x50bea1(0x3ec)]!==null&&(_0x21d6a4==undefined||_0x21d6a4-0x1<=this['elevation'])){if(lackscondition(conditions[_0x50bea1(0x469)],this[_0x50bea1(0x3ec)]))_0x57e3fd=0.75;}else{if(this[_0x50bea1(0x312)][_0x50bea1(0x2e1)]>0x0){if(_0x4164af&&this[_0x50bea1(0x312)][0x0][_0x50bea1(0x41d)]=='Fortification'&&dist(_0x4164af,this[_0x50bea1(0x295)])<0x2){}else(_0x21d6a4==undefined||_0x21d6a4<=this['elevation']+0x1||this[_0x50bea1(0x312)][0x0]['traversable']==![])&&(_0x57e3fd-=this[_0x50bea1(0x312)][0x0]['opacity']);}}if(this[_0x50bea1(0x35b)][_0x50bea1(0x2e1)]>0x0)for(let _0x5abfe3=0x0;_0x5abfe3<this[_0x50bea1(0x35b)][_0x50bea1(0x2e1)];_0x5abfe3++){const _0x50fa56=this['fluids'][_0x5abfe3];let _0x42b3a8=0x1;if(_0x50fa56[_0x50bea1(0x423)])_0x42b3a8=_0x50fa56['thickness'];_0x57e3fd*=0x1-_0x50fa56[_0x50bea1(0x3e8)];}let _0x13c44f=0x1-_0x57e3fd;return _0x13c44f;}[_0x1a99ef(0x25c)](_0x5e87c5){const _0x4374ac=_0x1a99ef;if(this['character']==null&&this[_0x4374ac(0x3b2)]===!![])this[_0x4374ac(0x3ec)]=_0x5e87c5,_0x5e87c5['pos']=this['pos'][_0x4374ac(0x428)]();else{if(!_0x5e87c5[_0x4374ac(0x2ca)])_0x5e87c5[_0x4374ac(0x2ca)]=0x0;if(_0x5e87c5[_0x4374ac(0x2ca)]>0x32)return;_0x5e87c5[_0x4374ac(0x2ca)]++;const _0x22ca6b=shuffle(directions);let _0x38f945=[],[_0x38540f,_0x149739]=this['pos'];for(let _0xac2bc8=0x0;_0xac2bc8<_0x22ca6b['length'];_0xac2bc8++){const [_0x22772d,_0x27b84b]=_0x22ca6b[_0xac2bc8],[_0x8e4981,_0x3482ad]=[_0x38540f+_0x22772d,_0x149739+_0x27b84b];if(!newgrid[_0x8e4981]||!newgrid[_0x8e4981][_0x3482ad])continue;const _0x52f103=newgrid[_0x8e4981][_0x3482ad];_0x38f945['push'](_0x52f103);if(_0x52f103[_0x4374ac(0x3ec)]==null&&_0x52f103[_0x4374ac(0x3b2)]==!![]){_0x52f103[_0x4374ac(0x25c)](_0x5e87c5);return;}}_0x38f945[0x0][_0x4374ac(0x25c)](_0x5e87c5);}}['addObject'](_0x585188){const _0x6a201d=_0x1a99ef;if(_0x585188[_0x6a201d(0x21a)]<=0x0)return;if(_0x585188['number']!==undefined&&isNaN(_0x585188[_0x6a201d(0x21a)])){console[_0x6a201d(0x2b1)](_0x6a201d(0x240)),console['log'](_0x585188);return;}if(_0x585188 instanceof fluid){this[_0x6a201d(0x307)](_0x585188);return;}if(_0x585188[_0x6a201d(0x21a)]>0x1&&!(_0x585188 instanceof Ammunition)){_0x585188[_0x6a201d(0x41d)]=_0x585188[_0x6a201d(0x367)],_0x585188['number']--,this['addObject'](new _0x585188['constructor']()),this['addObject'](_0x585188);return;}else _0x585188[_0x6a201d(0x21a)]>0x1?_0x585188[_0x6a201d(0x41d)]=_0x585188[_0x6a201d(0x367)]+'('+_0x585188[_0x6a201d(0x21a)]+')':_0x585188[_0x6a201d(0x41d)]=_0x585188[_0x6a201d(0x367)];if(_0x585188[_0x6a201d(0x2ca)]>0x64)return;const _0x502031=this;let _0x17d28c=!![];(this[_0x6a201d(0x312)]['length']>0x0||this[_0x6a201d(0x3b2)]!==!![])&&(_0x17d28c=![]);_0x585188[_0x6a201d(0x3b2)]==![]&&this[_0x6a201d(0x3ec)]!==null&&(_0x17d28c=![]);if(_0x17d28c)_0x585188['iterations']=0x0,_0x585188[_0x6a201d(0x295)]=this[_0x6a201d(0x295)][_0x6a201d(0x428)](),this[_0x6a201d(0x312)][_0x6a201d(0x23c)](_0x585188),this[_0x6a201d(0x42c)](),_0x585188['initialize']();else{if(!_0x585188['iterations'])_0x585188[_0x6a201d(0x2ca)]=0x0;_0x585188[_0x6a201d(0x2ca)]++;const _0x735ffc=shuffle(directions);let _0x4a7166=[];for(let _0x2dc32b=0x0;_0x2dc32b<_0x735ffc[_0x6a201d(0x2e1)];_0x2dc32b++){const [_0x2c25f7,_0x42b81f]=_0x735ffc[_0x2dc32b]['map']((_0x574fed,_0x3edba7)=>_0x574fed+_0x502031[_0x6a201d(0x295)][_0x3edba7]);if(!newgrid[_0x2c25f7]||!newgrid[_0x2c25f7][_0x42b81f])continue;const _0x466ab7=newgrid[_0x2c25f7][_0x42b81f];if((_0x466ab7[_0x6a201d(0x3b2)]||_0x466ab7[_0x6a201d(0x4c5)]==!![])&&_0x466ab7[_0x6a201d(0x439)]<=this['elevation']){_0x4a7166['push'](_0x466ab7);if(_0x466ab7[_0x6a201d(0x312)][_0x6a201d(0x2e1)]==0x0){_0x466ab7[_0x6a201d(0x444)](_0x585188);break;}}_0x2dc32b==_0x735ffc[_0x6a201d(0x2e1)]-0x1&&_0x4a7166[_0x6a201d(0x2e1)]>0x0&&_0x4a7166[0x0]['addObject'](_0x585188);}}}[_0x1a99ef(0x4b3)](){const _0x2b94c6=_0x1a99ef;this[_0x2b94c6(0x312)]=[],this[_0x2b94c6(0x42c)]();}[_0x1a99ef(0x42c)](){const _0x53273d=_0x1a99ef,_0x7ebd9=this;this[_0x53273d(0x3b2)]=!![],this[_0x53273d(0x315)]=this[_0x53273d(0x2ef)];if(this['objects'][_0x53273d(0x2e1)]>0x0){const _0x13fe78=this[_0x53273d(0x312)][0x0];_0x13fe78[_0x53273d(0x3b2)]==![]&&(this['traversable']=![]),this['moveCost']+=_0x13fe78[_0x53273d(0x37b)],_0x13fe78[_0x53273d(0x295)]=this[_0x53273d(0x295)][_0x53273d(0x428)]();}this['fluids'][_0x53273d(0x2e1)]>0x0&&this[_0x53273d(0x35b)][_0x53273d(0x348)](function(_0x195f4f){const _0x1d321a=_0x53273d;_0x7ebd9['moveCost']+=_0x195f4f[_0x1d321a(0x37b)],_0x195f4f[_0x1d321a(0x295)]=_0x7ebd9[_0x1d321a(0x295)][_0x1d321a(0x428)]();});}['addFluid'](_0xcdee65){const _0x775b3f=_0x1a99ef;if(_0xcdee65[_0x775b3f(0x2ca)]>0x14)return;const _0x53e5c5=this;let _0x869f0a=!![],_0x149a48=![];this[_0x775b3f(0x35b)]['forEach'](function(_0x521e1a){const _0xf0ad3c=_0x775b3f;_0x521e1a['basename']==_0xcdee65[_0xf0ad3c(0x367)]&&(_0x869f0a=![],_0x521e1a instanceof gas&&(Math[_0xf0ad3c(0x282)]()>0.5&&_0x521e1a[_0xf0ad3c(0x423)]<0x3&&(_0x521e1a['addthickness'](),_0x149a48=!![])));});if(_0x149a48)return;if(_0x869f0a)_0xcdee65[_0x775b3f(0x295)]=this[_0x775b3f(0x295)][_0x775b3f(0x428)](),this[_0x775b3f(0x35b)][_0x775b3f(0x23c)](_0xcdee65),this[_0x775b3f(0x42c)](),_0xcdee65[_0x775b3f(0x46d)]();else{if(!_0xcdee65[_0x775b3f(0x2ca)])_0xcdee65[_0x775b3f(0x2ca)]=0x0;_0xcdee65['iterations']++;const _0x823939=shuffle(directions);let _0x1fcb47=[];for(let _0x31c589=0x0;_0x31c589<_0x823939[_0x775b3f(0x2e1)];_0x31c589++){const [_0xf4939a,_0x3ff892]=_0x823939[_0x31c589][_0x775b3f(0x4a9)]((_0x2692ee,_0x42c9f0)=>_0x2692ee+_0x53e5c5[_0x775b3f(0x295)][_0x42c9f0]);if(!newgrid[_0xf4939a]||!newgrid[_0xf4939a][_0x3ff892])continue;const _0x54397a=newgrid[_0xf4939a][_0x3ff892];if(_0x54397a[_0x775b3f(0x3b2)]&&(_0x54397a['elevation']<=_0x53e5c5[_0x775b3f(0x439)]||_0xcdee65 instanceof gas)){_0x1fcb47[_0x775b3f(0x23c)](_0x54397a);if(_0x54397a[_0x775b3f(0x35b)][_0x775b3f(0x2e1)]==0x0){_0x54397a[_0x775b3f(0x307)](_0xcdee65);break;}}_0x31c589==_0x823939[_0x775b3f(0x2e1)]-0x1&&_0x1fcb47[_0x775b3f(0x2e1)]>0x0&&_0x1fcb47[0x0][_0x775b3f(0x307)](_0xcdee65);}}}[_0x1a99ef(0x368)](_0x380d14){const _0x589a11=_0x1a99ef;_0x380d14['destroyed']=!![],this['fluids']=this['fluids'][_0x589a11(0x3ef)](_0x316634=>_0x316634[_0x589a11(0x367)]!=_0x380d14['basename']);}[_0x1a99ef(0x2c7)](){const _0x41fd9d=_0x1a99ef,_0x208a5c=this;let _0x501397=[];if(this[_0x41fd9d(0x4c2)]&&this[_0x41fd9d(0x4c2)][_0x41fd9d(0x2e1)]>0x0){const _0xf4d157=this[_0x41fd9d(0x4c2)][0x0][0x0];this[_0x41fd9d(0x4c2)][0x0][0x1]--;if(this['templightsources'][0x0][0x1]<=0x0)this[_0x41fd9d(0x4c2)][_0x41fd9d(0x2ed)]();_0x501397[_0x41fd9d(0x23c)](_0xf4d157);}if(this['character']!==null){const _0x25d97d=[this[_0x41fd9d(0x3ec)][_0x41fd9d(0x375)],this[_0x41fd9d(0x3ec)]['offhanditem']];_0x25d97d[_0x41fd9d(0x348)](function(_0x4d651e){const _0xc3680=_0x41fd9d;_0x4d651e[_0xc3680(0x2df)]&&_0x4d651e[_0xc3680(0x2df)]['length']>0x0&&_0x4d651e[_0xc3680(0x2df)]['forEach'](function(_0x5e5fb7){_0x501397['push'](_0x5e5fb7);});}),this[_0x41fd9d(0x3ec)][_0x41fd9d(0x2df)]&&this[_0x41fd9d(0x3ec)][_0x41fd9d(0x2df)][_0x41fd9d(0x2e1)]>0x0&&_0x501397[_0x41fd9d(0x23c)](this[_0x41fd9d(0x3ec)][_0x41fd9d(0x2df)][0x0]);}this[_0x41fd9d(0x312)][_0x41fd9d(0x2e1)]>0x0&&(this[_0x41fd9d(0x312)][0x0][_0x41fd9d(0x2df)][_0x41fd9d(0x2e1)]>0x0&&_0x501397[_0x41fd9d(0x23c)](this['objects'][0x0][_0x41fd9d(0x2df)][0x0]));if(this[_0x41fd9d(0x35b)][_0x41fd9d(0x2e1)]>0x0)for(let _0xd1e979=0x0;_0xd1e979<this[_0x41fd9d(0x35b)]['length'];_0xd1e979++){this[_0x41fd9d(0x35b)][_0xd1e979]['lightsources'][_0x41fd9d(0x2e1)]>0x0&&_0x501397[_0x41fd9d(0x23c)](this['fluids'][_0xd1e979][_0x41fd9d(0x2df)][0x0]);}return _0x501397;}['addTempSource'](_0x55eee5,_0x2b9189){const _0x29b83f=_0x1a99ef;if(!this[_0x29b83f(0x4c2)])this[_0x29b83f(0x4c2)]=[];this[_0x29b83f(0x4c2)][_0x29b83f(0x23c)]([_0x55eee5,_0x2b9189]);}[_0x1a99ef(0x284)](_0x1de57b){const _0x54ed4d=_0x1a99ef;let _0x3d49a8=![];this[_0x54ed4d(0x318)][_0x54ed4d(0x348)](function(_0x3e34f6){const _0x10b7be=_0x54ed4d;_0x3e34f6['index']==_0x1de57b[_0x10b7be(0x306)]&&(_0x3d49a8=!![]);});if(_0x3d49a8==![])this['charactersinview'][_0x54ed4d(0x23c)](_0x1de57b);}['removevisiblecharacter'](_0x3504cb){const _0x1bea63=_0x1a99ef;for(let _0x332433=0x0;_0x332433<this[_0x1bea63(0x318)][_0x1bea63(0x2e1)];_0x332433++){if(this[_0x1bea63(0x318)][_0x332433][_0x1bea63(0x306)]==_0x3504cb[_0x1bea63(0x306)]){this[_0x1bea63(0x318)]['splice'](_0x332433,0x1);break;}}}[_0x1a99ef(0x4a6)](_0x2cdc42){const _0x565c06=_0x1a99ef;let _0x5b975e=[0x0,0x0];return this[_0x565c06(0x312)][_0x565c06(0x2e1)]>0x0&&this[_0x565c06(0x312)][_0x565c06(0x348)](function(_0x86225a){const _0x49f94e=_0x565c06;if(_0x86225a['revealed']===![]&&_0x2cdc42==!![]){}else _0x5b975e=_0x5b975e[_0x49f94e(0x4a9)]((_0x125c92,_0x4f62da)=>_0x125c92+_0x86225a['hazards'][_0x4f62da]);}),this[_0x565c06(0x35b)][_0x565c06(0x2e1)]>0x0&&this[_0x565c06(0x35b)]['forEach'](function(_0x5e5de6){const _0x36c327=_0x565c06;_0x5b975e=_0x5b975e['map']((_0x3e3dda,_0x5a6984)=>_0x3e3dda+_0x5e5de6[_0x36c327(0x40d)][_0x5a6984]);}),_0x5b975e;}}class object{constructor(_0x1d1bd0,_0x1da428,_0xaf0c89,_0x2e4c6e,_0x4406f8,_0x40415e,_0x57a326,_0x368f0e,_0x12e7c5,_0x15fef0){const _0x22afb9=_0x1a99ef;this[_0x22afb9(0x41d)]=_0x1d1bd0,this[_0x22afb9(0x1f5)]=_0x1da428,this['absorbtion']=_0xaf0c89,this[_0x22afb9(0x239)]=_0x2e4c6e||null,this[_0x22afb9(0x3e8)]=_0x4406f8||0x0,this[_0x22afb9(0x3b2)]=_0x40415e,this[_0x22afb9(0x37b)]=_0x57a326||0x0,this['action']=_0x368f0e||null,this[_0x22afb9(0x322)]=_0x12e7c5||[],this['lightsources']=_0x15fef0||[],this[_0x22afb9(0x295)]=[],this['ac']=0x0,this['pc']=![],this['destructable']=![],this[_0x22afb9(0x3b7)]=0x1,this['hp']=0x1,this[_0x22afb9(0x367)]=_0x1d1bd0,this['baseabsorbtion']=_0xaf0c89,this[_0x22afb9(0x2fd)]=_0x1da428,this[_0x22afb9(0x499)]=0x1,this['flammable']=![],this[_0x22afb9(0x40d)]=[0x0,0x0];if(this[_0x22afb9(0x3b2)]==![])this['immovable']=!![];}['damage'](_0x1d5f2d){const _0x108e02=_0x1a99ef;if(this['destructable']&&!this[_0x108e02(0x3c0)]){const _0x70829c=Math[_0x108e02(0x1f4)](_0x1d5f2d/this[_0x108e02(0x3b7)]);this['hp']-=_0x70829c;let _0x466e8c=_0x70829c[_0x108e02(0x38d)]();adduilabel(_0x466e8c,this[_0x108e02(0x295)],convertAbstoColor(this['baseabsorbtion']),0x1,!![],![],![],![]),this['hp']<=0x0&&this[_0x108e02(0x48c)]();}}[_0x1a99ef(0x48c)](){const _0x119a9f=_0x1a99ef,[_0xc87be1,_0x2c7b21]=this[_0x119a9f(0x295)];newgrid[_0xc87be1][_0x2c7b21]['objects'][_0x119a9f(0x2ed)](),this['destroyed']=!![];this['remnants']&&this[_0x119a9f(0x4bc)]['forEach'](function(_0x163d61){_0x163d61 instanceof fluid?newgrid[_0xc87be1][_0x2c7b21]['addFluid'](_0x163d61):newgrid[_0xc87be1][_0x2c7b21]['addObject'](_0x163d61);});if(this[_0x119a9f(0x235)])this[_0x119a9f(0x283)]();hear(new Sound(this[_0x119a9f(0x295)],0xa,this,null,soundeffects[_0x119a9f(0x4a8)])),newgrid[_0xc87be1][_0x2c7b21][_0x119a9f(0x42c)]();}[_0x1a99ef(0x1f8)](){const _0x41da6f=_0x1a99ef;this[_0x41da6f(0x4bc)]=[];for(let _0x4fa0aa=0x0;_0x4fa0aa<0x2;_0x4fa0aa++){let _0x18d6f=new Wreckage(this);this['remnants']['push'](_0x18d6f);}}['initialize'](){const _0xacd699=_0x1a99ef;this['destructable']&&this[_0xacd699(0x1f8)]();const _0x70862e=directionsincl['slice']();for(let _0x3d11a2=0x0;_0x3d11a2<_0x70862e['length'];_0x3d11a2++){const [_0x4538ed,_0x57d9c0]=_0x70862e[_0x3d11a2][_0xacd699(0x4a9)]((_0x15e69a,_0x8c6784)=>_0x15e69a+this[_0xacd699(0x295)][_0x8c6784]);if(!newgrid[_0x4538ed]||!newgrid[_0x4538ed][_0x57d9c0])continue;const _0x436bf9=newgrid[_0x4538ed][_0x57d9c0];if(!_0x436bf9['objecttriggers'])_0x436bf9[_0xacd699(0x34e)]=[];_0x436bf9[_0xacd699(0x34e)][_0xacd699(0x23c)](this);}}[_0x1a99ef(0x2b2)](_0x564f01,_0x3ae2d0,_0x13c8d4){const _0x1ca577=_0x1a99ef;!this[_0x1ca577(0x3c0)]&&_0x13c8d4[_0x1ca577(0x480)]==_0x1ca577(0x49a)&&chebyshevDistance(_0x13c8d4[_0x1ca577(0x310)],this[_0x1ca577(0x295)])<=0x1&&(Math['random']()>0.75&&this[_0x1ca577(0x224)](0x1)),!this[_0x1ca577(0x3c0)]&&this['burning']&&chebyshevDistance(_0x3ae2d0[_0x1ca577(0x295)],this[_0x1ca577(0x295)])==0x0&&_0x3ae2d0[_0x1ca577(0x224)](0x1);}[_0x1a99ef(0x3d9)](){const _0x247d5f=_0x1a99ef;if(this[_0x247d5f(0x235)]||this[_0x247d5f(0x32b)]||!this['flammable'])return;this[_0x247d5f(0x41d)]='Burning\x20'+this[_0x247d5f(0x367)],this[_0x247d5f(0x40d)]=this[_0x247d5f(0x40d)][_0x247d5f(0x4a9)]((_0x449542,_0x5a8818)=>_0x449542+[0x1,0x5][_0x5a8818]),this[_0x247d5f(0x235)]=!![],this[_0x247d5f(0x2df)][_0x247d5f(0x23c)](new lightsource(this[_0x247d5f(0x295)],[0x80,0x80,0x80],[2.5,1.5,0x1],0x2)),this[_0x247d5f(0x2bc)]=materials['fire'];if(this[_0x247d5f(0x239)]!=null)this[_0x247d5f(0x239)]=materials[_0x247d5f(0x4ae)];const [_0x5b9a1c,_0x579f8c]=this[_0x247d5f(0x295)];newgrid[_0x5b9a1c][_0x579f8c][_0x247d5f(0x3ec)]&&newgrid[_0x5b9a1c][_0x579f8c][_0x247d5f(0x3ec)][_0x247d5f(0x224)](0x5),envobjects['push'](this);}[_0x1a99ef(0x4a0)](){const _0x1c5afa=_0x1a99ef;if(this[_0x1c5afa(0x235)]&&!this['destroyed']){const [_0x3ffc0f,_0x518d38]=this[_0x1c5afa(0x295)];if(newgrid[_0x3ffc0f][_0x518d38][_0x1c5afa(0x3ec)]!==null)newgrid[_0x3ffc0f][_0x518d38][_0x1c5afa(0x3ec)][_0x1c5afa(0x224)](0x5);for(let _0xbca496=0x0;_0xbca496<0x4;_0xbca496++){newgrid[_0x3ffc0f][_0x518d38][_0x1c5afa(0x307)](new smoke());}this[_0x1c5afa(0x283)]();this['destructable']&&(this[_0x1c5afa(0x224)](0x1),!this[_0x1c5afa(0x3c0)]&&envobjects[_0x1c5afa(0x23c)](this));this['burnduration']-=0x1;if(this[_0x1c5afa(0x499)]>0x0)envobjects['push'](this);else{this['lightsources']=[],this[_0x1c5afa(0x235)]=![],this[_0x1c5afa(0x32b)]=!![],this[_0x1c5afa(0x41d)]=_0x1c5afa(0x251)+this[_0x1c5afa(0x367)],this[_0x1c5afa(0x40d)]=[0x0,0x0],this['absorbtion']=[0x0,0x0,0x0];if(this['bgabsorbtion']!=null)this[_0x1c5afa(0x239)]=[0.2,0.2,0.2];}}}[_0x1a99ef(0x283)](){const _0x32316a=_0x1a99ef;for(let _0x34fde3=0x0;_0x34fde3<directions[_0x32316a(0x2e1)];_0x34fde3++){const [_0x798f4c,_0x2ba5f3]=directions[_0x34fde3]['map']((_0x14449c,_0x4397c1)=>_0x14449c+this[_0x32316a(0x295)][_0x4397c1]);if(!newgrid[_0x798f4c]||!newgrid[_0x798f4c][_0x2ba5f3])continue;const _0x24aeff=newgrid[_0x798f4c][_0x2ba5f3];_0x24aeff[_0x32316a(0x312)][_0x32316a(0x2e1)]>0x0&&!_0x24aeff[_0x32316a(0x312)][0x0][_0x32316a(0x235)]&&_0x24aeff[_0x32316a(0x312)][0x0][_0x32316a(0x3d9)](),_0x24aeff[_0x32316a(0x35b)]&&_0x24aeff['fluids'][_0x32316a(0x2e1)]>0x0&&_0x24aeff['fluids'][_0x32316a(0x348)](function(_0x4a50ee){const _0x3ddc35=_0x32316a;!_0x4a50ee[_0x3ddc35(0x235)]&&!_0x4a50ee[_0x3ddc35(0x32b)]&&_0x4a50ee['burn']();});}}[_0x1a99ef(0x32d)](_0xd58ba5){const _0x3bac67=_0x1a99ef,[_0x33f4f5,_0x2e1f9a]=this[_0x3bac67(0x295)];let [_0x104361,_0x4cf46c]=this['pos'][_0x3bac67(0x4a9)]((_0x2f13c5,_0x18c1fe)=>_0x2f13c5-_0xd58ba5[_0x18c1fe]);if(!newgrid[_0x104361]||!newgrid[_0x104361][_0x4cf46c])return;const _0x52632d=newgrid[_0x104361][_0x4cf46c]['character'];while(newgrid[_0x104361][_0x4cf46c][_0x3bac67(0x4c5)]==!![]){[_0x104361,_0x4cf46c]=[_0x104361,_0x4cf46c][_0x3bac67(0x4a9)]((_0x58b8e9,_0x153f3b)=>_0x58b8e9-_0xd58ba5[_0x153f3b]);}const _0x464e87=newgrid[_0x104361][_0x4cf46c]['elevation']-newgrid[_0x33f4f5][_0x2e1f9a][_0x3bac67(0x439)],_0x277a6d=_0x464e87**0x2,_0x480019=this['hp'];newgrid[_0x104361][_0x4cf46c][_0x3bac67(0x3b2)]==!![]&&(newgrid[_0x33f4f5][_0x2e1f9a][_0x3bac67(0x4b3)](),newgrid[_0x104361][_0x4cf46c]['addObject'](this),_0x464e87<-0x1&&this[_0x3bac67(0x224)](_0x277a6d)),_0x52632d!==null&&(_0x464e87<-0x1&&_0x52632d[_0x3bac67(0x224)](Math[_0x3bac67(0x373)](_0x277a6d,_0x480019)),this[_0x3bac67(0x37b)]>0x0&&addconditiondynamic(conditions[_0x3bac67(0x469)],!![],_0x52632d)());}}class Item extends object{constructor(_0x149ccc,_0x4da80e,_0x4e7c1e){const _0x3359df=_0x1a99ef;super(_0x149ccc,_0x4da80e,_0x4e7c1e,null,0x0,!![]),this[_0x3359df(0x41d)]=_0x149ccc,this['symbol']=_0x4da80e,this[_0x3359df(0x2bc)]=_0x4e7c1e||[0x1,0x1,0x1];}['stow'](){}[_0x1a99ef(0x370)](){}[_0x1a99ef(0x21b)](){}}class Weapon extends Item{constructor(_0x21573b,_0x3b8be6,_0x2a5cf2,_0x160964,_0x3bbf7a,_0x4847b7,_0x27dd5e,_0xa01118,_0x3de45e,_0x11f28f,_0x4844a6,_0x24f94f){const _0x2ffd39=_0x1a99ef;super(_0x21573b,_0x3b8be6,_0x2a5cf2),this[_0x2ffd39(0x47f)]=_0x3bbf7a||1.9,this[_0x2ffd39(0x25d)]=_0x4847b7||0x0,this[_0x2ffd39(0x219)]=_0x27dd5e||0x1,this[_0x2ffd39(0x23b)]=_0xa01118||0x0,this[_0x2ffd39(0x2fc)]=_0x3de45e||0x0,this[_0x2ffd39(0x37f)]=_0x11f28f||soundeffects['daggerdraw2'],this[_0x2ffd39(0x44d)]=_0x4844a6||soundeffects['swordhit'],this[_0x2ffd39(0x471)]=_0x24f94f||soundeffects[_0x2ffd39(0x47a)],this[_0x2ffd39(0x4cf)]=0x1,this[_0x2ffd39(0x21a)]=0x1,this['twohanded']=![];}['addRemnants'](){const _0x4e65df=_0x1a99ef;this[_0x4e65df(0x4bc)]=[new BrokenWeapon(this)];}}class BrokenWeapon extends object{constructor(_0x400e3f){const _0x1014b0=_0x1a99ef,_0x5f2afd=_0x1014b0(0x21f)+_0x400e3f[_0x1014b0(0x41d)],_0x3fdfdd=_0x400e3f[_0x1014b0(0x1f5)],_0x401294=_0x400e3f[_0x1014b0(0x2bc)],_0x420847=_0x400e3f[_0x1014b0(0x239)],_0x5375d6=_0x400e3f[_0x1014b0(0x3e8)];super(_0x5f2afd,_0x3fdfdd,_0x401294,_0x420847,_0x5375d6,!![]);}}class Unarmed extends Weapon{constructor(){super('Unarmed',null,null,null,1.9,0x0,0x1,0x0,0x0,null,null,null);}}class Foot extends Unarmed{constructor(){const _0x4ea6f6=_0x1a99ef;super(_0x4ea6f6(0x2d9),null,null,null,1.9,0x0,0x0,0x0,0x0,null,null,null),this[_0x4ea6f6(0x3d4)]=kickattackpermute;}}class Kukri extends Weapon{constructor(){const _0x27299c=_0x1a99ef;super('Kukri','&#x0192',materials[_0x27299c(0x424)],actions[_0x27299c(0x493)],1.9,0x0,0x2,0x1,0x0,soundeffects[_0x27299c(0x30f)],soundeffects[_0x27299c(0x477)]),this[_0x27299c(0x2ba)]=!![],this[_0x27299c(0x3d4)]=conditionattackpermute(conditions[_0x27299c(0x2af)]);}}class Dagger extends Weapon{constructor(_0x503caf){const _0xe8c4fc=_0x1a99ef;super(_0xe8c4fc(0x379),_0xe8c4fc(0x293),materials[_0xe8c4fc(0x424)],actions[_0xe8c4fc(0x493)],3.5,0x0,0x2,0x1,0x0,soundeffects[_0xe8c4fc(0x30f)],soundeffects[_0xe8c4fc(0x477)]),this['stacksize']=0x3,this[_0xe8c4fc(0x3fe)]=!![],this['number']=_0x503caf||0x1,this[_0xe8c4fc(0x2ba)]=!![],_0x503caf>0x1&&(this[_0xe8c4fc(0x41d)]=this[_0xe8c4fc(0x367)]+'('+this[_0xe8c4fc(0x21a)]+')');}}class Runic_Dagger extends Weapon{constructor(_0xa0eb4b){const _0x340fd4=_0x1a99ef;super('Runic\x20Dagger',_0x340fd4(0x293),materials['metal'],actions[_0x340fd4(0x493)],3.5,0x0,0x2,0x1,0x0,soundeffects[_0x340fd4(0x30f)],soundeffects[_0x340fd4(0x477)]),this['stacksize']=0x3,this[_0x340fd4(0x3fe)]=!![],this[_0x340fd4(0x21a)]=_0xa0eb4b||0x1,this[_0x340fd4(0x2ba)]=!![],_0xa0eb4b>0x1&&(this['name']=this[_0x340fd4(0x367)]+'('+this[_0x340fd4(0x21a)]+')'),this['lightsources'][_0x340fd4(0x23c)](new lightsource([0x0,0x0],[0x100,0x100,0x100],[1.5,1.5,1.5],0x3));}}class Shiv extends Weapon{constructor(){const _0x3b82c4=_0x1a99ef;super('Shiv',_0x3b82c4(0x293),materials['metal'],actions[_0x3b82c4(0x493)],1.9,0x0,0x2,0x1,0x0,soundeffects['daggerdraw'],soundeffects[_0x3b82c4(0x477)]),this[_0x3b82c4(0x2ba)]=!![];}}class Athame extends Weapon{constructor(_0x1d591f){const _0x4b069f=_0x1a99ef;super('Athame',_0x4b069f(0x293),[0.2,0.2,0.2],actions[_0x4b069f(0x493)],3.5,0x0,0x2,0x1,0x0,soundeffects['daggerdraw'],soundeffects[_0x4b069f(0x477)]),this[_0x4b069f(0x4cf)]=0x3,this[_0x4b069f(0x3fe)]=!![],this[_0x4b069f(0x21a)]=_0x1d591f||0x1,_0x1d591f>0x1&&(this['name']=this[_0x4b069f(0x367)]+'('+this['number']+')'),this[_0x4b069f(0x3d4)]=conditionattackpermute(conditions['Bleeding']),this['light']=!![];}}class Javelin extends Weapon{constructor(_0x522ac0){const _0x46139e=_0x1a99ef;super(_0x46139e(0x47e),'-',materials[_0x46139e(0x2b3)],actions[_0x46139e(0x493)],3.5,0x0,0x2,0x0,0x0,soundeffects[_0x46139e(0x257)],soundeffects[_0x46139e(0x3da)]),this[_0x46139e(0x4cf)]=0x3,this[_0x46139e(0x3fe)]=!![],this[_0x46139e(0x21a)]=_0x522ac0||0x1,this['light']=!![],_0x522ac0>0x1&&(this[_0x46139e(0x41d)]=this[_0x46139e(0x367)]+'('+this[_0x46139e(0x21a)]+')');}}class Club extends Weapon{constructor(){const _0x23a906=_0x1a99ef;super(_0x23a906(0x48a),'|',materials['wood'],actions[_0x23a906(0x493)],1.9,0x0,0x2,0x0,null);}}class Greatclub extends Weapon{constructor(){const _0x3dfd2e=_0x1a99ef;super('Greatclub','|',materials[_0x3dfd2e(0x2b3)],actions[_0x3dfd2e(0x493)],1.9,0x0,0x4,0x0,null),this[_0x3dfd2e(0x44b)]=!![];}}class Longsword extends Weapon{constructor(){const _0x5a400a=_0x1a99ef;super('Longsword','/',materials[_0x5a400a(0x424)],actions[_0x5a400a(0x493)],1.9,0x0,0x6,0x0,null,soundeffects[_0x5a400a(0x403)],soundeffects[_0x5a400a(0x3fb)],soundeffects[_0x5a400a(0x47a)]),this[_0x5a400a(0x3d1)]=!![];}}class Runic_Longsword extends Weapon{constructor(){const _0x2a46c7=_0x1a99ef;super(_0x2a46c7(0x364),'/',materials[_0x2a46c7(0x424)],actions['Attack'],1.9,0x0,0x6,0x0,null,soundeffects['sworddraw'],soundeffects[_0x2a46c7(0x3fb)],soundeffects['swordswing']),this[_0x2a46c7(0x3d1)]=!![],this[_0x2a46c7(0x2df)]['push'](new lightsource([0x0,0x0],[0x100,0x100,0x100],[1.5,1.5,1.5],0x3));}}class Greatsword extends Weapon{constructor(){const _0x255ffd=_0x1a99ef;super(_0x255ffd(0x483),'/',materials['metal'],actions[_0x255ffd(0x493)],1.9,0x0,0xa,0x0,null,soundeffects[_0x255ffd(0x403)],soundeffects['swordhit'],soundeffects['swordswing']),this['twohanded']=!![];}}class Runic_Greatsword extends Weapon{constructor(){const _0x1825a9=_0x1a99ef;super(_0x1825a9(0x27f),'/',materials[_0x1825a9(0x424)],actions[_0x1825a9(0x493)],1.9,0x0,0xa,0x0,null,soundeffects[_0x1825a9(0x403)],soundeffects['swordhit'],soundeffects[_0x1825a9(0x47a)]),this[_0x1825a9(0x44b)]=!![],this[_0x1825a9(0x2df)]['push'](new lightsource([0x0,0x0],[0x100,0x100,0x100],[1.5,1.5,0x2],0x3));}}class Speedsword extends Weapon{constructor(){const _0xc61137=_0x1a99ef;super(_0xc61137(0x362),'/',materials[_0xc61137(0x424)],actions['Attack'],1.9,0x0,0x6,0x0,null,soundeffects['sworddraw'],soundeffects[_0xc61137(0x3fb)],soundeffects['swordswing']),this['specialeffect']=function(_0x459a11,_0x2bae6c){const _0x2f17bc=_0xc61137,_0x50c434=function(){const _0x368169=_0x4a83;_0x459a11[_0x368169(0x3ec)]['tc'][0x2]>0x0&&(_0x459a11['character']['tc'][0x2]--,_0x459a11['character']['tc'][0x1]++);};return _0x459a11['onhiteffects'][_0x2f17bc(0x23c)](_0x50c434),_0x459a11[_0x2f17bc(0x38a)][_0x2f17bc(0x23c)](_0x50c434),_0x459a11;};}}class Shortsword extends Weapon{constructor(){const _0xca015a=_0x1a99ef;super(_0xca015a(0x1f2),'/',materials[_0xca015a(0x424)],actions[_0xca015a(0x493)],1.9,0x0,0x4,0x1,null,soundeffects[_0xca015a(0x2eb)]),this[_0xca015a(0x2ba)]=!![];}}class Scimitar extends Weapon{constructor(){const _0x517e57=_0x1a99ef;super(_0x517e57(0x350),'/',materials[_0x517e57(0x424)],actions[_0x517e57(0x493)],1.9,0x0,0x4,0x0,null,soundeffects[_0x517e57(0x2eb)]),this['light']=!![];}}class Rapier extends Weapon{constructor(){const _0x5f44b2=_0x1a99ef;super(_0x5f44b2(0x3c5),'/',materials[_0x5f44b2(0x424)],actions[_0x5f44b2(0x493)],1.9,0x0,0x4,0x1,null,soundeffects[_0x5f44b2(0x403)],soundeffects[_0x5f44b2(0x3fb)],soundeffects[_0x5f44b2(0x47a)]),this[_0x5f44b2(0x3d4)]=function(_0x83eefd,_0x3a0f48){const _0x32bd13=_0x5f44b2,_0x1aeb1d=function(){const _0x268611=_0x4a83,[_0x24a122,_0x2f5a41]=_0x3a0f48,_0x34ef7d=newgrid[_0x24a122][_0x2f5a41][_0x268611(0x3ec)];_0x34ef7d&&_0x34ef7d[_0x268611(0x21b)]();};return _0x83eefd[_0x32bd13(0x2a7)][_0x32bd13(0x23c)](_0x1aeb1d),_0x83eefd['modbreakdown'][_0x32bd13(0x23c)](_0x32bd13(0x354)),_0x83eefd;};}}class Katana extends Weapon{constructor(){const _0x4a41d7=_0x1a99ef;super(_0x4a41d7(0x416),'/',materials['metal'],actions[_0x4a41d7(0x493)],1.9,0x0,0x1,0x0,null,soundeffects['sworddraw'],soundeffects[_0x4a41d7(0x3fb)],soundeffects[_0x4a41d7(0x47a)]),this[_0x4a41d7(0x3d4)]=conditionattackpermute(conditions['Bleeding']);}}class Punching_Red_Glove_Expanding_Arm_Kapow extends Weapon{constructor(){const _0x421f8f=_0x1a99ef;super(_0x421f8f(0x4ab),'/',materials[_0x421f8f(0x424)],actions[_0x421f8f(0x493)],1.9,0x0,0x1,0x0,null,soundeffects['sworddraw'],soundeffects[_0x421f8f(0x3fb)],soundeffects[_0x421f8f(0x47a)]),this[_0x421f8f(0x3d4)]=function(_0xd06cda,_0x4c78c6){const _0x5ada5f=_0x421f8f,_0x23190b=function(){const _0x3b40f4=_0x4a83,[_0x1c22d6,_0x498bd4]=_0x4c78c6;let _0x1ed26d=newgrid[_0x1c22d6][_0x498bd4][_0x3b40f4(0x3ec)];const _0x4fa980=_0xd06cda[_0x3b40f4(0x295)][_0x3b40f4(0x428)](),_0x1a699a=_0x4c78c6[_0x3b40f4(0x4a9)]((_0x3e78c5,_0x1d84e3)=>_0x4fa980[_0x1d84e3]-_0x3e78c5);if(_0x1ed26d)for(let _0x2dd76f=0x0;_0x2dd76f<0x1;_0x2dd76f++){let _0x5c37bd=_0x1ed26d['pos']['map']((_0x582b61,_0x24d89d)=>_0x582b61-_0x1a699a[_0x24d89d]);_0x1ed26d[_0x3b40f4(0x3a8)][_0x3b40f4(0x23c)](new action('Fall',movefunc,[0x0,0x0,0x0],0x1,_0x5c37bd,_0x1ed26d,_0x4c78c6)),move(_0x1ed26d);}};return _0xd06cda[_0x5ada5f(0x2a7)][_0x5ada5f(0x23c)](_0x23190b),_0xd06cda;};}}class Handaxe extends Weapon{constructor(){const _0x1c9a96=_0x1a99ef;super('Handaxe','/',materials[_0x1c9a96(0x424)],actions[_0x1c9a96(0x493)],1.9,0x0,0x2,0x0,null,soundeffects[_0x1c9a96(0x403)],soundeffects['swordhit'],soundeffects[_0x1c9a96(0x47a)]),this['specialeffect']=cleaveattackspecial,this[_0x1c9a96(0x2ba)]=!![];}}class Battleaxe extends Weapon{constructor(){const _0x441eca=_0x1a99ef;super(_0x441eca(0x3bf),'/',materials[_0x441eca(0x424)],actions[_0x441eca(0x493)],1.9,0x0,0x4,0x0,null,soundeffects[_0x441eca(0x403)],soundeffects['swordhit'],soundeffects[_0x441eca(0x47a)]),this[_0x441eca(0x3d4)]=cleaveattack,this['versatile']=!![];}}class Greataxe extends Weapon{constructor(){const _0x4a516a=_0x1a99ef;super('Greataxe','/',materials['metal'],actions['Attack'],1.9,0x0,0x8,0x0,null,soundeffects[_0x4a516a(0x403)],soundeffects[_0x4a516a(0x3fb)],soundeffects[_0x4a516a(0x47a)]),this[_0x4a516a(0x3d4)]=cleaveattack,this[_0x4a516a(0x44b)]=!![];}}class Warhammer extends Weapon{constructor(){const _0x130b39=_0x1a99ef;super(_0x130b39(0x3e7),'T',materials[_0x130b39(0x424)],actions[_0x130b39(0x493)],1.9,0x0,0x4,0x0,null,null,soundeffects[_0x130b39(0x4c7)],soundeffects[_0x130b39(0x20c)]),this[_0x130b39(0x3d4)]=conditionattackpermute(conditions[_0x130b39(0x469)]),this[_0x130b39(0x3d1)]=!![];}}class Greathammer extends Weapon{constructor(){const _0x4d65b9=_0x1a99ef;super(_0x4d65b9(0x27b),'T',materials[_0x4d65b9(0x424)],actions[_0x4d65b9(0x493)],1.9,0x0,0x8,0x0,null,null,soundeffects['clubhit'],soundeffects[_0x4d65b9(0x20c)]),this['specialeffect']=conditionattackpermute(conditions[_0x4d65b9(0x469)]),this[_0x4d65b9(0x44b)]=!![];}}class Mace extends Weapon{constructor(){const _0x1769fc=_0x1a99ef;super(_0x1769fc(0x35e),'T',materials[_0x1769fc(0x424)],actions[_0x1769fc(0x493)],1.9,0x0,0x4,0x0,null,null,soundeffects[_0x1769fc(0x4c7)],soundeffects[_0x1769fc(0x20c)]),this[_0x1769fc(0x3d4)]=shoveattackpermute,this[_0x1769fc(0x3d1)]=!![];}}class Maul extends Weapon{constructor(){const _0x570cee=_0x1a99ef;super(_0x570cee(0x3e5),'T',materials['metal'],actions['Attack'],1.9,0x0,0x6,0x0,null,null,soundeffects[_0x570cee(0x4c7)],soundeffects[_0x570cee(0x20c)]),this[_0x570cee(0x3d4)]=shoveattackpermute,this[_0x570cee(0x3d1)]=!![];}}class Spear extends Weapon{constructor(){const _0x47ea74=_0x1a99ef;super(_0x47ea74(0x485),'-',materials['wood'],actions[_0x47ea74(0x493)],2.5,0x0,0x2,0x0,0x0,soundeffects[_0x47ea74(0x257)]),this[_0x47ea74(0x3d1)]=!![];}}class Pike extends Weapon{constructor(){const _0x2fa5b3=_0x1a99ef;super('Pike','/',materials['metal'],actions[_0x2fa5b3(0x493)],2.5,0x0,0x6,0x0,null,soundeffects[_0x2fa5b3(0x403)],soundeffects[_0x2fa5b3(0x3fb)],soundeffects['swordswing']),this[_0x2fa5b3(0x44b)]=!![];}}class Halberd extends Weapon{constructor(){const _0x5836a3=_0x1a99ef;super(_0x5836a3(0x382),'/',materials[_0x5836a3(0x424)],actions[_0x5836a3(0x493)],2.5,0x0,0x4,0x0,null,soundeffects['sworddraw'],soundeffects['swordhit'],soundeffects['swordswing']),this[_0x5836a3(0x3d4)]=cleaveattack,this[_0x5836a3(0x44b)]=!![];}}class Glaive extends Weapon{constructor(){const _0x3112aa=_0x1a99ef;super(_0x3112aa(0x2f8),'/',materials[_0x3112aa(0x424)],actions[_0x3112aa(0x493)],2.5,0x0,0x6,0x0,null,soundeffects[_0x3112aa(0x403)],soundeffects[_0x3112aa(0x3fb)],soundeffects[_0x3112aa(0x47a)]),this[_0x3112aa(0x3d4)]=cleaveattack,this[_0x3112aa(0x44b)]=!![];}}class Polehammer extends Weapon{constructor(){const _0x57ebbf=_0x1a99ef;super(_0x57ebbf(0x45d),'T',materials[_0x57ebbf(0x424)],actions[_0x57ebbf(0x24e)],2.5,0x0,0x4,0x0,null,null,soundeffects['clubhit'],soundeffects['clubswing']),this[_0x57ebbf(0x3d4)]=conditionattackpermute(conditions[_0x57ebbf(0x469)]),this[_0x57ebbf(0x44b)]=!![];}}class Ammunition extends object{constructor(_0xbd401d,_0x1720d2,_0x5b733a){super(_0xbd401d,_0x1720d2,_0x5b733a,null,0x0,!![],0x0,null,null,null);}}class Arrow extends Ammunition{constructor(_0xf99941){const _0x194a21=_0x1a99ef;super(_0x194a21(0x342),'&#x02D7',materials['wood']),this[_0x194a21(0x4cf)]=0xf,this['throwable']=!![],this[_0x194a21(0x21a)]=_0xf99941||0x1,_0xf99941>0x1&&(this[_0x194a21(0x41d)]=this[_0x194a21(0x367)]+'('+this[_0x194a21(0x21a)]+')');}}class Bolt extends Ammunition{constructor(_0x5dfd6d){const _0x5840b7=_0x1a99ef;super(_0x5840b7(0x465),_0x5840b7(0x39a),materials[_0x5840b7(0x2b3)]),this['stacksize']=0xf,this[_0x5840b7(0x3fe)]=!![],this[_0x5840b7(0x21a)]=_0x5dfd6d||0x1,_0x5dfd6d>0x1&&(this['name']=this[_0x5840b7(0x367)]+'('+this['number']+')');}}class Longbow extends Weapon{constructor(){const _0x532409=_0x1a99ef;super(_0x532409(0x3fc),')',materials['wood'],actions['Attack'],7.9,0x0,0x4,0x1,1.9,soundeffects[_0x532409(0x376)],soundeffects[_0x532409(0x3da)]),this[_0x532409(0x3f4)]=_0x532409(0x342),this[_0x532409(0x26a)]=Arrow,this[_0x532409(0x44b)]=!![],this[_0x532409(0x3ce)]=!![];}}class Cleavebow extends Weapon{constructor(){const _0x5e0b02=_0x1a99ef;super(_0x5e0b02(0x202),')',materials[_0x5e0b02(0x2b3)],actions[_0x5e0b02(0x493)],7.9,0x0,0x4,0x1,1.9,soundeffects[_0x5e0b02(0x376)],soundeffects[_0x5e0b02(0x3da)]),this[_0x5e0b02(0x3f4)]=_0x5e0b02(0x342),this['ammoconstructor']=Arrow,this[_0x5e0b02(0x44b)]=!![],this[_0x5e0b02(0x3d4)]=cleaveattack;}}class Recurve_Bow extends Weapon{constructor(){const _0x513993=_0x1a99ef;super('Recurve\x20Bow','}',materials[_0x513993(0x2b3)],actions['Attack'],8.9,0x0,0x6,0x1,1.9,soundeffects[_0x513993(0x376)],soundeffects[_0x513993(0x3da)]),this[_0x513993(0x3f4)]='Arrow',this[_0x513993(0x26a)]=Arrow,this[_0x513993(0x44b)]=!![],this[_0x513993(0x3ce)]=!![],this[_0x513993(0x3d4)]=function(_0x3bc3d2,_0x23cfe0){const _0x5c01c1=_0x513993;for(let _0x1cac8b=_0x3bc3d2['modbreakdown'][_0x5c01c1(0x2e1)]-0x1;_0x1cac8b>=0x0;_0x1cac8b--){if(_0x3bc3d2['modbreakdown'][_0x1cac8b]==_0x5c01c1(0x38b)){_0x3bc3d2[_0x5c01c1(0x2d2)]['splice'](_0x1cac8b,0x1),_0x3bc3d2[_0x5c01c1(0x372)]+=0x2,_0x3bc3d2[_0x5c01c1(0x482)]+=0xa,_0x3bc3d2[_0x5c01c1(0x2e3)]+=takeav(_0x3bc3d2['damagerange'])*0.1;continue;}if(_0x3bc3d2[_0x5c01c1(0x2d2)][_0x1cac8b]==_0x5c01c1(0x352)){_0x3bc3d2[_0x5c01c1(0x2d2)]['splice'](_0x1cac8b,0x1),_0x3bc3d2[_0x5c01c1(0x372)]+=0x5,_0x3bc3d2[_0x5c01c1(0x482)]+=0x19,_0x3bc3d2[_0x5c01c1(0x2e3)]+=takeav(_0x3bc3d2['damagerange'])*0.25;continue;}}_0x3bc3d2[_0x5c01c1(0x482)]=Math[_0x5c01c1(0x373)](_0x3bc3d2[_0x5c01c1(0x482)],0x64);const _0x1f9e97=function(){const _0x5cf171=_0x5c01c1,_0x53d2db=bresenhamLine(_0x3bc3d2[_0x5cf171(0x295)],_0x23cfe0),_0xc4e213=_0x53d2db[_0x5cf171(0x4a9)](_0x3adcf8=>newgrid[_0x3adcf8[0x0]][_0x3adcf8[0x1]]);_0xc4e213[_0x5cf171(0x348)](function(_0xb17cf5){const _0x224ec6=_0x5cf171;if(_0xb17cf5['character']&&_0xb17cf5[_0x224ec6(0x3ec)]['pc']!==_0x3bc3d2['character']['pc']){const _0x3271ac=_0x3bc3d2,_0x2d1f76=_0xb17cf5[_0x224ec6(0x3ec)];Math['random']()*0x64<_0x3271ac[_0x224ec6(0x482)]&&_0x2d1f76?_0x2d1f76['damage'](randomNumber(_0x3271ac['damagerange'][0x1],_0x3271ac[_0x224ec6(0x39e)][0x0])):adduilabel(_0x224ec6(0x49a),_0xb17cf5[_0x224ec6(0x295)],[0x80,0x80,0x80],0x1,!![],![]);}});};return _0x3bc3d2[_0x5c01c1(0x2a7)][_0x5c01c1(0x23c)](_0x1f9e97),_0x3bc3d2['onmisseffects'][_0x5c01c1(0x23c)](_0x1f9e97),_0x3bc3d2;};}}class Double_Recurve_Bow extends Weapon{constructor(){const _0x54eb62=_0x1a99ef;super('Recurve\x20Bow','}',materials[_0x54eb62(0x2b3)],actions[_0x54eb62(0x493)],8.9,0x0,0x8,0x1,1.9,soundeffects['bowdraw'],soundeffects[_0x54eb62(0x3da)]),this[_0x54eb62(0x3f4)]=_0x54eb62(0x342),this['ammoconstructor']=Arrow,this['twohanded']=!![],this[_0x54eb62(0x3d4)]=function(_0x185798,_0x456bb5){const _0x4beebb=_0x54eb62;for(let _0x2386f4=_0x185798['modbreakdown']['length']-0x1;_0x2386f4>=0x0;_0x2386f4--){if(_0x185798[_0x4beebb(0x2d2)][_0x2386f4]=='Half\x20Cover-10'){_0x185798[_0x4beebb(0x2d2)][_0x4beebb(0x358)](_0x2386f4,0x1),_0x185798[_0x4beebb(0x372)]+=0x2,_0x185798['percenthitchance']+=0xa,_0x185798[_0x4beebb(0x2e3)]+=takeav(_0x185798[_0x4beebb(0x39e)])*0.1;continue;}if(_0x185798[_0x4beebb(0x2d2)][_0x2386f4]=='Three\x20Quarters\x20Cover-25'){_0x185798[_0x4beebb(0x2d2)]['splice'](_0x2386f4,0x1),_0x185798['extrinsmod']+=0x5,_0x185798['percenthitchance']+=0x19,_0x185798['avdamageac10']+=takeav(_0x185798[_0x4beebb(0x39e)])*0.25;continue;}}_0x185798[_0x4beebb(0x482)]=Math[_0x4beebb(0x373)](_0x185798[_0x4beebb(0x482)],0x64);const _0x4a4745=function(){const _0x4e6849=_0x4beebb,_0x5a1352=bresenhamLine(_0x185798[_0x4e6849(0x295)],_0x456bb5),_0x56bcd3=_0x5a1352['map'](_0xb79893=>newgrid[_0xb79893[0x0]][_0xb79893[0x1]]);_0x56bcd3[_0x4e6849(0x348)](function(_0x520ebc){const _0x4a346e=_0x4e6849;if(_0x520ebc[_0x4a346e(0x3ec)]&&_0x520ebc['character']['pc']!==_0x185798['character']['pc']){const _0x1b69aa=_0x185798,_0x4a458c=_0x520ebc['character'];Math[_0x4a346e(0x282)]()*0x64<_0x1b69aa['percenthitchance']&&_0x4a458c?_0x4a458c[_0x4a346e(0x224)](randomNumber(_0x1b69aa[_0x4a346e(0x39e)][0x1],_0x1b69aa[_0x4a346e(0x39e)][0x0])):adduilabel(_0x4a346e(0x49a),_0x520ebc[_0x4a346e(0x295)],[0x80,0x80,0x80],0x1,!![],![]);}});},_0x467b04=function(){const _0xb4e41b=_0x4beebb;let _0x14f289=new Attack(_0xb4e41b(0x493),attackfunc,[0x0,0x0,0x0,0x1],_0x185798['character'][_0xb4e41b(0x398)](_0x185798['weapon']),_0x456bb5,_0x185798[_0xb4e41b(0x3ec)],_0x185798['pos']);_0x185798[_0xb4e41b(0x3ec)][_0xb4e41b(0x3a8)][_0xb4e41b(0x23c)](_0x14f289);};return _0x185798['onhiteffects']['push'](_0x4a4745),_0x185798[_0x4beebb(0x38a)][_0x4beebb(0x23c)](_0x4a4745),_0x185798[_0x4beebb(0x2a7)][_0x4beebb(0x23c)](_0x467b04),_0x185798[_0x4beebb(0x38a)]['push'](_0x467b04),_0x185798;};}}class Shortbow extends Weapon{constructor(){const _0x1a5155=_0x1a99ef;super(_0x1a5155(0x3eb),')',materials[_0x1a5155(0x2b3)],actions[_0x1a5155(0x493)],6.9,0x0,0x2,0x1,1.9,soundeffects[_0x1a5155(0x376)]),this[_0x1a5155(0x3f4)]=_0x1a5155(0x342),this['ammoconstructor']=Arrow,this[_0x1a5155(0x44b)]=!![],this[_0x1a5155(0x3ce)]=!![];}}function _0x4a83(_0x3527f8,_0x2c43bd){const _0x55a6e6=_0x55a6();return _0x4a83=function(_0x4a839c,_0x37e3f7){_0x4a839c=_0x4a839c-0x1e5;let _0x5b6867=_0x55a6e6[_0x4a839c];return _0x5b6867;},_0x4a83(_0x3527f8,_0x2c43bd);}class Handcrossbow extends Weapon{constructor(){const _0xfd186e=_0x1a99ef;super(_0xfd186e(0x46a),')',materials[_0xfd186e(0x2b3)],actions[_0xfd186e(0x493)],6.9,0x0,0x2,0x1,1.9,soundeffects[_0xfd186e(0x376)]),this['ammotype']=_0xfd186e(0x465),this[_0xfd186e(0x26a)]=Bolt,this[_0xfd186e(0x2ba)]=!![],this[_0xfd186e(0x3ce)]=!![];}}class Heavy_Crossbow extends Weapon{constructor(){const _0x1074f9=_0x1a99ef;super(_0x1074f9(0x262),')',materials[_0x1074f9(0x2b3)],actions[_0x1074f9(0x493)]['slice'](),7.9,0x0,0x6,0x1,1.9,soundeffects[_0x1074f9(0x376)]),this['ammotype']='Bolt',this['ammoconstructor']=Bolt,this[_0x1074f9(0x3ce)]=!![],this['reloading']=!![],this[_0x1074f9(0x3d4)]=shoveattackpermute;}}class Bolas extends Weapon{constructor(_0x18e189){const _0x40a4fd=_0x1a99ef;super('Bolas','%',materials[_0x40a4fd(0x2b3)],actions[_0x40a4fd(0x493)],5.5,0x0,0x1,0x1,null,soundeffects['daggerdraw'],soundeffects[_0x40a4fd(0x477)]),this['stacksize']=0x3,this[_0x40a4fd(0x387)]=!![],this[_0x40a4fd(0x21a)]=_0x18e189||0x1,_0x18e189>0x1&&(this[_0x40a4fd(0x41d)]=this[_0x40a4fd(0x367)]+'('+this[_0x40a4fd(0x21a)]+')'),this[_0x40a4fd(0x3d4)]=function(_0x52aba8,_0x3215c2){const _0x18866f=_0x40a4fd,[_0x4afad8,_0x38f635]=_0x3215c2,_0x4ad8b3=function(){const _0x3b9c19=_0x4a83;addconditiondynamic(conditions[_0x3b9c19(0x469)],!![],newgrid[_0x4afad8][_0x38f635]['character'])();};return _0x52aba8[_0x18866f(0x2a7)][_0x18866f(0x23c)](_0x4ad8b3),_0x52aba8[_0x18866f(0x39e)]=[0x1,0x1],newgrid[_0x4afad8][_0x38f635]['character']&&lackscondition(conditions['Prone'],newgrid[_0x4afad8][_0x38f635][_0x18866f(0x3ec)])&&(_0x52aba8[_0x18866f(0x2e3)]+=0x5),_0x52aba8;};}}class OilFlask extends Weapon{constructor(_0x4ec3e8){const _0x2b3027=_0x1a99ef;super(_0x2b3027(0x45c),',',materials['mud'],actions[_0x2b3027(0x493)],5.5,0x0,0x1,0x1,null,soundeffects['daggerdraw'],soundeffects[_0x2b3027(0x4a8)]),this[_0x2b3027(0x4cf)]=0x3,this['consumable']=!![],this[_0x2b3027(0x21a)]=_0x4ec3e8||0x1,_0x4ec3e8>0x1&&(this[_0x2b3027(0x41d)]=this[_0x2b3027(0x367)]+'('+this[_0x2b3027(0x21a)]+')'),this[_0x2b3027(0x3d4)]=function(_0x3be14a,_0x4d458e){const _0x1e058d=_0x2b3027,[_0x22b049,_0x4d9e52]=_0x4d458e,_0x3bd91a=function(){const _0x5d5bb7=_0x4a83;for(let _0x3deff9=0x0;_0x3deff9<0x9;_0x3deff9++){newgrid[_0x22b049][_0x4d9e52][_0x5d5bb7(0x307)](new oil());}newgrid[_0x22b049][_0x4d9e52][_0x5d5bb7(0x35b)][_0x5d5bb7(0x348)](_0x546b9f=>_0x546b9f['burn']());};return _0x3be14a['onhiteffects'][_0x1e058d(0x23c)](_0x3bd91a),_0x3be14a[_0x1e058d(0x38a)][_0x1e058d(0x23c)](_0x3bd91a),_0x3be14a[_0x1e058d(0x39e)]=[0x0,0x0],_0x3be14a['percenthitchance']=0x64,_0x3be14a[_0x1e058d(0x286)]=0x0,_0x3be14a[_0x1e058d(0x372)]=0x0,_0x3be14a[_0x1e058d(0x2d2)]=[],_0x3be14a;};}}class SmokeBomb extends Weapon{constructor(_0x3a7823){const _0x1030b5=_0x1a99ef;super(_0x1030b5(0x46c),',',materials['mud'],actions['Attack'],5.5,0x0,0x1,0x1,null,soundeffects[_0x1030b5(0x30f)],soundeffects['puncture']),this['stacksize']=0x3,this['consumable']=!![],this[_0x1030b5(0x21a)]=_0x3a7823||0x1,_0x3a7823>0x1&&(this[_0x1030b5(0x41d)]=this['basename']+'('+this['number']+')'),this[_0x1030b5(0x3d4)]=function(_0x13e561,_0x1ab4d9){const _0x179fff=_0x1030b5,[_0x474a32,_0x17e714]=_0x1ab4d9,_0x4a5a08=function(){for(let _0xee40d6=0x0;_0xee40d6<0xc8;_0xee40d6++){newgrid[_0x474a32][_0x17e714]['addFluid'](new smoke());}};return _0x13e561['onhiteffects'][_0x179fff(0x23c)](_0x4a5a08),_0x13e561[_0x179fff(0x38a)]['push'](_0x4a5a08),_0x13e561[_0x179fff(0x39e)]=[0x0,0x0],_0x13e561[_0x179fff(0x482)]=0x64,_0x13e561[_0x179fff(0x286)]=0x0,_0x13e561[_0x179fff(0x372)]=0x0,_0x13e561[_0x179fff(0x2d2)]=[],_0x13e561;};}}class CaltropsBag extends Weapon{constructor(_0x45873d){const _0x7ccb8=_0x1a99ef;super(_0x7ccb8(0x37c),'.',materials['wood'],actions[_0x7ccb8(0x493)],50.5,0x0,0x1,0x1,null,soundeffects['daggerdraw'],soundeffects[_0x7ccb8(0x477)]),this['stacksize']=0x3,this[_0x7ccb8(0x387)]=!![],this[_0x7ccb8(0x21a)]=_0x45873d||0x1,_0x45873d>0x1&&(this['name']=this[_0x7ccb8(0x367)]+'('+this['number']+')'),this[_0x7ccb8(0x3d4)]=function(_0x430d70,_0x38a1e1){const _0x23e6d8=_0x7ccb8;_0x430d70[_0x23e6d8(0x3d5)][_0x23e6d8(0x2e1)]==0x1&&_0x430d70[_0x23e6d8(0x3d5)][0x0]==_0x23e6d8(0x462)&&(_0x430d70[_0x23e6d8(0x3d5)]=[]);const [_0x4bb3cc,_0x68ee0f]=_0x38a1e1,_0x417ae8=function(){const _0x1ada36=_0x23e6d8;for(let _0x1cab80=0x0;_0x1cab80<0x8;_0x1cab80++){newgrid[_0x4bb3cc][_0x68ee0f][_0x1ada36(0x444)](new Caltrops());}};return _0x430d70[_0x23e6d8(0x2a7)]['push'](_0x417ae8),_0x430d70[_0x23e6d8(0x38a)][_0x23e6d8(0x23c)](_0x417ae8),_0x430d70[_0x23e6d8(0x39e)]=[0x0,0x0],_0x430d70['percenthitchance']=0x64,_0x430d70[_0x23e6d8(0x286)]=0x0,_0x430d70['extrinsmod']=0x0,_0x430d70['modbreakdown']=[],_0x430d70;};}}class FlashPowder extends Weapon{constructor(_0x173165){const _0x4109ab=_0x1a99ef;super('Flash\x20Powder','.',materials['wood'],actions[_0x4109ab(0x493)],5.5,0x0,0x1,0x1,null,soundeffects[_0x4109ab(0x30f)],soundeffects[_0x4109ab(0x477)]),this[_0x4109ab(0x4cf)]=0x3,this[_0x4109ab(0x387)]=!![],this[_0x4109ab(0x21a)]=_0x173165||0x1,_0x173165>0x1&&(this[_0x4109ab(0x41d)]=this['basename']+'('+this[_0x4109ab(0x21a)]+')'),this[_0x4109ab(0x3d4)]=function(_0x5390a1,_0x4250b4){const _0x5de81a=_0x4109ab;_0x5390a1[_0x5de81a(0x3d5)][_0x5de81a(0x2e1)]==0x1&&_0x5390a1[_0x5de81a(0x3d5)][0x0]=='No\x20Target'&&(_0x5390a1['errors']=[]);const [_0x2ee75c,_0x4924c4]=_0x4250b4,_0xe9989=function(){const _0x556e45=_0x5de81a;for(let _0x328c5b=0x1;_0x328c5b<0xa;_0x328c5b+=0x2){newgrid[_0x2ee75c][_0x4924c4][_0x556e45(0x3ca)](new lightsource(this[_0x556e45(0x295)],[0x100,0x100,0x100],[_0x328c5b,_0x328c5b*(0x6/0xa),_0x328c5b*(0x4/0xa)],0x3),0x1);}for(let _0x436b2a=0xa;_0x436b2a>0x1;_0x436b2a-=0x2){newgrid[_0x2ee75c][_0x4924c4][_0x556e45(0x3ca)](new lightsource(this[_0x556e45(0x295)],[0x100,0x100,0x100],[_0x436b2a,_0x436b2a*(0x6/0xa),_0x436b2a*(0x4/0xa)],0x3),0x1);}updatelightmap(),updatetraitspassive();};return _0x5390a1[_0x5de81a(0x2a7)][_0x5de81a(0x23c)](_0xe9989),_0x5390a1[_0x5de81a(0x38a)][_0x5de81a(0x23c)](_0xe9989),_0x5390a1[_0x5de81a(0x39e)]=[0x0,0x0],_0x5390a1[_0x5de81a(0x482)]=0x64,_0x5390a1[_0x5de81a(0x286)]=0x0,_0x5390a1['extrinsmod']=0x0,_0x5390a1[_0x5de81a(0x2d2)]=[],_0x5390a1;};}}class Grenade extends Weapon{constructor(_0x131d07){const _0x19bbcb=_0x1a99ef;super(_0x19bbcb(0x1f1),_0x19bbcb(0x293),materials[_0x19bbcb(0x424)],actions[_0x19bbcb(0x493)],5.5,0x0,0x1,0x1,null,soundeffects[_0x19bbcb(0x30f)],soundeffects[_0x19bbcb(0x477)]),this[_0x19bbcb(0x4cf)]=0x3,this[_0x19bbcb(0x387)]=!![],this[_0x19bbcb(0x21a)]=_0x131d07||0x1;_0x131d07>0x1&&(this['name']=this[_0x19bbcb(0x367)]+'('+this['number']+')');const _0x517372=this;this[_0x19bbcb(0x3d4)]=function(_0x40fb9f,_0x22f9d5){const _0x122298=_0x19bbcb,[_0x49d751,_0x130233]=_0x22f9d5,_0x59c10c=function(){const _0x135e06=_0x4a83,_0x55bf4b=[...directions,[0x0,0x0]];_0x55bf4b['forEach'](function(_0x45b12d){const _0x1501ba=_0x4a83,[_0x588bf3,_0x1008e3]=_0x45b12d['map']((_0x19101e,_0x1a6d0a)=>_0x19101e+_0x22f9d5[_0x1a6d0a]),_0x27d1d2=newgrid[_0x588bf3][_0x1008e3],_0x14e1e8=_0x27d1d2[_0x1501ba(0x3ec)];_0x27d1d2[_0x1501ba(0x312)][_0x1501ba(0x2e1)]>0x0&&_0x27d1d2[_0x1501ba(0x312)][_0x1501ba(0x348)](_0x385e48=>_0x385e48['damage'](0xa));rangedanimate(_0x22f9d5,[_0x588bf3,_0x1008e3],convertAbstoColor(_0x517372[_0x1501ba(0x2bc)]));if(_0x14e1e8&&_0x14e1e8['dead']!==!![])_0x14e1e8[_0x1501ba(0x224)](0xa);_0x27d1d2['addFluid'](new smoke('Smoke','',[0.1,0.1,0.1],[0.5,0.5,0.5],0.1,!![],0x0,null,null,null));}),adduilabel('*',_0x22f9d5,convertAbstoColor(materials[_0x135e06(0x4ae)]),0x0,!![],![],![],![],0x1);};return _0x40fb9f['onhiteffects'][_0x122298(0x23c)](_0x59c10c),_0x40fb9f['onmisseffects']['push'](_0x59c10c),_0x40fb9f[_0x122298(0x39e)]=[0x0,0x0],_0x40fb9f[_0x122298(0x482)]=0x64,_0x40fb9f[_0x122298(0x286)]=0x0,_0x40fb9f['extrinsmod']=0x0,_0x40fb9f[_0x122298(0x2d2)]=[],_0x40fb9f;};}}class Bonfire extends object{constructor(){const _0x4b76cc=_0x1a99ef;super(_0x4b76cc(0x3e4),'*',[0.2,0.2,0.2],null,0.25,![],null,null,null,null,null),this[_0x4b76cc(0x3d8)]=![];}[_0x1a99ef(0x46d)](){const _0x3202b7=_0x1a99ef;super[_0x3202b7(0x46d)](),this[_0x3202b7(0x2d0)]=actions[_0x3202b7(0x2db)];}[_0x1a99ef(0x208)](_0x238df4){const _0x49493b=_0x1a99ef;if(!this['lit'])this[_0x49493b(0x3d9)]();else _0x238df4[_0x49493b(0x1f3)](_0x238df4[_0x49493b(0x486)]-_0x238df4['hp']);}[_0x1a99ef(0x3d9)](){const _0x570702=_0x1a99ef;this[_0x570702(0x31e)]=!![],this[_0x570702(0x41d)]=_0x570702(0x4ce),this['absorbtion']=materials[_0x570702(0x4ae)],this[_0x570702(0x2df)]['push'](new lightsource(this[_0x570702(0x295)],[0x100,0x100,0x100],[2.5,1.5,0x1],0x2));}}class Brazier extends object{constructor(){const _0x1ad0dc=_0x1a99ef;super(_0x1ad0dc(0x381),'o',materials[_0x1ad0dc(0x424)],null,0.25,![],null,null),this[_0x1ad0dc(0x490)]=!![],this[_0x1ad0dc(0x499)]=Infinity,this[_0x1ad0dc(0x20f)]=![];}[_0x1a99ef(0x3d9)](){const _0x4a2d3a=_0x1a99ef;this[_0x4a2d3a(0x41d)]=_0x4a2d3a(0x41c)+this[_0x4a2d3a(0x367)],this['basename']=_0x4a2d3a(0x41c)+this[_0x4a2d3a(0x367)],this[_0x4a2d3a(0x235)]=!![],this[_0x4a2d3a(0x2df)][_0x4a2d3a(0x23c)](new lightsource(this[_0x4a2d3a(0x295)],[0x100,0x100,0x100],[2.5,1.5,0x1],0x2));}}class corpse extends object{constructor(_0x572682,_0x27b039,_0x278aff,_0x3dbcea,_0x10a575,_0x58a4ea,_0x4fd1ce,_0x37cc06,_0x3bffa9,_0x35c66e,_0x7554){const _0xc75f05=_0x1a99ef;super(_0x572682,_0x27b039,_0x278aff,_0x3dbcea,_0x10a575,_0x58a4ea,_0x4fd1ce,_0x37cc06,_0x3bffa9,_0x35c66e,_0x7554),this[_0xc75f05(0x490)]=!![];}['initialize'](){const _0x6f3128=_0x1a99ef;super[_0x6f3128(0x46d)](),envobjects[_0x6f3128(0x23c)](this),newgrid[this['pos'][0x0]][this[_0x6f3128(0x295)][0x1]][_0x6f3128(0x307)](new blood(_0x6f3128(0x49b),'',[0x0,0x0,0x0],materials['blood'],0x0,!![],0x0));}['update'](){const _0x52f653=_0x1a99ef;super[_0x52f653(0x4a0)]();const [_0x1233a3,_0x2f7120]=this[_0x52f653(0x295)],_0x4eac88=newgrid[_0x1233a3][_0x2f7120];Math[_0x52f653(0x282)]()>0.5&&newgrid[_0x1233a3][_0x2f7120][_0x52f653(0x307)](new blood(_0x52f653(0x49b),'',[0x0,0x0,0x0],[0.5,0.1,0.1],0x0,!![],0x0)),Math['random']()>0.25&&envobjects[_0x52f653(0x23c)](this);}}class explodingBarrel extends object{constructor(){const _0x3728cf=_0x1a99ef;super(_0x3728cf(0x34a),_0x3728cf(0x3ba),materials[_0x3728cf(0x2b3)]),this[_0x3728cf(0x3d8)]=!![];}[_0x1a99ef(0x48c)](){const _0x11f376=_0x1a99ef;super[_0x11f376(0x48c)](),this[_0x11f376(0x2a3)]();}[_0x1a99ef(0x2a3)](){const _0x485422=_0x1a99ef,_0x1b7c6c=this,[_0x32e73d,_0x1f106e]=this['pos'];for(let _0x56eca6=0x1;_0x56eca6<0xa;_0x56eca6+=0x2){newgrid[_0x32e73d][_0x1f106e][_0x485422(0x3ca)](new lightsource(this['pos'],[0x100,0x100,0x100],[_0x56eca6,_0x56eca6*(0x6/0xa),_0x56eca6*(0x4/0xa)],0x3),0x1);}for(let _0x1ef26e=0xa;_0x1ef26e>0x1;_0x1ef26e-=0x2){newgrid[_0x32e73d][_0x1f106e][_0x485422(0x3ca)](new lightsource(this['pos'],[0x100,0x100,0x100],[_0x1ef26e,_0x1ef26e*(0x6/0xa),_0x1ef26e*(0x4/0xa)],0x3),0x1);}drawGrid(!![]),updatetraitspassive(),directions[_0x485422(0x348)](function(_0xc5d3db){const _0x367567=_0x485422,[_0x2cf2ec,_0x57aea9]=_0xc5d3db[_0x367567(0x4a9)]((_0x13f061,_0x2b6a04)=>_0x13f061+_0x1b7c6c[_0x367567(0x295)][_0x2b6a04]),_0x24b568=newgrid[_0x2cf2ec][_0x57aea9],_0x597e6d=_0x24b568[_0x367567(0x3ec)];_0x24b568[_0x367567(0x312)][_0x367567(0x2e1)]>0x0&&_0x24b568[_0x367567(0x312)][_0x367567(0x348)](_0x4fd658=>_0x4fd658[_0x367567(0x224)](0xa));rangedanimate(_0x1b7c6c[_0x367567(0x295)],[_0x2cf2ec,_0x57aea9],convertAbstoColor(_0x1b7c6c[_0x367567(0x2bc)]));if(_0x597e6d&&_0x597e6d[_0x367567(0x304)]!==!![])_0x597e6d['damage'](0xa);}),adduilabel('*',_0x1b7c6c[_0x485422(0x295)],convertAbstoColor(materials[_0x485422(0x4ae)]),0x0,!![],![],![],![],0x1);}}class door extends object{constructor(_0x5d0cd2=![]){const _0x50c0cf=_0x1a99ef;super(_0x50c0cf(0x32e),'+',materials['wood'],null,0x1,![],0x0,actions['Open']);if(Math[_0x50c0cf(0x282)]()>0.6)this[_0x50c0cf(0x47c)]=!![];if(_0x5d0cd2)this[_0x50c0cf(0x47c)]=![];else this[_0x50c0cf(0x47c)]=![];this[_0x50c0cf(0x3b7)]=0x2,this['hp']=0x2,this[_0x50c0cf(0x3d8)]=!![],this[_0x50c0cf(0x490)]=!![];}[_0x1a99ef(0x42e)](){const _0x153e5e=_0x1a99ef;if(this['locked'])return![];this['action']=null,this[_0x153e5e(0x3e8)]=0x0,this['traversable']=!![],this[_0x153e5e(0x37b)]=0x0,this[_0x153e5e(0x1f5)]='/';}[_0x1a99ef(0x32d)](){const _0x501bbd=_0x1a99ef;this[_0x501bbd(0x42e)]();const [_0x29caaa,_0x2fdd86]=this[_0x501bbd(0x295)];newgrid[_0x29caaa][_0x2fdd86]['updateObjects']();}}class Window extends object{constructor(){const _0x28f99a=_0x1a99ef;super('Window','=',materials[_0x28f99a(0x2b3)],null,0x0,![],null);}}class Pit extends object{constructor(){super('','',null,null,0x0,![],null);}[_0x1a99ef(0x46d)](){const _0xc78d48=_0x1a99ef,[_0x21b2c6,_0x2014c5]=this[_0xc78d48(0x295)];newgrid[_0x21b2c6][_0x2014c5][_0xc78d48(0x439)]-=0x5,newgrid[_0x21b2c6-0x1][_0x2014c5][_0xc78d48(0x439)]-=0x5,newgrid[_0x21b2c6+0x1][_0x2014c5][_0xc78d48(0x439)]-=0x5,newgrid[_0x21b2c6][_0x2014c5-0x1][_0xc78d48(0x439)]-=0x5,newgrid[_0x21b2c6][_0x2014c5+0x1][_0xc78d48(0x439)]-=0x5;}}class wolfCage extends object{constructor(_0x5034b0,_0x9df91c,_0x1b6493,_0x256e04,_0x5af5ab,_0x45ec57,_0x1bfebb,_0x32af80,_0xbd18f7,_0x348764,_0x3be284){super(_0x5034b0,_0x9df91c,_0x1b6493,_0x256e04,_0x5af5ab,_0x45ec57,_0x1bfebb,_0x32af80,_0xbd18f7,_0x348764,_0x3be284);}['break'](){const _0x809b22=_0x1a99ef;this['freeWolf'](),super[_0x809b22(0x48c)]();}[_0x1a99ef(0x31b)](){const _0x285fac=_0x1a99ef,[_0x55a9b5,_0x51f429]=this[_0x285fac(0x295)];newgrid[_0x55a9b5][_0x51f429]['addCharacter'](new Wolf([_0x55a9b5,_0x51f429]));}}class WargPost extends object{constructor(){const _0x1475ce=_0x1a99ef;super(_0x1475ce(0x4b8),'2022',materials[_0x1475ce(0x2b3)],null,0.25,![],null,null,null,[]);}['initialize'](){const _0x1bf22b=_0x1a99ef;super[_0x1bf22b(0x46d)]();const [_0x5209f1,_0x2839dd]=this['pos'];this[_0x1bf22b(0x22b)]=new Warg([_0x5209f1,_0x2839dd]);for(let _0x209178=0x0;_0x209178<0x1;_0x209178++){newgrid[_0x5209f1][_0x2839dd]['addCharacter'](this[_0x1bf22b(0x22b)]);}envobjects[_0x1bf22b(0x23c)](this);}[_0x1a99ef(0x4a0)](){const _0x1328a0=_0x1a99ef;this[_0x1328a0(0x3c0)]!==!![]&&envobjects[_0x1328a0(0x23c)](this);for(let _0x4918df=0x0;_0x4918df<this[_0x1328a0(0x22b)][_0x1328a0(0x37e)][_0x1328a0(0x2e1)];_0x4918df++){const _0x31588f=this[_0x1328a0(0x22b)]['conditions'][_0x4918df];if(_0x31588f[_0x1328a0(0x41d)]=='Restrained'){_0x31588f[_0x1328a0(0x28a)]=0x1;return;}}addconditiondynamic(conditions[_0x1328a0(0x4c1)],![],this[_0x1328a0(0x22b)])();}[_0x1a99ef(0x48c)](){const _0x17b6ab=_0x1a99ef;removecondition(this[_0x17b6ab(0x22b)],_0x17b6ab(0x4c1)),super[_0x17b6ab(0x48c)]();}}class Spawning_Membrane extends object{constructor(){const _0x41ac6b=_0x1a99ef;super(_0x41ac6b(0x355),'&#x03A9',[0.5,0.5,0.5],null,0.5,![],null,null,null),this['creature']=[Goblin_Dagger,Goblin_Shortbow,Ogre,Giant][randomNumber(0x4)],this[_0x41ac6b(0x2df)]=[new lightsource(null,[0x80,0x8,0x40],[0x1,0x1,0x1],0x1)],this['destructable']=!![],this['flammable']=!![];}[_0x1a99ef(0x46d)](){const _0x16395f=_0x1a99ef;super['initialize']();const [_0x2001a7,_0x260d11]=this[_0x16395f(0x295)];newgrid[_0x2001a7][_0x260d11][_0x16395f(0x307)](new LarvalFluid()),newgrid[_0x2001a7][_0x260d11][_0x16395f(0x307)](new LarvalFluid()),newgrid[_0x2001a7][_0x260d11]['addFluid'](new LarvalFluid()),newgrid[_0x2001a7][_0x260d11]['addFluid'](new LarvalFluid());}[_0x1a99ef(0x1f8)](){const _0xf86288=_0x1a99ef;this[_0xf86288(0x4bc)]=[new LarvalFluid(),new LarvalFluid(),new LarvalFluid(),new LarvalFluid(),new LarvalFluid()];}[_0x1a99ef(0x224)](_0x44b986){const _0x596c74=_0x1a99ef;this[_0x596c74(0x3a3)]=_0x44b986,this['break']();}[_0x1a99ef(0x48c)](){const _0x1d4271=_0x1a99ef;this[_0x1d4271(0x233)](),super[_0x1d4271(0x48c)]();}[_0x1a99ef(0x233)](){const _0x5f091f=_0x1a99ef,[_0x5f3cae,_0x4f1bc2]=this['pos'],_0x42416a=new this['creature']([_0x5f3cae,_0x4f1bc2]);_0x42416a[_0x5f091f(0x375)]=_0x42416a[_0x5f091f(0x44c)],_0x42416a['hp']=Math[_0x5f091f(0x37a)](_0x42416a['hp']/(0x4/0x3));if(Math[_0x5f091f(0x282)]()>0.5)addconditiondynamic(conditions[_0x5f091f(0x2af)],!![],_0x42416a)();newgrid[_0x5f3cae][_0x4f1bc2][_0x5f091f(0x25c)](_0x42416a),_0x42416a[_0x5f091f(0x224)](this[_0x5f091f(0x3a3)]);}}class Spawning_Membrane_Special extends object{constructor(_0x30f14c){const _0x10b44c=_0x1a99ef;super(_0x10b44c(0x355),_0x10b44c(0x2fe),[0.5,0.5,0.5],null,0.5,![],null,null,null),this[_0x10b44c(0x2b7)]=_0x30f14c,this[_0x10b44c(0x2df)]=[new lightsource(null,[0x80,0x8,0x40],[0x1,0x1,0x1],0x1)],this[_0x10b44c(0x3d8)]=!![],this[_0x10b44c(0x490)]=!![];}['verbose'](){const _0x5be951=_0x1a99ef,_0x1f643f=['extreme',_0x5be951(0x254),_0x5be951(0x36e),_0x5be951(0x48d)],_0x40f2eb=Math[_0x5be951(0x4bb)](playercs[_0x5be951(0x2e1)]-0x1,0x0),_0x3cf287=Math['min'](playercs[_0x5be951(0x2e1)],0x3),_0x192db4=_0x5be951(0x419)+_0x1f643f[_0x40f2eb]+_0x5be951(0x33e)+_0x1f643f[_0x3cf287];return _0x192db4;}[_0x1a99ef(0x492)](){const _0xafa171=_0x1a99ef;let _0x410556=[Deserter,Fugitive,Huntsman,Berserker,Sentinel,Ranger];for(let _0x5142b9=0x0;_0x5142b9<_0x410556[_0xafa171(0x2e1)];_0x5142b9++){for(let _0x33d740=0x0;_0x33d740<playercs['length'];_0x33d740++){_0x410556[_0x5142b9]&&playercs[_0x33d740]instanceof _0x410556[_0x5142b9]&&_0x410556[_0xafa171(0x358)](_0x5142b9,0x1);}}if(_0x410556[_0xafa171(0x2e1)]>0x0)return _0x410556[0x0];else return Prisoner;}[_0x1a99ef(0x46d)](){const _0x5f2fa1=_0x1a99ef;super[_0x5f2fa1(0x46d)]();const [_0x9b028c,_0x231891]=this[_0x5f2fa1(0x295)];newgrid[_0x9b028c][_0x231891][_0x5f2fa1(0x307)](new LarvalFluid()),newgrid[_0x9b028c][_0x231891][_0x5f2fa1(0x307)](new LarvalFluid()),newgrid[_0x9b028c][_0x231891][_0x5f2fa1(0x307)](new LarvalFluid()),newgrid[_0x9b028c][_0x231891][_0x5f2fa1(0x307)](new LarvalFluid());}[_0x1a99ef(0x1f8)](){const _0x119c4b=_0x1a99ef;this[_0x119c4b(0x4bc)]=[new LarvalFluid(),new LarvalFluid(),new LarvalFluid(),new LarvalFluid(),new LarvalFluid()];}[_0x1a99ef(0x224)](_0x127e39){const _0x5d686d=_0x1a99ef;this[_0x5d686d(0x3a3)]=_0x127e39,this[_0x5d686d(0x48c)]();}[_0x1a99ef(0x48c)](){const _0x586ee6=_0x1a99ef;this[_0x586ee6(0x233)](),super[_0x586ee6(0x48c)]();}[_0x1a99ef(0x233)](){const _0x520443=_0x1a99ef;if(!this[_0x520443(0x2b7)])this[_0x520443(0x2b7)]=this[_0x520443(0x492)]();const [_0x2ffbdd,_0x549841]=this[_0x520443(0x295)],_0x2e8d95=new this[(_0x520443(0x2b7))]([_0x2ffbdd,_0x549841]);addconditiondynamic(conditions[_0x520443(0x488)],!![],_0x2e8d95)(),newgrid[_0x2ffbdd][_0x549841]['addCharacter'](_0x2e8d95);}}class spikeTrap extends object{constructor(){const _0x4d61b8=_0x1a99ef;super('Spike\x20Trap',';',materials[_0x4d61b8(0x424)]),this[_0x4d61b8(0x3d8)]=!![],this['hp']=0x2,this[_0x4d61b8(0x490)]=!![],this[_0x4d61b8(0x317)]=![],this[_0x4d61b8(0x40d)]=[0x1,0x0];}[_0x1a99ef(0x2b2)](_0x22e2ee,_0xba7c5c,_0x44cf77){const _0x2145c0=_0x1a99ef;super[_0x2145c0(0x2b2)](_0x22e2ee,_0xba7c5c,_0x44cf77);if(this[_0x2145c0(0x3c0)]!==!![]){const [_0x272a3b,_0x518e3b]=this[_0x2145c0(0x295)];let _0x51fcb0=newgrid[_0x272a3b][_0x518e3b]['lightlevel']>0x2,_0x3413ef=this[_0x2145c0(0x317)]==![],_0x100211=_0xba7c5c['pc']==!![],_0x52e84f=chebyshevDistance(_0xba7c5c['pos'],[_0x272a3b,_0x518e3b])<=0x1;_0x51fcb0&&_0x3413ef&&_0x100211&&_0x52e84f&&(this[_0x2145c0(0x3dd)](),activecharacternonindex['pc']==!![]&&(activecharacternonindex[_0x2145c0(0x3a8)]=[]));const _0x498188=newgrid[_0x272a3b][_0x518e3b][_0x2145c0(0x3ec)];_0x498188!==null&&(_0x498188[_0x2145c0(0x224)](roll(0x3,0x0)),this[_0x2145c0(0x48c)]());}}[_0x1a99ef(0x3dd)](){const _0x41c9ba=_0x1a99ef;adduilabel('!',this[_0x41c9ba(0x295)],[0x100,0x0,0x0],0x0,!![],![],![],![]),this[_0x41c9ba(0x1f5)]=';',this[_0x41c9ba(0x2bc)]=materials[_0x41c9ba(0x424)],this['revealed']=!![],this[_0x41c9ba(0x41d)]=_0x41c9ba(0x353);}[_0x1a99ef(0x46d)](){const _0x184325=_0x1a99ef;super[_0x184325(0x46d)]();const [_0x219e36,_0x182cd5]=this[_0x184325(0x295)];this[_0x184325(0x2bc)]=null,this[_0x184325(0x1f5)]='',this[_0x184325(0x41d)]='';}}class Light extends Item{constructor(_0x4fc1bc,_0x2afb0c,_0x3f56ae){super(_0x4fc1bc,_0x2afb0c,_0x3f56ae);}}class oilLamp extends Light{constructor(){const _0xdad6ff=_0x1a99ef;super('Oil\x20Lamp',_0xdad6ff(0x463),materials['metal']),this[_0xdad6ff(0x2df)][_0xdad6ff(0x23c)](new lightsource(null,[0x100,0x100,0x100],[0x1,0.5,0.25],0x2)),this[_0xdad6ff(0x3d8)]=!![],this[_0xdad6ff(0x490)]=!![];}['break'](){const _0x279d71=_0x1a99ef;super[_0x279d71(0x48c)](),this['setFire']();}['addRemnants'](){const _0x4972ef=_0x1a99ef;super['addRemnants']();const [_0x4afb4e,_0x36c87c]=this['pos'],_0xf7f83d=newgrid[_0x4afb4e][_0x36c87c];for(let _0x20f365=0x0;_0x20f365<0x1;_0x20f365++){const _0x22ffcc=new oil('oil','',[0.75,0.75,0.75],[0.2,0.2,0.2],0x0,!![],0x1,null,null,null);_0x22ffcc[_0x4972ef(0x3d8)]=![],_0x22ffcc[_0x4972ef(0x499)]=0x5,this[_0x4972ef(0x4bc)][_0x4972ef(0x23c)](_0x22ffcc);}}[_0x1a99ef(0x3ff)](){const _0x5d0873=_0x1a99ef,[_0xf1c2cb,_0xb210f5]=this[_0x5d0873(0x295)],_0x29d65a=newgrid[_0xf1c2cb][_0xb210f5];_0x29d65a[_0x5d0873(0x35b)][_0x5d0873(0x348)](_0x5d625e=>_0x5d625e[_0x5d0873(0x3d9)]());}[_0x1a99ef(0x2a3)](){const _0x27e551=_0x1a99ef,_0x11ee56=this,[_0x3b1830,_0x550b39]=this['pos'];for(let _0x1c6cbb=0x1;_0x1c6cbb<0xa;_0x1c6cbb+=0x2){newgrid[_0x3b1830][_0x550b39]['addTempSource'](new lightsource(this[_0x27e551(0x295)],[0x100,0x100,0x100],[_0x1c6cbb,_0x1c6cbb*(0x6/0xa),_0x1c6cbb*(0x4/0xa)],0x3),0x1);}for(let _0x3738e6=0xa;_0x3738e6>0x1;_0x3738e6-=0x2){newgrid[_0x3b1830][_0x550b39][_0x27e551(0x3ca)](new lightsource(this['pos'],[0x100,0x100,0x100],[_0x3738e6,_0x3738e6*(0x6/0xa),_0x3738e6*(0x4/0xa)],0x3),0x1);}drawGrid(!![]),updatetraitspassive(),directions[_0x27e551(0x348)](function(_0x1bff92){const _0x2cc16f=_0x27e551,[_0x416f49,_0x4a7f2b]=_0x1bff92[_0x2cc16f(0x4a9)]((_0x1a3a1f,_0x5329b0)=>_0x1a3a1f+_0x11ee56['pos'][_0x5329b0]),_0x1b6213=newgrid[_0x416f49][_0x4a7f2b],_0x6e07af=_0x1b6213[_0x2cc16f(0x3ec)];_0x1b6213['objects'][_0x2cc16f(0x2e1)]>0x0&&_0x1b6213[_0x2cc16f(0x312)][_0x2cc16f(0x348)](_0x2fe677=>_0x2fe677[_0x2cc16f(0x224)](0xa));rangedanimate(_0x11ee56[_0x2cc16f(0x295)],[_0x416f49,_0x4a7f2b],convertAbstoColor(_0x11ee56['absorbtion']));if(_0x6e07af&&_0x6e07af['dead']!==!![])_0x6e07af[_0x2cc16f(0x224)](0xa);}),adduilabel('*',_0x11ee56[_0x27e551(0x295)],convertAbstoColor(materials['fire']),0x0,!![],![],![],![],0x1);}[_0x1a99ef(0x46d)](){super['initialize']();}}class Shield extends Item{constructor(){const _0x4d4170=_0x1a99ef;super('Shield',_0x4d4170(0x297),materials[_0x4d4170(0x2b3)]);}}class Torch extends Weapon{constructor(_0x930c5e){const _0xe7d3ab=_0x1a99ef;super('Torch','|',materials[_0xe7d3ab(0x2b3)],null,0x5),this[_0xe7d3ab(0x31e)]=!![],this[_0xe7d3ab(0x2df)]=[],this[_0xe7d3ab(0x3f0)]=new lightsource([0x0,0x0],[0x100,0x100,0x100],[2.5,1.5,0x1],0x3),this[_0xe7d3ab(0x4b2)]();if(_0x930c5e)this[_0xe7d3ab(0x300)]=_0x930c5e;this[_0xe7d3ab(0x26f)](0x0),this[_0xe7d3ab(0x41d)]=_0xe7d3ab(0x36b)+this[_0xe7d3ab(0x300)],this[_0xe7d3ab(0x3fe)]=!![];const _0x1fcf0c=this;this['specialeffect']=function(_0x47cf55,[_0x91d4a1,_0x1e98dc]){const _0xef909=_0xe7d3ab,_0x3762df=function(){const _0x143bf7=_0x4a83;if(_0x1fcf0c[_0x143bf7(0x31e)]!==!![])return;_0x1fcf0c[_0x143bf7(0x26f)](0xa),newgrid[_0x91d4a1][_0x1e98dc]['objects'][_0x143bf7(0x2e1)]>0x0&&newgrid[_0x91d4a1][_0x1e98dc][_0x143bf7(0x312)][0x0][_0x143bf7(0x3d9)]();};return _0x47cf55[_0xef909(0x2a7)][_0xef909(0x23c)](_0x3762df),_0x47cf55[_0xef909(0x38a)][_0xef909(0x23c)](_0x3762df),_0x47cf55;},envobjects[_0xe7d3ab(0x23c)](this);}[_0x1a99ef(0x4a0)](){const _0x1de8a7=_0x1a99ef;if(this[_0x1de8a7(0x31e)]===!![])this[_0x1de8a7(0x26f)](0x1);if(this[_0x1de8a7(0x300)]>0x0)envobjects[_0x1de8a7(0x23c)](this);}['removeFuel'](_0x449c34=0x1){const _0x1591b7=_0x1a99ef;this[_0x1591b7(0x300)]-=_0x449c34,this[_0x1591b7(0x41d)]=_0x1591b7(0x36b)+this[_0x1591b7(0x300)];if(this[_0x1591b7(0x300)]<=0x0)this[_0x1591b7(0x4cc)]();else this[_0x1591b7(0x300)]<0x64&&(this[_0x1591b7(0x3f0)][_0x1591b7(0x3d3)]=[1.875,1.135,0.75],this['baselightsource'][_0x1591b7(0x3cb)]=0x2,this[_0x1591b7(0x4b2)]());}[_0x1a99ef(0x4b2)](){const _0x4f0fcd=_0x1a99ef;if(this['lit']===!![])this[_0x4f0fcd(0x2df)][0x0]=this[_0x4f0fcd(0x3f0)];if(this[_0x4f0fcd(0x31e)]===![])this[_0x4f0fcd(0x2df)]=[];}[_0x1a99ef(0x4cc)](){const _0x269749=_0x1a99ef;this[_0x269749(0x2df)]=[],this['basename']=_0x269749(0x253),this['name']=this[_0x269749(0x367)],this[_0x269749(0x31e)]=![];}['stow'](){const _0x1b4223=_0x1a99ef;this[_0x1b4223(0x31e)]==!![]&&(this['removeFuel'](0x5),this[_0x1b4223(0x31e)]=![]),this[_0x1b4223(0x4b2)]();}[_0x1a99ef(0x21b)](){const _0x2d9e57=_0x1a99ef;this[_0x2d9e57(0x26f)](0x5),this[_0x2d9e57(0x4b2)]();}[_0x1a99ef(0x370)](){const _0x55fe08=_0x1a99ef;this[_0x55fe08(0x300)]>0x0&&(this[_0x55fe08(0x31e)]=!![]),this[_0x55fe08(0x4b2)]();}}class Sarcophagus extends object{constructor(){const _0xf3bfb1=_0x1a99ef;super(_0xf3bfb1(0x32c),'I',materials[_0xf3bfb1(0x334)],null,0.5,![]),this[_0xf3bfb1(0x3d8)]=!![];}[_0x1a99ef(0x48c)](){const _0x67abd8=_0x1a99ef,[_0x32acc1,_0x3ccaf1]=this[_0x67abd8(0x295)];let _0x325c98;if(Math['random']()>0.66)Math['random']()<0.5?Math['random']()<0.5?_0x325c98=new Longsword():_0x325c98=new Battleaxe():_0x325c98=new Halberd();else{if(Math[_0x67abd8(0x282)]()>0.5){if(Math[_0x67abd8(0x282)]()<0.5)_0x325c98=new Shortsword();else _0x325c98=new Athame();}else{if(Math[_0x67abd8(0x282)]<0.5)_0x325c98=new Longbow();else _0x325c98=new Recurve_Bow();}}newgrid[_0x32acc1][_0x3ccaf1][_0x67abd8(0x444)](_0x325c98),super[_0x67abd8(0x48c)]();}}class Chest extends object{constructor(){const _0x4260f5=_0x1a99ef;super(_0x4260f5(0x243),_0x4260f5(0x3ba),materials[_0x4260f5(0x2b3)],null,0.5,![]),this[_0x4260f5(0x3d8)]=!![];}[_0x1a99ef(0x48c)](){const _0x23a408=_0x1a99ef,[_0x3ba437,_0x10cd56]=this[_0x23a408(0x295)];let _0x54675d;if(Math[_0x23a408(0x282)]()>0.66)Math[_0x23a408(0x282)]()<0.5?Math[_0x23a408(0x282)]()<0.5?_0x54675d=new Longsword():_0x54675d=new Battleaxe():_0x54675d=new Halberd();else{if(Math[_0x23a408(0x282)]()>0.5){if(Math['random']()<0.5)_0x54675d=new Rapier();else _0x54675d=new Athame();}else _0x54675d=new Longbow();}newgrid[_0x3ba437][_0x10cd56]['addObject'](_0x54675d),super['break']();}}class Rock extends object{constructor(){const _0x4f43c5=_0x1a99ef;super(_0x4f43c5(0x369),_0x4f43c5(0x3ba),materials[_0x4f43c5(0x334)],null,0.25,![],null,null),this[_0x4f43c5(0x3b7)]=0xa,this[_0x4f43c5(0x3d8)]=!![];}}class Leash extends object{constructor(){const _0x3a5217=_0x1a99ef;super(_0x3a5217(0x2a1),'*',materials['wood'],null,0x0,!![],null,null),this['durability']=0xa,this[_0x3a5217(0x3d8)]=!![];}}class oilBarrel extends object{constructor(){const _0x5c1801=_0x1a99ef;super(_0x5c1801(0x34a),_0x5c1801(0x3ba),materials['wood']),this[_0x5c1801(0x3d8)]=!![],this[_0x5c1801(0x490)]=!![];}[_0x1a99ef(0x1f8)](){const _0x4d16b5=_0x1a99ef;super['addRemnants']();const [_0x272dfb,_0xe868d1]=this['pos'],_0x5346b8=newgrid[_0x272dfb][_0xe868d1];for(let _0x4d92f7=0x0;_0x4d92f7<0xa;_0x4d92f7++){const _0xb0bd84=new oil(_0x4d16b5(0x47b),'',[0.75,0.75,0.75],[0.2,0.2,0.2],0x0,!![],0x1,null,null,null);_0xb0bd84[_0x4d16b5(0x3d8)]=![],_0xb0bd84[_0x4d16b5(0x499)]=0x5,this[_0x4d16b5(0x4bc)]['push'](_0xb0bd84);}}}class Chair extends object{constructor(){const _0x4b5e62=_0x1a99ef;super(_0x4b5e62(0x2fa),_0x4b5e62(0x3c8),materials[_0x4b5e62(0x2b3)],null,0.1,!![],0x2),this[_0x4b5e62(0x3d8)]=!![],this[_0x4b5e62(0x490)]=!![];}}class Statue extends object{constructor(){const _0x348eca=_0x1a99ef;super(_0x348eca(0x420),_0x348eca(0x383),materials[_0x348eca(0x496)],null,0.5,![]);}}class Fortification extends object{constructor(){const _0x4b3a65=_0x1a99ef;super(_0x4b3a65(0x46e),'#',materials[_0x4b3a65(0x334)],null,0x1,![]);}}class WoodWall extends object{constructor(){const _0x4eab43=_0x1a99ef;super('','#',materials[_0x4eab43(0x2b3)],null,0x1,![],null,null,[],[]),this[_0x4eab43(0x490)]=!![],this['destructable']=!![],this['durability']=0x1,this['hp']=0xa,this[_0x4eab43(0x499)]=0x63;}}class Bed extends object{constructor(){const _0x3b3c7a=_0x1a99ef;super(_0x3b3c7a(0x28e),'0',materials[_0x3b3c7a(0x2b3)],null,0.2,!![],0x2),this[_0x3b3c7a(0x3d8)]=!![],this['flammable']=!![];}}class Wreckage extends object{constructor(_0x3ad17f){const _0x4c6020=_0x1a99ef,_0x4fae82=_0x3ad17f[_0x4c6020(0x2bc)],_0x3d59d7=_0x3ad17f[_0x4c6020(0x490)];super(_0x4c6020(0x45f),randomSymbol(['/','\x5c']),_0x4fae82,null,0x0,!![],0x0),this[_0x4c6020(0x490)]=_0x3d59d7;}}class TallGrass extends object{constructor(){const _0x3ceb10=_0x1a99ef;super(_0x3ceb10(0x24f),_0x3ceb10(0x3ed),materials['moss'],null,0.5,!![],0x1),this['flammable']=!![],this[_0x3ceb10(0x3d8)]=!![];}}function _0x55a6(){const _0x589b33=['Carrion\x20Insect','Barrel','secondaryitem','Berserker','arrowthudnoise','objecttriggers','raiseDead','Scimitar','getatkbonus','Three\x20Quarters\x20Cover-25','Spike\x20Trap','Disarm','Spawning\x20Membrane','isEmpty','hotdepth','splice','deadend','Deserter','fluids','crystal','nextambientsource','Mace','10OmnUnf','Move','masterAmbientGainNode','Speedsword','volume','Runic\x20Longsword','Caltrops','MossFloor','basename','removeFluid','Rock','abyss','Torch\x20','Stand\x20Ground','getplayerview','moderate','Open','draw','Stone\x20Floor','extrinsmod','min','_find','primaryitem','bowdraw','Goblin\x20Swordsman','a\x20-\x20aim\x20attack','Dagger','round','movecost','Caltrops\x20Bag','Get','conditions','drawsound','_findMaxDistanceInRange','Brazier','Halberd','&#X03A9',');background-color:\x20rgb(','reactBlocked-','Moss\x20Floor','consumable','activetask','overtonesoundmakers','onmisseffects','Half\x20Cover-10','MudFloor','toString','Mushroom','gain','Secondary',';\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20rgb(','Smooth\x20Stone\x20Floor','Huntsman','Offhand\x20Attack','clientX','52427023lhmmLb','Savage\x20Attack+','getrange','createBuffer','&#x02D7','Cavern\x20Wall','Sentinel','dequeue','damagerange','footstep','auto-stand-ground\x20enabled','walltiles','updateAmmo','damageinit','cos','Dim\x20Light+10','Resting','swordswingsmall','actionqueue','linearRampToValueAtTime','drawImage','createOscillator','lowpassFilter','vol','negabsval','array',';\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20x=','SmoothstoneFloor','traversable','freqmod','sources','symbolBase','deathshriek','durability','warnings','dot_prod_grid','2022','defender','redirect','Torchbearer\x20requires\x20lightsource','innerWidth','Battleaxe','destroyed','Web','goblinchat','getminrange','fillStyle','Rapier','lowpass-noise-white','state','&#X043F','Wood\x20Floor','addTempSource','radiance','Leave','Unaware+50','ranged','abs','sawtooth','versatile','&#25C0','lightpref','specialeffect','errors','prehitpermute','Stunned+25','destructable','burn','arrowflight','createBiquadFilter','ammunition','reveal','ceil','activeweapon','\x20is\x20the\x20new\x20target\x20of\x20this\x20character,\x20it\x20should\x20be\x20the\x20same\x20as\x20','reactable','aftereffects','requestSource','Fire\x20Pit','Maul','utilityfunction','Warhammer','opacity','effectschain','Dash','Shortbow','character','&#x222B','requestAmbientSource','filter','baselightsource','pittiles','g\x20-\x20Get\x20Item','updateRouting','ammotype','dungeon','0060','large','delta','uiElements','thiscadence','swordhit','Longbow','origin','throwable','setFire','visibletiles','getContext','enemies','sworddraw','soundmaker','verbose','Spider\x20Brood\x20Mother','charAt','spurt2verb','_insert','condresists','MudWall','targets','hazards','color','los','d\x20-\x20dash','style','ambientsources','tohitbonus','clubwhoom','StoneFloor','Katana','Die','reduce','Break\x20to\x20go\x20from\x20','this\x20enemy\x20is\x20making\x20a\x20reaction,\x20and\x20their\x20action\x20queue\x20wasn\x27t\x20empty','func','Lit\x20','name','dexterity','constitution','Statue','caveambience','<br>','thickness','metal','generategrid','Fall','temperment','slice','knowncharacters','random1sec','Switch\x20Weapon','updateObjects','Sneak\x20attack\x20requires\x20free\x20offhand','open','exp','oldcrack','(Light)','threshold','bleed','&#25B2','tcmax','grid','parent','clubhitnoise','elevation','jump','Exile','specialattack','oldestambientsource','currentTime','maxhotdepth','1626521GTeTXs','Bandit','lowpass-noise','keys','addObject','31340rwSdUw','edges','choking','arrowthudtone','fxnodes','findspawnpoints','twohanded','unarmed','hitsound','Huh?','&#X20B8','clubhitcrack','Actions','actions','getavdamage','overtonenoisemakers','bind','maxDistance','tooltip','knowntiles','Sneak\x20attack\x20requires\x20melee\x20or\x20thrown\x20weapon','1,2,3\x20-\x20switch\x20characters','value','Oil\x20Flask','Polehammer','</span>','Wreckage','Ogre','oldestsource','No\x20Target','&#9827','gainNode','Bolt','randomize','clubwhoosh','dropoffhand','Prone','Hand\x20Crossbow','sort','Smoke\x20Bomb','initialize','Fortification','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20>&nbsp</span>','clientY','misssound','knee','tiles','8AVUQIc','highthudnoise','active','puncture','Larval\x20Fluid','onhotpath','swordswing','oil','locked','ruins','Javelin','range','soundcontent','absorbtionBase','percenthitchance','Greatsword','connect','Spear','maxhp','innerHeight','Stunned','Surprised','Club','specialtag','break','forgiving','auto-dash\x20enabled','Surprised+10','flammable','some','getnewplayercharacter','Attack','woodbreaking2deep','createWaveShaper','marble','getplayerviewold','Warg','burnduration','Miss','Blood','6325572wldbLD','disconnect','L\x20-\x20Leave\x20Offhand\x20Item','overtones','update','fill','Wood\x20Wall','eeesound2','Dwarf','aaasound','gethazards','lastplayed','woodbreaking','map','visiblecharacters','Punching\x20Red\x20Glove\x20Expanding\x20Arm\x20Kapow','Dmg-','keydown','fire','Goblin','mousemove','turneffect','updatelight','removeObject','bossbuffer','error\x20this\x20sound\x20played\x20with\x20no\x20envelope','boss','Skulker','Post','smootherstep','weapon','max','remnants','seed','left','utility','huntedcharacters','Restrained','templightsources','freq','High\x20Ground+10','slope','apply','clubhit','type','has','goblindeath','readOpacity','extinguish','Elder\x20Spider','Bonfire','stacksize','Spiderling','lifespan','ogredeath','14WiufYi','medthudnoise','attack','Water','&nbsp','concat','damagepotential','DirtFloor','bandpass','limiter','Grenade','Shortsword','heal','floor','symbol','sqrt','pop','addRemnants','sampleRate','medthudtone','Flanked+10','removeThickness','die','Damage\x20Range','interp','tasks','content','Cleavebow','addEventListener','two\x20handed+2max','woodbreaking2','damagebonus','scale','interact','Prisoner','RoughStoneFloor','addItem','clubswing','trace','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20x\x20=\x20','immovable','get','top','goblinshriek','addAmmo','root','Sneak\x20Attack+','sound','equipment','dropAll','damagedie','number','drop','Overwatch','swordswingsmallverb','The\x20Scourge\x20has\x20been\x20beaten\x20back...','Broken\x20','X\x20-\x20switch\x20hands','neighbors','findMaxDistanceInRange','224877jNINSf','damage','sine','rand_vect','getElementById','doors','Mossy\x20Wall','Low\x20Ground-10','warg','Bonus\x20determined\x20by\x20dexterity','removeAmmo','button','???<','keyup','updateneighbors','parentnode','freeCreature','createDynamicsCompressor','burning','shriekcooldown','x\x20-\x20switch\x20weapons','mincadence','bgabsorbtion','Shove(','stat','push','water','Jump','specularity','we\x20tried\x20to\x20add\x20this\x20object\x20to\x20a\x20tile,\x20but\x20it\x20had\x20a\x20quantity\x20that\x20didn\x27t\x20make\x20any\x20sense','start','specialmove','Chest','bowstring','fleemap','Shriek','Offhand','Goblin\x20Spearman','ArrowUp','effect','transparancy','Poisoned','removevisiblecharacter','ProneAttack','Grass','Ranger','charred\x20','fillRect','Spent\x20Torch','hard','cursorread','idle','tap','passive','height','Shift','roomgrid','addCharacter','bonus','Pit\x20Trap','auto-stand-ground\x20disabled','9898686leQBvy','starteffect','Heavy\x20Crossbow','values','evaluate','stats','Something\x20in\x20the\x20way','ctrlKey','set','env','ammoconstructor','loudness','goblinchat2','kick','(Finnesse)','removeFuel','Spiderweb','masterGainNode','Asleep+50','trigger','swordring2','font','huntmap','???','nextsource','sign','mud','Greathammer','context','Out\x20of\x20range','Attack\x20of\x20Opportunity','Runic\x20Greatsword','Sneak\x20attack\x20requires\x20finnesse\x20weapon','miniboss','random','spreadfire','addvisiblecharacter','Reactions','intrinsmod','lowpass','Goblin\x20Archer','getplayerviewnew','duration','states','frequency','Chat','Bed','hostile','myCanvas','ambientsoundmaker','canbeblocked','&#x2020','aaasound2','pos','sin','&#x03B8','randomboom','Bonus','aaasound3','knownenemies','noise','deepthudnoise','getFrequencyResponse','heard','swordring3','Rope','createDelay','explode','key','atan2','setValueAtTime','onhiteffects','depth','insert','enqueue','Not\x20a\x20Weapon','Thick\x20','comparator','right','Bleeding','playSound','log','react','wood','walls','agro','hunting','creature','release','MossyWall','light','gradients','absorbtion','goblinscream','offhanditem','trying\x20to\x20alert,\x20but\x20don\x27t\x20know\x20any\x20enemies','&#25BC','constructor','Alert','now','getChannelData','delayTime','Confident','readLightsource','l\x20-\x20Leave\x20Item','Locked','iterations','Goblin\x20Hive\x20Queen','&#25B6','ArrowRight','spawnpoints','footsteptap','action','getrandomtile','modbreakdown','randomstab','bassdrum','Kick','auto-advance\x20disabled','Burning','seen','Unarmed','addthickness','Interact','reactions','addEffect','visible','lightsources','deepthud','length','ispassive','avdamageac10',');\x22>','Giant\x20Spider','fleeing','96grCVqj','Dirt\x20Floor','removeItem','add','shortsworddraw','Necromancer','shift','(Versatile)','baseMoveCost','Dim\x20Light-10','Unconscious','hear','leash','goblinyelp','moss','time','Torchbearer+1max','Glaive','pow','Chair','deathsound','minrange','basesymbol','&#x03A9','eeesound','fuel','output','cost','includes','dead','parentutility','index','addFluid','Asleep','animation','createElement','destination','fillText','lightlevel','swordring','daggerdraw','target','clubhittone','objects','halfboss','unshift','moveCost','Smoke','revealed','charactersinview','ArrowDown','dmg','freeWolf','Rough\x20Stone\x20Wall','Wolf','lit','createGain','width','Hobgoblin\x20Warlord','effects','auto-advance\x20enabled','webkitAudioContext','ownedelements','woodbreakingdeep','loop','resistance','391972bFjmDz','(Thrown)','burnt','Sarcophagus','move','Door','repeat','edgetiles','traits','eeesound3','updatestate','stone','distance','lastseen','getage','soundeffect','neighborsnonindex','canvas','buffer','highthudtone','auto-dash\x20disabled','\x20to\x20','RoughStoneWall','Corpse','endeffect','Arrow','goblinchatverb','rgb(','spurt1','halfbossbuffer','getvisibletiles','forEach'];_0x55a6=function(){return _0x589b33;};return _0x55a6();}class GlowingMushroom extends object{constructor(){const _0x36b4bd=_0x1a99ef;super(_0x36b4bd(0x38e),',',[0x1,0x0,0x1],null,0.25,!![],0x1),this[_0x36b4bd(0x490)]=!![],this[_0x36b4bd(0x2df)]['push'](new lightsource(this[_0x36b4bd(0x295)],[0x40,0x40,0x40],[0x1,0.75,0x1],0x1));}}class Table extends object{constructor(){const _0x497a0e=_0x1a99ef;super('Table',_0x497a0e(0x44f),materials[_0x497a0e(0x2b3)],null,0.2,!![],0x2),this['destructable']=!![],this[_0x497a0e(0x490)]=!![];}}class Spiderweb extends object{constructor(){const _0x273737=_0x1a99ef;super(_0x273737(0x270),'*',[0.6,0.6,0.6],null,0x0,!![],0x0,null,null,null),this[_0x273737(0x40d)]=[0x1,0x0],this[_0x273737(0x3b7)]=0x2,this[_0x273737(0x3d8)]=!![],this['immovable']=!![];}['react'](_0x193585,_0x55d1fd,_0x55f8d5){const _0x367f5d=_0x1a99ef;super['react'](_0x193585,_0x55d1fd,_0x55f8d5);if(this[_0x367f5d(0x3c0)]!==!![]){const [_0x3bd41b,_0x2fc86d]=this[_0x367f5d(0x295)],_0x9175cb=newgrid[_0x3bd41b][_0x2fc86d][_0x367f5d(0x3ec)];_0x9175cb!==null&&(addconditiondynamic(conditions[_0x367f5d(0x4c1)],!![],_0x9175cb)(),this[_0x367f5d(0x48c)]());}}['addRemnants'](){const _0x2c19f8=_0x1a99ef;this[_0x2c19f8(0x4bc)]=[];}}class PitTrap extends object{constructor(){const _0x5c45ba=_0x1a99ef;super(_0x5c45ba(0x25e),'*',[0.6,0.6,0.6],null,0x0,!![],0x0,null,null,null),this['durability']=0x2,this[_0x5c45ba(0x40d)]=[0x1,0x0];}[_0x1a99ef(0x2b2)](_0x324b85,_0x2ce7ea,_0x403c7d){const _0xf77b62=_0x1a99ef;super[_0xf77b62(0x2b2)](_0x324b85,_0x2ce7ea,_0x403c7d);if(this[_0xf77b62(0x3c0)]!==!![]){const [_0x268205,_0x522cdd]=this[_0xf77b62(0x295)];if(_0x403c7d[_0xf77b62(0x310)][0x0]==_0x268205&&_0x403c7d['target'][0x1]==_0x522cdd){for(let _0xb5d3e3=0x0;_0xb5d3e3<0x4;_0xb5d3e3++){const [_0x316b45,_0x59c9d2]=this['pos'][_0xf77b62(0x4a9)]((_0x478272,_0x7dfe6)=>_0x478272+cardinaldirections[_0xb5d3e3][_0x7dfe6]);if(newgrid[_0x316b45]&&newgrid[_0x316b45][_0x59c9d2])newgrid[_0x316b45][_0x59c9d2]['elevation']=-0x1;}newgrid[_0x268205][_0x522cdd][_0xf77b62(0x439)]=-0x2,elevupdate(),this['break']();}}}[_0x1a99ef(0x1f8)](){const _0x3e2910=_0x1a99ef;this[_0x3e2910(0x4bc)]=[];}[_0x1a99ef(0x46d)](){const _0x51402d=_0x1a99ef;super[_0x51402d(0x46d)]();const [_0x5bf9c1,_0x39a5cf]=this['pos'];this[_0x51402d(0x2bc)]=newgrid[_0x5bf9c1][_0x39a5cf][_0x51402d(0x481)],this['symbol']='',this[_0x51402d(0x41d)]='';}}class PitTrapBig extends object{constructor(){const _0x59cf6f=_0x1a99ef;super(_0x59cf6f(0x25e),'*',[0.6,0.6,0.6],null,0x0,!![],0x0,null,null,null),this[_0x59cf6f(0x3b7)]=0x2,this['hazards']=[0x1,0x0];}['react'](_0x556a98,_0x4e2fbf,_0x557dfc){const _0x479a77=_0x1a99ef;super['react'](_0x556a98,_0x4e2fbf,_0x557dfc);if(this[_0x479a77(0x3c0)]!==!![]){const [_0x17d0f1,_0x5cbb85]=this[_0x479a77(0x295)],[_0x5aa604,_0x1f50f3]=this[_0x479a77(0x295)];if(_0x557dfc['target'][0x0]==_0x17d0f1&&_0x557dfc['target'][0x1]==_0x5cbb85){for(let _0x542dd1=0x0;_0x542dd1<directionsextra['length'];_0x542dd1++){const [_0x452c5e,_0x4d8741]=this[_0x479a77(0x295)][_0x479a77(0x4a9)]((_0x5617ac,_0x5ce5f0)=>_0x5617ac+directionsextra[_0x542dd1][_0x5ce5f0]);if(newgrid[_0x452c5e]&&newgrid[_0x452c5e][_0x4d8741])newgrid[_0x452c5e][_0x4d8741]['elevation']=-0x2;if(chebyshevDistance([_0x452c5e,_0x4d8741],[_0x5aa604,_0x1f50f3])>0x1)newgrid[_0x452c5e][_0x4d8741][_0x479a77(0x439)]=-0x1;}newgrid[_0x17d0f1][_0x5cbb85][_0x479a77(0x439)]=-0x2,elevupdate(),this[_0x479a77(0x48c)]();}}}[_0x1a99ef(0x1f8)](){const _0x532a33=_0x1a99ef;this[_0x532a33(0x4bc)]=[];}[_0x1a99ef(0x46d)](){const _0x551324=_0x1a99ef;super[_0x551324(0x46d)]();const [_0xcc9555,_0x5a1439]=this[_0x551324(0x295)];this[_0x551324(0x2bc)]=newgrid[_0xcc9555][_0x5a1439][_0x551324(0x481)],this[_0x551324(0x1f5)]='',this[_0x551324(0x41d)]='';}}class fluid extends object{constructor(_0x3faa7b,_0x5c9bc0,_0x4f0e02,_0xf242c1,_0x1c645a,_0x13517a,_0x302e41,_0x5ba3ea,_0x10e4be,_0x4879dd,_0x1ca457){super(_0x3faa7b,_0x5c9bc0,_0x4f0e02,_0xf242c1,_0x1c645a,_0x13517a,_0x302e41,_0x5ba3ea,_0x10e4be,_0x4879dd,_0x1ca457);}['break'](){const _0x2d55c3=_0x1a99ef,[_0x488709,_0xf66295]=this[_0x2d55c3(0x295)],_0x4c1056=this;newgrid[_0x488709][_0xf66295][_0x2d55c3(0x35b)]=newgrid[_0x488709][_0xf66295][_0x2d55c3(0x35b)][_0x2d55c3(0x3ef)](_0xb74706=>_0xb74706[_0x2d55c3(0x367)]!==_0x4c1056[_0x2d55c3(0x367)]),this[_0x2d55c3(0x3c0)]=!![];}}class liquid extends fluid{constructor(_0x2a0740,_0xb130cc,_0x8fbcb9,_0x497a5d,_0x4f3004,_0x6e7abe,_0x35ed28,_0x1409cf,_0x12650f,_0x2f4ccf,_0x385ea8){super(_0x2a0740,_0xb130cc,_0x8fbcb9,_0x497a5d,_0x4f3004,_0x6e7abe,_0x35ed28,_0x1409cf,_0x12650f,_0x2f4ccf,_0x385ea8);}}class oil extends liquid{constructor(_0x4839ae,_0x7a6e5a,_0x5b5236,_0x11ef75,_0x4397bc,_0x565d96,_0x4d05ed,_0x3c4b42,_0x1c3f49,_0x4d9079,_0x2bd968){const _0x24535d=_0x1a99ef;super('oil','',[0.75,0.75,0.75],[0.2,0.2,0.2],0x0,!![],0x1,null,null,null),this[_0x24535d(0x490)]=!![];}['burn'](){const _0x39cc8f=_0x1a99ef;if(this['burning']||this[_0x39cc8f(0x32b)])return;super[_0x39cc8f(0x3d9)](),this[_0x39cc8f(0x283)]();}}class Water extends liquid{constructor(){const _0x3eda47=_0x1a99ef;super(_0x3eda47(0x1ea),'~',materials[_0x3eda47(0x23d)],materials[_0x3eda47(0x23d)],0x0,!![],0x1,null,null),this[_0x3eda47(0x490)]=![],this[_0x3eda47(0x3d8)]=![];}}class LarvalFluid extends liquid{constructor(){const _0x3b9a98=_0x1a99ef;super(_0x3b9a98(0x478),'~',null,[0.5,0.5,0.5],0x0,!![],0x1,null,null),this[_0x3b9a98(0x490)]=!![],this['destructable']=![];}}class blood extends liquid{constructor(_0x548fbe,_0x54d1cc,_0x2d12d4,_0x278fc4,_0x5528b4,_0x169893,_0x4fc9f0,_0x196d02,_0x489d5e,_0x48d2e8,_0x467512){const _0x3cfc38=_0x1a99ef;super(_0x3cfc38(0x49b),'',[0x0,0x0,0x0],[0.5,0.1,0.1],0x0,!![],0x0),this[_0x3cfc38(0x3d8)]=![],this['flammable']=![];}}class Caltrops extends object{constructor(){const _0x2bff26=_0x1a99ef;super(_0x2bff26(0x365),'%',materials[_0x2bff26(0x424)]),this['hazards']=[0x1,0x0],this[_0x2bff26(0x3b7)]=0x2;}[_0x1a99ef(0x2b2)](_0x38fafb,_0x5c9cbd,_0x8054aa){const _0x1bb99c=_0x1a99ef;if(this[_0x1bb99c(0x3c0)]!==!![]){const [_0x2ac435,_0x4afbb1]=this['pos'],_0x1a4495=newgrid[_0x2ac435][_0x4afbb1][_0x1bb99c(0x3ec)];_0x1a4495!==null&&(_0x1a4495[_0x1bb99c(0x224)](0x1),this[_0x1bb99c(0x48c)]());}}[_0x1a99ef(0x1f8)](){const _0x5d434c=_0x1a99ef;this[_0x5d434c(0x4bc)]=[];}}class gas extends fluid{constructor(_0x3102d1,_0x3384b6,_0x11f823,_0x90e97e,_0x330ce6,_0x14bccc,_0x5e7bcd,_0x2b7532,_0x2e086a,_0x3aa840,_0x268d63){const _0x317e8d=_0x1a99ef;super(_0x3102d1,_0x3384b6,_0x11f823,_0x90e97e,_0x330ce6,_0x14bccc,_0x5e7bcd,_0x2b7532,_0x2e086a,_0x3aa840,_0x268d63),this[_0x317e8d(0x423)]=0x1;}[_0x1a99ef(0x2da)](){const _0x23a8bf=_0x1a99ef;this[_0x23a8bf(0x423)]++,this[_0x23a8bf(0x423)]>0x1&&(this[_0x23a8bf(0x41d)]=_0x23a8bf(0x2ac)+this[_0x23a8bf(0x367)]);}[_0x1a99ef(0x1fc)](){const _0x46528c=_0x1a99ef;if(this[_0x46528c(0x3c0)])return;this[_0x46528c(0x423)]--;if(this[_0x46528c(0x423)]<0x1){const [_0x37e4bb,_0x37303f]=this['pos'],_0x280d6b=newgrid[_0x37e4bb][_0x37303f];_0x280d6b[_0x46528c(0x368)](this);}this[_0x46528c(0x423)]<0x2&&(this[_0x46528c(0x41d)]=this[_0x46528c(0x367)]);}}class smoke extends gas{constructor(){const _0xbe00b9=_0x1a99ef;super(_0xbe00b9(0x316),'',[0.1,0.1,0.1],[0.2,0.2,0.2],0.3,!![],0x0,null,null,null),this[_0xbe00b9(0x490)]=![];}[_0x1a99ef(0x4a0)](){const _0x17fcd3=_0x1a99ef;super[_0x17fcd3(0x4a0)]();Math[_0x17fcd3(0x282)]()>0.75&&this[_0x17fcd3(0x1fc)]();this[_0x17fcd3(0x3c0)]!==!![]&&envobjects[_0x17fcd3(0x23c)](this);if(this[_0x17fcd3(0x423)]>0x1){this[_0x17fcd3(0x447)]=!![],this[_0x17fcd3(0x40d)]=[0x1,0x0];const [_0x3012eb,_0x189dd6]=this[_0x17fcd3(0x295)],_0x184568=newgrid[_0x3012eb][_0x189dd6],_0x5e5c81=_0x184568[_0x17fcd3(0x3ec)];if(_0x5e5c81)_0x5e5c81[_0x17fcd3(0x224)](0x1);Math['random']()>0.5&&(this[_0x17fcd3(0x1fc)](),newgrid[_0x3012eb][_0x189dd6][_0x17fcd3(0x307)](new smoke(_0x17fcd3(0x316),'',[0.1,0.1,0.1],[0.5,0.5,0.5],0.1,!![],0x0,null,null,null)));}else this[_0x17fcd3(0x447)]=![];}[_0x1a99ef(0x46d)](){const _0x22cd01=_0x1a99ef;super[_0x22cd01(0x46d)](),envobjects[_0x22cd01(0x23c)](this);}[_0x1a99ef(0x1fc)](){const _0x92477=_0x1a99ef;super[_0x92477(0x1fc)](),this['thickness']<0x2&&(this[_0x92477(0x40d)]=[0x0,0x0],this[_0x92477(0x447)]=![]);}}class AttackRoll{constructor(_0x568dd0,_0x47000f,_0x79c68,_0x5c7f11,_0x756801){const _0x2267ad=_0x1a99ef;this['character']=_0x568dd0,this['weapon']=_0x5c7f11;!(_0x5c7f11 instanceof Weapon)&&(this[_0x2267ad(0x4ba)]=_0x568dd0[_0x2267ad(0x44c)]);this[_0x2267ad(0x2d0)]=_0x756801;const _0x168b53=_0x568dd0[_0x2267ad(0x453)](_0x5c7f11);!_0x5c7f11&&(_0x5c7f11=_0x568dd0['primaryitem']);const [_0x51dd41,_0x5b3bd3]=_0x47000f;let _0x170c0d=0x0,_0x8d4390=_0x568dd0[_0x2267ad(0x351)](_0x5c7f11),_0x5f5855=[],_0x2cc15a=[],_0x1b7f92=newgrid[_0x51dd41][_0x5b3bd3][_0x2267ad(0x3ec)];if(_0x1b7f92&&_0x1b7f92['pc']==_0x568dd0['pc'])_0x1b7f92=null;(_0x1b7f92==null||_0x1b7f92['pc']==_0x568dd0['pc'])&&(_0x1b7f92=newgrid[_0x51dd41][_0x5b3bd3][_0x2267ad(0x312)][0x0]);const _0x467c08=dist(_0x79c68,_0x47000f,![],!![]);_0x5c7f11['ammotype']&&!_0x568dd0['ammunition'][_0x5c7f11['ammotype']]&&_0x2cc15a[_0x2267ad(0x23c)]('No\x20'+_0x5c7f11['ammotype']+'s');_0x5c7f11[_0x2267ad(0x44b)]&&_0x568dd0[_0x2267ad(0x2be)]&&_0x568dd0[_0x2267ad(0x2be)][_0x2267ad(0x367)]!==_0x568dd0['unarmed'][_0x2267ad(0x367)]&&_0x2cc15a['push']('Need\x20two\x20free\x20hands');!(_0x5c7f11 instanceof Weapon)&&_0x2cc15a[_0x2267ad(0x23c)](_0x2267ad(0x2ab));const _0x55b7b4=newgrid[_0x47000f[0x0]][_0x47000f[0x1]][_0x2267ad(0x439)],_0x10dc45=newgrid[_0x79c68[0x0]][_0x79c68[0x1]]['elevation'],_0x142938=[_0x47000f[0x0],_0x47000f[0x1],_0x55b7b4],_0x255b1c=[_0x79c68[0x0],_0x79c68[0x1],_0x10dc45+0x1];let _0x54e636=drawLine3D(_0x255b1c,_0x142938);if(_0x54e636>=0x1)_0x2cc15a['push'](_0x2267ad(0x266));else{if(_0x568dd0['getrange'](_0x5c7f11)<_0x467c08)_0x2cc15a['push'](_0x2267ad(0x27d));else{if(_0x1b7f92==null){}}}if(_0x2cc15a[_0x2267ad(0x2e1)]===0x0&&_0x1b7f92){_0x5c7f11[_0x2267ad(0x3d1)]&&_0x568dd0[_0x2267ad(0x2be)]&&_0x568dd0[_0x2267ad(0x2be)][_0x2267ad(0x367)]==_0x568dd0[_0x2267ad(0x44c)][_0x2267ad(0x367)]&&(_0x168b53[0x1]+=0x2,_0x5f5855[_0x2267ad(0x23c)](_0x2267ad(0x204)));if(chebyshevDistance(_0x79c68,[_0x51dd41,_0x5b3bd3])===0x1){const _0x45ee3a=[_0x51dd41,_0x5b3bd3][_0x2267ad(0x4a9)]((_0x54ee4e,_0x4e17a3)=>_0x54ee4e-(_0x79c68[_0x4e17a3]-_0x54ee4e)),_0x1609c7=newgrid[_0x45ee3a[0x0]][_0x45ee3a[0x1]];_0x1609c7&&_0x1609c7[_0x2267ad(0x3ec)]&&_0x1609c7[_0x2267ad(0x3ec)]['pc']==_0x568dd0['pc']&&_0x1609c7['character']!==_0x568dd0&&(_0x5f5855[_0x2267ad(0x23c)](_0x2267ad(0x1fb)),_0x170c0d+=0x2);}_0x1b7f92['pc']==![]&&(!_0x1b7f92['visiblecharacters']||!_0x1b7f92[_0x2267ad(0x4aa)][_0x568dd0[_0x2267ad(0x306)]])&&(_0x5f5855[_0x2267ad(0x23c)](_0x2267ad(0x3cd)),_0x170c0d+=0xa);_0x1b7f92['pc']==!![]&&newgrid[_0x79c68[0x0]][_0x79c68[0x1]][_0x2267ad(0x2de)]==![]&&(_0x5f5855[_0x2267ad(0x23c)](_0x2267ad(0x3cd)),_0x170c0d+=0xa);_0x5c7f11[_0x2267ad(0x47f)]>1.9&&_0x54e636>0x0&&(_0x54e636>=0.5?(_0x5f5855[_0x2267ad(0x23c)](_0x2267ad(0x352)),_0x170c0d-=0x5):(_0x5f5855[_0x2267ad(0x23c)](_0x2267ad(0x38b)),_0x170c0d-=0x2));newgrid[_0x51dd41][_0x5b3bd3][_0x2267ad(0x30d)]<0x2&&(_0x5f5855[_0x2267ad(0x23c)](_0x2267ad(0x2f0)),_0x170c0d-=0x2);dist(_0x79c68,_0x47000f)<_0x5c7f11[_0x2267ad(0x2fc)]&&(_0x5f5855[_0x2267ad(0x23c)]('Too\x20Close-25'),_0x170c0d-=0x5);lackscondition(conditions[_0x2267ad(0x488)],_0x1b7f92)==![]&&(_0x5f5855[_0x2267ad(0x23c)](_0x2267ad(0x3d7)),_0x170c0d+=0x5);lackscondition(conditions['Prone'],_0x1b7f92)==![]&&(_0x5f5855[_0x2267ad(0x23c)]('Prone+25'),_0x170c0d+=0x5);lackscondition(conditions[_0x2267ad(0x4c1)],_0x1b7f92)==![]&&(_0x5f5855['push']('Restrained+30'),_0x170c0d+=0x6);lackscondition(conditions[_0x2267ad(0x308)],_0x1b7f92)==![]&&(_0x5f5855['push'](_0x2267ad(0x272)),_0x170c0d+=0xa);lackscondition(conditions[_0x2267ad(0x489)],_0x1b7f92)==![]&&(_0x5f5855['push'](_0x2267ad(0x48f)),_0x170c0d+=0x2);const _0x4a86cc=newgrid[_0x79c68[0x0]][_0x79c68[0x1]],_0x187aee=newgrid[_0x51dd41][_0x5b3bd3],_0x3310a8=_0x4a86cc['elevation']-_0x187aee[_0x2267ad(0x439)];_0x3310a8>0x1&&(_0x5f5855[_0x2267ad(0x23c)](_0x2267ad(0x4c4)),_0x170c0d+=0x2),_0x3310a8<-0x1&&(_0x5f5855[_0x2267ad(0x23c)](_0x2267ad(0x22a)),_0x170c0d-=0x2);}this[_0x2267ad(0x3bb)]=_0x1b7f92;let _0x339f6d;if(_0x1b7f92)_0x339f6d=_0x1b7f92['ac'];const _0x3c21d3=Math['min']((0x1-(_0x339f6d-(_0x8d4390+_0x170c0d))/0x14)*0x64,0x64),_0x260b8f=_0x8d4390+_0x170c0d,_0x3f4513=takeav(_0x168b53)*(0xa+_0x260b8f)/0x14;this[_0x2267ad(0x295)]=_0x79c68,this['percenthitchance']=_0x3c21d3,this[_0x2267ad(0x39e)]=_0x168b53,this[_0x2267ad(0x2e3)]=_0x3f4513,this[_0x2267ad(0x286)]=_0x8d4390,this[_0x2267ad(0x372)]=_0x170c0d,this['defenderac']=_0x339f6d,this[_0x2267ad(0x2d2)]=_0x5f5855,this[_0x2267ad(0x3d5)]=_0x2cc15a,this[_0x2267ad(0x2a7)]=[],this[_0x2267ad(0x3e2)]=[];if(_0x5c7f11[_0x2267ad(0x2a7)])this[_0x2267ad(0x2a7)]=_0x5c7f11[_0x2267ad(0x2a7)][_0x2267ad(0x428)]();this[_0x2267ad(0x38a)]=[];if(_0x5c7f11['onmisseffects'])this[_0x2267ad(0x38a)]=_0x5c7f11[_0x2267ad(0x38a)][_0x2267ad(0x428)]();if(_0x5c7f11['throwable']==!![]&&_0x467c08>1.9){const _0x5b7824=()=>_0x568dd0[_0x2267ad(0x2e9)](_0x5c7f11);this[_0x2267ad(0x2a7)][_0x2267ad(0x23c)](_0x5b7824),this['onmisseffects'][_0x2267ad(0x23c)](_0x5b7824);const _0xecbc0c=()=>{const _0x283c44=_0x2267ad;let _0x2c736c=newgrid[_0x51dd41][_0x5b3bd3],[_0x171a32,_0x3ea6b8]=[_0x51dd41,_0x5b3bd3];const [_0x3d4bb7,_0x52c88f]=_0x79c68,[_0xfcca12,_0x4aae85]=[_0x51dd41-_0x3d4bb7,_0x5b3bd3-_0x52c88f];while(_0x2c736c['traversable']==![]&&_0x2c736c[_0x283c44(0x4c5)]==![]){_0x2c736c=newgrid[_0x171a32][_0x3ea6b8],Math['abs'](_0xfcca12)>0x0&&(_0x171a32-=Math[_0x283c44(0x279)](_0xfcca12)),Math[_0x283c44(0x3cf)](_0x4aae85)>0x0&&(_0x3ea6b8-=Math[_0x283c44(0x279)](_0x4aae85));}if(_0x5c7f11[_0x283c44(0x21a)]>0x0)_0x2c736c[_0x283c44(0x444)](new _0x5c7f11['constructor']());else _0x5c7f11['number']=0x1,_0x2c736c[_0x283c44(0x444)](_0x5c7f11);};this['onhiteffects'][_0x2267ad(0x23c)](_0xecbc0c),this[_0x2267ad(0x38a)][_0x2267ad(0x23c)](_0xecbc0c);}if(_0x5c7f11[_0x2267ad(0x387)]==!![]){const _0x2fbdb2=()=>_0x568dd0[_0x2267ad(0x2e9)](_0x5c7f11);this[_0x2267ad(0x2a7)][_0x2267ad(0x23c)](_0x2fbdb2),this[_0x2267ad(0x38a)][_0x2267ad(0x23c)](_0x2fbdb2);}if(_0x5c7f11[_0x2267ad(0x3f4)]){const _0x1db4a6=[()=>_0x568dd0[_0x2267ad(0x22d)](_0x5c7f11[_0x2267ad(0x3f4)])];this[_0x2267ad(0x2a7)][_0x2267ad(0x23c)](..._0x1db4a6),this[_0x2267ad(0x38a)][_0x2267ad(0x23c)](..._0x1db4a6);}}}function attackfunc(_0x3df8df=![],_0x174765=null,_0x255e6c){const _0x5408c0=_0x1a99ef;!_0x174765&&(_0x174765=this[_0x5408c0(0x3ec)][_0x5408c0(0x375)]);let _0x2b1542=_0x16720d=>_0x16720d;if(this['character']['specialattack']!=null)_0x2b1542=this[_0x5408c0(0x3ec)][_0x5408c0(0x43c)];if(_0x3df8df==!![]){let _0x14fb01=_0x2b1542(new AttackRoll(this[_0x5408c0(0x3ec)],this[_0x5408c0(0x310)],this[_0x5408c0(0x295)],_0x174765,this),this[_0x5408c0(0x310)]);if(_0x174765[_0x5408c0(0x3d4)]!=null)_0x14fb01=_0x174765[_0x5408c0(0x3d4)](_0x14fb01,this[_0x5408c0(0x310)]);return _0x14fb01;}const [_0x1fe2d9,_0x5cd6b7]=this[_0x5408c0(0x310)];let _0x8a1963=[];if(newgrid[_0x1fe2d9][_0x5cd6b7][_0x5408c0(0x3ec)]&&newgrid[_0x1fe2d9][_0x5cd6b7][_0x5408c0(0x3ec)]['pc']!==this['character']['pc'])_0x8a1963[_0x5408c0(0x23c)](newgrid[_0x1fe2d9][_0x5cd6b7][_0x5408c0(0x3ec)]);newgrid[_0x1fe2d9][_0x5cd6b7][_0x5408c0(0x312)][_0x5408c0(0x2e1)]&&_0x8a1963[_0x5408c0(0x23c)](newgrid[_0x1fe2d9][_0x5cd6b7][_0x5408c0(0x312)][0x0]);let _0x4aa53c=0x0;const _0x31ae83=_0x8a1963[0x0];let _0x442286=_0x2b1542(new AttackRoll(this[_0x5408c0(0x3ec)],this[_0x5408c0(0x310)],this[_0x5408c0(0x295)],_0x174765,this),this[_0x5408c0(0x310)]);_0x255e6c&&(_0x442286=_0x255e6c(_0x442286,[_0x1fe2d9,_0x5cd6b7]));if(_0x174765['specialeffect']!=null)_0x442286=_0x174765[_0x5408c0(0x3d4)](_0x442286,this['target']);if(_0x442286[_0x5408c0(0x3d5)][_0x5408c0(0x2e1)]!==0x0&&_0x3df8df==![]){for(let _0x214cc9=0x0;_0x214cc9<_0x442286[_0x5408c0(0x3d5)][_0x5408c0(0x2e1)];_0x214cc9++){_0x4aa53c++,adduilabel(_0x442286[_0x5408c0(0x3d5)][_0x214cc9],this[_0x5408c0(0x3ec)][_0x5408c0(0x295)],[0x80,0x80,0x80],_0x4aa53c,!![],![],![],![]);}return this[_0x5408c0(0x3ec)]['actionqueue']=[],![];}if(_0x442286[_0x5408c0(0x3d5)][_0x5408c0(0x2e1)]===0x0&&_0x3df8df==![]){rangedanimate(this[_0x5408c0(0x3ec)]['pos'],this['target'],convertAbstoColor(_0x174765['absorbtion']));let _0x1cafe2;if(Math[_0x5408c0(0x282)]()*0x64<_0x442286['percenthitchance']&&_0x31ae83)_0x1cafe2=!![];else _0x1cafe2=![];_0x442286[_0x5408c0(0x3d6)]&&([_0x442286,_0x1cafe2]=_0x442286[_0x5408c0(0x3d6)](_0x442286,_0x1cafe2));if(_0x1cafe2){const _0x2c92d9=randomNumber(_0x442286['damagerange'][0x1]+0x1,_0x442286[_0x5408c0(0x39e)][0x0]);for(let _0x212f57=0x0;_0x212f57<_0x442286[_0x5408c0(0x2a7)][_0x5408c0(0x2e1)];_0x212f57++){_0x442286[_0x5408c0(0x2a7)][_0x212f57](_0x2c92d9);}_0x4aa53c++,_0x31ae83[_0x5408c0(0x224)](_0x2c92d9);for(let _0x2d814a=0x0;_0x2d814a<_0x442286[_0x5408c0(0x3e2)][_0x5408c0(0x2e1)];_0x2d814a++){_0x442286['aftereffects'][_0x2d814a](_0x2c92d9);}if(_0x2c92d9>0x0){if(_0x174765[_0x5408c0(0x44d)])this['soundeffect']=_0x174765[_0x5408c0(0x44d)];this[_0x5408c0(0x480)]=_0x5408c0(0x493);}else this[_0x5408c0(0x338)]=soundeffects[_0x5408c0(0x2e0)],this[_0x5408c0(0x480)]=_0x5408c0(0x493);}else{_0x4aa53c++,this[_0x5408c0(0x480)]='Miss';if(_0x174765['misssound'])this[_0x5408c0(0x338)]=_0x174765[_0x5408c0(0x471)];for(let _0x574f09=0x0;_0x574f09<_0x442286['onmisseffects'][_0x5408c0(0x2e1)];_0x574f09++){_0x442286['onmisseffects'][_0x574f09]();}}if(!_0x31ae83||!(_0x31ae83 instanceof character))return;for(let _0x4cc655=0x0;_0x4cc655<_0x442286[_0x5408c0(0x2d2)][_0x5408c0(0x2e1)];_0x4cc655++){_0x4aa53c++;let _0x5d321f=_0x442286[_0x5408c0(0x2d2)][_0x4cc655],_0x2434a7=[0x80,0x80,0x80];for(let _0x1693aa=0x0;_0x1693aa<_0x5d321f['length'];_0x1693aa++){if(_0x5d321f[_0x5408c0(0x407)](_0x1693aa)=='+')_0x2434a7=[0x0,0x40,0x0];if(_0x5d321f['charAt'](_0x1693aa)=='-')_0x2434a7=[0x40,0x0,0x0];}_0x5d321f[_0x5408c0(0x2e1)]>0x5&&_0x5d321f[_0x5408c0(0x428)](0x0,0x5)==_0x5408c0(0x2b2)&&(_0x5d321f=_0x5d321f['slice'](0x5,_0x5d321f[_0x5408c0(0x2e1)]),_0x2434a7=[0x20,0x20,0x40]),adduilabel(_0x5d321f,[_0x1fe2d9,_0x5cd6b7],_0x2434a7,_0x4aa53c,!![],![]);}}}class Sound{constructor(_0x54a4fd,_0x4a2c14,_0x190d6f,_0x264239,_0x1672ef){const _0x61f49c=_0x1a99ef;this[_0x61f49c(0x295)]=_0x54a4fd,this['volume']=_0x4a2c14,this[_0x61f49c(0x3fd)]=_0x190d6f,this[_0x61f49c(0x201)]=_0x264239||null,this['soundeffect']=_0x1672ef;}}class Dwarf extends enemy{constructor(_0x4444e3){const _0x468e11=_0x1a99ef;super(_0x4444e3,_0x468e11(0x4a4),[0x0,0x0,0x0],0x1,[0x5,0x1,0x1],![],'D',[0x80,0x80,0x80],0x64,[],[],[],null),this['states']=[new State('idle',defaultdwarf,null,[0x0,0x1]),new State(_0x468e11(0x28f),defaultdwarf,null,[0x0,0x1]),new State(_0x468e11(0x2b6),defaultdwarf,null,[0x0,0x1]),new State('fleeing',defaultdwarf,null,[0x0,0x1])],this[_0x468e11(0x2dc)]=[],this[_0x468e11(0x452)]=[moveusecase,digusecase];}}function updatecharacters(){characters=[...playercs,...nonpcs];}function updatecharactershere(){const _0x5f3f6f=_0x1a99ef;nonpcshere=[],objectshere=[];for(let _0x530948=viewportpos[0x0]-dontcaredistance;_0x530948<=viewportpos[0x0]+dontcaredistance;_0x530948++){for(let _0x442e47=viewportpos[0x1]-dontcaredistance;_0x442e47<=viewportpos[0x1]+dontcaredistance;_0x442e47++){if(_0x530948<0x0||_0x530948>=mapsizey||_0x442e47<0x0||_0x442e47>=mapsizex)continue;newgrid[_0x530948][_0x442e47][_0x5f3f6f(0x3ec)]!==null&&newgrid[_0x530948][_0x442e47]['character']['pc']!==!![]&&nonpcshere[_0x5f3f6f(0x23c)](newgrid[_0x530948][_0x442e47][_0x5f3f6f(0x3ec)]);const _0x153630=newgrid[_0x530948][_0x442e47][_0x5f3f6f(0x312)];for(let _0x54d6d4=0x0;_0x54d6d4<_0x153630[_0x5f3f6f(0x2e1)];_0x54d6d4++){const _0x1fce93=_0x153630[_0x54d6d4];objectshere[_0x5f3f6f(0x23c)](_0x1fce93);}}}}function lightcheck(_0x100b73,_0xf39b63){return function(){const _0x1e8bdb=_0x4a83,[_0x1139f6,_0x1ce391]=this[_0x1e8bdb(0x3ec)]['pos'];if(_0x100b73==!![]){if(newgrid[_0x1139f6][_0x1ce391][_0x1e8bdb(0x30d)]>=_0xf39b63)return!![];return![];}else{if(newgrid[_0x1139f6][_0x1ce391][_0x1e8bdb(0x30d)]<=_0xf39b63)return!![];return![];}};}function hostileallycheck(){const _0x266703=_0x1a99ef,[_0x464e56,_0xf337b]=this[_0x266703(0x3ec)]['pos'];for(let _0x47980f=0x0;_0x47980f<nonpcshere['length'];_0x47980f++){const _0x3f52d6=nonpcshere[_0x47980f];if(_0x3f52d6['state']!==_0x266703(0x256)&&drawline([_0x464e56,_0xf337b],_0x3f52d6[_0x266703(0x295)])<0x1&&(_0x464e56!==_0x3f52d6[_0x266703(0x295)][0x0]||_0xf337b!==_0x3f52d6['pos'][0x1]))return this[_0x266703(0x3ec)]['target']=_0x3f52d6[_0x266703(0x310)],console['log'](this['character']['target']+_0x266703(0x3e0)+_0x3f52d6['target']),!![];}}function hostilecheck(){}function friendlyadjacent(){const _0x25bbcc=_0x1a99ef;[y,x]=this[_0x25bbcc(0x3ec)][_0x25bbcc(0x295)];for(let _0x58d344=y-0x1;_0x58d344<=y+0x1;_0x58d344++){for(let _0x34270a=x-0x1;_0x34270a<=x+0x1;_0x34270a++){if(newgrid[_0x58d344][_0x34270a][_0x25bbcc(0x3ec)]!==null&&(_0x58d344!=y||_0x34270a!=x)){if(newgrid[_0x58d344][_0x34270a][_0x25bbcc(0x41d)]==this['character'][_0x25bbcc(0x41d)])return!![];}}}return![];}function addcondition(_0x5e2f82,_0x4def54){return function(){const _0x27ae63=_0x4a83;let _0x4a8c44=new condition(_0x5e2f82['name'],_0x5e2f82[_0x27ae63(0x261)],_0x5e2f82[_0x27ae63(0x4b1)],_0x5e2f82[_0x27ae63(0x28a)],_0x5e2f82[_0x27ae63(0x328)],_0x5e2f82['endeffect'],this['character']);if(lacksresistance(_0x4a8c44,this[_0x27ae63(0x3ec)])==!![]&&lackscondition(_0x4a8c44,this[_0x27ae63(0x3ec)])==!![]){this[_0x27ae63(0x3ec)]['conditions']['push'](_0x4a8c44),this['character'][_0x27ae63(0x37e)][this[_0x27ae63(0x3ec)]['conditions'][_0x27ae63(0x2e1)]-0x1][_0x27ae63(0x261)]();if(_0x4def54)adduilabel(_0x4a8c44['name'],_0x4a8c44[_0x27ae63(0x3ec)]['pos'],[0x80,0x80,0x0],0x1,!![]);_0x4a8c44[_0x27ae63(0x328)]==!![]&&this[_0x27ae63(0x3ec)][_0x27ae63(0x40a)][_0x27ae63(0x23c)](_0x4a8c44[_0x27ae63(0x41d)]),updateGrid();}};}function addconditiondynamic(_0x17e2cc,_0x59aef4,_0x37c0d7){return function(){const _0x3ceacb=_0x4a83;if(!(_0x37c0d7 instanceof character))return;let _0x4b4ddd=new condition(_0x17e2cc['name'],_0x17e2cc['starteffect'],_0x17e2cc[_0x3ceacb(0x4b1)],_0x17e2cc[_0x3ceacb(0x28a)],_0x17e2cc['resistance'],_0x17e2cc[_0x3ceacb(0x341)],_0x37c0d7);if(lacksresistance(_0x4b4ddd,_0x37c0d7)==!![]&&lackscondition(_0x4b4ddd,_0x37c0d7)==!![]){_0x37c0d7[_0x3ceacb(0x37e)][_0x3ceacb(0x23c)](_0x4b4ddd),_0x37c0d7[_0x3ceacb(0x37e)][_0x37c0d7[_0x3ceacb(0x37e)]['length']-0x1][_0x3ceacb(0x261)]();if(_0x59aef4)adduilabel(_0x4b4ddd[_0x3ceacb(0x41d)],_0x4b4ddd['character']['pos'],_0x4b4ddd[_0x3ceacb(0x3ec)][_0x3ceacb(0x40e)],0x1,!![],![],![]);_0x4b4ddd[_0x3ceacb(0x328)]==!![]&&_0x37c0d7[_0x3ceacb(0x40a)]['push'](_0x4b4ddd[_0x3ceacb(0x41d)]);}};}function lacksresistance(_0x4d0e79,_0x526974){const _0xdabb2f=_0x1a99ef;for(const _0x4e2fd4 of _0x526974[_0xdabb2f(0x40a)]){if(_0x4e2fd4==_0x4d0e79[_0xdabb2f(0x41d)])return![];}return!![];}function lackscondition(_0x3710b8,_0x9052b0){const _0x442e60=_0x1a99ef;if(!_0x9052b0[_0x442e60(0x37e)])return!![];for(const _0x2451a5 of _0x9052b0[_0x442e60(0x37e)]){if(_0x2451a5['name']==_0x3710b8[_0x442e60(0x41d)])return![];}return!![];}function skipturn(){const _0x11ecb1=_0x1a99ef,[_0x399c5b,_0x283a27]=this['character'][_0x11ecb1(0x295)];adduilabel('!',[_0x399c5b,_0x283a27],[0x80,0x80,0x0],0x0,!![],![],![],![]),this[_0x11ecb1(0x3ec)]['tc']=[0x0,0x0,0x0];}function skipturnandyelp(){const _0x385c98=_0x1a99ef,[_0x35a0f9,_0x18e928]=this[_0x385c98(0x3ec)][_0x385c98(0x295)];adduilabel('!',[_0x35a0f9,_0x18e928],[0x80,0x80,0x0],0x0,!![],![],![],![]);if(this[_0x385c98(0x3ec)]['pc']!==!![]){const _0x18397c=new action(_0x385c98(0x44e),chatfunc,[0x0,0x0,0x1],0x0,this['character'][_0x385c98(0x295)],this[_0x385c98(0x3ec)],this[_0x385c98(0x3ec)][_0x385c98(0x295)],null,soundeffects['goblinyelp']);_0x18397c[_0x385c98(0x26b)]=0xf,this[_0x385c98(0x3ec)]['actionqueue'][_0x385c98(0x23c)](_0x18397c),move(this[_0x385c98(0x3ec)]);}this['character']['tc']=[0x0,0x0,0x0];}function losemove(){const _0xcf6464=_0x1a99ef,[_0x26326b,_0x6cbbd9]=this[_0xcf6464(0x3ec)]['pos'];adduilabel('+',[_0x26326b,_0x6cbbd9],[0x80,0x80,0x0],0x0,!![],![],![],![]),this[_0xcf6464(0x3ec)]['tc'][0x0]=0x0,this['character']['tc'][0x2]=0x0,this[_0xcf6464(0x3ec)]['actionqueue']=[];}function takedamage(_0x65a5e=0x1){return function(){const _0x54eb15=_0x4a83;this[_0x54eb15(0x3ec)][_0x54eb15(0x224)](_0x65a5e);};}function damagebonus(_0x4ad5eb){return function(){const _0x171547=_0x4a83;this[_0x171547(0x3ec)]['damagebonus']+=_0x4ad5eb,console[_0x171547(0x2b1)]('damage\x20bonus\x20of\x20'+this[_0x171547(0x3ec)][_0x171547(0x206)]);};}function tohitbonus(_0x2b735b){return function(){const _0x4180c8=_0x4a83;this[_0x4180c8(0x3ec)][_0x4180c8(0x413)]+=_0x2b735b;};}function becomehostile(){const _0x114952=_0x1a99ef;let _0x460d22=null;for(let _0x420985=0x0;_0x420985<playercs[_0x114952(0x2e1)];_0x420985++){if(drawline(this[_0x114952(0x3ec)][_0x114952(0x295)],playercs[_0x420985][_0x114952(0x295)])!==![]&&playercs[_0x420985][_0x114952(0x304)]==![]){if(_0x460d22==null)_0x460d22=playercs[_0x420985];else dist(this[_0x114952(0x3ec)]['pos'],playercs[_0x420985][_0x114952(0x295)])<dist(this['character'][_0x114952(0x295)],_0x460d22[_0x114952(0x295)])&&(_0x460d22=playercs[_0x420985]);}}if(_0x460d22==null)return;this['character'][_0x114952(0x310)]=_0x460d22[_0x114952(0x295)]['slice']();if(this[_0x114952(0x3ec)][_0x114952(0x3c7)]==_0x114952(0x256)){}if(this[_0x114952(0x3ec)][_0x114952(0x3c7)]!=_0x114952(0x2b5)){}}function becomehostilelowesthp(){const _0xb30ef1=_0x1a99ef;let _0x1a0a80=null;for(let _0xfd152=0x0;_0xfd152<playercs[_0xb30ef1(0x2e1)];_0xfd152++){if(drawline(this[_0xb30ef1(0x3ec)][_0xb30ef1(0x295)],playercs[_0xfd152][_0xb30ef1(0x295)])!==![]&&playercs[_0xfd152][_0xb30ef1(0x304)]==![]){if(_0x1a0a80==null)_0x1a0a80=playercs[_0xfd152];else playercs[_0xfd152]['hp']<_0x1a0a80['hp']&&(_0x1a0a80=playercs[_0xfd152]);}}if(_0x1a0a80==null)return;this[_0xb30ef1(0x3ec)]['target']=_0x1a0a80['pos'][_0xb30ef1(0x428)]();if(this[_0xb30ef1(0x3ec)][_0xb30ef1(0x3c7)]==_0xb30ef1(0x256)){}this[_0xb30ef1(0x3ec)][_0xb30ef1(0x3c7)]!=_0xb30ef1(0x2b5)&&(this[_0xb30ef1(0x3ec)][_0xb30ef1(0x3c7)]=_0xb30ef1(0x2b5));}function movefunc(_0x38ba3b=![]){const _0x39af85=_0x1a99ef;let _0x5ca07e=this['character'];const _0x4c1446=newgrid[_0x5ca07e[_0x39af85(0x295)][0x0]][_0x5ca07e[_0x39af85(0x295)][0x1]],[_0xd78bfd,_0x5b7145]=this[_0x39af85(0x310)],_0x306e7c=newgrid[_0xd78bfd][_0x5b7145][_0x39af85(0x439)]-_0x4c1446[_0x39af85(0x439)];if(newgrid[_0xd78bfd][_0x5b7145][_0x39af85(0x3b2)]!==![]&&newgrid[_0xd78bfd][_0x5b7145][_0x39af85(0x3ec)]==null){if(_0x306e7c<=0x1){newgrid[_0x5ca07e[_0x39af85(0x295)][0x0]][_0x5ca07e[_0x39af85(0x295)][0x1]]['character']=null,_0x5ca07e[_0x39af85(0x295)]=[_0xd78bfd,_0x5b7145],newgrid[_0xd78bfd][_0x5b7145][_0x39af85(0x3ec)]=this['character'];if(!_0x38ba3b)removecondition(_0x5ca07e,_0x39af85(0x469));if(_0x306e7c<-0x1){let _0x2c9955=0x0,_0x5413f9=Math['floor'](_0x306e7c/0x2)**0x2;for(let _0x3440f4=0x0;_0x3440f4<_0x5413f9;_0x3440f4++){_0x2c9955+=randomNumber(0x3,0x1);}this['soundeffect']=soundeffects['deepthud'],this[_0x39af85(0x26b)]=0x5,addconditiondynamic(conditions[_0x39af85(0x469)],!![],_0x5ca07e)(),this['character'][_0x39af85(0x224)](_0x2c9955);}}return;}else{if(newgrid[_0xd78bfd][_0x5b7145]['traversable']!==![]&&newgrid[_0xd78bfd][_0x5b7145]['character']!==null){if(_0x306e7c<-0x1){newgrid[_0x5ca07e[_0x39af85(0x295)][0x0]][_0x5ca07e[_0x39af85(0x295)][0x1]][_0x39af85(0x3ec)]=null,_0x5ca07e[_0x39af85(0x295)]=[_0xd78bfd,_0x5b7145],newgrid[_0xd78bfd][_0x5b7145][_0x39af85(0x25c)](this[_0x39af85(0x3ec)]),removecondition(_0x5ca07e,'Prone');if(_0x306e7c<-0x1){let _0x1bc9e2=0x0,_0xb50324=Math[_0x39af85(0x1f4)](_0x306e7c/0x2)**0x2;for(let _0x20bfcf=0x0;_0x20bfcf<_0xb50324;_0x20bfcf++){_0x1bc9e2+=randomNumber(0x3,0x1);}this[_0x39af85(0x338)]=soundeffects[_0x39af85(0x2e0)],this[_0x39af85(0x26b)]=0xa,addconditiondynamic(conditions[_0x39af85(0x469)],!![],_0x5ca07e)(),this[_0x39af85(0x3ec)][_0x39af85(0x224)](_0x1bc9e2),newgrid[_0xd78bfd][_0x5b7145][_0x39af85(0x3ec)]['damage'](_0x1bc9e2);}return;}}}return _0x5ca07e[_0x39af85(0x3a8)]=[],![];}function endturnfunc(){const _0x3678cc=_0x1a99ef;this[_0x3678cc(0x3ec)]['tc'][0x0]=0x0,this[_0x3678cc(0x3ec)]['tc'][0x1]=0x0;}function digfunc(){const _0x3c6d3e=_0x1a99ef,[_0x137a23,_0x5df8ef]=this[_0x3c6d3e(0x310)];newgrid[_0x137a23][_0x5df8ef]=new Tile(...tiletypes[_0x3c6d3e(0x20a)],[_0x137a23,_0x5df8ef]);if(Math[_0x3c6d3e(0x282)]()>0.95)newgrid[_0x137a23][_0x5df8ef][_0x3c6d3e(0x25c)](new Dwarf([_0x137a23,_0x5df8ef]));}function chatfunc(){}function switchweapon(){const _0x4c45b6=_0x1a99ef;char=this[_0x4c45b6(0x3ec)];const _0x4baf16=char[_0x4c45b6(0x375)];char[_0x4c45b6(0x375)]=char['secondaryitem'],char[_0x4c45b6(0x34b)]=_0x4baf16,_0x4baf16['stow'](),char[_0x4c45b6(0x375)]['draw'](),adduilabel(char[_0x4c45b6(0x375)][_0x4c45b6(0x41d)],char['pos'],char[_0x4c45b6(0x40e)],0x1,!![],![]);if(char[_0x4c45b6(0x375)][_0x4c45b6(0x37f)])this[_0x4c45b6(0x338)]=char[_0x4c45b6(0x375)][_0x4c45b6(0x37f)];this[_0x4c45b6(0x26b)]=0x1;}function switchweaponalt(){const _0x979056=_0x1a99ef;char=this['character'];const _0x589ce3=char[_0x979056(0x2be)];char[_0x979056(0x2be)]=char[_0x979056(0x375)],char[_0x979056(0x375)]=_0x589ce3,adduilabel(char[_0x979056(0x375)]['name'],char[_0x979056(0x295)],char[_0x979056(0x40e)],0x1,!![],![]);if(char['primaryitem'][_0x979056(0x37f)])this[_0x979056(0x338)]=char[_0x979056(0x375)][_0x979056(0x37f)];this['loudness']=0x1;if(char['offhanditem'][_0x979056(0x21a)]>0x1){let _0x23b996=new char[(_0x979056(0x2be))][(_0x979056(0x2c1))]();char[_0x979056(0x2be)][_0x979056(0x21a)]--,char[_0x979056(0x21b)]('offhanditem'),char[_0x979056(0x2be)]=_0x23b996;}}function getfunc(){const _0x1d38f9=_0x1a99ef;char=this['character'];const _0x1ae2ea=newgrid[char[_0x1d38f9(0x295)][0x0]][char[_0x1d38f9(0x295)][0x1]][_0x1d38f9(0x312)][_0x1d38f9(0x2ed)]();if(_0x1ae2ea['drawsound'])this[_0x1d38f9(0x338)]=_0x1ae2ea['drawsound'];char[_0x1d38f9(0x20b)](_0x1ae2ea);}function leavefunc(){const _0x4306f4=_0x1a99ef,_0x260876=this['character'];_0x260876[_0x4306f4(0x21b)]();}function leavefuncoffhand(){const _0x2680b4=_0x1a99ef,_0x2f249f=this[_0x2680b4(0x3ec)];_0x2f249f[_0x2680b4(0x468)]();}function darkattackpermute(_0x34214d){const _0x2c50ae=_0x1a99ef;let _0x22bedb=_0x34214d;for(let _0x3ed5e0=0x0;_0x3ed5e0<_0x34214d[_0x2c50ae(0x2d2)][_0x2c50ae(0x2e1)];_0x3ed5e0++){_0x34214d[_0x2c50ae(0x2d2)][_0x3ed5e0]==_0x2c50ae(0x2f0)&&(_0x22bedb[_0x2c50ae(0x372)]+=0x4,_0x22bedb[_0x2c50ae(0x482)]+=0x14,_0x34214d[_0x2c50ae(0x2d2)][_0x3ed5e0]=_0x2c50ae(0x3a5),_0x22bedb[_0x2c50ae(0x2e3)]=takeav(_0x22bedb[_0x2c50ae(0x39e)])*((0xa+(_0x22bedb[_0x2c50ae(0x286)]+_0x22bedb[_0x2c50ae(0x372)]))/0x14));}return _0x22bedb;}function sneakattackpermute(_0x2d8363){const _0x24fda8=_0x1a99ef;if(_0x2d8363[_0x24fda8(0x4ba)]['stat']!==0x1){if(verbose)_0x2d8363[_0x24fda8(0x2d2)][_0x24fda8(0x23c)](_0x24fda8(0x280));return _0x2d8363;}if(_0x2d8363[_0x24fda8(0x4ba)][_0x24fda8(0x3fe)]!==!![]&&_0x2d8363[_0x24fda8(0x4ba)][_0x24fda8(0x47f)]>1.9){if(verbose)_0x2d8363[_0x24fda8(0x2d2)][_0x24fda8(0x23c)](_0x24fda8(0x459));return _0x2d8363;}if(_0x2d8363[_0x24fda8(0x3ec)][_0x24fda8(0x2be)]&&_0x2d8363[_0x24fda8(0x3ec)][_0x24fda8(0x2be)]['basename']!==_0x2d8363[_0x24fda8(0x3ec)][_0x24fda8(0x44c)][_0x24fda8(0x367)]){if(verbose)_0x2d8363[_0x24fda8(0x2d2)][_0x24fda8(0x23c)](_0x24fda8(0x42d));return _0x2d8363;}return _0x2d8363[_0x24fda8(0x39e)]=_0x2d8363[_0x24fda8(0x39e)]['map'](_0x43ca7b=>_0x43ca7b+Math[_0x24fda8(0x4bb)](0x0,_0x2d8363[_0x24fda8(0x372)])),_0x2d8363[_0x24fda8(0x372)]>0x0&&(_0x2d8363[_0x24fda8(0x2d2)][_0x24fda8(0x23c)](_0x24fda8(0x215)+_0x2d8363[_0x24fda8(0x372)]+_0x24fda8(0x31a)),_0x2d8363[_0x24fda8(0x2d0)][_0x24fda8(0x26b)]=0x3),_0x2d8363;}function torchbearerpermute(_0x44c03f){const _0x2929c6=_0x1a99ef,_0x428192=_0x44c03f[_0x2929c6(0x3ec)],_0x1285eb=_0x428192['offhanditem'],_0x1ab479=_0x44c03f[_0x2929c6(0x4ba)];if(_0x1285eb[_0x2929c6(0x2df)][_0x2929c6(0x2e1)]>0x0&&_0x1ab479['versatile']==!![]||_0x1ab479[_0x2929c6(0x2df)][_0x2929c6(0x2e1)]>0x0)return _0x44c03f[_0x2929c6(0x39e)][0x1]+=0x1,_0x44c03f[_0x2929c6(0x2d2)][_0x2929c6(0x23c)](_0x2929c6(0x2f7)),_0x44c03f;if(_0x1285eb[_0x2929c6(0x2df)][_0x2929c6(0x2e1)]==0x0){if(verbose)_0x44c03f['modbreakdown']['push'](_0x2929c6(0x3bd));return _0x44c03f;}if(_0x1ab479['versatile']!==!![]){if(verbose)_0x44c03f[_0x2929c6(0x2d2)][_0x2929c6(0x23c)]('Torchbearer\x20requires\x20versatile');return _0x44c03f;}return _0x44c03f;}function shoveattackpermute(_0x9cedb5,_0x1a538d){const _0x1bb2b2=_0x1a99ef,_0x5733f7=_0x9cedb5[_0x1bb2b2(0x3ec)]['stats'][0x0],_0x3ac6c0=Math[_0x1bb2b2(0x4bb)](_0x5733f7,0x1),_0x113f7f=function(){const _0x331cda=_0x1bb2b2,[_0x3808bf,_0x334650]=_0x1a538d;let _0xba2da1=newgrid[_0x3808bf][_0x334650][_0x331cda(0x3ec)];const _0x26d245=_0x9cedb5[_0x331cda(0x295)][_0x331cda(0x428)]();let _0x57dcb0=_0x1a538d[_0x331cda(0x4a9)]((_0x2392c9,_0x4a48e7)=>_0x26d245[_0x4a48e7]-_0x2392c9);_0x57dcb0=_0x57dcb0[_0x331cda(0x4a9)]((_0x20455b,_0x4d00de)=>Math[_0x331cda(0x279)](_0x20455b));if(_0xba2da1)for(let _0xd0b9ef=0x0;_0xd0b9ef<_0x3ac6c0;_0xd0b9ef++){let _0x3a325e=_0xba2da1[_0x331cda(0x295)][_0x331cda(0x4a9)]((_0x4b073d,_0x240b4e)=>_0x4b073d-_0x57dcb0[_0x240b4e]);while(newgrid[_0x3a325e[0x0]][_0x3a325e[0x1]][_0x331cda(0x4c5)]==!![]){_0x57dcb0=newgrid[_0x3a325e[0x0]][_0x3a325e[0x1]][_0x331cda(0x3f8)],_0x3a325e=_0x3a325e[_0x331cda(0x4a9)]((_0x48bbbe,_0x3dafc2)=>_0x48bbbe-_0x57dcb0[_0x3dafc2]);}_0xba2da1[_0x331cda(0x3a8)][_0x331cda(0x314)](new Fall(_0x3a325e,_0xba2da1,_0x1a538d)),move(_0xba2da1);}else obj=newgrid[_0x3808bf][_0x334650]['objects'][0x0],obj&&(!obj['immovable']&&obj['move'](_0x57dcb0));};return _0x9cedb5['modbreakdown'][_0x1bb2b2(0x23c)](_0x1bb2b2(0x23a)+_0x3ac6c0+')'),_0x9cedb5[_0x1bb2b2(0x2a7)][_0x1bb2b2(0x23c)](_0x113f7f),_0x9cedb5;}function kickattackpermute(_0x3d716f,_0x862df3){const _0x303620=_0x1a99ef,_0x23c6c5=function(){const _0x407c3b=_0x4a83,[_0x1f6d5a,_0x41d4c6]=_0x862df3;let _0x4821f4=newgrid[_0x1f6d5a][_0x41d4c6][_0x407c3b(0x3ec)];const _0x96637d=_0x3d716f[_0x407c3b(0x295)][_0x407c3b(0x428)]();let _0xb40954=_0x862df3[_0x407c3b(0x4a9)]((_0x32af3e,_0xf35c3c)=>_0x96637d[_0xf35c3c]-_0x32af3e);_0xb40954=_0xb40954['map']((_0x37987c,_0x1f1ec0)=>Math[_0x407c3b(0x279)](_0x37987c));if(_0x4821f4)for(let _0x567f5d=0x0;_0x567f5d<Math[_0x407c3b(0x4bb)](_0x3d716f[_0x407c3b(0x3ec)][_0x407c3b(0x265)][0x0],0x1);_0x567f5d++){let _0x40a9e7=_0x4821f4[_0x407c3b(0x295)][_0x407c3b(0x4a9)]((_0xa22436,_0x41c25e)=>_0xa22436-_0xb40954[_0x41c25e]);while(newgrid[_0x40a9e7[0x0]][_0x40a9e7[0x1]][_0x407c3b(0x4c5)]==!![]){_0xb40954=newgrid[_0x40a9e7[0x0]][_0x40a9e7[0x1]][_0x407c3b(0x3f8)],_0x40a9e7=_0x40a9e7['map']((_0x6c2fcd,_0x1e3a32)=>_0x6c2fcd-_0xb40954[_0x1e3a32]);}_0x4821f4[_0x407c3b(0x3a8)][_0x407c3b(0x314)](new Fall(_0x40a9e7,_0x4821f4,_0x862df3)),move(_0x4821f4);}else obj=newgrid[_0x1f6d5a][_0x41d4c6][_0x407c3b(0x312)][0x0],obj&&(!obj['immovable']&&obj['move'](_0xb40954));};return _0x3d716f[_0x303620(0x39e)]=[0x0,0x0],_0x3d716f[_0x303620(0x2a7)][_0x303620(0x23c)](_0x23c6c5),_0x3d716f;}function dualwieldpermute(_0x3e6207,_0x2ec804){const _0x24c7a9=_0x1a99ef;if(_0x3e6207['action'][_0x24c7a9(0x302)][0x1]<0x1)return _0x3e6207;const _0x3dbc8c=_0x3e6207['character'],_0xbf95de=_0x3e6207['weapon'],_0x43089d=_0x3e6207[_0x24c7a9(0x3ec)]['offhanditem'],[_0x1fe5d6,_0x3a62f5]=_0x3e6207[_0x24c7a9(0x3ec)]['pos'];if(_0x43089d instanceof Weapon&&!(_0x43089d instanceof Unarmed)&&_0xbf95de instanceof Weapon&&!(_0xbf95de instanceof Unarmed)&&_0x43089d[_0x24c7a9(0x2ba)]==!![]){let _0x3f8155=_0x2ec804[_0x24c7a9(0x428)](),_0x5af7f6=new Offhandattack(_0x3f8155,_0x3dbc8c,_0x3e6207[_0x24c7a9(0x295)]);if(_0x5af7f6[_0x24c7a9(0x41b)](!![])[_0x24c7a9(0x3d5)]['length']>0x0){let _0x415f38=Math[_0x24c7a9(0x3de)](_0x43089d['range']);for(let _0x5cf843=_0x1fe5d6-_0x415f38;_0x5cf843<_0x1fe5d6+_0x415f38;_0x5cf843++){for(let _0x44da3b=_0x3a62f5-_0x415f38;_0x44da3b<_0x3a62f5+_0x415f38;_0x44da3b++){if(!newgrid[_0x5cf843]||!newgrid[_0x5cf843][_0x44da3b])continue;if(newgrid[_0x5cf843][_0x44da3b][_0x24c7a9(0x3ec)]&&newgrid[_0x5cf843][_0x44da3b]['character']['pc']!==_0x3dbc8c['pc']){(_0x5cf843!==_0x2ec804[0x0]||_0x44da3b!==_0x2ec804[0x1])&&(_0x3f8155=[_0x5cf843,_0x44da3b]);let _0x4ec49b=new Offhandattack(_0x3f8155,_0x3dbc8c,_0x3e6207[_0x24c7a9(0x295)]),_0x5bb3c9=_0x4ec49b[_0x24c7a9(0x41b)](!![]);_0x5bb3c9[_0x24c7a9(0x3d5)][_0x24c7a9(0x2e1)]==0x0&&(_0x5af7f6=_0x4ec49b);}}}}const _0x555aa6=function(_0x5edab1){const _0x567108=_0x24c7a9,_0x7e3e0b=newgrid[_0x2ec804[0x0]][_0x2ec804[0x1]][_0x567108(0x3ec)];let _0x2307df=_0x2ec804['slice'](),_0x8bd73a=new Offhandattack(_0x2307df,_0x3dbc8c,_0x3e6207[_0x567108(0x295)]),_0x496e77=_0x8bd73a[_0x567108(0x41b)](!![])[_0x567108(0x2e3)];if(!_0x7e3e0b)_0x496e77=0x0;if(!_0x7e3e0b||_0x8bd73a[_0x567108(0x41b)](!![])[_0x567108(0x3d5)][_0x567108(0x2e1)]>0x0){_0x496e77=0x0;let _0x2d93c9=Math['ceil'](_0x43089d[_0x567108(0x47f)]);for(let _0x24edbe=_0x1fe5d6-_0x2d93c9;_0x24edbe<_0x1fe5d6+_0x2d93c9;_0x24edbe++){for(let _0x2ea3f1=_0x3a62f5-_0x2d93c9;_0x2ea3f1<_0x3a62f5+_0x2d93c9;_0x2ea3f1++){if(!newgrid[_0x24edbe]||!newgrid[_0x24edbe][_0x2ea3f1])continue;if(newgrid[_0x24edbe][_0x2ea3f1][_0x567108(0x3ec)]&&newgrid[_0x24edbe][_0x2ea3f1][_0x567108(0x3ec)]['pc']!==_0x3dbc8c['pc']){if(_0x24edbe!==_0x2ec804[0x0]||_0x2ea3f1!==_0x2ec804[0x1]){_0x2307df=[_0x24edbe,_0x2ea3f1];let _0x2f8773=new Offhandattack(_0x2307df,_0x3dbc8c,_0x3e6207['pos']),_0x29f5d0=_0x2f8773['func'](!![]);_0x29f5d0['errors'][_0x567108(0x2e1)]==0x0&&(_0x29f5d0[_0x567108(0x2e3)]>=_0x496e77&&(_0x8bd73a=_0x2f8773,_0x496e77=_0x29f5d0[_0x567108(0x2e3)]));}}}}}let _0xe3ea47=_0x8bd73a['func'](!![]);if(_0xe3ea47[_0x567108(0x3d5)][_0x567108(0x2e1)]==0x0&&_0x496e77>0x0)_0x3e6207['character'][_0x567108(0x3a8)][_0x567108(0x314)](_0x8bd73a);};let _0x2ebb87=_0x5af7f6['func'](!![]);_0x2ebb87[_0x24c7a9(0x3d5)][_0x24c7a9(0x2e1)]==0x0&&(_0x3e6207['aftereffects'][_0x24c7a9(0x23c)](_0x555aa6),_0x3e6207[_0x24c7a9(0x38a)][_0x24c7a9(0x23c)](_0x555aa6),_0x3e6207[_0x24c7a9(0x2e3)]+=_0x2ebb87[_0x24c7a9(0x2e3)],_0x3e6207['modbreakdown'][_0x24c7a9(0x23c)]('Offhand\x20Attack'));}return _0x3e6207;}function dualwieldpluspermute(_0x4e79dc,_0x2a1a14){const _0x4e7d54=_0x1a99ef;if(_0x4e79dc[_0x4e7d54(0x2d0)][_0x4e7d54(0x302)][0x1]<0x1&&!_0x4e79dc[_0x4e7d54(0x2d0)][_0x4e7d54(0x48b)])return _0x4e79dc;let _0x3b912d=!![];if(_0x4e79dc['action']['specialtag']||_0x4e79dc['weapon'][_0x4e7d54(0x2ba)]!==!![])_0x3b912d=![];const _0x3d6118=_0x4e79dc[_0x4e7d54(0x3ec)],_0x169348=_0x4e79dc[_0x4e7d54(0x4ba)],_0x4ac456=_0x4e79dc[_0x4e7d54(0x3ec)]['offhanditem'],[_0x47af42,_0xe9b00d]=_0x4e79dc[_0x4e7d54(0x3ec)]['pos'];if(_0x4ac456 instanceof Weapon&&!(_0x4ac456 instanceof Unarmed)&&_0x169348 instanceof Weapon&&!(_0x169348 instanceof Unarmed)&&_0x4ac456[_0x4e7d54(0x2ba)]==!![]){let _0x3aa006=_0x2a1a14['slice'](),_0x9e42bb=new Offhandattack(_0x3aa006,_0x3d6118,_0x4e79dc[_0x4e7d54(0x295)]);if(_0x9e42bb['func'](!![])[_0x4e7d54(0x3d5)][_0x4e7d54(0x2e1)]>0x0){let _0x32f2b0=Math[_0x4e7d54(0x3de)](_0x4ac456[_0x4e7d54(0x47f)]);for(let _0x28519a=_0x47af42-_0x32f2b0;_0x28519a<_0x47af42+_0x32f2b0;_0x28519a++){for(let _0x383501=_0xe9b00d-_0x32f2b0;_0x383501<_0xe9b00d+_0x32f2b0;_0x383501++){if(!newgrid[_0x28519a]||!newgrid[_0x28519a][_0x383501])continue;if(newgrid[_0x28519a][_0x383501]['character']&&newgrid[_0x28519a][_0x383501][_0x4e7d54(0x3ec)]['pc']!==_0x3d6118['pc']){(_0x28519a!==_0x2a1a14[0x0]||_0x383501!==_0x2a1a14[0x1])&&(_0x3aa006=[_0x28519a,_0x383501]);let _0x42eeaa=new Offhandattack(_0x3aa006,_0x3d6118,_0x4e79dc['pos']),_0x57786c=_0x42eeaa[_0x4e7d54(0x41b)](!![]);_0x57786c['errors'][_0x4e7d54(0x2e1)]==0x0&&(_0x9e42bb=_0x42eeaa);}}}}const _0x2087c3=function(_0x4b2c93){const _0x51b152=_0x4e7d54,_0x8e2060=newgrid[_0x2a1a14[0x0]][_0x2a1a14[0x1]][_0x51b152(0x3ec)];let _0x2ce367=new Offhandattack(_0x3aa006,_0x3d6118,_0x4e79dc['pos']),_0x3e71e4=_0x2ce367[_0x51b152(0x41b)](!![])['avdamageac10'];if(!_0x8e2060)_0x3e71e4=0x0;if(!_0x8e2060||_0x2ce367[_0x51b152(0x41b)](!![])[_0x51b152(0x3d5)][_0x51b152(0x2e1)]>0x0){_0x3e71e4=0x0;let _0x1f3321=Math[_0x51b152(0x3de)](_0x4ac456[_0x51b152(0x47f)]);for(let _0x5c8806=_0x47af42-_0x1f3321;_0x5c8806<_0x47af42+_0x1f3321;_0x5c8806++){for(let _0x417e43=_0xe9b00d-_0x1f3321;_0x417e43<_0xe9b00d+_0x1f3321;_0x417e43++){if(!newgrid[_0x5c8806]||!newgrid[_0x5c8806][_0x417e43])continue;if(newgrid[_0x5c8806][_0x417e43][_0x51b152(0x3ec)]&&newgrid[_0x5c8806][_0x417e43][_0x51b152(0x3ec)]['pc']!==_0x3d6118['pc']){if(_0x5c8806!==_0x2a1a14[0x0]||_0x417e43!==_0x2a1a14[0x1]){_0x3aa006=[_0x5c8806,_0x417e43];let _0x4e2270=new Offhandattack(_0x3aa006,_0x3d6118,_0x4e79dc[_0x51b152(0x295)]);_0x4e2270[_0x51b152(0x41b)](!![])[_0x51b152(0x3d5)]['length']==0x0&&(_0x4e2270[_0x51b152(0x41b)](!![])['avdamageac10']>=_0x3e71e4&&(_0x2ce367=_0x4e2270,_0x3e71e4=_0x2ce367[_0x51b152(0x41b)](!![])[_0x51b152(0x2e3)]));}}}}}let _0x1d550b=_0x2ce367['func'](!![]);if(_0x3b912d==!![])_0x2ce367[_0x51b152(0x48b)]=!![];if(_0x1d550b['errors'][_0x51b152(0x2e1)]==0x0&&_0x3e71e4>0x0)_0x4e79dc[_0x51b152(0x3ec)][_0x51b152(0x3a8)][_0x51b152(0x23c)](_0x2ce367);};_0x9e42bb[_0x4e7d54(0x41b)](!![])[_0x4e7d54(0x3d5)][_0x4e7d54(0x2e1)]==0x0&&(_0x4e79dc[_0x4e7d54(0x3e2)][_0x4e7d54(0x23c)](_0x2087c3),_0x4e79dc[_0x4e7d54(0x38a)][_0x4e7d54(0x23c)](_0x2087c3),_0x4e79dc[_0x4e7d54(0x2d2)][_0x4e7d54(0x23c)](_0x4e7d54(0x394)));}return _0x4e79dc;}function cleaveattack(_0x48ed5a,_0x3072c6){const _0x210c8d=_0x1a99ef;let _0x1d33e7=[];directions[_0x210c8d(0x348)](function(_0x194053){const _0xf6b862=_0x210c8d,[_0x210e4e,_0x1acf22]=_0x194053[_0xf6b862(0x4a9)]((_0x42c2da,_0x465306)=>_0x42c2da+_0x3072c6[_0x465306]);let _0x23c983=dist(_0x48ed5a[_0xf6b862(0x295)],[_0x210e4e,_0x1acf22],!![])<=_0x48ed5a[_0xf6b862(0x4ba)][_0xf6b862(0x47f)];_0x23c983&&newgrid[_0x210e4e][_0x1acf22]&&newgrid[_0x210e4e][_0x1acf22][_0xf6b862(0x3ec)]!==null&&newgrid[_0x210e4e][_0x1acf22][_0xf6b862(0x3ec)]['pc']!==_0x48ed5a[_0xf6b862(0x3ec)]['pc']&&_0x1d33e7[_0xf6b862(0x23c)]([_0x210e4e,_0x1acf22]);});const _0x699ba9=function(){_0x1d33e7['forEach'](function([_0x53ec32,_0x546afd]){const _0x17333e=_0x4a83;!![]&&_0x48ed5a[_0x17333e(0x3ec)]['actionqueue'][_0x17333e(0x314)](new Attack(_0x17333e(0x493),attackfunc,[0x0,0x0,0x0],1.9,[_0x53ec32,_0x546afd],_0x48ed5a['character'],_0x48ed5a[_0x17333e(0x3ec)][_0x17333e(0x295)]));});};if(_0x48ed5a[_0x210c8d(0x2d0)][_0x210c8d(0x302)][0x1]>0x0){_0x48ed5a[_0x210c8d(0x3e2)][_0x210c8d(0x23c)](_0x699ba9),_0x48ed5a['onmisseffects']['push'](_0x699ba9);if(_0x1d33e7[_0x210c8d(0x2e1)]>0x0){for(let _0x526648=0x0;_0x526648<_0x1d33e7['length'];_0x526648++){let _0x31d435=_0x1d33e7[_0x526648],_0x30e1b4=new Attack('Attack',attackfunc,[0x0,0x0,0x0],1.9,_0x31d435,_0x48ed5a[_0x210c8d(0x3ec)],_0x48ed5a[_0x210c8d(0x2d0)]['pos']),_0x5ed943=_0x30e1b4[_0x210c8d(0x41b)](!![]);_0x5ed943[_0x210c8d(0x3d5)][_0x210c8d(0x2e1)]==0x0&&(_0x48ed5a['avdamageac10']+=_0x5ed943[_0x210c8d(0x2e3)]);}_0x48ed5a['modbreakdown'][_0x210c8d(0x23c)](_0x1d33e7[_0x210c8d(0x2e1)]+0x1+_0x210c8d(0x40c));}}else _0x48ed5a[_0x210c8d(0x2d2)]=[];return _0x48ed5a;}function cleaveattackspecial(_0x557aed,_0x4b3722){const _0x5a407d=_0x1a99ef;if(_0x557aed[_0x5a407d(0x2d0)][_0x5a407d(0x302)][0x1]<0x1&&_0x557aed[_0x5a407d(0x2d0)]['specialtag'])return _0x557aed;let _0x4b1c7b=[];directions[_0x5a407d(0x348)](function(_0x5445ee){const _0x404eb6=_0x5a407d,[_0x3d6cee,_0x130583]=_0x5445ee[_0x404eb6(0x4a9)]((_0x39f29e,_0x5758c0)=>_0x39f29e+_0x4b3722[_0x5758c0]);let _0x1a18eb=dist(_0x557aed[_0x404eb6(0x295)],[_0x3d6cee,_0x130583],!![])<=_0x557aed['weapon'][_0x404eb6(0x47f)];_0x1a18eb&&newgrid[_0x3d6cee][_0x130583]&&newgrid[_0x3d6cee][_0x130583][_0x404eb6(0x3ec)]!==null&&newgrid[_0x3d6cee][_0x130583][_0x404eb6(0x3ec)]['pc']!==_0x557aed['character']['pc']&&_0x4b1c7b['push']([_0x3d6cee,_0x130583]);});const _0x2f93f2=function(){const _0xb590de=_0x5a407d;_0x4b1c7b[_0xb590de(0x348)](function([_0x435e08,_0x562799]){const _0x27a4d9=_0xb590de;if(!![]){let _0x117681=new Attack(_0x27a4d9(0x493),attackfunc,[0x0,0x0,0x0],1.9,[_0x435e08,_0x562799],_0x557aed[_0x27a4d9(0x3ec)],_0x557aed[_0x27a4d9(0x3ec)]['pos']);_0x117681['specialtag']=!![],_0x557aed['character']['actionqueue'][_0x27a4d9(0x314)](_0x117681);}});};if(!_0x557aed[_0x5a407d(0x2d0)][_0x5a407d(0x48b)]){_0x557aed[_0x5a407d(0x3e2)]['push'](_0x2f93f2),_0x557aed[_0x5a407d(0x38a)]['push'](_0x2f93f2);if(_0x4b1c7b[_0x5a407d(0x2e1)]>0x0){for(let _0x4dcc8f=0x0;_0x4dcc8f<_0x4b1c7b[_0x5a407d(0x2e1)];_0x4dcc8f++){let _0x17993e=_0x4b1c7b[_0x4dcc8f],_0x2148e3=new Attack('Attack',attackfunc,[0x0,0x0,0x0],1.9,_0x17993e,_0x557aed[_0x5a407d(0x3ec)],_0x557aed['action'][_0x5a407d(0x295)]);_0x2148e3[_0x5a407d(0x48b)]=!![];let _0x221044=_0x2148e3['func'](!![]);_0x221044['errors'][_0x5a407d(0x2e1)]==0x0&&(console['log'](_0x557aed['avdamageac10']),_0x557aed[_0x5a407d(0x2e3)]+=_0x221044[_0x5a407d(0x2e3)],console['log'](_0x557aed[_0x5a407d(0x2e3)]));}_0x557aed[_0x5a407d(0x2d2)][_0x5a407d(0x23c)](_0x4b1c7b[_0x5a407d(0x2e1)]+0x1+_0x5a407d(0x40c));}}else _0x557aed[_0x5a407d(0x2d2)]=[];return _0x557aed;}function extraattack(_0x18b07c,_0x392c56){const _0x3b78e0=_0x1a99ef;if(_0x18b07c[_0x3b78e0(0x2d0)][_0x3b78e0(0x302)][0x1]<0x1)return _0x18b07c;const _0x3f429a=_0x18b07c[_0x3b78e0(0x3ec)],_0x493ff0=_0x18b07c[_0x3b78e0(0x4ba)],[_0x140a47,_0x18c580]=_0x18b07c[_0x3b78e0(0x3ec)][_0x3b78e0(0x295)],_0x1c496c=newgrid[_0x392c56[0x0]][_0x392c56[0x1]][_0x3b78e0(0x3ec)];let _0x25ab35=_0x392c56[_0x3b78e0(0x428)](),_0x470625=new Attack(_0x3b78e0(0x493),attackfunc,[0x0,0x0,0x0],_0x493ff0['range'],_0x392c56,_0x18b07c['character'],_0x18b07c['character'][_0x3b78e0(0x295)]);if(_0x470625[_0x3b78e0(0x41b)](!![])[_0x3b78e0(0x3d5)][_0x3b78e0(0x2e1)]>0x0){let _0x948a27=Math['ceil'](_0x493ff0['range']);for(let _0x5b426=_0x140a47-_0x948a27;_0x5b426<_0x140a47+_0x948a27;_0x5b426++){for(let _0x47c310=_0x18c580-_0x948a27;_0x47c310<_0x18c580+_0x948a27;_0x47c310++){if(!newgrid[_0x5b426]||!newgrid[_0x5b426][_0x47c310])continue;if(newgrid[_0x5b426][_0x47c310][_0x3b78e0(0x3ec)]&&newgrid[_0x5b426][_0x47c310][_0x3b78e0(0x3ec)]['pc']!==_0x3f429a['pc']){if(_0x5b426!==_0x392c56[0x0]||_0x47c310!==_0x392c56[0x1])_0x25ab35=[_0x5b426,_0x47c310];let _0x11aee2=new Attack('Attack',attackfunc,[0x0,0x0,0x0],_0x493ff0[_0x3b78e0(0x47f)],_0x25ab35,_0x18b07c[_0x3b78e0(0x3ec)],_0x18b07c[_0x3b78e0(0x3ec)][_0x3b78e0(0x295)]);_0x470625[_0x3b78e0(0x41b)](!![])[_0x3b78e0(0x3d5)][_0x3b78e0(0x2e1)]==0x0&&(_0x470625=_0x11aee2);}}}}const _0x1f9663=function(_0x32a257){const _0x18f8f5=_0x3b78e0,_0x5dd5c9=newgrid[_0x392c56[0x0]][_0x392c56[0x1]][_0x18f8f5(0x3ec)];let _0x728c44=new Attack('Attack',attackfunc,[0x0,0x0,0x0],_0x493ff0[_0x18f8f5(0x47f)],_0x392c56,_0x18b07c[_0x18f8f5(0x3ec)],_0x18b07c[_0x18f8f5(0x3ec)][_0x18f8f5(0x295)]),_0x2f14c0=_0x728c44[_0x18f8f5(0x41b)](!![])[_0x18f8f5(0x2e3)];if(!_0x5dd5c9)_0x2f14c0=0x0;if(!_0x5dd5c9||_0x728c44[_0x18f8f5(0x41b)](!![])[_0x18f8f5(0x3d5)][_0x18f8f5(0x2e1)]>0x0){_0x2f14c0=0x0;let _0x11cffa=Math[_0x18f8f5(0x3de)](_0x493ff0[_0x18f8f5(0x47f)]);for(let _0xab0e5a=_0x140a47-_0x11cffa;_0xab0e5a<_0x140a47+_0x11cffa;_0xab0e5a++){for(let _0x52d55e=_0x18c580-_0x11cffa;_0x52d55e<_0x18c580+_0x11cffa;_0x52d55e++){if(!newgrid[_0xab0e5a]||!newgrid[_0xab0e5a][_0x52d55e])continue;if(newgrid[_0xab0e5a][_0x52d55e]['character']&&newgrid[_0xab0e5a][_0x52d55e][_0x18f8f5(0x3ec)]['pc']!==_0x3f429a['pc']){if(_0xab0e5a!==_0x392c56[0x0]||_0x52d55e!==_0x392c56[0x1]){_0x25ab35=[_0xab0e5a,_0x52d55e];let _0x5768b1=new Attack(_0x18f8f5(0x493),attackfunc,[0x0,0x0,0x0],_0x493ff0[_0x18f8f5(0x47f)],_0x25ab35,_0x18b07c['character'],_0x18b07c['character'][_0x18f8f5(0x295)]);_0x5768b1[_0x18f8f5(0x41b)](!![])[_0x18f8f5(0x3d5)][_0x18f8f5(0x2e1)]==0x0&&(_0x5768b1['func'](!![])[_0x18f8f5(0x2e3)]>=_0x2f14c0&&(_0x728c44=_0x5768b1,_0x2f14c0=_0x728c44['func'](!![])['avdamageac10']));}}}}}let _0x547537=_0x728c44[_0x18f8f5(0x41b)](!![]);if(_0x547537[_0x18f8f5(0x3d5)]['length']==0x0&&_0x2f14c0>0x0)_0x18b07c[_0x18f8f5(0x3ec)][_0x18f8f5(0x3a8)][_0x18f8f5(0x23c)](_0x728c44);};return _0x470625[_0x3b78e0(0x41b)](!![])[_0x3b78e0(0x3d5)][_0x3b78e0(0x2e1)]==0x0&&(_0x18b07c['aftereffects'][_0x3b78e0(0x23c)](_0x1f9663),_0x18b07c[_0x3b78e0(0x38a)][_0x3b78e0(0x23c)](_0x1f9663),_0x18b07c['modbreakdown'][_0x3b78e0(0x23c)]('Extra\x20Attack')),_0x18b07c;}function cleaveattackbig(_0x2f6ad4,_0x303caa){const _0x1870e4=_0x1a99ef;let _0x5a991d=[],_0x7de1a6=Math['ceil'](_0x2f6ad4[_0x1870e4(0x4ba)][_0x1870e4(0x47f)]),[_0x54b04b,_0x441d13]=_0x2f6ad4[_0x1870e4(0x295)];if(_0x2f6ad4[_0x1870e4(0x2d0)][_0x1870e4(0x302)][0x1]>0x0){for(let _0x3b404e=_0x54b04b-_0x7de1a6;_0x3b404e<_0x54b04b+_0x7de1a6;_0x3b404e++){for(let _0x39cfaa=_0x441d13-_0x7de1a6;_0x39cfaa<_0x441d13+_0x7de1a6;_0x39cfaa++){if(_0x39cfaa==_0x303caa[0x1]&&_0x3b404e==_0x303caa[0x0])continue;let _0x396bed=dist(_0x2f6ad4[_0x1870e4(0x295)],[_0x3b404e,_0x39cfaa],!![])<=_0x2f6ad4[_0x1870e4(0x4ba)]['range'];_0x396bed&&newgrid[_0x3b404e][_0x39cfaa]&&newgrid[_0x3b404e][_0x39cfaa][_0x1870e4(0x3ec)]!==null&&newgrid[_0x3b404e][_0x39cfaa][_0x1870e4(0x3ec)]['pc']!==_0x2f6ad4[_0x1870e4(0x3ec)]['pc']&&_0x5a991d[_0x1870e4(0x23c)]([_0x3b404e,_0x39cfaa]);}}const _0x23b192=function(){const _0x1af524=_0x1870e4;_0x5a991d[_0x1af524(0x348)](function([_0x5cfb89,_0x35c7ce]){const _0x3c8bb1=_0x1af524;if(!![]){let _0x5733c4=new Attack(_0x3c8bb1(0x493),attackfunc,[0x0,0x0,0x0],1.9,[_0x5cfb89,_0x35c7ce],_0x2f6ad4[_0x3c8bb1(0x3ec)],_0x2f6ad4['character'][_0x3c8bb1(0x295)]);_0x5733c4[_0x3c8bb1(0x3e1)]=![];if(_0x5733c4[_0x3c8bb1(0x41b)](!![])[_0x3c8bb1(0x3d5)][_0x3c8bb1(0x2e1)]==0x0)_0x2f6ad4[_0x3c8bb1(0x3ec)][_0x3c8bb1(0x3a8)][_0x3c8bb1(0x23c)](_0x5733c4);}});};_0x2f6ad4[_0x1870e4(0x3e2)][_0x1870e4(0x23c)](_0x23b192),_0x2f6ad4['onmisseffects'][_0x1870e4(0x23c)](_0x23b192);if(_0x5a991d[_0x1870e4(0x2e1)]>0x0)_0x2f6ad4[_0x1870e4(0x2d2)][_0x1870e4(0x23c)](_0x5a991d[_0x1870e4(0x2e1)]+0x1+_0x1870e4(0x40c));}else _0x2f6ad4[_0x1870e4(0x2d2)]=[];return _0x2f6ad4;}function sharpshooterpermute(_0xe9cf68){const _0xab02d3=_0x1a99ef;if(_0xe9cf68[_0xab02d3(0x4ba)]['range']>1.9&&_0xe9cf68[_0xab02d3(0x4ba)]['ranged']==!![]&&!_0xe9cf68['weapon'][_0xab02d3(0x3fe)]){if(!_0xe9cf68[_0xab02d3(0x2d2)][_0xab02d3(0x491)](_0x5b03d6=>_0x5b03d6=='Half\x20Cover-10'||_0x5b03d6==_0xab02d3(0x352)))_0xe9cf68[_0xab02d3(0x372)]+=0x3,_0xe9cf68[_0xab02d3(0x482)]+=0xf,_0xe9cf68[_0xab02d3(0x39e)]=_0xe9cf68[_0xab02d3(0x39e)][_0xab02d3(0x4a9)](_0x477c33=>_0x477c33+0x2),_0xe9cf68[_0xab02d3(0x2e3)]+=0x1,_0xe9cf68[_0xab02d3(0x2d2)]['push']('Clear\x20Shot+15+2dmg');else{if(verbose)_0xe9cf68[_0xab02d3(0x2d2)][_0xab02d3(0x23c)]('Clear\x20Shot\x20requires\x20no\x20cover');}}return _0xe9cf68;}function savageattack(_0x199761,_0x9bd120){const _0x593719=_0x1a99ef;let _0xd7bf46=![],_0x4a5ef4=_0x199761[_0x593719(0x3ec)];(_0x199761[_0x593719(0x4ba)][_0x593719(0x44b)]||_0x199761['weapon'][_0x593719(0x3d1)])&&_0x4a5ef4[_0x593719(0x2be)][_0x593719(0x367)]==_0x4a5ef4[_0x593719(0x44c)][_0x593719(0x367)]&&_0x199761[_0x593719(0x4ba)][_0x593719(0x23b)]==0x0?(_0xd7bf46=!![],_0x199761[_0x593719(0x482)]+=_0x199761['damagerange'][0x1],_0x199761[_0x593719(0x2d2)][_0x593719(0x23c)](_0x593719(0x397)+_0x199761[_0x593719(0x39e)][0x1])):_0x199761[_0x593719(0x2d2)][_0x593719(0x23c)]('Savage\x20Attack\x20Requires\x20Two-Handed\x20Weapon');const _0x29e48d=newgrid[_0x9bd120[0x0]][_0x9bd120[0x1]][_0x593719(0x3ec)],_0xb4cd32=function(_0x9b0f65){const _0x2e750b=_0x593719;_0x29e48d&&_0x29e48d['hp']<=_0x9b0f65&&(_0x199761[_0x2e750b(0x3ec)]['tc'][0x0]+=0x2);};if(_0xd7bf46)_0x199761[_0x593719(0x2a7)]['push'](_0xb4cd32);return _0x199761;}function rangedanimate([_0x123b95,_0x264b00],[_0x59d9a1,_0x4307bf],_0x578843){const _0x1cae76=linecharacter([_0x123b95,_0x264b00],[_0x59d9a1,_0x4307bf]);let _0xa5bd31=bresenhamLine([_0x123b95,_0x264b00],[_0x59d9a1,_0x4307bf]);_0xa5bd31['shift'](),addanimation(_0xa5bd31,[_0x1cae76],_0x578843);}function linecharacter([_0xac56a3,_0x235855],[_0x573b88,_0x1db617]){const _0x1aed2f=_0x1a99ef,_0x544a2a=Math[_0x1aed2f(0x3cf)](_0x235855-_0x1db617),_0x405ae8=Math[_0x1aed2f(0x3cf)](_0xac56a3-_0x573b88);if(_0x544a2a>0x2*_0x405ae8)symbol='-';else{if(_0x405ae8>0x2*_0x544a2a)symbol='|';else Math[_0x1aed2f(0x279)](_0x235855-_0x1db617)==Math['sign'](_0xac56a3-_0x573b88)?symbol='\x5c':symbol='/';}return symbol;}function linecharacterdiagonalpreference([_0x45196d,_0x29b781],[_0x440cd5,_0x578ecc]){const _0x4b2981=_0x1a99ef,_0x4b2882=Math[_0x4b2981(0x3cf)](_0x29b781-_0x578ecc),_0x375be6=Math[_0x4b2981(0x3cf)](_0x45196d-_0x440cd5);if(_0x4b2882==0x2*_0x375be6)symbol='-';else{if(_0x375be6==0x2*_0x4b2882)symbol='|';else Math[_0x4b2981(0x279)](_0x29b781-_0x578ecc)==Math[_0x4b2981(0x279)](_0x45196d-_0x440cd5)?symbol='\x5c':symbol='/';}return symbol;}function conditionattackpermute(_0x1d4d85){return function(_0x1aedf3,[_0x5ab23a,_0x951aa1]){const _0x7c42db=_0x4a83;return target=newgrid[_0x5ab23a][_0x951aa1][_0x7c42db(0x3ec)],target&&_0x1aedf3[_0x7c42db(0x2a7)][_0x7c42db(0x23c)](addconditiondynamic(_0x1d4d85,!![],target)),_0x1aedf3;};}function grenadeattack(){const _0x45e78e=_0x1a99ef,[_0x35604e,_0x3d2bc2]=this['target'],_0x84181=0x1,_0x154983=Math[_0x45e78e(0x1f4)](_0x84181);for(let _0x4bb6e8=_0x35604e-_0x154983;_0x4bb6e8<=_0x35604e+_0x154983;_0x4bb6e8++){for(let _0x379adb=_0x3d2bc2-_0x154983;_0x379adb<=_0x3d2bc2+_0x154983;_0x379adb++){newgrid[_0x4bb6e8][_0x379adb][_0x45e78e(0x3ec)]!==null&&newgrid[_0x4bb6e8][_0x379adb]['character']['pc']!==this[_0x45e78e(0x3ec)]['pc']&&newgrid[_0x4bb6e8][_0x379adb][_0x45e78e(0x3ec)][_0x45e78e(0x224)](0xa);}}}function restfunc(){const _0x4ff3a0=_0x1a99ef,_0x4be3c3=this[_0x4ff3a0(0x3ec)],[_0x90694c,_0x370390]=_0x4be3c3[_0x4ff3a0(0x295)];if(_0x4be3c3['pc']!==!![])return;addconditiondynamic(conditions[_0x4ff3a0(0x3a6)],!![],_0x4be3c3)(),restcheck(),_0x4be3c3['pc']==!![]&&(_0x4be3c3[_0x4ff3a0(0x3a8)]=[],playerendturn());}function dashfunc(){const _0x45d7f6=_0x1a99ef;let _0x161f04=this[_0x45d7f6(0x3ec)];_0x161f04['tc'][0x0]+=_0x161f04['tcmax'][0x0];const [_0x6fbf9e,_0x21e1ee]=_0x161f04[_0x45d7f6(0x295)];adduilabel(_0x45d7f6(0x3ea),_0x161f04[_0x45d7f6(0x295)],_0x161f04[_0x45d7f6(0x40e)],0x1,!![]);}function standgroundfunc(){const _0x65d01b=_0x1a99ef;let _0x1f1b17=this[_0x65d01b(0x3ec)];_0x1f1b17['tc'][0x1]+=_0x1f1b17[_0x65d01b(0x435)][0x1];const [_0xe3de40,_0x2c6a22]=_0x1f1b17['pos'];adduilabel('Stand\x20Ground',_0x1f1b17[_0x65d01b(0x295)],_0x1f1b17[_0x65d01b(0x40e)],0x1,!![]);}function checkforaoomove([_0x366f56,_0x1f2104],[_0x2f1bbc,_0x1b6c68],_0x4e65ad){const _0x4e7c20=_0x1a99ef;for(let _0x3e18b5=_0x366f56-0x1;_0x3e18b5<=_0x366f56+0x1;_0x3e18b5++){for(let _0x2567c6=_0x1f2104-0x1;_0x2567c6<=_0x1f2104+0x1;_0x2567c6++){if(newgrid[_0x3e18b5][_0x2567c6]&&newgrid[_0x3e18b5][_0x2567c6][_0x4e7c20(0x3ec)]&&newgrid[_0x3e18b5][_0x2567c6][_0x4e7c20(0x3ec)]['pc']!==_0x4e65ad['pc']){if(dist([_0x2f1bbc,_0x1b6c68],[_0x3e18b5,_0x2567c6])>1.8){if(newgrid[_0x3e18b5][_0x2567c6][_0x4e7c20(0x3ec)]['tc'][0x2]>0x0)return!![];}}}}return![];}function checkforaooattack([_0x522687,_0x1fa7b0],[_0x2a8fc7,_0x4a09a8],_0x5a6f67){const _0x55877f=_0x1a99ef;for(let _0x2cb8c7=_0x522687-0x1;_0x2cb8c7<=_0x522687+0x1;_0x2cb8c7++){for(let _0xf948b0=_0x1fa7b0-0x1;_0xf948b0<=_0x1fa7b0+0x1;_0xf948b0++){if(newgrid[_0x2cb8c7][_0xf948b0]&&newgrid[_0x2cb8c7][_0xf948b0][_0x55877f(0x3ec)]&&newgrid[_0x2cb8c7][_0xf948b0][_0x55877f(0x3ec)]['pc']!==_0x5a6f67['pc']){if(dist([_0x522687,_0x1fa7b0],[_0x2a8fc7,_0x4a09a8])>1.8){if(newgrid[_0x2cb8c7][_0xf948b0][_0x55877f(0x3ec)]['tc'][0x2]>0x0)return!![];}}}}return![];}function startoverwatch(){const _0x3d88a3=_0x1a99ef,_0x5d5e44=this['character'];if(_0x5d5e44['tc'][0x2]<0x1)return![];_0x5d5e44['tc'][0x0]=0x0,_0x5d5e44['tc'][0x1]=0x0,addconditiondynamic(conditions[_0x3d88a3(0x21c)],!![],_0x5d5e44)(),this['soundeffect']=this['character']['primaryitem'][_0x3d88a3(0x37f)];}function overwatch(_0x4b141f,_0x3d1f27,_0x4f8228,_0x506069=![]){const _0x46f90f=_0x1a99ef;if(lackscondition(conditions[_0x46f90f(0x21c)],_0x4b141f))return;if(activecharacternonindex['pc']==_0x4b141f['pc'])return;const _0x232fef=_0x4b141f,[_0x430d7c,_0x339c2a]=_0x232fef['pos'],_0x2d9fc0=_0x232fef[_0x46f90f(0x398)](),_0x3957ca=Math[_0x46f90f(0x1f4)](_0x2d9fc0);for(let _0x219f66=_0x430d7c-_0x3957ca;_0x219f66<=_0x430d7c+_0x3957ca;_0x219f66++){if(_0x219f66<0x0||_0x219f66>=mapsizey)continue;for(let _0x1ee81e=_0x339c2a-_0x3957ca;_0x1ee81e<=_0x339c2a+_0x3957ca;_0x1ee81e++){if(_0x1ee81e<0x0||_0x1ee81e>=mapsizex)continue;const _0x539eae=newgrid[_0x219f66][_0x1ee81e]['character'];if(_0x539eae!==null&&_0x539eae['pc']!==_0x232fef['pc']&&dist(_0x232fef[_0x46f90f(0x295)],_0x539eae['pos'])<=_0x2d9fc0&&drawline(_0x232fef[_0x46f90f(0x295)],_0x539eae['pos'])<0x1&&(_0x232fef['pc']==![]||newgrid[_0x219f66][_0x1ee81e][_0x46f90f(0x2de)]==!![])){if(_0x506069)return![];const _0x765477=actions[_0x46f90f(0x493)];let _0x383286=new Attack(..._0x765477,_0x2d9fc0,[_0x219f66,_0x1ee81e],_0x232fef,_0x232fef[_0x46f90f(0x295)]);_0x383286['cost']=[0x0,0x0,0x1],canAffordAction(_0x383286,_0x232fef)&&(_0x232fef[_0x46f90f(0x3a8)][_0x46f90f(0x23c)](_0x383286),move(_0x232fef)),removecondition(_0x232fef,_0x46f90f(0x21c));}}}}function removecondition(_0x109be8,_0x2bf4c4){const _0x55a3de=_0x1a99ef;for(let _0x58ec0a=_0x109be8[_0x55a3de(0x37e)][_0x55a3de(0x2e1)]-0x1;_0x58ec0a>=0x0;_0x58ec0a--){_0x109be8[_0x55a3de(0x37e)][_0x58ec0a][_0x55a3de(0x41d)]==_0x2bf4c4&&_0x109be8[_0x55a3de(0x37e)][_0x55a3de(0x358)](_0x58ec0a,0x1);}}function open(){const _0x213cbd=_0x1a99ef,[_0x118ce5,_0x4d05de]=this[_0x213cbd(0x310)],_0x278368=newgrid[_0x118ce5][_0x4d05de]['objects'][0x0];if(_0x278368[_0x213cbd(0x42e)]){if(_0x278368[_0x213cbd(0x42e)]()!==![])adduilabel(_0x213cbd(0x36f),this[_0x213cbd(0x3ec)]['pos'],this[_0x213cbd(0x3ec)]['color'],0x1,!![],![]),newgrid[_0x118ce5][_0x4d05de][_0x213cbd(0x42c)]();else return adduilabel(_0x213cbd(0x2c9),this['character'][_0x213cbd(0x295)],this[_0x213cbd(0x3ec)][_0x213cbd(0x40e)],0x1,!![],![]),![];}}function interact(){const _0x4d70e7=_0x1a99ef,[_0x262d08,_0x2f6533]=this[_0x4d70e7(0x310)],_0x137e01=newgrid[_0x262d08][_0x2f6533][_0x4d70e7(0x312)][0x0];_0x137e01[_0x4d70e7(0x208)](this[_0x4d70e7(0x3ec)]);}function canAffordAction(_0x3251a7,_0x35b236){const _0x11105f=_0x1a99ef;return!_0x35b236['tc'][_0x11105f(0x491)]((_0x44cccc,_0x465cd1)=>_0x44cccc<_0x3251a7[_0x11105f(0x302)][_0x465cd1]);}function burn(){const _0x3a4123=this['character'];_0x3a4123['damage'](0x1);}function objectburn(_0x58bf22){const _0x2c66e7=_0x1a99ef,[_0x3ab6a8,_0x185659]=_0x58bf22[_0x2c66e7(0x295)],_0x24c0a2=newgrid[_0x3ab6a8][_0x185659][_0x2c66e7(0x3ec)];_0x24c0a2!==null&&addconditiondynamic(conditions[_0x2c66e7(0x2d7)],!![],_0x24c0a2)();}function generatehuntmap(_0x4b5262,_0x38f2f6,_0x132074=0x5){const _0x27e552=_0x1a99ef;class _0x11e06b{constructor(_0x163280,_0x326911,_0x13234b){const _0x4c5ccf=_0x4a83;this['pos']=_0x163280[_0x4c5ccf(0x428)](),this[_0x4c5ccf(0x437)]=_0x326911,this['utility']=_0x13234b;}}const [_0x26509d,_0x363e42]=_0x4b5262;let _0xacbf03=new PriorityQueue((_0x14e668,_0x40d3a9)=>_0x40d3a9[_0x27e552(0x4bf)]-_0x14e668[_0x27e552(0x4bf)]);_0xacbf03[_0x27e552(0x2aa)](new _0x11e06b([_0x26509d,_0x363e42],null,0x1e));let _0x5ec953={},_0x34ccd3=0x0,_0x7d3e97=0x0;while(!_0xacbf03[_0x27e552(0x356)]()&&_0x7d3e97<0x1388){_0x7d3e97++;const _0x20310a=_0xacbf03[_0x27e552(0x39d)]();_0x34ccd3=Math['abs'](_0x20310a['utility']-0xa);const _0xe78a55=_0x20310a[_0x27e552(0x295)],[_0x41cd2a,_0x584658]=_0xe78a55;if(!_0x5ec953[_0x41cd2a])_0x5ec953[_0x41cd2a]={};if(!_0x5ec953[_0x41cd2a][_0x584658])_0x5ec953[_0x41cd2a][_0x584658]=_0x20310a[_0x27e552(0x4bf)];else continue;directions['forEach'](function(_0xce4271){const _0x1a0f6d=_0x27e552,_0x1c8f8d=_0xe78a55[_0x1a0f6d(0x4a9)]((_0x485675,_0x911ca)=>_0x485675+_0xce4271[_0x911ca]);if(newgrid[_0x1c8f8d[0x0]]&&newgrid[_0x1c8f8d[0x0]][_0x1c8f8d[0x1]]!==undefined){const _0x5c3f09=newgrid[_0x1c8f8d[0x0]][_0x1c8f8d[0x1]];let _0x1ee861=_0x5c3f09['moveCost'];if(_0x38f2f6[_0x1a0f6d(0x458)][_0x1c8f8d[0x0]+','+_0x1c8f8d[0x1]]){const _0x3e4c94=_0x38f2f6[_0x1a0f6d(0x458)][_0x1c8f8d[0x0]+','+_0x1c8f8d[0x1]],_0x56ae69=turncounter,_0x565ca6=0x32,_0x1633cb=_0x56ae69-_0x3e4c94;if(chebyshevDistance(_0x1c8f8d,_0x4b5262)>0x1)_0x1ee861+=0xa;}if(_0x5c3f09[_0x1a0f6d(0x3b2)]==!![])_0xacbf03[_0x1a0f6d(0x2aa)](new _0x11e06b(_0x5c3f09[_0x1a0f6d(0x295)],_0x20310a,_0x20310a['utility']-_0x1ee861));else{if(!_0x5ec953[_0x1c8f8d[0x0]])_0x5ec953[_0x1c8f8d[0x0]]={};!_0x5ec953[_0x1c8f8d[0x0]][_0x1c8f8d[0x1]]&&(_0x5ec953[_0x1c8f8d[0x0]][_0x1c8f8d[0x1]]=-0x64);}}else{if(!_0x5ec953[_0x1c8f8d[0x0]])_0x5ec953[_0x1c8f8d[0x0]]={};!_0x5ec953[_0x1c8f8d[0x0]][_0x1c8f8d[0x1]]&&(_0x5ec953[_0x1c8f8d[0x0]][_0x1c8f8d[0x1]]=-0x64);}});}return _0x5ec953;}function updatehuntmap(_0x221cb4,_0x5a833d){const _0x430645=_0x1a99ef;_0x5a833d[_0x430645(0x400)][_0x430645(0x348)](function(_0x348267){const _0x296dd4=_0x430645,[_0x1d5679,_0x103832]=_0x348267[_0x296dd4(0x295)];newgrid[_0x1d5679][_0x103832][_0x296dd4(0x3b2)]&&_0x221cb4[_0x1d5679]&&_0x221cb4[_0x1d5679][_0x103832]!==undefined&&(_0x221cb4[_0x1d5679][_0x103832]=0x0);});}function generatefleemap(_0x5611a4,_0x372b75,_0x5e8aad){const _0x226218=_0x1a99ef;class _0x13fa83{constructor(_0x37c9dd,_0x1d5a3e,_0x366959){const _0x2ad681=_0x4a83;this[_0x2ad681(0x295)]=_0x37c9dd[_0x2ad681(0x428)](),this[_0x2ad681(0x437)]=_0x1d5a3e,this[_0x2ad681(0x335)]=_0x366959;}}let _0x3d2288=new PriorityQueue((_0x2dea39,_0xcbb2e3)=>_0x2dea39['distance']-_0xcbb2e3['distance']);Object[_0x226218(0x263)](_0x5611a4)['forEach'](function(_0x4cbb6c){const _0xb9d1ec=_0x226218,_0x13a30c=new _0x13fa83(_0x4cbb6c[_0xb9d1ec(0x336)],null,0x0);_0x3d2288['enqueue'](_0x13a30c);});let _0x28e41b={};while(!_0x3d2288[_0x226218(0x356)]()){thisnode=_0x3d2288[_0x226218(0x39d)]();if(thisnode[_0x226218(0x335)]>_0x5e8aad)break;const _0xc9406f=thisnode['pos'],[_0x4de3a8,_0x40402e]=_0xc9406f;_0x28e41b[_0x4de3a8+','+_0x40402e]===undefined&&(directions[_0x226218(0x348)](function(_0x486d4b){const _0x1e295c=_0x226218,_0x442dab=_0xc9406f[_0x1e295c(0x4a9)]((_0x44d429,_0x2513df)=>_0x44d429+_0x486d4b[_0x2513df]);if(newgrid[_0x442dab[0x0]]&&newgrid[_0x442dab[0x0]][_0x442dab[0x1]]){const _0x5a7736=newgrid[_0x442dab[0x0]][_0x442dab[0x1]];_0x5a7736['traversable']==!![]&&_0x28e41b[_0x442dab[0x0]+','+_0x442dab[0x1]]===undefined&&_0x3d2288[_0x1e295c(0x2aa)](new _0x13fa83(_0x442dab,thisnode,thisnode[_0x1e295c(0x335)]+_0x5a7736[_0x1e295c(0x315)]));}}),_0x28e41b[_0x4de3a8+','+_0x40402e]=thisnode['distance']);}return _0x28e41b;}function moveusecase(_0x34bae8,_0x40c6d5,_0x48f892){const _0xf3116b=_0x1a99ef;let _0x34655e=_0x34bae8['tc'][0x0],_0x2ed283=_0x34bae8['tc'][0x1],_0x45a9e4=[];const [_0x2aaf56,_0x522bee]=_0x34bae8[_0xf3116b(0x295)];for(let _0x50c6d4=0x0;_0x50c6d4<0x8;_0x50c6d4++){let [_0x38a773,_0x1b0295]=directions[_0x50c6d4],[_0x24f1f1,_0x43c26e]=[_0x2aaf56+_0x38a773,_0x522bee+_0x1b0295],_0x37e22b;try{_0x37e22b=newgrid[_0x24f1f1][_0x43c26e];}catch{continue;}if(!_0x37e22b||_0x37e22b[_0xf3116b(0x3ec)]!==null)continue;const _0xe9dd16=newgrid[_0x2aaf56][_0x522bee]['elevation']-newgrid[_0x24f1f1][_0x43c26e]['elevation'];if(Math['abs'](_0xe9dd16)>0x1)continue;if(!newgrid[_0x24f1f1][_0x43c26e][_0xf3116b(0x3b2)])continue;if(newgrid[_0x24f1f1][_0x43c26e]['objects'][_0xf3116b(0x2e1)]>0x0&&newgrid[_0x24f1f1][_0x43c26e][_0xf3116b(0x312)][0x0][_0xf3116b(0x2d0)]!=null){const _0x2cdb61=newgrid[_0x24f1f1][_0x43c26e][_0xf3116b(0x312)][0x0],_0x256313=_0x2cdb61[_0xf3116b(0x2d0)],_0x5bfe23=new action(..._0x256313,[_0x24f1f1,_0x43c26e],_0x40c6d5,_0x34bae8['pos']);if(_0x5bfe23[_0xf3116b(0x41d)]==_0xf3116b(0x36f)&&!_0x2cdb61[_0xf3116b(0x47c)]){const _0x4b4895=new ActionNode(_0x34bae8[_0xf3116b(0x295)],_0x5bfe23,_0x34bae8['tc'][_0xf3116b(0x428)](),_0x34bae8[_0xf3116b(0x40d)],_0x34bae8[_0xf3116b(0x1ed)],_0x34bae8,_0x48f892),_0x337edd=new Move('Move',movefunc,[0x1,0x0,0x0],null,[_0x24f1f1,_0x43c26e],_0x40c6d5,_0x34bae8[_0xf3116b(0x295)]),_0x14f1b4=subtractcost(_0x337edd,_0x34bae8['tc']),_0x567562=_0x337edd[_0xf3116b(0x3b8)][_0xf3116b(0x2e1)];_0x45a9e4[_0xf3116b(0x23c)](new ActionNode([_0x24f1f1,_0x43c26e],_0x337edd,_0x14f1b4,_0x34bae8['hazards']+_0x567562,_0x34bae8[_0xf3116b(0x1ed)],_0x4b4895,_0x48f892));continue;}continue;}const _0x546ede=new Move(_0xf3116b(0x360),movefunc,[0x1,0x0,0x0],null,[_0x24f1f1,_0x43c26e],_0x40c6d5,_0x34bae8[_0xf3116b(0x295)]),_0xb9ee99=subtractcost(_0x546ede,_0x34bae8['tc']),_0x5e203b=_0x546ede[_0xf3116b(0x3b8)][_0xf3116b(0x2e1)];_0x45a9e4[_0xf3116b(0x23c)](new ActionNode([_0x24f1f1,_0x43c26e],_0x546ede,_0xb9ee99,_0x34bae8[_0xf3116b(0x40d)]+_0x5e203b,_0x34bae8[_0xf3116b(0x1ed)],_0x34bae8,_0x48f892));}return _0x45a9e4;}function digusecase(_0x54fc39,_0x2e2dd6,_0xc0176d){const _0x3e9141=_0x1a99ef;let _0x358081=_0x54fc39['tc'][0x0],_0x45afd2=_0x54fc39['tc'][0x1],_0x5cc47f=[];const [_0x5bec61,_0xbf2446]=_0x54fc39['pos'];for(let _0x5de857=0x0;_0x5de857<directions['length'];_0x5de857++){const [_0x110a28,_0x42b193]=_0x54fc39['pos'][_0x3e9141(0x4a9)]((_0x548e97,_0x2e9a49)=>_0x548e97+directions[_0x5de857][_0x2e9a49]);if(newgrid[_0x110a28]&&newgrid[_0x110a28][_0x42b193]&&newgrid[_0x110a28][_0x42b193][_0x3e9141(0x3b2)]==![]){const _0x1530eb=new action('Dig',digfunc,[0x0,0x1,0x0,0x0],1.9,[_0x110a28,_0x42b193],_0x2e2dd6,[_0x5bec61,_0xbf2446]),_0x28a65c=subtractcost(_0x1530eb,_0x54fc39['tc']),_0x41ad34=new ActionNode([_0x5bec61,_0xbf2446],_0x1530eb,_0x28a65c,[],0x0,_0x54fc39,_0xc0176d);_0x5cc47f[_0x3e9141(0x23c)](_0x41ad34);}}return _0x5cc47f;}function stompusecase(_0x2bd813,_0x5516fd,_0x2d5711){const _0x4dcc01=_0x1a99ef;let _0x4dcf23=_0x2bd813['tc'][0x0],_0x57b8fc=_0x2bd813['tc'][0x1],_0x29c040=[];const [_0x25ac2a,_0x9eda72]=_0x2bd813[_0x4dcc01(0x295)];if(_0x4dcf23>0x0)for(let _0x155956=_0x25ac2a-0x1;_0x155956<=_0x25ac2a+0x1;_0x155956++){if(!newgrid[_0x155956])continue;for(let _0x410465=_0x9eda72-0x1;_0x410465<=_0x9eda72+0x1;_0x410465++){if(!newgrid[_0x155956][_0x410465]||newgrid[_0x155956][_0x410465][_0x4dcc01(0x3b2)]!==!![]||newgrid[_0x155956][_0x410465][_0x4dcc01(0x3ec)]!==null)continue;if(_0x410465==_0x9eda72&&_0x155956==_0x25ac2a)continue;const _0x21ea96=new Move(_0x4dcc01(0x360),movefunc,[0x1,0x0,0x0],null,[_0x155956,_0x410465],_0x5516fd,_0x2bd813[_0x4dcc01(0x295)]);_0x21ea96['loudness']=0x14;const _0xf145fb=subtractcost(_0x21ea96,_0x2bd813['tc']),_0x4a6d93=_0x21ea96[_0x4dcc01(0x3b8)][_0x4dcc01(0x2e1)];if(_0xf145fb[_0x4dcc01(0x491)](_0x200de9=>_0x200de9<0x0,_0xf145fb))continue;_0x29c040[_0x4dcc01(0x23c)](new ActionNode([_0x155956,_0x410465],_0x21ea96,_0xf145fb,_0x2bd813[_0x4dcc01(0x40d)]+_0x4a6d93,_0x2bd813['damagepotential'],_0x2bd813,_0x2d5711));}}return _0x29c040;}function alertusecase(_0x9bf2d,_0x5482a1,_0x1e9faa){const _0x31c002=_0x1a99ef;let _0x538c00=_0x9bf2d['tc'][0x0],_0x56bbf5=_0x9bf2d['tc'][0x1],_0x68fca4=[];const [_0x288674,_0x233c7d]=_0x9bf2d[_0x31c002(0x295)];let _0x1206fa=new action(_0x31c002(0x2c2),chatfunc,[0x0,0x1,0x0],0x0,_0x9bf2d[_0x31c002(0x295)],_0x5482a1,_0x9bf2d['pos'],[],soundeffects[_0x31c002(0x2f4)]);_0x1206fa[_0x31c002(0x26b)]=0x14;let _0x179ab7=new ActionNode(_0x9bf2d[_0x31c002(0x295)],_0x1206fa,subtractcost(_0x1206fa,_0x9bf2d['tc']),_0x9bf2d[_0x31c002(0x40d)],_0x9bf2d['damagepotential'],_0x9bf2d,_0x1e9faa);if(_0x56bbf5>=0x1)_0x68fca4[_0x31c002(0x23c)](_0x179ab7);return _0x68fca4;}function chatusecase(_0x4326bc,_0xde98b2,_0xf84bd6){const _0x23d349=_0x1a99ef;let _0x548f69=_0x4326bc['tc'][0x0],_0x31c3e5=_0x4326bc['tc'][0x1],_0x4381cc=[];const [_0x380a78,_0x263c28]=_0x4326bc['pos'];let _0x19fc74=new action(_0x23d349(0x28d),chatfunc,[0x0,0x1,0x0],0x0,_0x4326bc[_0x23d349(0x295)],_0xde98b2,_0x4326bc['pos'],[],soundeffects[_0x23d349(0x3c2)]);_0x19fc74['loudness']=0x14;let _0x3758ed=new ActionNode(_0x4326bc[_0x23d349(0x295)],_0x19fc74,subtractcost(_0x19fc74,_0x4326bc['tc']),_0x4326bc['hazards'],_0x4326bc[_0x23d349(0x1ed)],_0x4326bc,_0xf84bd6);if(_0x31c3e5>=0x1)_0x4381cc[_0x23d349(0x23c)](_0x3758ed);return _0x4381cc;}function attackusecase(_0x2bc6c7,_0x21dfd6,_0x1bc367){const _0x18db96=_0x1a99ef;let _0x301c6d=_0x2bc6c7['tc'][0x0],_0xc1e486=_0x2bc6c7['tc'][0x1],_0x5778d4=_0x2bc6c7['activeweapon'],_0x41c2cd=[];const [_0x432e98,_0x67e49c]=_0x2bc6c7['pos'];if(!_0x21dfd6[_0x18db96(0x29b)]||_0x21dfd6[_0x18db96(0x29b)][_0x18db96(0x2e1)]==0x0)return _0x41c2cd;for(let _0x7eb151=0x0;_0x7eb151<_0x21dfd6[_0x18db96(0x29b)][_0x18db96(0x2e1)];_0x7eb151++){let _0x152b7b=_0x21dfd6[_0x18db96(0x29b)][_0x7eb151];const _0x2a863c=_0x152b7b[_0x18db96(0x3ec)],_0x48800c=_0x152b7b[_0x18db96(0x336)],[_0x4482c2,_0xdfeec7]=_0x2bc6c7[_0x18db96(0x295)],_0x249720=newgrid[_0x4482c2][_0xdfeec7][_0x18db96(0x439)],[_0x54bf48,_0x1f742c]=_0x48800c,_0x2c3080=newgrid[_0x54bf48][_0x1f742c]['elevation'];if(drawLine3D([_0x4482c2,_0xdfeec7,_0x249720+0x1],[_0x54bf48,_0x1f742c,_0x2c3080])<0x1&&_0x2a863c[_0x18db96(0x304)]==![]&&dist(_0x2bc6c7[_0x18db96(0x295)],_0x48800c,!![])<_0x21dfd6[_0x18db96(0x398)](_0x5778d4)){const _0x243eb1=new Attack(_0x18db96(0x493),attackfunc,[0x0,0x1,0x0],_0x21dfd6[_0x18db96(0x398)](_0x5778d4),_0x48800c,_0x21dfd6,_0x2bc6c7[_0x18db96(0x295)]),_0x1f764c=_0x243eb1['func'](!![],_0x2bc6c7[_0x18db96(0x3df)]),_0x21f23c=subtractcost(_0x243eb1,_0x2bc6c7['tc']),_0x2c50d3=_0x243eb1['warnings'][_0x18db96(0x2e1)];_0x1f764c[_0x18db96(0x3d5)][_0x18db96(0x2e1)]==0x0&&_0x41c2cd[_0x18db96(0x23c)](new ActionNode(_0x2bc6c7[_0x18db96(0x295)],_0x243eb1,_0x21f23c,_0x2bc6c7[_0x18db96(0x40d)]+_0x2c50d3,_0x2bc6c7['damagepotential']+_0x1f764c[_0x18db96(0x2e3)],_0x2bc6c7,_0x1bc367));}if(_0x21dfd6[_0x18db96(0x34b)]){const _0x21e27e=new action(_0x18db96(0x42b),switchweapon,[0x0,0x0,0x0],0x0,_0x2bc6c7['pos'],_0x21dfd6,_0x2bc6c7[_0x18db96(0x295)]),_0x4a0d4f=_0x21dfd6[_0x18db96(0x34b)],_0xa8dfbe=new ActionNode(_0x2bc6c7[_0x18db96(0x295)],_0x21e27e,_0x2bc6c7['tc'][_0x18db96(0x428)](),_0x2bc6c7[_0x18db96(0x40d)],_0x2bc6c7[_0x18db96(0x1ed)],_0x2bc6c7,_0x2bc6c7[_0x18db96(0x305)],_0x4a0d4f);if(drawLine3D([_0x4482c2,_0xdfeec7,_0x249720+0x1],[_0x54bf48,_0x1f742c,_0x2c3080])<0x1&&_0x2a863c[_0x18db96(0x304)]==![]&&dist(_0x2bc6c7[_0x18db96(0x295)],_0x2a863c[_0x18db96(0x295)],!![])<_0x21dfd6[_0x18db96(0x398)](_0x4a0d4f)){const _0x3bbf81=new Attack(_0x18db96(0x493),attackfunc,[0x0,0x1,0x0],_0x21dfd6[_0x18db96(0x398)](_0x4a0d4f),_0x2a863c[_0x18db96(0x295)],_0x21dfd6,_0x2bc6c7['pos']),_0x1972b6=_0x3bbf81[_0x18db96(0x41b)](!![],_0x4a0d4f),_0x5b1aec=subtractcost(_0x3bbf81,_0x2bc6c7['tc']),_0x8fae58=_0x3bbf81[_0x18db96(0x3b8)][_0x18db96(0x2e1)];_0x1972b6[_0x18db96(0x3d5)][_0x18db96(0x2e1)]==0x0&&_0x41c2cd[_0x18db96(0x23c)](new ActionNode(_0x2bc6c7['pos'],_0x3bbf81,_0x5b1aec,_0x2bc6c7['hazards']+_0x8fae58,_0x2bc6c7[_0x18db96(0x1ed)]+_0x1972b6[_0x18db96(0x2e3)],_0xa8dfbe,_0x1bc367,_0x4a0d4f));}}}return _0x41c2cd;}function dashusecase(_0x1f6148,_0x501314,_0x7514cd){const _0x52115c=_0x1a99ef;let _0x16b2bc=_0x1f6148['tc'][0x0],_0x48939d=_0x1f6148['tc'][0x1],_0x37a188=[];const [_0x1072ae,_0x5c564b]=_0x1f6148['pos'];if(_0x48939d>0x0&&_0x16b2bc<=0x0){let _0x18b0ed=new action('Dash',dashfunc,[0x0,_0x501314['tcmax'][0x1],0x0],0x0,_0x501314[_0x52115c(0x295)],_0x501314,_0x1f6148[_0x52115c(0x295)]),_0x41c09a=subtractcost(_0x18b0ed,_0x1f6148['tc']);_0x41c09a[0x0]+=_0x501314[_0x52115c(0x435)][0x0];let _0xa865af=new ActionNode(_0x1f6148[_0x52115c(0x295)],_0x18b0ed,_0x41c09a,_0x1f6148[_0x52115c(0x40d)],_0x1f6148[_0x52115c(0x1ed)],_0x1f6148,_0x7514cd);_0x37a188[_0x52115c(0x23c)](_0xa865af);}return _0x37a188;}function standgroundusecase(_0x24b017,_0x38fec4,_0x28e520){const _0x2e611b=_0x1a99ef;let _0x537a98=_0x24b017['tc'][0x0],_0x5bacb1=_0x24b017['tc'][0x1],_0x16cf17=[];const [_0x451281,_0x32c622]=_0x24b017[_0x2e611b(0x295)];if(_0x5bacb1==0x0&&_0x537a98==_0x38fec4[_0x2e611b(0x435)][0x0]){let _0x11bcd3=new action(_0x2e611b(0x36c),standgroundfunc,[_0x38fec4[_0x2e611b(0x435)][0x0],0x0,0x0],0x0,_0x38fec4['pos'],_0x38fec4,_0x24b017[_0x2e611b(0x295)]),_0x4fb04e=subtractcost(_0x11bcd3,_0x24b017['tc']);_0x4fb04e[0x1]+=_0x38fec4['tcmax'][0x1];let _0x5b6e2e=new ActionNode(_0x24b017[_0x2e611b(0x295)],_0x11bcd3,_0x4fb04e,_0x24b017['hazards'],_0x24b017[_0x2e611b(0x1ed)],_0x24b017,_0x28e520);_0x16cf17['push'](_0x5b6e2e);}return _0x16cf17;}function defaultidle(_0x240bf4,_0x160731){const _0x2839e6=_0x1a99ef;let _0x5bee3c=0x0;if(Math[_0x2839e6(0x282)]()>0.99)return 0x3e8;return _0x5bee3c;}function defaultdwarf(_0x48e038,_0x35b5c7){const _0x5e4318=_0x1a99ef,_0xcb848a=_0x48e038['tc'][0x1];return(0x5-_0xcb848a)*chebyshevDistance(_0x48e038[_0x5e4318(0x295)],_0x35b5c7[_0x5e4318(0x295)])*Math['random']();}function defaulthostile(_0x40992c,_0x23e5c9){const _0x455eb3=_0x1a99ef,[_0x5dd5e3,_0xbb3f31]=_0x40992c[_0x455eb3(0x295)],_0x573806=newgrid[_0x5dd5e3][_0xbb3f31];_0x40992c[_0x455eb3(0x232)]==null&&(_0x23e5c9[_0x455eb3(0x29b)]=[],Object[_0x455eb3(0x263)](_0x23e5c9[_0x455eb3(0x4aa)])[_0x455eb3(0x348)](function(_0x3dfcb1){const _0x238e8d=_0x455eb3;_0x3dfcb1[_0x238e8d(0x3ec)]['pc']!==_0x23e5c9['pc']&&_0x23e5c9[_0x238e8d(0x29b)]['push'](_0x3dfcb1);}));let _0x410d82=0x0,_0x16e2aa=_0x40992c[_0x455eb3(0x40d)];newgrid[_0x5dd5e3][_0xbb3f31][_0x455eb3(0x4a6)]()[0x1]>0x0&&_0x16e2aa++;const _0x41b686=_0x40992c['damagepotential'],_0x4b696a=defaulttemperment(_0x40992c,_0x23e5c9);return _0x410d82-=_0x16e2aa*0x64,_0x410d82+=_0x41b686*0xa,_0x410d82+=_0x4b696a,_0x410d82;}function defaulthunting(_0x2588cf,_0x7056ad){const _0x51b622=_0x1a99ef,[_0x3f27ff,_0x4acb25]=_0x2588cf[_0x51b622(0x295)];let _0x1f1475=0x0;_0x2588cf['parentnode']!==null&&(_0x1f1475=_0x2588cf['parentutility']);;if(_0x2588cf[_0x51b622(0x232)]==null&&!_0x7056ad['huntmap']){let _0x3c5a28=0x63,_0x3f0ab0;Object[_0x51b622(0x263)](_0x7056ad[_0x51b622(0x4c0)])[_0x51b622(0x348)](function(_0x49bd22){const _0x395a64=_0x51b622,_0x37d893=_0x49bd22[_0x395a64(0x336)],_0x2c8a50=_0x49bd22[_0x395a64(0x3ec)],_0xc65b4e=chebyshevDistance(_0x2588cf[_0x395a64(0x295)],_0x37d893)+_0x49bd22[_0x395a64(0x337)]()*0x4;_0xc65b4e<_0x3c5a28&&(_0x3c5a28=_0xc65b4e,_0x3f0ab0=_0x49bd22);}),_0x3f0ab0&&(_0x7056ad['hunted']=_0x3f0ab0,_0x7056ad[_0x51b622(0x276)]=generatehuntmap(_0x3f0ab0[_0x51b622(0x336)],_0x7056ad,0x14));}else _0x2588cf[_0x51b622(0x232)]==null&&updatehuntmap(_0x7056ad[_0x51b622(0x276)],_0x7056ad);return _0x7056ad[_0x51b622(0x276)]&&_0x7056ad[_0x51b622(0x276)][_0x3f27ff]&&_0x7056ad[_0x51b622(0x276)][_0x3f27ff][_0x4acb25]?_0x7056ad[_0x51b622(0x276)][_0x3f27ff][_0x4acb25]:chebyshevDistance([_0x3f27ff,_0x4acb25],_0x7056ad['pos'])+Math[_0x51b622(0x282)]()*0x3;}function defaultfleeing(_0xb4e637,_0x4c13a9){const _0x3b723c=_0x1a99ef,[_0x128231,_0x4444f8]=_0xb4e637[_0x3b723c(0x295)];let _0x59dee6=0x0;_0xb4e637[_0x3b723c(0x232)]==null&&(_0x4c13a9[_0x3b723c(0x29b)]=[],Object[_0x3b723c(0x263)](_0x4c13a9['visiblecharacters'])['forEach'](function(_0x5b5718){const _0x278a5b=_0x3b723c;_0x5b5718[_0x278a5b(0x3ec)]['pc']!==_0x4c13a9['pc']&&_0x4c13a9[_0x278a5b(0x29b)][_0x278a5b(0x23c)](_0x5b5718);}),_0x4c13a9['fleemap']=generatefleemap(_0x4c13a9['knownenemies'],_0x4c13a9,0x14));if(_0x4c13a9[_0x3b723c(0x245)]&&_0x4c13a9[_0x3b723c(0x245)][_0x128231+','+_0x4444f8])_0x59dee6+=_0x4c13a9['fleemap'][_0x128231+','+_0x4444f8];else return 0x3e8;return _0xb4e637[_0x3b723c(0x40d)]>0x0&&(_0x59dee6-=_0xb4e637[_0x3b723c(0x40d)]*0x5),_0xb4e637[_0x3b723c(0x1ed)]>0x0&&(_0x59dee6+=_0xb4e637[_0x3b723c(0x1ed)]),_0x59dee6>0xa&&_0xb4e637[_0x3b723c(0x2d0)]&&_0xb4e637[_0x3b723c(0x2d0)][_0x3b723c(0x41d)]==_0x3b723c(0x2c2)&&(_0x59dee6+=0x14),_0x59dee6;}function defaulttemperment(_0x4ef9f1,_0x32414c){const _0xf83692=_0x1a99ef,_0x36147b=_0x4ef9f1[_0xf83692(0x3df)],[_0x423103,_0x2b0df3]=_0x4ef9f1[_0xf83692(0x295)];let _0x4c7a34=0x270f,_0x11a7a6=Math[_0xf83692(0x1f4)](_0x32414c[_0xf83692(0x398)](_0x36147b)),_0x12e8aa,_0x99bc04;for(let _0x3b4ade=0x0;_0x3b4ade<_0x32414c[_0xf83692(0x29b)][_0xf83692(0x2e1)];_0x3b4ade++){_0x12e8aa=_0x32414c[_0xf83692(0x29b)][_0x3b4ade];const _0x41ce7e=_0x12e8aa[_0xf83692(0x3ec)],_0x410423=_0x12e8aa['lastseen'];_0x99bc04=Math[_0xf83692(0x1f4)](dist(_0x410423,[_0x423103,_0x2b0df3]));const _0x4f3a4b=[];if(_0x4f3a4b&&_0x4f3a4b[_0xf83692(0x2e1)])walkdist=_0x4f3a4b['length'];_0x99bc04<_0x4c7a34&&(_0x4c7a34=_0x99bc04);}let _0x5601aa=Math[_0xf83692(0x3cf)](_0x99bc04-_0x11a7a6);if(_0x4c7a34<=_0x32414c['getminrange'](_0x36147b))_0x5601aa=0x32;return-_0x5601aa;}function fleeingtemperment(_0x23a0ea,_0x85197c){const _0x3bb25e=_0x1a99ef,[_0x1e62c2,_0x10f5a6]=_0x23a0ea[_0x3bb25e(0x295)];let _0x37a322=0x270f;return _0x85197c[_0x3bb25e(0x29b)]['forEach'](function(_0x3565f1){const _0x218035=_0x3bb25e,_0x21e6a9=_0x3565f1[_0x218035(0x3ec)],_0x60d59e=_0x3565f1[_0x218035(0x336)],_0x5e7683=Math[_0x218035(0x1f4)](dist(_0x60d59e,[_0x1e62c2,_0x10f5a6]));_0x5e7683<_0x37a322&&(_0x37a322=_0x5e7683);}),-_0x37a322;}function spot(_0xa81e77,_0x168190,_0x5856b8){const _0x27bb6f=_0x1a99ef;if(_0x168190&&_0x168190['index']==_0xa81e77[_0x27bb6f(0x306)])return;if(_0x168190&&_0x168190['pc']==_0xa81e77['pc'])return;_0xa81e77[_0x27bb6f(0x347)](),_0xa81e77['visiblecharacters']={},_0xa81e77[_0x27bb6f(0x400)][_0x27bb6f(0x348)](function(_0x3a5acb){const _0x309e69=_0x27bb6f,[_0x5376b1,_0x5d6160]=_0x3a5acb[_0x309e69(0x295)];if(_0x3a5acb[_0x309e69(0x3ec)]!==null&&!_0x3a5acb[_0x309e69(0x3ec)][_0x309e69(0x304)]){const _0xa90ec7=_0x3a5acb[_0x309e69(0x3ec)];let _0x6a1440=_0xa90ec7['pos'][_0x309e69(0x428)]();_0x168190&&_0xa90ec7['index']==_0x168190[_0x309e69(0x306)]&&_0x5856b8[_0x309e69(0x41d)]==_0x309e69(0x360)&&(_0x6a1440=_0x5856b8[_0x309e69(0x310)]),_0xa81e77['visiblecharacters'][_0xa90ec7[_0x309e69(0x306)]]=new CharacterMemory(_0xa90ec7,_0x6a1440['slice']()),_0xa90ec7['pc']==!![]&&_0xa81e77['knowncharacters'][_0xa90ec7[_0x309e69(0x306)]]&&((_0xa81e77['knowncharacters'][_0xa90ec7['index']]['lastseen'][0x0]!=_0xa81e77['visiblecharacters'][_0xa90ec7[_0x309e69(0x306)]]['lastseen'][0x0]||_0xa81e77[_0x309e69(0x429)][_0xa90ec7[_0x309e69(0x306)]][_0x309e69(0x336)][0x1]!=_0xa81e77[_0x309e69(0x4aa)][_0xa90ec7[_0x309e69(0x306)]]['lastseen'][0x1])&&(_0xa81e77[_0x309e69(0x3a8)]=[])),!_0xa81e77['knowncharacters'][_0xa90ec7[_0x309e69(0x306)]]&&_0xa90ec7['pc']==!![]&&(_0xa81e77[_0x309e69(0x3a8)]=[]),_0xa81e77[_0x309e69(0x429)][_0xa90ec7[_0x309e69(0x306)]]=new CharacterMemory(_0xa90ec7,_0x6a1440[_0x309e69(0x428)]());}}),Object[_0x27bb6f(0x443)](_0xa81e77[_0x27bb6f(0x429)])[_0x27bb6f(0x348)](function(_0xe37c2c){const _0x31ddd2=_0x27bb6f;if(!_0xa81e77[_0x31ddd2(0x4aa)][_0xe37c2c]&&_0xa81e77['knowncharacters'][_0xe37c2c][_0x31ddd2(0x3ec)]['pc']!==_0xa81e77['pc']){if(drawline(_0xa81e77[_0x31ddd2(0x295)],_0xa81e77[_0x31ddd2(0x429)][_0xe37c2c][_0x31ddd2(0x336)])>=0x1){let _0x354ebe=_0xa81e77[_0x31ddd2(0x429)][_0xe37c2c][_0x31ddd2(0x3ec)],_0x4988ac=_0xa81e77[_0x31ddd2(0x429)][_0xe37c2c][_0x31ddd2(0x336)];_0xa81e77[_0x31ddd2(0x4aa)][_0xe37c2c]=new CharacterMemory(_0x354ebe,_0x4988ac);}else{const _0x3df4fa=_0xa81e77[_0x31ddd2(0x429)][_0xe37c2c][_0x31ddd2(0x3ec)],_0x453c19=_0xa81e77[_0x31ddd2(0x429)][_0xe37c2c]['lastseen'];_0xa81e77[_0x31ddd2(0x4c0)][_0xe37c2c]=new CharacterMemory(_0x3df4fa,_0x453c19),delete _0xa81e77['knowncharacters'][_0xe37c2c],_0xa81e77[_0x31ddd2(0x3a8)]=[];}}}),_0xa81e77[_0x27bb6f(0x333)]();}function attackofop(_0x1a9c57,_0x57c279,_0x34e32){const _0x3c90e6=_0x1a99ef;if(!_0x57c279||_0x57c279['pc']==_0x1a9c57['pc'])return;if(chebyshevDistance(_0x57c279[_0x3c90e6(0x295)],_0x1a9c57[_0x3c90e6(0x295)])==0x1&&_0x34e32[_0x3c90e6(0x41d)]==_0x3c90e6(0x360)&&chebyshevDistance(_0x34e32[_0x3c90e6(0x310)],_0x1a9c57[_0x3c90e6(0x295)])>0x1){let _0x4d2b22=new Attack(_0x3c90e6(0x493),attackfunc,[0x0,0x0,0x1],_0x1a9c57['getrange'](),_0x57c279[_0x3c90e6(0x295)],_0x1a9c57,_0x1a9c57['pos']);_0x1a9c57[_0x3c90e6(0x3a8)][_0x3c90e6(0x2e1)]>0x0&&(console[_0x3c90e6(0x2b1)]('this\x20enemy\x20is\x20making\x20a\x20reaction,\x20and\x20their\x20action\x20queue\x20wasn\x27t\x20empty'),console[_0x3c90e6(0x2b1)](_0x1a9c57),_0x1a9c57[_0x3c90e6(0x3a8)]=[]),canAffordAction(_0x4d2b22,_0x1a9c57)&&(_0x1a9c57[_0x3c90e6(0x3a8)][_0x3c90e6(0x23c)](_0x4d2b22),move(_0x1a9c57));}else{if(chebyshevDistance(_0x57c279[_0x3c90e6(0x295)],_0x1a9c57[_0x3c90e6(0x295)])==0x1&&_0x34e32[_0x3c90e6(0x41d)]==_0x3c90e6(0x493)&&chebyshevDistance(_0x34e32[_0x3c90e6(0x310)],_0x57c279[_0x3c90e6(0x295)])>0x1){let _0x3441a1=new Attack(_0x3c90e6(0x493),attackfunc,[0x0,0x0,0x1],_0x1a9c57[_0x3c90e6(0x398)](),_0x57c279[_0x3c90e6(0x295)],_0x1a9c57,_0x1a9c57['pos']);_0x1a9c57[_0x3c90e6(0x3a8)][_0x3c90e6(0x2e1)]>0x0&&(console[_0x3c90e6(0x2b1)](_0x3c90e6(0x41a)),console['log'](_0x1a9c57),_0x1a9c57['aq']=[]),canAffordAction(_0x3441a1,_0x1a9c57)&&(_0x1a9c57[_0x3c90e6(0x3a8)]['push'](_0x3441a1),move(_0x1a9c57));}}}function defender(_0x454b0b,_0x4426d2,_0x2959fa){const _0x324673=_0x1a99ef,[_0x156674,_0x76e6a3]=_0x454b0b[_0x324673(0x295)];if(!_0x4426d2||_0x4426d2['pc']==_0x454b0b['pc'])return;if(_0x2959fa[_0x324673(0x41d)]!=='Attack')return;if(!(_0x454b0b[_0x324673(0x2be)]instanceof Shield))return;if(chebyshevDistance([_0x156674,_0x76e6a3],_0x2959fa[_0x324673(0x310)])!==0x1)return;if(chebyshevDistance([_0x156674,_0x76e6a3],_0x4426d2[_0x324673(0x295)])==0x1){let _0x5ce68a=_0x2959fa[_0x324673(0x310)][_0x324673(0x428)]();_0x2959fa['target']=[_0x156674,_0x76e6a3],adduilabel('*',_0x5ce68a,[0x20,0x20,0x40],0x0,!![],![],![],![]);return;}else{let _0x5ef88f=function(_0x1e610d,_0x40b3ca){const _0x3b952f=_0x324673;return _0x1e610d[_0x3b952f(0x3d6)]=function(_0x518e89,_0x4569b3){const _0x36e600=_0x3b952f;return _0x454b0b['tc'][0x2]>0x0&&(_0x4569b3==!![]&&(_0x1e610d[_0x36e600(0x39e)][0x0]-=_0x454b0b[_0x36e600(0x265)][0x0],_0x1e610d[_0x36e600(0x39e)][0x0]=Math[_0x36e600(0x4bb)](_0x1e610d['damagerange'][0x0],0x0),_0x1e610d[_0x36e600(0x39e)][0x1]-=_0x454b0b[_0x36e600(0x265)][0x0],_0x1e610d[_0x36e600(0x39e)][0x1]=Math[_0x36e600(0x4bb)](_0x1e610d[_0x36e600(0x39e)][0x1],0x0),_0x1e610d['modbreakdown']=[_0x36e600(0x385)+_0x454b0b['stats'][0x0]+_0x36e600(0x31a)],adduilabel('*',_0x454b0b[_0x36e600(0x295)],[0x20,0x20,0x40],0x0,!![],![],![],![]),_0x454b0b['tc'][0x2]--)),[_0x518e89,_0x4569b3];},_0x1e610d;};_0x2959fa[_0x324673(0x41b)]=function(_0x1eae89,_0x26de4f){const _0x2d7934=_0x324673;return attackfunc[_0x2d7934(0x4c6)](_0x2959fa,[_0x1eae89,_0x26de4f,_0x5ef88f]);};}}function riposte(_0x1d6edf,_0x3f1364,_0x3a7c59){const _0x578189=_0x1a99ef,[_0xd65c3c,_0x5cfebf]=_0x1d6edf[_0x578189(0x295)];if(!_0x3f1364||_0x3f1364['pc']==_0x1d6edf['pc'])return;if(_0x3a7c59[_0x578189(0x41d)]!=='Attack')return;if(!(_0x1d6edf[_0x578189(0x2be)]instanceof Shield))return;if(chebyshevDistance([_0xd65c3c,_0x5cfebf],_0x3a7c59['target'])>0x0)return;let _0x220bf5=function(_0x14e209,_0x3a1603){const _0x52be1c=_0x578189;return _0x14e209[_0x52be1c(0x3d6)]=function(_0x28a77c,_0x1b427b){const _0x2cccfd=_0x52be1c;if(_0x1d6edf['tc'][0x2]>0x0){if(_0x1b427b==!![]){_0x14e209[_0x2cccfd(0x39e)][0x0]-=_0x1d6edf['stats'][0x0],_0x14e209['damagerange'][0x0]=Math[_0x2cccfd(0x4bb)](_0x14e209[_0x2cccfd(0x39e)][0x0],0x0),_0x14e209[_0x2cccfd(0x39e)][0x1]-=_0x1d6edf['stats'][0x0],_0x14e209[_0x2cccfd(0x39e)][0x1]=Math[_0x2cccfd(0x4bb)](_0x14e209[_0x2cccfd(0x39e)][0x1],0x0),_0x14e209[_0x2cccfd(0x2d2)]=[_0x2cccfd(0x385)+_0x1d6edf[_0x2cccfd(0x265)][0x0]+'dmg'],_0x1d6edf['tc'][0x2]--;let _0x534347=new Attack(_0x2cccfd(0x493),attackfunc,[0x0,0x0,0x0],_0x1d6edf['getrange'],_0x3f1364[_0x2cccfd(0x295)],_0x1d6edf,[_0xd65c3c,_0x5cfebf]);_0x534347[_0x2cccfd(0x41b)](!![])[_0x2cccfd(0x3d5)][_0x2cccfd(0x2e1)]==0x0&&(_0x1d6edf['actionqueue']['unshift'](_0x534347),move(_0x1d6edf));}}return[_0x28a77c,_0x1b427b];},_0x14e209;};_0x3a7c59[_0x578189(0x41b)]=function(_0xfc5fdb,_0x16009d){const _0x3a5b24=_0x578189;return attackfunc[_0x3a5b24(0x4c6)](_0x3a7c59,[_0xfc5fdb,_0x16009d,_0x220bf5]);};}function blockhelper(){}function block(_0x337754,_0x235d01,_0x249701){const _0x5cd594=_0x1a99ef,[_0x2966da,_0x1c3a55]=_0x337754[_0x5cd594(0x295)];if(!_0x235d01||_0x235d01['pc']==_0x337754['pc'])return;if(_0x249701[_0x5cd594(0x41d)]!==_0x5cd594(0x493))return;if(!(_0x337754[_0x5cd594(0x2be)]instanceof Shield))return;if(chebyshevDistance([_0x2966da,_0x1c3a55],_0x249701[_0x5cd594(0x310)])>0x0)return;let _0x313782=function(_0x26d673,_0x31ff15){const _0x3fe3ae=_0x5cd594;return _0x26d673[_0x3fe3ae(0x3d6)]=function(_0x462bb0,_0x442c6b){const _0x5ce9a0=_0x3fe3ae;if(_0x337754['tc'][0x2]>0x0){if(_0x442c6b==!![]){let _0x3f9f40=Math[_0x5ce9a0(0x4bb)](0x1,_0x337754['stats'][0x0]);_0x26d673[_0x5ce9a0(0x39e)][0x0]-=_0x337754[_0x5ce9a0(0x265)][0x0],_0x26d673['damagerange'][0x0]=Math[_0x5ce9a0(0x4bb)](_0x26d673['damagerange'][0x0],0x0),_0x26d673['damagerange'][0x1]-=_0x337754[_0x5ce9a0(0x265)][0x0],_0x26d673[_0x5ce9a0(0x39e)][0x1]=Math[_0x5ce9a0(0x4bb)](_0x26d673[_0x5ce9a0(0x39e)][0x1],0x0),_0x26d673[_0x5ce9a0(0x2d2)]=[_0x5ce9a0(0x385)+_0x3f9f40+'dmg'],_0x337754['tc'][0x2]--;}}return[_0x462bb0,_0x442c6b];},_0x26d673;};_0x249701[_0x5cd594(0x41b)]=function(_0x22bf66,_0x18f4c5){const _0x11fc12=_0x5cd594;return attackfunc[_0x11fc12(0x4c6)](_0x249701,[_0x22bf66,_0x18f4c5,_0x313782]);};}function lightsensitive(_0x189621,_0x3a80c3,_0x42e21e){const _0x39340e=_0x1a99ef;let [_0x21dd36,_0x36e091]=_0x189621[_0x39340e(0x295)];newgrid[_0x21dd36][_0x36e091][_0x39340e(0x30d)]>0x2&&addconditiondynamic(conditions[_0x39340e(0x488)],!![],_0x189621)();}function autopickup(_0x2ef478,_0x1d07a3,_0x383ad9){const _0x47e5b9=_0x1a99ef,[_0x487914,_0x23ad03]=_0x2ef478['pos'];if(newgrid[_0x487914][_0x23ad03][_0x47e5b9(0x312)]['length']>0x0&&(newgrid[_0x487914][_0x23ad03][_0x47e5b9(0x312)][0x0]instanceof Weapon||newgrid[_0x487914][_0x23ad03][_0x47e5b9(0x312)][0x0]instanceof Ammunition)){const _0xb61f34=newgrid[_0x487914][_0x23ad03]['objects'][0x0],_0x48ab1a=[_0x2ef478[_0x47e5b9(0x375)],_0x2ef478[_0x47e5b9(0x34b)]];let _0x55d327=![];_0x48ab1a[_0x47e5b9(0x348)](function(_0x30eec0){const _0x962088=_0x47e5b9;if(_0x55d327==!![])return;if(_0x30eec0['number']<_0x30eec0[_0x962088(0x4cf)]&&_0xb61f34[_0x962088(0x367)]==_0x30eec0['basename']||_0x30eec0['ammotype']==_0xb61f34['basename']){if(_0x2ef478['actionqueue']['length']==0x0)_0x55d327=!![],_0x2ef478[_0x962088(0x3a8)][_0x962088(0x314)](new Get(_0x962088(0x37d),getfunc,[0x0,0x0,0x0],0x0,_0x2ef478[_0x962088(0x295)],_0x2ef478,_0x2ef478[_0x962088(0x295)])),move(_0x2ef478);else _0x2ef478['actionqueue'][_0x962088(0x2e1)]>0x0&&_0x2ef478[_0x962088(0x3a8)][0x0][_0x962088(0x41d)]!=='Get'&&(_0x55d327=!![],_0x2ef478[_0x962088(0x3a8)][_0x962088(0x314)](new Get('Get',getfunc,[0x0,0x0,0x0],0x0,_0x2ef478[_0x962088(0x295)],_0x2ef478,_0x2ef478[_0x962088(0x295)])));}});}}function spot2([_0x57694f,_0x5e603c]){const _0x26f0ff=_0x1a99ef,_0x3ac050=newgrid[_0x57694f][_0x5e603c];let _0x1f3e25=[];_0x1f3e25['push'](_0x3ac050);let _0x2ca084={};visiblecharacters=[];let _0x37a1a0=0x0;while(_0x1f3e25['length']>0x0&&_0x37a1a0<0x190){_0x37a1a0++;const _0x244218=_0x1f3e25[_0x26f0ff(0x2ed)](),[_0xb86ae4,_0x55d7f3]=_0x244218[_0x26f0ff(0x295)];if(drawline([_0xb86ae4,_0x55d7f3],[_0x57694f,_0x5e603c])!==![]){if(_0x244218['character']!==null&&(_0xb86ae4!==_0x57694f||_0x55d7f3!==_0x5e603c))visiblecharacters[_0x26f0ff(0x23c)](_0x244218['character']);for(let _0x524381=_0xb86ae4-0x1;_0x524381<=_0xb86ae4+0x1;_0x524381++){for(let _0x4d025e=_0x55d7f3-0x1;_0x4d025e<=_0x55d7f3+0x1;_0x4d025e++){if(!_0x2ca084[_0x524381])_0x2ca084[_0x524381]={};!_0x2ca084[_0x524381][_0x4d025e]&&(_0x2ca084[_0x524381][_0x4d025e]=0x1,_0x1f3e25['push'](newgrid[_0x524381][_0x4d025e]));}}}}return visiblecharacters;}function hear(_0x5a6bea,_0x3eab97=!![],_0x2f1bc3=0x0,_0x5e933b){const _0x4e0ee4=_0x1a99ef;if(chebyshevDistance(_0x5a6bea['pos'],viewportpos)>_0x5a6bea['volume']+0x14)return[];class _0x597f0a{constructor(_0x23e739,_0x3535ad){const _0x547cf4=_0x4a83;this[_0x547cf4(0x295)]=_0x23e739,this[_0x547cf4(0x363)]=_0x3535ad;}}const [_0x5274be,_0x1b3075]=_0x5a6bea[_0x4e0ee4(0x295)];let _0x433838=[];const _0x2b548e=new _0x597f0a(_0x5a6bea[_0x4e0ee4(0x295)],_0x5a6bea[_0x4e0ee4(0x363)]);let _0x1205fe=new PriorityQueue((_0x105816,_0x2db66f)=>_0x2db66f['volume']-_0x105816[_0x4e0ee4(0x363)]);_0x1205fe[_0x4e0ee4(0x2aa)](_0x2b548e);let _0x20b467=new Set(),_0x3d9809=0x0,_0x536550=![];_0x5a6bea[_0x4e0ee4(0x3fd)]['pc']==!![]&&(_0x536550=!![]);let _0x4422f8=[];_0x2f1bc3=0x0;if(newgrid[_0x5274be][_0x1b3075][_0x4e0ee4(0x2de)]==!![])_0x536550=!![];while(!_0x1205fe[_0x4e0ee4(0x356)]()&&_0x3d9809<0x384){_0x3d9809++;const _0x503d8d=_0x1205fe[_0x4e0ee4(0x39d)](),[_0x302e50,_0x15543f]=_0x503d8d[_0x4e0ee4(0x295)],_0x3702ad=newgrid[_0x302e50][_0x15543f],_0x472289=_0x3702ad['character'],_0x5c6d21=_0x302e50+','+_0x15543f;if(_0x20b467[_0x4e0ee4(0x4c9)](_0x5c6d21))continue;_0x20b467[_0x4e0ee4(0x2ea)](_0x5c6d21);if(_0x503d8d[_0x4e0ee4(0x363)]>=0x1){_0x4422f8[_0x4e0ee4(0x23c)]([_0x302e50,_0x15543f,_0x503d8d[_0x4e0ee4(0x363)]]);if(_0x472289!==null){if(_0x472289['pc']==!![]){_0x536550=!![];if(_0x2f1bc3==0x0)_0x2f1bc3=(_0x5a6bea[_0x4e0ee4(0x363)]-_0x503d8d['volume'])*0x32;}_0x433838[_0x4e0ee4(0x23c)](_0x472289);if(_0x3eab97)_0x472289[_0x4e0ee4(0x2f2)](_0x5a6bea,_0x503d8d['volume']);}for(const _0x467a5e of directions){const [_0x3aa4ff,_0x445fc2]=[_0x503d8d['pos'][0x0]+_0x467a5e[0x0],_0x503d8d['pos'][0x1]+_0x467a5e[0x1]],_0x178870=_0x3aa4ff+','+_0x445fc2;if(!newgrid[_0x3aa4ff]||!newgrid[_0x3aa4ff][_0x445fc2])continue;if(!_0x20b467[_0x4e0ee4(0x4c9)](_0x178870)){let _0x4bf016=0x1;newgrid[_0x3aa4ff][_0x445fc2][_0x4e0ee4(0x3b2)]==![]&&newgrid[_0x3aa4ff][_0x445fc2][_0x4e0ee4(0x4cb)]()>=0x1&&!newgrid[_0x3aa4ff][_0x445fc2][_0x4e0ee4(0x4c5)]&&(_0x4bf016=0x5),Math[_0x4e0ee4(0x3cf)](_0x3aa4ff-_0x302e50)!==0x0&&Math[_0x4e0ee4(0x3cf)](_0x445fc2-_0x15543f)!==0x0&&(_0x4bf016*=1.4),_0x1205fe[_0x4e0ee4(0x2aa)](new _0x597f0a([_0x3aa4ff,_0x445fc2],_0x503d8d[_0x4e0ee4(0x363)]-_0x4bf016));}}}}if(newgrid[_0x5274be][_0x1b3075]['visible']==!![])_0x2f1bc3=0x0;if(_0x536550==!![]){if(_0x5a6bea['heard']!==!![]&&_0x3eab97){let _0x5715ea;for(let _0x4b47bf=0x0;_0x4b47bf<playercs[_0x4e0ee4(0x2e1)];_0x4b47bf++){if(playercs[_0x4b47bf][_0x4e0ee4(0x304)]==![]||gameover==!![]&&playercs[_0x4b47bf]==deathcharacter)!_0x5715ea&&(_0x5715ea=playercs[_0x4b47bf]);else _0x5715ea&&dist(_0x5715ea[_0x4e0ee4(0x295)],[_0x5274be,_0x1b3075])<dist(playercs[_0x4b47bf]['pos'],[_0x5274be,_0x1b3075])&&(_0x5715ea=playercs[_0x4b47bf]);_0x5715ea!=undefined&&_0x5715ea[_0x4e0ee4(0x2f2)](_0x5a6bea,0x1);}}for(let _0x11bb1c=0x0;_0x11bb1c<_0x4422f8['length'];_0x11bb1c++){const [_0x1b114e,_0x503170,_0x4441ab]=_0x4422f8[_0x11bb1c];if(newgrid[_0x1b114e][_0x503170][_0x4e0ee4(0x2de)]==!![]){let _0x5bdf32=[_0x4441ab/0x64,_0x4441ab/0x64,_0x4441ab/0x64];if(_0x5e933b)_0x5bdf32=[_0x5e933b[0x0]*_0x4441ab/0x64,_0x5e933b[0x1]*_0x4441ab/0x64,_0x5e933b[0x2]*_0x4441ab/0x64];adduilabel('$',[_0x1b114e,_0x503170],_0x5bdf32,0x0,!![],![],![],![],0.2,(_0x5a6bea['volume']-_0x4441ab)*0x32+_0x2f1bc3),updatedsomething=!![];}}}let _0x4e6d3b=performance[_0x4e0ee4(0x2c3)]();return _0x433838;}function evaluateposition(_0x2ef972){const _0x2beeca=_0x1a99ef;let [_0xc88c23,_0x416cd0]=[0x0,0x0];for(let _0x4a3acb=0x0;_0x4a3acb<_0x2ef972[_0x2beeca(0x2e1)];_0x4a3acb++){[_0xc88c23,_0x416cd0]=_0x2ef972[_0x4a3acb];}}function dist(_0x49c193,_0x589e85,_0x269ea0=![],_0x700998=![]){const _0x33903a=_0x1a99ef;let _0x4466ea=Math[_0x33903a(0x3cf)](_0x49c193[0x0]-_0x589e85[0x0]),_0x4d6453=Math['abs'](_0x49c193[0x1]-_0x589e85[0x1]),_0x26a697=0x0;if(newgrid[_0x589e85[0x0]]===undefined||newgrid[_0x589e85[0x0]][_0x589e85[0x1]]===undefined||newgrid[_0x49c193[0x0]]===undefined||newgrid[_0x49c193[0x0]][_0x49c193[0x1]]===undefined)console[_0x33903a(0x20d)]();if(!_0x269ea0)_0x26a697=newgrid[_0x589e85[0x0]][_0x589e85[0x1]]['elevation']-newgrid[_0x49c193[0x0]][_0x49c193[0x1]][_0x33903a(0x439)];_0x700998&&(_0x26a697=Math[_0x33903a(0x4bb)](_0x26a697,0x0));let _0x196b5a=Math[_0x33903a(0x1f6)](_0x4466ea**0x2+_0x4d6453**0x2+_0x26a697**0x2);return _0x196b5a;}function repeatchar(_0xc86f06,_0x5daa2d){let _0x5b28ab='';for(let _0x5eb115=0x0;_0x5eb115<_0x5daa2d;_0x5eb115++){_0x5b28ab+=_0xc86f06;}return _0x5b28ab;}function addLineBreaks(_0x675414,_0x2481dc){const _0xd5cc96=_0x1a99ef;let _0x49546d='';for(let _0x432eba=0x0;_0x432eba<_0x675414[_0xd5cc96(0x2e1)];_0x432eba++){_0x49546d+=_0x675414[_0x432eba],(_0x432eba+0x1)%_0x2481dc===0x0&&_0x432eba!==_0x675414[_0xd5cc96(0x2e1)]-0x1&&(_0x49546d+=_0xd5cc96(0x422));}return _0x49546d;}function roll(_0x4d20e6,_0x4dbda4){return randomNumber(_0x4d20e6,0x1)+_0x4dbda4;}function randomNumber(_0x44040c,_0x1be14d=0x0){const _0x1308ce=_0x1a99ef;return Math[_0x1308ce(0x1f4)](Math['random']()*(_0x44040c-_0x1be14d)+_0x1be14d);}function bresenhamLine([_0x394e56,_0x1d3a3d],[_0x466d88,_0x32c57f]){let _0xbc0271=[],_0x503867=Math['abs'](_0x466d88-_0x394e56),_0x3a1481=Math['abs'](_0x32c57f-_0x1d3a3d),_0x106310=_0x394e56<_0x466d88?0x1:-0x1,_0x478d43=_0x1d3a3d<_0x32c57f?0x1:-0x1,_0x4f19ad=_0x503867-_0x3a1481;while(!![]){_0xbc0271['push']([_0x394e56,_0x1d3a3d]);if(_0x394e56===_0x466d88&&_0x1d3a3d===_0x32c57f)break;let _0xd9454b=0x2*_0x4f19ad;_0xd9454b>-_0x3a1481&&(_0x4f19ad-=_0x3a1481,_0x394e56+=_0x106310),_0xd9454b<_0x503867&&(_0x4f19ad+=_0x503867,_0x1d3a3d+=_0x478d43);}return _0xbc0271;}function shuffle(_0x44df63){const _0x27bfd5=_0x1a99ef;let _0x54369a=_0x44df63[_0x27bfd5(0x2e1)],_0x15e481,_0x3360bf=_0x44df63['slice']();while(_0x54369a>0x0){_0x15e481=Math['floor'](Math[_0x27bfd5(0x282)]()*_0x54369a),_0x54369a--,[_0x3360bf[_0x54369a],_0x3360bf[_0x15e481]]=[_0x3360bf[_0x15e481],_0x3360bf[_0x54369a]];}return _0x3360bf;}function deepCopy3D(_0x234b7a){const _0x1c2ef9=_0x1a99ef;return _0x234b7a[_0x1c2ef9(0x4a9)](_0x15b7c2=>_0x15b7c2[_0x1c2ef9(0x4a9)](_0x118664=>_0x118664[_0x1c2ef9(0x4a9)](_0x48fe0c=>_0x48fe0c)));}function deepCopySubArray3D(_0x509c2d,_0x25acdc,_0x58b70b,_0x253942,_0x55c4db){const _0x55b9b7=_0x1a99ef;let _0x3dc4d2=[];for(let _0x1ea9a1=_0x58b70b;_0x1ea9a1<=_0x55c4db;_0x1ea9a1++){_0x3dc4d2[_0x1ea9a1-_0x58b70b]=[];for(let _0x32c7fc=_0x25acdc;_0x32c7fc<=_0x253942;_0x32c7fc++){_0x3dc4d2[_0x1ea9a1-_0x58b70b][_0x32c7fc-_0x25acdc]=[];for(let _0x2de226=0x0;_0x2de226<_0x509c2d[0x0][0x0][_0x55b9b7(0x2e1)];_0x2de226++){_0x3dc4d2[_0x1ea9a1-_0x58b70b][_0x32c7fc-_0x25acdc][_0x2de226]=_0x509c2d[_0x1ea9a1][_0x32c7fc][_0x2de226];}}}return _0x3dc4d2;}function deepCopySubArray2D(_0x5cd077,_0x3cb46d,_0x2a49ac,_0x15ed4e,_0x548a80){let _0x4cceaa=[];for(let _0x56901c=_0x2a49ac;_0x56901c<=_0x548a80;_0x56901c++){_0x4cceaa[_0x56901c-_0x2a49ac]=[];for(let _0x159436=_0x3cb46d;_0x159436<=_0x15ed4e;_0x159436++){_0x4cceaa[_0x56901c-_0x2a49ac][_0x159436-_0x3cb46d]=_0x5cd077[_0x56901c][_0x159436];}}}function deepCopy2D(_0x26a144){const _0x5530ac=_0x1a99ef;let _0x50604d=[];for(let _0x56576a=0x0;_0x56576a<_0x26a144[_0x5530ac(0x2e1)];_0x56576a++){_0x50604d[_0x56576a]=[];for(let _0xb98d69=0x0;_0xb98d69<_0x26a144[0x0][_0x5530ac(0x2e1)];_0xb98d69++){_0x50604d[_0x56576a][_0xb98d69]=_0x26a144[_0x56576a][_0xb98d69];}}return _0x50604d;}function partialFill(_0x23bc26,_0x315689,_0x21ac9b,_0x1820eb,_0x381f79,_0x2b396b){for(let _0x209071=_0x21ac9b;_0x209071<_0x381f79;_0x209071++){for(let _0x473ba6=_0x1820eb;_0x473ba6<_0x2b396b;_0x473ba6++){_0x23bc26[_0x473ba6][_0x209071]=_0x315689;}}}function shadowslope([_0x471ac8,_0x118abe],[_0xf757ce,_0x544c80]){const _0x2b2507=_0x1a99ef,_0x55900a=Math['abs'](_0x544c80-_0x118abe),_0x49fe06=Math[_0x2b2507(0x3cf)](_0xf757ce-_0x471ac8),_0x4d53ce=_0x49fe06/_0x55900a,_0x10834e=-_0x55900a/_0x49fe06,_0x1b40a0=chebyshevDistance([_0x471ac8,_0x118abe],[_0xf757ce,_0x544c80]);let _0x54a339=[_0xf757ce+_0x10834e/Math['sqrt'](0x1+_0x10834e**0x2),_0x544c80+0x1/Math[_0x2b2507(0x1f6)](0x1+_0x10834e**0x2)];const _0x4bf2e3=Math[_0x2b2507(0x3cf)](_0x54a339[0x1]-_0x118abe),_0xc41781=Math[_0x2b2507(0x3cf)](_0x54a339[0x0]-_0x471ac8);let _0x3df8dc=_0xc41781/_0x4bf2e3,_0x4294d3=_0x3df8dc/0x2,_0x5ac961=Math[_0x2b2507(0x3cf)](_0x4d53ce-_0x4294d3);return;}function randomSymbol(_0x16f1c6){const _0x2a3559=_0x16f1c6['length'],_0x4b3eba=randomNumber(_0x2a3559+0x1,0x1)-0x1;return _0x16f1c6[_0x4b3eba];}function takeav(_0xad02a4){const _0x575260=_0x1a99ef;return _0xad02a4[_0x575260(0x418)]((_0x3f3462,_0x42e98e)=>_0x3f3462+_0x42e98e)/_0xad02a4['length'];}function manhattanDistance(_0x250c3c,_0xb4366e){const _0x5dea3f=_0x1a99ef;return Math[_0x5dea3f(0x3cf)](_0x250c3c[0x0]-_0xb4366e[0x0])+Math[_0x5dea3f(0x3cf)](_0x250c3c[0x1]-_0xb4366e[0x1]);}function convertColortoAbs(_0x30db90){const _0x463672=_0x1a99ef,_0x3065ef=_0x30db90[_0x463672(0x4a9)](_0xfcc90e=>_0xfcc90e/0x100);return _0x3065ef;}function convertAbstoColor(_0x1d27c8){const _0x4ec6ec=_0x1a99ef,_0x4e6534=_0x1d27c8[_0x4ec6ec(0x4a9)](_0x483033=>_0x483033*0x100);return _0x4e6534;}function randomint(_0x590bca,_0x55d6a1){const _0x3a8f1d=_0x1a99ef;return _0x590bca>_0x55d6a1&&([_0x590bca,_0x55d6a1]=[_0x55d6a1,_0x590bca]),Math[_0x3a8f1d(0x1f4)](Math[_0x3a8f1d(0x282)]()*(_0x55d6a1-_0x590bca+0x1))+_0x590bca;}function chebyshevDistance(_0x1ee6e4,_0xca7a06){const _0x4c2219=_0x1a99ef,[_0x5ed5eb,_0x3e19cd]=_0x1ee6e4,[_0x44befd,_0x3f99e7]=_0xca7a06;return Math['max'](Math[_0x4c2219(0x3cf)](_0x44befd-_0x5ed5eb),Math['abs'](_0x3f99e7-_0x3e19cd));}function combineFunctions(_0x328469,_0x3c35e9){const _0x398370=_0x1a99ef,_0x3c8d3d=_0x328469[_0x398370(0x455)](this),_0x37734f=_0x3c35e9[_0x398370(0x455)](this);return()=>{_0x3c8d3d(),_0x37734f();};}const conditions={'Stunned':new condition(_0x1a99ef(0x488),skipturn,skipturn,0x1,!![]),'Stunnedlite':new condition(_0x1a99ef(0x488),skipturn,skipturn,0x1,![]),'Surprised':new condition(_0x1a99ef(0x489),skipturnandyelp,skipturn,0x1,!![]),'Prone':new condition(_0x1a99ef(0x469),losemove,losemove,0x1,![]),'Poisoned':new condition(_0x1a99ef(0x24c),()=>{},takedamage(0x1),0x2,![]),'Bleeding':new condition(_0x1a99ef(0x2af),()=>{},takedamage(0x1),0x3,![]),'Unconscious':new condition(_0x1a99ef(0x2f1),skipturn,0x1,![]),'Confident':new condition(_0x1a99ef(0x2c6),damagebonus(0x2),null,0x2,![],damagebonus(-0x2)),'Blind':new condition('Blinded',null,null,0x1,![],null,null),'Burning':new condition(_0x1a99ef(0x2d7),burn,null,0x0,![],null),'OnFire':new condition('On\x20Fire',burn,burn,0x3,![],null),'Overwatch':new condition('Overwatch',null,null,0x0,![],null),'Resting':new condition(_0x1a99ef(0x3a6),()=>{},()=>{},0x0,![],()=>{}),'Restrained':new condition('Restrained',skipturn,skipturn,0x1,![]),'Asleep':new condition('Asleep',skipturn,skipturn,0x1,![])},keybindings={'Aim':_0x1a99ef(0x378),'Dash':_0x1a99ef(0x410),'Standground':'s\x20-\x20stand\x20ground','Overwatch':'o\x20-\x20overwatch','SwitchHands':_0x1a99ef(0x220),'SwitchWeapons':_0x1a99ef(0x237),'GetItem':_0x1a99ef(0x3f2),'LeaveItem':_0x1a99ef(0x2c8),'LeaveItemOffhand':_0x1a99ef(0x49e),'Numbers':_0x1a99ef(0x45a),'Space':'Space\x20-\x20advance\x20turn'};let procgendebug=![],characterindex=0x0,cornershadows=![],partiallos=![],memorytilebrightness=0x6;const dontcaredistance=0x32,enemysightrange=0x1e,playersightrange=0x1e,mapsizex=0x64*0x4,mapsizey=0x34*0x4;let shrink=0x1,mult=0x1,viewportsizex=0x30*mult,viewportsizey=0x18*mult,fontsize=0x1a/mult;const enemypool=[Goblin,Goblin_Dagger,Goblin_Swordsman,Goblin_Spearman,Hobgoblin,Ogre,Skulker,Giant],clickfuncs={'Raise':function([_0x1d1be9,_0x48591f]){const _0x556b4f=_0x1a99ef,_0x40e705=newgrid[_0x1d1be9][_0x48591f][_0x556b4f(0x439)];newgrid[_0x1d1be9][_0x48591f]=new Tile(...tiletypes[_0x556b4f(0x20a)],[_0x1d1be9,_0x48591f]),newgrid[_0x1d1be9][_0x48591f][_0x556b4f(0x439)]=_0x40e705+0x1;},'Lower':function([_0x397703,_0x2f0078]){const _0x461623=_0x1a99ef,_0x4ffdbb=newgrid[_0x397703][_0x2f0078][_0x461623(0x439)];newgrid[_0x397703][_0x2f0078]=new Tile(...tiletypes['RoughStoneFloor'],[_0x397703,_0x2f0078]),newgrid[_0x397703][_0x2f0078][_0x461623(0x439)]=_0x4ffdbb-0x1;},'Clear':([_0x58fc32,_0x369c5d])=>newgrid[_0x58fc32][_0x369c5d]=new Tile(...tiletypes[_0x1a99ef(0x1ee)],[_0x58fc32,_0x369c5d]),'Wall':([_0x58af9f,_0x5eb6b3])=>newgrid[_0x58af9f][_0x5eb6b3]=new Tile(...tiletypes['CavernWall'],[_0x58af9f,_0x5eb6b3])};let clickfunc=clickfuncs['Lower'];const directionsincl=[[0x0,0x0],[-0x1,0x0],[0x1,0x0],[0x0,-0x1],[0x0,0x1],[-0x1,-0x1],[0x1,-0x1],[0x1,0x1],[-0x1,0x1]],directions=[[-0x1,0x0],[0x1,0x0],[0x0,-0x1],[0x0,0x1],[-0x1,-0x1],[0x1,-0x1],[0x1,0x1],[-0x1,0x1]],cardinaldirections=[[-0x1,0x0],[0x1,0x0],[0x0,-0x1],[0x0,0x1]],directionsextra=[[-0x1,0x0],[0x1,0x0],[0x0,-0x1],[0x0,0x1],[-0x1,-0x1],[0x1,-0x1],[0x1,0x1],[-0x1,0x1],[0x2,0x0],[0x2,0x1],[0x2,-0x1],[-0x2,0x0],[-0x2,0x1],[-0x2,-0x1],[0x0,0x2],[0x1,0x2],[-0x1,0x2],[0x0,-0x2],[0x1,-0x2],[-0x1,-0x2]],directionsextraincl=[[0x0,0x0],[-0x1,0x0],[0x1,0x0],[0x0,-0x1],[0x0,0x1],[-0x1,-0x1],[0x1,-0x1],[0x1,0x1],[-0x1,0x1],[0x2,0x0],[0x2,0x1],[0x2,-0x1],[-0x2,0x0],[-0x2,0x1],[-0x2,-0x1],[0x0,0x2],[0x1,0x2],[-0x1,0x2],[0x0,-0x2],[-0x1,-0x2],[-0x1,-0x2]],materials={'metal':[0.5,0.5,0.5],'water':[0.1,0.25,0.35],'stone':[0.6,0.6,0.6],'dirt':[0.7,0.5,0.4],'mud':[0.3,0.2,0.2],'abyss':[0x0,0x0,0x0],'crystal':[0x3,0x3,0x3],'brick':[0x1,0x1,0x1],'moss':[0.3,0.6,0.2],'wood':[0.5,0.25,0.2],'fire':[0x1,0.25,0.1],'marble':[0x1,0x1,0x1],'bone':[0x1,0x1,0x1],'blood':[0x1,0x0,0x0]},tiletypes={'Water':[_0x1a99ef(0x1ea),materials[_0x1a99ef(0x23d)],'~',!![],0x2,0x1],'DirtFloor':[_0x1a99ef(0x2e8),materials['dirt'],'B7',!![],0x1,0x1],'StoneFloor':[_0x1a99ef(0x371),materials[_0x1a99ef(0x334)],'B7',!![],0x1,0x1],'CavernWall':[_0x1a99ef(0x39b),materials[_0x1a99ef(0x334)],'#',![],null,0x0],'MossFloor':[_0x1a99ef(0x386),materials[_0x1a99ef(0x2f5)],'201D',!![],0x1,0x1],'RoughStoneFloor':['Rough\x20Stone\x20Floor',materials[_0x1a99ef(0x334)],'B7',!![],0x1,0x1],'RoughStoneWall':[_0x1a99ef(0x31c),materials[_0x1a99ef(0x334)],'=',![],null,0x0],'SmoothstoneFloor':[_0x1a99ef(0x392),materials[_0x1a99ef(0x334)],_0x1a99ef(0x3f6),!![],0x1,0x1],'MossyWall':[_0x1a99ef(0x229),materials[_0x1a99ef(0x2f5)],'#',![],null,0x0],'WoodFloor':[_0x1a99ef(0x3c9),materials[_0x1a99ef(0x2b3)],'B7',!![],0x1,0x1],'WoodWall':[_0x1a99ef(0x4a2),materials[_0x1a99ef(0x2b3)],'#',![],null,0x0],'MudFloor':['Mud\x20Floor',materials[_0x1a99ef(0x27a)],'B7',!![],0x1,0x1],'MudWall':['Mud\x20Wall',materials[_0x1a99ef(0x27a)],'#',![],null,0x0]},tiletypesarr=[tiletypes[_0x1a99ef(0x1ea)],tiletypes[_0x1a99ef(0x1ee)],tiletypes[_0x1a99ef(0x415)],tiletypes['CavernWall'],tiletypes[_0x1a99ef(0x366)],tiletypes[_0x1a99ef(0x20a)],tiletypes[_0x1a99ef(0x33f)]],actions={'SwitchWeapon':[_0x1a99ef(0x42b),switchweapon,[0x0,0x0,0x0]],'HalfAttack':[_0x1a99ef(0x493),attackfunc,[0x0,0.5,0x0]],'Attack':['Attack',attackfunc,[0x0,0x1,0x0]],'Open':[_0x1a99ef(0x36f),open,[0x0,0x0,0x0],1.9],'Dash':[_0x1a99ef(0x3ea),dashfunc,[0x0,0x1,0x0]],'Interact':['Interact',interact,[0x0,0x0,0x0],1.9]},statblocks={'Deserter':[0x3,0x0,0x2],'Exile':[0x1,0x2,0x0],'Wanderer':[0x1,0x2,0x0],'Berserker':[0x3,0x0,0x2],'Goblin':[0x0,0x0,0x0]};let tempwallsymbol='#',baselightrange=0x6,invlightrange=0x1/baselightrange,brightnessadjust=0x2,viewportoffsety=0x0,viewportoffsetx=0x0,throttleRate=0xa,lastCall=0x0,enemyturnstart=0x0,soundoffset=2.5,now=0x0,lastframe=0x0,frameticker=0x14,timeticker=0x0,checkedframe=![],blankpixelcount=0x0,noiseupdateticker=0x0;const noiseupdaterate=0x64,noisethreshold=0.5,waterthreshhold=0.6,noiseamount=0.1,lightflickerthreshhold=0.8,tileabsorbs=[materials['water'],materials['dirt'],materials[_0x1a99ef(0x334)],materials[_0x1a99ef(0x334)],materials[_0x1a99ef(0x2f5)],materials[_0x1a99ef(0x334)],materials['stone'],materials[_0x1a99ef(0x35c)],materials[_0x1a99ef(0x36a)]];let diffgens=0x2;const cdiff=0x1/0x14;let gamma=1.4,ticktimer=0x64,renderedlastframe=!![],updatedlighting=!![],updatedsomething=!![],renderqueue=[];function updatelightmap(){let [_0x231f5c,_0x1e6f8d,_0x5ad200,_0x100d91]=getlightingsize();updatelos(_0x231f5c,_0x1e6f8d,_0x5ad200,_0x100d91),updatelighting(_0x231f5c,_0x1e6f8d,_0x5ad200,_0x100d91),updatediffusion(_0x231f5c,_0x1e6f8d,_0x5ad200,_0x100d91);}function getlightingsize(){let _0x3395ce=0x4,_0x5563ca=viewportpos[0x1]-viewportsizex/0x2-_0x3395ce,_0x2d3b92=viewportpos[0x0]-viewportsizey/0x2-_0x3395ce,_0x380a38=viewportpos[0x1]+viewportsizex/0x2+_0x3395ce,_0x462bcb=viewportpos[0x0]+viewportsizey/0x2+_0x3395ce;return _0x2d3b92<0x0&&(_0x2d3b92=0x0,_0x462bcb=viewportsizey+_0x3395ce),_0x462bcb>mapsizey&&(_0x462bcb=mapsizey,_0x2d3b92=mapsizey-(viewportsizey+_0x3395ce)),_0x5563ca<0x0&&(_0x5563ca=0x0,_0x380a38=viewportsizex+_0x3395ce),_0x380a38>mapsizex&&(_0x380a38=mapsizex,_0x5563ca=mapsizex-(viewportsizex+_0x3395ce)),[_0x5563ca,_0x2d3b92,_0x380a38,_0x462bcb];}function updatelos(_0x59b226,_0x168172,_0x3c70be,_0x97a8d2){const _0x29e181=_0x1a99ef;for(let _0x3d69df=_0x168172;_0x3d69df<_0x97a8d2;_0x3d69df++){for(let _0x4a0e3e=_0x59b226;_0x4a0e3e<_0x3c70be;_0x4a0e3e++){newgrid[_0x3d69df][_0x4a0e3e][_0x29e181(0x2de)]=![];}}for(let _0x21c4c7=_0x168172;_0x21c4c7<_0x97a8d2;_0x21c4c7++){for(let _0x4e2a88=_0x59b226;_0x4e2a88<_0x3c70be;_0x4e2a88++){if(newgrid[_0x21c4c7][_0x4e2a88][_0x29e181(0x4cb)]()>=0x1){newgrid[_0x21c4c7][_0x4e2a88][_0x29e181(0x2de)]=!![];continue;}newgrid[_0x21c4c7][_0x4e2a88][_0x29e181(0x40f)]=![];for(let _0x519264=0x0;_0x519264<playercs['length'];_0x519264++){if(playercs[_0x519264]['dead']==!![]&&gameover==![])continue;else{if(gameover==!![]&&!playercs[_0x519264]==deathcharacter)continue;}const _0x54f86=drawLine3D([...playercs[_0x519264][_0x29e181(0x295)],newgrid[playercs[_0x519264][_0x29e181(0x295)][0x0]][playercs[_0x519264][_0x29e181(0x295)][0x1]][_0x29e181(0x439)]+0x1],[_0x21c4c7,_0x4e2a88,newgrid[_0x21c4c7][_0x4e2a88]['elevation']]);if(_0x54f86<0x1){newgrid[_0x21c4c7][_0x4e2a88][_0x29e181(0x2de)]=!![];for(let _0x1a97e7=_0x21c4c7-0x1;_0x1a97e7<=_0x21c4c7+0x1;_0x1a97e7++){if(_0x1a97e7>0x0&&_0x1a97e7<mapsizey)for(let _0x46b88b=_0x4e2a88-0x1;_0x46b88b<=_0x4e2a88+0x1;_0x46b88b++){_0x46b88b>0x0&&_0x46b88b<mapsizex&&Math[_0x29e181(0x3cf)](newgrid[_0x21c4c7][_0x4e2a88][_0x29e181(0x439)]-newgrid[_0x1a97e7][_0x46b88b][_0x29e181(0x439)])<0x2&&(newgrid[_0x1a97e7][_0x46b88b][_0x29e181(0x2de)]=!![]);}}}_0x54f86&&(newgrid[_0x21c4c7][_0x4e2a88]['los']=!![]);}}}}function updatelighting(_0xa9fded,_0x52af09,_0x454da6,_0x221bf7,_0x507ea4=![]){const _0x2508a8=_0x1a99ef;let _0x476850=[],_0x1caf3f=[];for(let _0x3f7310=_0x52af09;_0x3f7310<_0x221bf7;_0x3f7310++){for(let _0x207f97=_0xa9fded;_0x207f97<_0x454da6;_0x207f97++){let _0x78e63f=[];_0x78e63f=newgrid[_0x3f7310][_0x207f97][_0x2508a8(0x2c7)]();for(let _0x15f7b7=0x0;_0x15f7b7<_0x78e63f[_0x2508a8(0x2e1)];_0x15f7b7++){let _0x3740d5=_0x78e63f[_0x15f7b7];_0x3740d5[_0x2508a8(0x295)]=[_0x3f7310,_0x207f97][_0x2508a8(0x428)](),_0x476850[_0x2508a8(0x23c)](_0x3740d5);}}}let _0x52ee9f;for(let _0x1f28ec=_0x52af09;_0x1f28ec<_0x221bf7;_0x1f28ec++){for(let _0x4933fa=_0xa9fded;_0x4933fa<_0x454da6;_0x4933fa++){_0x52ee9f=newgrid[_0x1f28ec][_0x4933fa];if(_0x507ea4==![])_0x52ee9f['light']=null;_0x52ee9f[_0x2508a8(0x30d)]=0x0;if(_0x52ee9f[_0x2508a8(0x2de)]!==![]){for(let _0x1da684=0x0;_0x1da684<_0x476850[_0x2508a8(0x2e1)];_0x1da684++){let _0x51b74d=_0x476850[_0x1da684],[_0x586075,_0x469953]=_0x51b74d[_0x2508a8(0x295)];if(Math[_0x2508a8(0x3cf)](_0x586075-_0x1f28ec)>_0x51b74d[_0x2508a8(0x3cb)]*baselightrange+0x2||Math[_0x2508a8(0x3cf)](_0x469953-_0x4933fa)>_0x51b74d[_0x2508a8(0x3cb)]*baselightrange+0x2)continue;let [_0x366d9b,_0x15127f]=getlighting(_0x1f28ec,_0x4933fa,_0x476850[_0x1da684]);_0x15127f=Math[_0x2508a8(0x4bb)](_0x15127f,newgrid[_0x1f28ec][_0x4933fa][_0x2508a8(0x30d)]),_0x52ee9f[_0x2508a8(0x30d)]=_0x15127f;if(_0x507ea4)continue;if(_0x52ee9f[_0x2508a8(0x2ba)]===null){_0x52ee9f[_0x2508a8(0x2ba)]=_0x366d9b;continue;}_0x52ee9f[_0x2508a8(0x2ba)][0x0]+=_0x366d9b[0x0],_0x52ee9f[_0x2508a8(0x2ba)][0x1]+=_0x366d9b[0x1],_0x52ee9f[_0x2508a8(0x2ba)][0x2]+=_0x366d9b[0x2];}_0x52ee9f[_0x2508a8(0x30d)]==0x0&&_0x1caf3f[_0x2508a8(0x23c)](_0x52ee9f);}_0x52ee9f['light']===null&&(_0x52ee9f[_0x2508a8(0x2ba)]=[0x0,0x0,0x0]);}}if(_0x507ea4)return;let _0x2f8012=[];for(let _0x1a954a=0x0;_0x1a954a<_0x1caf3f[_0x2508a8(0x2e1)];_0x1a954a++){_0x52ee9f=_0x1caf3f[_0x1a954a],_0x52ee9f[_0x2508a8(0x30d)]<0x1&&(_0x52ee9f[_0x2508a8(0x2de)]=![],_0x2f8012[_0x2508a8(0x23c)](_0x52ee9f));}let [_0x21e801,_0x530b5f]=[0x0,0x0],[_0x566e36,_0x23c84a]=[0x0,0x0],_0x507a85=[];for(let _0x15a8a3=0x0;_0x15a8a3<_0x2f8012[_0x2508a8(0x2e1)];_0x15a8a3++){_0x52ee9f=_0x2f8012[_0x15a8a3];let [_0x9ffd04,_0x3edce3]=_0x52ee9f[_0x2508a8(0x295)];for(let _0x59e9ab=0x0;_0x59e9ab<0x14;_0x59e9ab++){[_0x21e801,_0x530b5f]=directionsextra[_0x59e9ab],[_0x566e36,_0x23c84a]=[_0x9ffd04+_0x21e801,_0x3edce3+_0x530b5f];if(_0x566e36<0x0||_0x566e36>=mapsizey||_0x23c84a<0x0||_0x23c84a>=mapsizex)continue;let _0x3a64c5=0x0;_0x59e9ab>0x7&&(_0x3a64c5=drawline([_0x9ffd04,_0x3edce3],[_0x566e36,_0x23c84a]));if(_0x3a64c5>=0x1)continue;newgrid[_0x566e36][_0x23c84a][_0x2508a8(0x2de)]==!![]&&newgrid[_0x566e36][_0x23c84a][_0x2508a8(0x4cb)]()<0x1&&_0x507a85[_0x2508a8(0x23c)](_0x52ee9f);}}for(let _0x18156a=0x0;_0x18156a<_0x507a85[_0x2508a8(0x2e1)];_0x18156a++){_0x52ee9f=_0x507a85[_0x18156a],_0x52ee9f[_0x2508a8(0x2de)]=!![];}for(let _0x2b8482=0x0;_0x2b8482<playercs[_0x2508a8(0x2e1)];_0x2b8482++){let _0x3878f=playercs[_0x2b8482];if(_0x3878f[_0x2508a8(0x304)])continue;let [_0x506016,_0x83bd93]=_0x3878f[_0x2508a8(0x295)];for(let _0xa41b8c=0x0;_0xa41b8c<0x14;_0xa41b8c++){let [_0x1ad8fb,_0x1defb9]=directionsextraincl[_0xa41b8c],[_0x3f76ad,_0x417ae2]=[_0x506016+_0x1ad8fb,_0x83bd93+_0x1defb9],_0x424562;if(_0x3f76ad>_0x221bf7||_0x3f76ad<_0x52af09||_0x417ae2>_0x454da6||_0x417ae2<_0xa9fded)continue;if(newgrid[_0x3f76ad][_0x417ae2][_0x2508a8(0x30d)]>=0x1)continue;let _0x12eaa4=dist([_0x3f76ad,_0x417ae2],_0x3878f[_0x2508a8(0x295)]),_0xa0ecca=Math[_0x2508a8(0x4bb)](0x1,Math[_0x2508a8(0x37a)](_0x12eaa4)),_0x58fdf2=0x0;if(_0xa41b8c>0x8)_0x58fdf2=drawline(_0x3878f[_0x2508a8(0x295)],[_0x3f76ad,_0x417ae2],![],!![]);_0x58fdf2<0x1&&(newgrid[_0x3f76ad][_0x417ae2][_0x2508a8(0x2de)]=!![],newgrid[_0x3f76ad][_0x417ae2]['light'][0x0]+=0x10/_0xa0ecca,newgrid[_0x3f76ad][_0x417ae2][_0x2508a8(0x2ba)][0x1]+=0x10/_0xa0ecca,newgrid[_0x3f76ad][_0x417ae2]['light'][0x2]+=0x10/_0xa0ecca);}}}function prunesightmap(_0x111b07,_0x3c2ac9,_0x514bf6,_0x3b43d5){const _0x298c68=_0x1a99ef;for(let _0x25a6bc=_0x3c2ac9;_0x25a6bc<_0x3b43d5;_0x25a6bc++){for(let _0x1ca39b=_0x111b07;_0x1ca39b<_0x514bf6;_0x1ca39b++){if(newgrid[_0x25a6bc][_0x1ca39b][_0x298c68(0x30d)]<0x1&&newgrid[_0x25a6bc][_0x1ca39b]['visible']!==![]){!procgendebug&&(newgrid[_0x25a6bc][_0x1ca39b][_0x298c68(0x2de)]=![]);for(let _0x57c996=_0x25a6bc-0x2;_0x57c996<=_0x25a6bc+0x2;_0x57c996++){if(_0x57c996>0x0&&_0x57c996<mapsizey)for(let _0x5783aa=_0x1ca39b-0x2;_0x5783aa<=_0x1ca39b+0x2;_0x5783aa++){if(!newgrid[_0x57c996]||!newgrid[_0x57c996][_0x5783aa])continue;if(newgrid[_0x57c996][_0x5783aa][_0x298c68(0x30d)]<0x1)continue;if(_0x5783aa>0x0&&_0x5783aa<mapsizex){const _0x315254=drawline([_0x25a6bc,_0x1ca39b],[_0x57c996,_0x5783aa]);if(newgrid[_0x57c996][_0x5783aa][_0x298c68(0x4cb)]()<0x1&&_0x315254<0x1){newgrid[_0x25a6bc][_0x1ca39b][_0x298c68(0x2de)]=!![];break;}}}}}if(newgrid[_0x25a6bc][_0x1ca39b]['lightlevel']<0x1||newgrid[_0x25a6bc][_0x1ca39b][_0x298c68(0x2de)]==![])for(let _0x11dd8f=0x0;_0x11dd8f<playercs[_0x298c68(0x2e1)];_0x11dd8f++){let _0x442291=playercs[_0x11dd8f];if(_0x442291['dead'])continue;let _0xeeac=dist([_0x25a6bc,_0x1ca39b],_0x442291[_0x298c68(0x295)]);if(_0xeeac>=3.5)continue;let _0x2b47b1=Math[_0x298c68(0x4bb)](0x1,Math[_0x298c68(0x37a)](_0xeeac)),_0x50194f=drawline(_0x442291[_0x298c68(0x295)],[_0x25a6bc,_0x1ca39b],![],!![]);_0x50194f<0x1&&(newgrid[_0x25a6bc][_0x1ca39b][_0x298c68(0x2de)]=!![],newgrid[_0x25a6bc][_0x1ca39b][_0x298c68(0x2ba)][0x0]+=0x10/_0x2b47b1,newgrid[_0x25a6bc][_0x1ca39b][_0x298c68(0x2ba)][0x1]+=0x10/_0x2b47b1,newgrid[_0x25a6bc][_0x1ca39b][_0x298c68(0x2ba)][0x2]+=0x10/_0x2b47b1);}}}}function updatediffusion(_0x5bbe78,_0x21344a,_0x5efbdc,_0x1e2af6){const _0x113041=_0x1a99ef,_0x4db070=directions['length'],_0x1f688e=[0x0,0x0,0x0],_0x1e82d5=[0x0,0x0,0x0];let _0x354b3d=0x0,_0x20dae9=[];for(let _0x501a8a=0x0;_0x501a8a<diffgens;_0x501a8a++){_0x20dae9=[];for(let _0x22816c=_0x21344a;_0x22816c<_0x1e2af6;_0x22816c++){for(let _0x346246=_0x5bbe78;_0x346246<_0x5efbdc;_0x346246++){const _0x48252e=newgrid[_0x22816c][_0x346246]['light'],_0x3fe9f4=newgrid[_0x22816c][_0x346246][_0x113041(0x481)],_0x1a8d4f=newgrid[_0x22816c][_0x346246][_0x113041(0x439)];let _0x345e74=[0x0,0x0,0x0];if(newgrid[_0x22816c][_0x346246][_0x113041(0x4cb)]()>=0x1)continue;for(let _0x5c91d9=0x0;_0x5c91d9<_0x4db070;_0x5c91d9++){const _0x210970=directions[_0x5c91d9],[_0x47cacc,_0x4e50e9]=[_0x210970[0x0]+_0x22816c,_0x210970[0x1]+_0x346246];if(newgrid[_0x47cacc]&&newgrid[_0x47cacc][_0x4e50e9]){if(newgrid[_0x47cacc][_0x4e50e9][_0x113041(0x2de)]==![])continue;if(newgrid[_0x47cacc][_0x4e50e9][_0x113041(0x4cb)]()>=0x1)continue;const _0x1ddcdd=newgrid[_0x47cacc][_0x4e50e9][_0x113041(0x2ba)],_0x38cfdf=newgrid[_0x47cacc][_0x4e50e9][_0x113041(0x481)];for(let _0xcbedec=0x0;_0xcbedec<0x3;_0xcbedec++){_0x1f688e[_0xcbedec]=cdiff*_0x1ddcdd[_0xcbedec]*_0x38cfdf[_0xcbedec],_0x1e82d5[_0xcbedec]=cdiff*_0x48252e[_0xcbedec]*_0x3fe9f4[_0xcbedec];}_0x354b3d=(_0x1e82d5[0x0]+_0x1e82d5[0x1]+_0x1e82d5[0x2])/0x3;if(_0x1a8d4f<=newgrid[_0x47cacc][_0x4e50e9][_0x113041(0x439)])for(let _0x525787=0x0;_0x525787<0x3;_0x525787++){_0x345e74[_0x525787]+=_0x1f688e[_0x525787];}}}_0x20dae9[_0x113041(0x23c)](newgrid[_0x22816c][_0x346246]),_0x20dae9[_0x113041(0x23c)](_0x345e74);}}for(let _0x1fecaf=0x0;_0x1fecaf<_0x20dae9[_0x113041(0x2e1)];_0x1fecaf+=0x2){let _0x52f552=_0x20dae9[_0x1fecaf],_0x1a7a05=_0x20dae9[_0x1fecaf+0x1];_0x52f552[_0x113041(0x2ba)][0x0]+=_0x1a7a05[0x0],_0x52f552[_0x113041(0x2ba)][0x1]+=_0x1a7a05[0x1],_0x52f552['light'][0x2]+=_0x1a7a05[0x2];}}}function getlighting(_0x3302eb,_0x3f2e0a,_0x2d3595){const _0x29851f=_0x1a99ef;let _0x483e80=[_0x2d3595[_0x29851f(0x40e)][0x0],_0x2d3595[_0x29851f(0x40e)][0x1],_0x2d3595['color'][0x2]];const [_0x559042,_0x17780a]=_0x2d3595[_0x29851f(0x295)];let _0x287bdb=_0x2d3595[_0x29851f(0x3d3)],_0x22e239=_0x2d3595[_0x29851f(0x295)];const _0x5ba841=newgrid[_0x2d3595[_0x29851f(0x295)][0x0]][_0x2d3595[_0x29851f(0x295)][0x1]];let _0x29ade7=_0x5ba841[_0x29851f(0x439)]+0x1,_0x3d3a65=dist([_0x3302eb,_0x3f2e0a],[_0x559042,_0x17780a]);const _0x3d416f=newgrid[_0x3302eb][_0x3f2e0a][_0x29851f(0x439)];if(_0x29ade7!==newgrid[_0x3302eb][_0x3f2e0a][_0x29851f(0x439)])_0x3d3a65=Math[_0x29851f(0x1f6)](_0x3d3a65**0x2+Math[_0x29851f(0x3cf)](_0x29ade7-_0x3d416f)**0x2);let _0x12e75f=Math[_0x29851f(0x373)](Math[_0x29851f(0x37a)](_0x2d3595['radiance']-(_0x3d3a65-0x1)/baselightrange),_0x2d3595[_0x29851f(0x3cb)]);if(_0x12e75f<=0x0)return[[0x0,0x0,0x0],0x0];const _0x29cd33=drawLine3D([..._0x22e239,_0x29ade7],[_0x3302eb,_0x3f2e0a,_0x3d416f]);if(_0x29cd33>=0x1)return[[0x0,0x0,0x0],0x0];_0x12e75f=Math['round'](_0x2d3595[_0x29851f(0x3cb)]-(_0x3d3a65-0x1)*(0x1+_0x29cd33)/baselightrange);for(let _0x2fd14b=0x0;_0x2fd14b<0x3;_0x2fd14b++){_0x483e80[_0x2fd14b]=Math[_0x29851f(0x37a)](_0x483e80[_0x2fd14b]*noisemap[_0x559042][_0x17780a]*(0x1/((_0x3d3a65/_0x287bdb[_0x2fd14b])**0x2+0.5))*(0x1-_0x29cd33));}return[_0x483e80,_0x12e75f];}function generate(){const _0x46aa5f=_0x1a99ef;if(tutorial){tutorialgen();return;}playercs=[],nonpcs=[];let [_0x19a95d,_0x57501]=region2gen(mapsizey,mapsizex,0x1e,0xa0),_0x1702a=perlinNoise(mapsizex,mapsizey,0x5),_0x14b7fe=![];for(let _0x366517=0x0;_0x366517<_0x57501[_0x46aa5f(0x2e1)];_0x366517++){_0x14b7fe=![];if(Math['random']()>0.5){}let _0x4e3eea=_0x57501[_0x366517],[_0x1a950d,_0x3441d5]=_0x4e3eea[_0x46aa5f(0x295)],_0x12dbec=_0x4e3eea[_0x46aa5f(0x25b)];for(let _0x5dbcf1=0x0;_0x5dbcf1<_0x12dbec[_0x46aa5f(0x2e1)];_0x5dbcf1++){for(let _0x80f5b1=0x0;_0x80f5b1<_0x12dbec[0x0][_0x46aa5f(0x2e1)];_0x80f5b1++){let [_0x3c9ea0,_0x1bed9b]=[_0x5dbcf1+_0x1a950d,_0x80f5b1+_0x3441d5];if(_0x4e3eea[_0x46aa5f(0x4b6)]||_0x4e3eea[_0x46aa5f(0x4b4)]||_0x4e3eea[_0x46aa5f(0x3fd)])(_0x12dbec[_0x5dbcf1][_0x80f5b1]==0x1||_0x12dbec[_0x5dbcf1][_0x80f5b1]==0x2||_0x12dbec[_0x5dbcf1][_0x80f5b1]==0x3||_0x12dbec[_0x5dbcf1][_0x80f5b1]==0x4)&&(newgrid[_0x3c9ea0][_0x1bed9b]=new Tile(...tiletypes[_0x46aa5f(0x38c)],[_0x3c9ea0,_0x1bed9b])),newgrid[_0x3c9ea0][_0x1bed9b][_0x46aa5f(0x3b2)]==![]&&newgrid[_0x3c9ea0][_0x1bed9b][_0x46aa5f(0x312)]['length']==0x0&&_0x12dbec[_0x5dbcf1][_0x80f5b1]==0x5&&(newgrid[_0x3c9ea0][_0x1bed9b]=new Tile(...tiletypes[_0x46aa5f(0x40b)],[_0x3c9ea0,_0x1bed9b]));else{if(_0x12dbec[_0x5dbcf1][_0x80f5b1]==0x1||_0x12dbec[_0x5dbcf1][_0x80f5b1]==0x2||_0x12dbec[_0x5dbcf1][_0x80f5b1]==0x3||_0x12dbec[_0x5dbcf1][_0x80f5b1]==0x4){if(_0x19a95d[_0x3c9ea0][_0x1bed9b]==0x4&&_0x1702a[_0x3c9ea0][_0x1bed9b]>0.1){newgrid[_0x3c9ea0][_0x1bed9b]=new Tile(...tiletypes['DirtFloor'],[_0x3c9ea0,_0x1bed9b]);if(_0x1702a[_0x3c9ea0][_0x1bed9b]>0.2)newgrid[_0x3c9ea0][_0x1bed9b]=new Tile(...tiletypes['MossFloor'],[_0x3c9ea0,_0x1bed9b]);if(_0x1702a[_0x3c9ea0][_0x1bed9b]>0.3&&Math[_0x46aa5f(0x282)]()<_0x1702a[_0x3c9ea0][_0x1bed9b])newgrid[_0x3c9ea0][_0x1bed9b][_0x46aa5f(0x444)](new TallGrass());else{if(_0x1702a[_0x3c9ea0][_0x1bed9b]>0.4)newgrid[_0x3c9ea0][_0x1bed9b][_0x46aa5f(0x307)](new Water());}}else{if(_0x4e3eea[_0x46aa5f(0x3f5)])newgrid[_0x3c9ea0][_0x1bed9b]=new Tile(...tiletypes[_0x46aa5f(0x3b1)],[_0x3c9ea0,_0x1bed9b]);else newgrid[_0x3c9ea0][_0x1bed9b]=new Tile(...tiletypes[_0x46aa5f(0x415)],[_0x3c9ea0,_0x1bed9b]);_0x1702a[_0x3c9ea0][_0x1bed9b]>0.3&&(newgrid[_0x3c9ea0][_0x1bed9b]=new Tile(...tiletypes['MossFloor'],[_0x3c9ea0,_0x1bed9b]));}}_0x14b7fe===!![]&&_0x12dbec[_0x5dbcf1][_0x80f5b1]!==0x0&&_0x12dbec[_0x5dbcf1][_0x80f5b1]!==0x6&&(newgrid[_0x3c9ea0][_0x1bed9b]['elevation']=0x2,(_0x12dbec[_0x5dbcf1][_0x80f5b1]==0x2||_0x12dbec[_0x5dbcf1][_0x80f5b1]==0x3||_0x12dbec[_0x5dbcf1][_0x80f5b1]==0x4)&&(newgrid[_0x3c9ea0][_0x1bed9b]=new Tile(...tiletypes[_0x46aa5f(0x1ee)],[_0x3c9ea0,_0x1bed9b]),newgrid[_0x3c9ea0][_0x1bed9b][_0x46aa5f(0x439)]=0x1));if(newgrid[_0x3c9ea0][_0x1bed9b][_0x46aa5f(0x3b2)]==![]&&newgrid[_0x3c9ea0][_0x1bed9b][_0x46aa5f(0x312)][_0x46aa5f(0x2e1)]==0x0&&_0x1702a[_0x3c9ea0][_0x1bed9b]>0.3)newgrid[_0x3c9ea0][_0x1bed9b]=new Tile(...tiletypes[_0x46aa5f(0x2b9)],[_0x3c9ea0,_0x1bed9b]);}}}for(let _0x1f51a1=0x0;_0x1f51a1<_0x4e3eea[_0x46aa5f(0x228)][_0x46aa5f(0x2e1)];_0x1f51a1++){let [_0x3380d7,_0x354489]=_0x4e3eea[_0x46aa5f(0x228)][_0x1f51a1],[_0x15cfc2,_0x5244b3]=[_0x3380d7+_0x1a950d,_0x354489+_0x3441d5];newgrid[_0x15cfc2][_0x5244b3][_0x46aa5f(0x444)](new door([_0x15cfc2,_0x5244b3]));}let [_0x17d118,_0xd36283]=_0x4e3eea[_0x46aa5f(0x295)];for(let _0x180ba1=0x0;_0x180ba1<_0x4e3eea[_0x46aa5f(0x2ce)][_0x46aa5f(0x2e1)];_0x180ba1++){let [_0x241e6b,_0x13c95b]=_0x4e3eea['spawnpoints'][_0x180ba1],[_0x323d1f,_0x54817c]=[_0x241e6b+_0x17d118,_0x13c95b+_0xd36283],_0x11bbf4=_0x4e3eea[_0x46aa5f(0x402)][_0x180ba1];switch(_0x11bbf4){case 0x0:newgrid[_0x323d1f][_0x54817c][_0x46aa5f(0x25c)](new Deserter([_0x323d1f,_0x54817c]));break;case 0x1:newgrid[_0x323d1f][_0x54817c]['addCharacter'](new Goblin([_0x323d1f,_0x54817c]));break;case 0x2:if(Math[_0x46aa5f(0x282)]()>0.33)newgrid[_0x323d1f][_0x54817c][_0x46aa5f(0x25c)](new Goblin_Dagger([_0x323d1f,_0x54817c]));else newgrid[_0x323d1f][_0x54817c][_0x46aa5f(0x25c)](new Goblin_Shortbow([_0x323d1f,_0x54817c]));break;case 0x3:switch(Math[_0x46aa5f(0x1f4)](Math[_0x46aa5f(0x282)]()*0x4)){case 0x1:newgrid[_0x323d1f][_0x54817c][_0x46aa5f(0x25c)](new Goblin_Shortbow([_0x323d1f,_0x54817c]));break;case 0x2:newgrid[_0x323d1f][_0x54817c][_0x46aa5f(0x25c)](new Goblin_Spearman([_0x323d1f,_0x54817c]));break;case 0x3:newgrid[_0x323d1f][_0x54817c][_0x46aa5f(0x25c)](new Goblin_Swordsman([_0x323d1f,_0x54817c]));break;}break;case 0x4:switch(Math[_0x46aa5f(0x1f4)](Math['random']()*0x4)){case 0x0:newgrid[_0x323d1f][_0x54817c][_0x46aa5f(0x25c)](new Skulker([_0x323d1f,_0x54817c]));break;case 0x1:newgrid[_0x323d1f][_0x54817c][_0x46aa5f(0x25c)](new Ogre([_0x323d1f,_0x54817c]));break;default:newgrid[_0x323d1f][_0x54817c]['addCharacter'](new Hobgoblin([_0x323d1f,_0x54817c]));break;}break;case 0x5:newgrid[_0x323d1f][_0x54817c][_0x46aa5f(0x25c)](new Goblin_Hivequeen([_0x323d1f,_0x54817c]));break;case 0x6:newgrid[_0x323d1f][_0x54817c][_0x46aa5f(0x444)](new Spawning_Membrane([_0x323d1f,_0x54817c]));break;case 0x7:newgrid[_0x323d1f][_0x54817c][_0x46aa5f(0x444)](new Chest([_0x323d1f,_0x54817c]));break;case 0x8:newgrid[_0x323d1f][_0x54817c][_0x46aa5f(0x25c)](new Giant([_0x323d1f,_0x54817c]));break;case 0x9:newgrid[_0x323d1f][_0x54817c][_0x46aa5f(0x444)](new spikeTrap([_0x323d1f,_0x54817c]));break;case 0xa:newgrid[_0x323d1f][_0x54817c]['addCharacter'](new Hobgoblin_Warlord([_0x323d1f,_0x54817c]));break;case 0xb:newgrid[_0x323d1f][_0x54817c]['addObject'](new Spawning_Membrane_Special());break;}}for(let _0x33c213=0x0;_0x33c213<_0x4e3eea[_0x46aa5f(0x3f1)][_0x46aa5f(0x2e1)];_0x33c213++){let [_0x545b62,_0x57605e]=_0x4e3eea[_0x46aa5f(0x3f1)][_0x33c213],[_0x3dd7b8,_0x2fe4d2]=[_0x545b62+_0x17d118,_0x57605e+_0xd36283];newgrid[_0x3dd7b8][_0x2fe4d2]=new Tile(...tiletypes['StoneFloor'],[_0x3dd7b8,_0x2fe4d2]),newgrid[_0x3dd7b8][_0x2fe4d2][_0x46aa5f(0x439)]=-0x2;}}activecharacternonindex=playercs[0x0];}function tutorialgen(){const _0x365153=_0x1a99ef;newgrid[0x64][0xc8][_0x365153(0x25c)](new Deserter([0x64,0xc8])),newgrid[0x5a][0xc8]['addCharacter'](new Goblin([0x5a,0xc8])),activecharacternonindex=playercs[0x0];return;}let successes=0x0,failures=0x0;function region1gen(..._0x418729){let _0xb4b665=[[0xa,0x1]];return generatenoise(..._0x418729,_0xb4b665);}function region2gen(..._0x1e2b39){let _0x483bd1=[[0x5,0x1],[0x9,0x1]];return generatenoise(..._0x1e2b39,_0x483bd1);}function generatenoise(_0x23594c,_0x55424c,_0x21db58,_0x1221aa=0x32,_0x4a629b){const _0x5eb867=_0x1a99ef;class _0x84001d{constructor(){const _0x6bbc5e=_0x4a83;this[_0x6bbc5e(0x402)]=[],this[_0x6bbc5e(0x339)]=[],this[_0x6bbc5e(0x221)]=[],this[_0x6bbc5e(0x2ce)]=[],this[_0x6bbc5e(0x2b4)]=[],this['walltiles']=[],this[_0x6bbc5e(0x3f1)]=[],this[_0x6bbc5e(0x228)]=[],this['maxhotdepth']=0x0;}[_0x5eb867(0x425)](){const _0x3d3bed=_0x5eb867;let _0x442027=this,_0x2896ce=[],_0x54ad85=_0x442027[_0x3d3bed(0x473)][_0x3d3bed(0x1ec)](_0x442027[_0x3d3bed(0x3a1)]),[_0x2f243a,_0x38a4d0]=[0x3e7,0x0],[_0x276473,_0x2018fc]=[0x3e7,0x0];for(let _0x2a6403=0x0;_0x2a6403<_0x54ad85['length'];_0x2a6403++){let [_0x6aa987,_0x474320]=_0x54ad85[_0x2a6403];if(_0x474320<_0x2f243a)_0x2f243a=_0x474320;if(_0x474320>_0x38a4d0)_0x38a4d0=_0x474320;if(_0x6aa987<_0x276473)_0x276473=_0x6aa987;if(_0x6aa987>_0x2018fc)_0x2018fc=_0x6aa987;}let _0x11fd42=_0x38a4d0-_0x2f243a+0x1,_0x54b83b=_0x2018fc-_0x276473+0x1;for(let _0x2cb122=0x0;_0x2cb122<_0x54b83b;_0x2cb122++){_0x2896ce[_0x2cb122]=[];for(let _0x1dc570=0x0;_0x1dc570<_0x11fd42;_0x1dc570++){_0x2896ce[_0x2cb122][_0x1dc570]=0x0;}}for(let _0x306a07=0x0;_0x306a07<_0x442027[_0x3d3bed(0x473)]['length'];_0x306a07++){let [_0xc728d6,_0x5f30ec]=_0x442027[_0x3d3bed(0x473)][_0x306a07];_0x2896ce[_0xc728d6-_0x276473][_0x5f30ec-_0x2f243a]=0x1;}for(let _0x5ce071=0x0;_0x5ce071<_0x442027[_0x3d3bed(0x3a1)]['length'];_0x5ce071++){let [_0x17f188,_0x2b168c]=_0x442027[_0x3d3bed(0x3a1)][_0x5ce071];_0x2896ce[_0x17f188-_0x276473][_0x2b168c-_0x2f243a]=0x5;}this[_0x3d3bed(0x295)]=[_0x276473,_0x2f243a],this['roomgrid']=_0x2896ce;}[_0x5eb867(0x231)](){const _0x71aae0=_0x5eb867,_0x5e1dd6=this,_0x11ecc4=this['roomgrid'],[_0x1558bd,_0x18faa6]=this[_0x71aae0(0x295)];for(let _0xf3a83a=0x0;_0xf3a83a<_0x5e1dd6[_0x71aae0(0x339)]['length'];_0xf3a83a++){let _0x392544=_0x5e1dd6['edges'][_0x5e1dd6['neighbors'][_0xf3a83a]],_0xd405f8=this[_0x71aae0(0x339)][_0xf3a83a],_0x449957=![],_0x9641f0=![],_0x5a00d4=0x1;if(_0xd405f8[_0x71aae0(0x2a8)]<=_0x5e1dd6[_0x71aae0(0x2a8)])_0x449957=!![];if(_0xd405f8[_0x71aae0(0x2a8)]>=_0x5e1dd6['depth'])_0x9641f0=!![];if(_0x449957)_0x5a00d4+=0x1;if(_0x9641f0)_0x5a00d4+=0x2;let [_0x1a267f,_0x4e3492]=[0x0,0x0];for(let _0x95db34=0x0;_0x95db34<_0x392544['length'];_0x95db34++){_0x4e3492+=_0x392544[_0x95db34][0x1],_0x1a267f+=_0x392544[_0x95db34][0x0];}let [_0x2cd37f,_0x4bf5ef]=[_0x1a267f/_0x392544[_0x71aae0(0x2e1)],_0x4e3492/_0x392544['length']];_0x392544=_0x392544[_0x71aae0(0x46b)](([_0x52f84,_0x5eb474],[_0x364e99,_0x5368f9])=>_0x521eb7([_0x52f84,_0x5eb474],[_0x2cd37f,_0x4bf5ef])-_0x521eb7([_0x364e99,_0x5368f9],[_0x2cd37f,_0x4bf5ef]));for(let _0x367b91=0x0;_0x367b91<0x1;_0x367b91++){let [_0xcd3f8c,_0x24214f]=_0x392544[_0x367b91];_0x11ecc4[_0xcd3f8c-_0x1558bd][_0x24214f-_0x18faa6]=_0x5a00d4;}}let _0x1f2d00=!![];for(let _0x5141cd=0x0;_0x5141cd<this[_0x71aae0(0x25b)][_0x71aae0(0x2e1)];_0x5141cd++){for(let _0x41265c=0x0;_0x41265c<this[_0x71aae0(0x25b)][0x0][_0x71aae0(0x2e1)];_0x41265c++){(this['roomgrid'][_0x5141cd][_0x41265c]==0x3||this['roomgrid'][_0x5141cd][_0x41265c]==0x4)&&(_0x1f2d00=![]);}}this[_0x71aae0(0x359)]=_0x1f2d00;function _0x521eb7([_0x69e893,_0x2a51a7],[_0x24a71b,_0x4f5634]){const _0x198d7c=_0x71aae0;return Math[_0x198d7c(0x1f6)]((_0x69e893-_0x24a71b)**0x2+(_0x2a51a7-_0x4f5634)**0x2);}}[_0x5eb867(0x44a)](){const _0x9e33bb=_0x5eb867;let _0x246fde=this['depth'],_0x14a501=0x3,_0x2b6e8e=0x0;if(_0x246fde<0x4)while(_0x2b6e8e<_0x14a501){let _0x39edc5=Math[_0x9e33bb(0x3de)](Math[_0x9e33bb(0x282)]()*0x2);this[_0x9e33bb(0x402)][_0x9e33bb(0x23c)](_0x39edc5),_0x2b6e8e+=_0x39edc5;}else{if(_0x246fde<0x8){_0x14a501=0x5;while(_0x2b6e8e<_0x14a501){let _0x58ca4e=Math['ceil'](Math['random']()*0x3);this['enemies'][_0x9e33bb(0x23c)](_0x58ca4e),_0x2b6e8e+=_0x58ca4e;}}else{_0x14a501=0x8;while(_0x2b6e8e<_0x14a501){let _0x360d5f=Math[_0x9e33bb(0x3de)](Math['random']()*0x4);this[_0x9e33bb(0x402)]['push'](_0x360d5f),_0x2b6e8e+=_0x360d5f;}}}if(this[_0x9e33bb(0x3f5)]&&!this[_0x9e33bb(0x47d)]){this[_0x9e33bb(0x402)][_0x9e33bb(0x23c)](Math[_0x9e33bb(0x373)](0x4,_0x246fde)),this[_0x9e33bb(0x402)][_0x9e33bb(0x23c)](Math['min'](0x4,_0x246fde));if(Math['random']()>0.5)this[_0x9e33bb(0x402)][_0x9e33bb(0x23c)](0x7);let _0x27704b=0x4;for(let _0x4048b3=0x0;_0x4048b3<_0x27704b;_0x4048b3++){this[_0x9e33bb(0x402)][_0x9e33bb(0x23c)](0x9);}}this['boss']&&(this[_0x9e33bb(0x402)]=[0x5,0x6,0x6,0x6,0x6,0x6,0x6,0x6,0x6,0x6,0x6,0x6,0x6,0x6]);this['bossbuffer']&&(this[_0x9e33bb(0x402)][_0x9e33bb(0x23c)](0x6),this[_0x9e33bb(0x402)][_0x9e33bb(0x23c)](0x6),this[_0x9e33bb(0x402)][_0x9e33bb(0x23c)](0x6),this[_0x9e33bb(0x402)]['push'](0x6),this['enemies'][_0x9e33bb(0x23c)](0x6));this[_0x9e33bb(0x281)]&&this[_0x9e33bb(0x402)][_0x9e33bb(0x23c)](Math[_0x9e33bb(0x373)](0x4,_0x246fde));this[_0x9e33bb(0x313)]&&(this[_0x9e33bb(0x402)]['push'](0x8),this[_0x9e33bb(0x402)]['push'](0x7));if(this[_0x9e33bb(0x3fd)])this['enemies']=[0x0,0xb,0xb,0xb];else{}let _0x4d4444=[],_0x1b6918=[];for(let _0x10b43a=0x0;_0x10b43a<this[_0x9e33bb(0x25b)]['length'];_0x10b43a++){_0x4d4444[_0x10b43a]=[];for(let _0x44886e=0x0;_0x44886e<this['roomgrid'][0x0][_0x9e33bb(0x2e1)];_0x44886e++){if(this[_0x9e33bb(0x25b)][_0x10b43a][_0x44886e]==0x2||this['roomgrid'][_0x10b43a][_0x44886e]==0x4)_0x1b6918[_0x9e33bb(0x23c)]([_0x10b43a,_0x44886e]);_0x4d4444[_0x10b43a][_0x44886e]=null;}}let _0x1e0ff6=0x0;while(_0x1b6918[_0x9e33bb(0x2e1)]>0x0){let _0x420288=_0x1b6918[_0x9e33bb(0x2e1)];for(let _0x3a50fc=0x0;_0x3a50fc<_0x420288;_0x3a50fc++){let [_0x20d2d4,_0x35f8a2]=_0x1b6918[_0x9e33bb(0x2ed)]();if(_0x4d4444[_0x20d2d4]===undefined||_0x4d4444[_0x20d2d4][_0x35f8a2]===undefined)continue;if(_0x4d4444[_0x20d2d4][_0x35f8a2]!==null)continue;if(this[_0x9e33bb(0x25b)][_0x20d2d4][_0x35f8a2]!==0x1)continue;_0x4d4444[_0x20d2d4][_0x35f8a2]=_0x1e0ff6;for(let _0x3190d0=0x0;_0x3190d0<0x4;_0x3190d0++){let [_0x1d6a8e,_0xa0b759]=directions[_0x3190d0],[_0x3f5d7b,_0x37bdd4]=[_0x20d2d4+_0x1d6a8e,_0x35f8a2+_0xa0b759];_0x1b6918[_0x9e33bb(0x23c)]([_0x3f5d7b,_0x37bdd4]);}}_0x1e0ff6++;}for(let _0x1aa880=0x0;_0x1aa880<this[_0x9e33bb(0x402)][_0x9e33bb(0x2e1)];_0x1aa880++){let _0x331593=0x5,_0x2f70cd=0x4,_0x3aeb17=this[_0x9e33bb(0x402)][_0x1aa880];_0x3aeb17==0x1&&(_0x331593=0x5+Math['round'](Math['random']()*0x4),_0x2f70cd=0x4);_0x3aeb17==0x2&&(_0x331593=0xa,_0x2f70cd=0x5);_0x3aeb17==0x3&&(_0x331593=0x14,_0x2f70cd=0x1);let _0x3f8d9a,_0x1b6644;for(let _0x1cb14a=0x0;_0x1cb14a<this['roomgrid']['length'];_0x1cb14a++){for(let _0x2b62d5=0x0;_0x2b62d5<this[_0x9e33bb(0x25b)][0x0]['length'];_0x2b62d5++){if(this[_0x9e33bb(0x25b)][_0x1cb14a][_0x2b62d5]!==0x1)continue;if(_0x4d4444[_0x1cb14a][_0x2b62d5]===undefined)continue;let _0x593e7e=0x0;if(_0x331593!=0x0)_0x593e7e=Math[_0x9e33bb(0x3cf)](_0x4d4444[_0x1cb14a][_0x2b62d5]-_0x331593);let _0x1b4262=![],_0x274034;for(let _0xa3f073=0x0;_0xa3f073<this[_0x9e33bb(0x2ce)]['length'];_0xa3f073++){let [_0x970d9,_0x307a85]=this['spawnpoints'][_0xa3f073];_0x307a85==_0x2b62d5&&_0x970d9==_0x1cb14a&&(_0x1b4262=!![]),_0x274034=Math[_0x9e33bb(0x4bb)](-_0x2f70cd,-Math[_0x9e33bb(0x1f6)](Math[_0x9e33bb(0x4bb)](Math[_0x9e33bb(0x3cf)](_0x307a85-_0x2b62d5),Math['abs'](_0x970d9-_0x1cb14a)))),_0x593e7e+=_0x274034;}if(_0x1b4262)continue;if(_0x3aeb17==0x6||_0x3aeb17==0x9)_0x593e7e=Math[_0x9e33bb(0x282)]();(_0x593e7e<_0x1b6644||_0x1b6644===undefined)&&(_0x3f8d9a=[_0x1cb14a,_0x2b62d5],_0x1b6644=_0x593e7e);}}if(_0x3f8d9a)this[_0x9e33bb(0x2ce)]['push'](_0x3f8d9a);}}[_0x5eb867(0x2d1)](){const _0x5ce7a7=_0x5eb867;let _0x3aed83=Math[_0x5ce7a7(0x1f4)](Math[_0x5ce7a7(0x282)]()*this[_0x5ce7a7(0x25b)]['length']),_0x1dc0a2=Math[_0x5ce7a7(0x1f4)](Math[_0x5ce7a7(0x282)]()*this[_0x5ce7a7(0x25b)][0x0][_0x5ce7a7(0x2e1)]);if(this[_0x5ce7a7(0x25b)][_0x3aed83][_0x1dc0a2]==0x0)return this[_0x5ce7a7(0x2d1)]();else return[_0x3aed83,_0x1dc0a2];}[_0x5eb867(0x264)]([_0x5dd29a,_0x47b891]){const _0x29790c=_0x5eb867;let _0x3876cf=0x3e7,_0xc1a5bb,_0x36ccae=[[_0x5dd29a,_0x47b891]];const _0x256d70=this[_0x29790c(0x25b)];let _0x1c9c78={};while(_0x36ccae['length']>0x0){let [_0x218046,_0xd5dbd9]=_0x36ccae[_0x29790c(0x2ed)]();if(_0x1c9c78[_0x218046+','+_0xd5dbd9])continue;if(!_0x256d70[_0x218046]||!_0x256d70[_0x218046][_0xd5dbd9])continue;let _0x298503=Math[_0x29790c(0x3cf)](_0x218046-_0x5dd29a)+Math[_0x29790c(0x3cf)](_0xd5dbd9-_0x47b891);if(_0x256d70[_0x218046][_0xd5dbd9]!==0x0){if(_0x256d70[_0x218046][_0xd5dbd9]==0x2&&!(_0x3876cf<_0x298503))_0x3876cf=_0x298503;_0x1c9c78[_0x218046+','+_0xd5dbd9]=0x1,_0x36ccae['push']([_0x218046+0x1,_0xd5dbd9]),_0x36ccae['push']([_0x218046-0x1,_0xd5dbd9]),_0x36ccae[_0x29790c(0x23c)]([_0x218046,_0xd5dbd9+0x1]),_0x36ccae[_0x29790c(0x23c)]([_0x218046,_0xd5dbd9-0x1]);}}return-Math[_0x29790c(0x3cf)](_0x3876cf-0x3);}['restructure'](){const _0x28f83e=_0x5eb867,_0x5a7fd1=this;this[_0x28f83e(0x2b4)]=[];let _0x4d1c09=this[_0x28f83e(0x25b)],_0x10f50f=[],_0x551123=0x0,_0xfe6ac4=0x0;if((this['dungeon']||this[_0x28f83e(0x281)])&&!this[_0x28f83e(0x4b6)]&&!this['bossbuffer']&&!this['origin']){for(let _0x319a02=0x0;_0x319a02<this[_0x28f83e(0x25b)][_0x28f83e(0x2e1)];_0x319a02++){for(let _0x21fdc8=0x0;_0x21fdc8<this[_0x28f83e(0x25b)][0x0][_0x28f83e(0x2e1)];_0x21fdc8++){if(_0x4d1c09[_0x319a02][_0x21fdc8]==0x2||_0x4d1c09[_0x319a02][_0x21fdc8]==0x3||_0x4d1c09[_0x319a02][_0x21fdc8]==0x4)_0x10f50f[_0x28f83e(0x23c)]([_0x319a02,_0x21fdc8]);else{if(_0x4d1c09[_0x319a02][_0x21fdc8]==0x1)_0x551123++,_0xfe6ac4++,_0x4d1c09[_0x319a02][_0x21fdc8]=0x0;else{if(_0x4d1c09[_0x319a02][_0x21fdc8]==0x5)_0xfe6ac4++,_0x4d1c09[_0x319a02][_0x21fdc8]=0x0;else _0x4d1c09[_0x319a02][_0x21fdc8]==0x0&&(_0x4d1c09[_0x319a02][_0x21fdc8]=0x6);}}}}let [_0x3ccc0e,_0x46b760]=_0x10f50f[_0x28f83e(0x2ed)](),_0x4d61f7=[[_0x3ccc0e,_0x46b760]],_0x2ba5b7=[],_0x1e0e3d=[],_0x43433c=0x0;while(_0x4d61f7[_0x28f83e(0x2e1)]>0x0||_0x10f50f[_0x28f83e(0x2e1)]>0x0||_0x43433c<_0x551123/0x2){let _0x32746a=![];while(_0x4d61f7[_0x28f83e(0x2e1)]==0x0&&_0x1e0e3d['length']>0x0){if(_0x10f50f[_0x28f83e(0x2e1)]>0x0){let _0x5d2f0f=_0x10f50f[0x0];_0x1e0e3d=_0x37ead5(_0x1e0e3d);}let _0x294103=_0x1e0e3d[_0x28f83e(0x2ed)]();_0x391f81(_0x294103),_0x4d61f7['length']>0x0&&successes++;}if(_0x4d61f7[_0x28f83e(0x2e1)]==0x0&&_0x2ba5b7[_0x28f83e(0x2e1)]>0x0){let _0x3715f2=_0x10f50f[0x0];_0x3715f2!==undefined&&_0x2ba5b7[_0x28f83e(0x46b)](([_0x30ce54,_0x497f98],[_0x489942,_0xb6718b])=>_0x4fc0ee([_0x30ce54,_0x497f98],_0x3715f2)-_0x4fc0ee([_0x489942,_0xb6718b],_0x3715f2));let _0x516dd2=_0x2ba5b7[_0x28f83e(0x2ed)]();_0x391f81(_0x516dd2),_0x4d61f7[_0x28f83e(0x23c)](_0x516dd2),_0x4d61f7['length']>0x0?(failures++,_0x32746a=!![]):successes++;}let [_0x597c79,_0x1e601d]=_0x4d61f7[_0x28f83e(0x2ed)]();if(_0x4d1c09[_0x597c79][_0x1e601d]==0x1)continue;_0x4d1c09[_0x597c79][_0x1e601d]=0x1,_0x43433c++;for(let _0x103f50=0x0;_0x103f50<_0x10f50f[_0x28f83e(0x2e1)];_0x103f50++){let [_0x43b7f1,_0x383a4a]=_0x10f50f[_0x103f50];if(_0x43b7f1==_0x597c79&&_0x383a4a==_0x1e601d){_0x10f50f[_0x28f83e(0x358)](_0x103f50,0x1);break;}}let _0x21679a=_0x37ead5(cardinaldirections);for(let _0x2aa9ef=0x0;_0x2aa9ef<0x4;_0x2aa9ef++){let [_0x2d7d5c,_0x2f27fa]=_0x21679a[_0x2aa9ef],[_0xb98e86,_0x1f5701]=[_0x597c79+_0x2d7d5c,_0x1e601d+_0x2f27fa],[_0x41ce2b,_0x253c28]=[_0x597c79+0x2*_0x2d7d5c,_0x1e601d+0x2*_0x2f27fa];if(_0x4d1c09[_0xb98e86]===undefined||_0x4d1c09[_0xb98e86][_0x1f5701]===undefined||_0x4d1c09[_0xb98e86][_0x1f5701]==0x6)continue;if(_0x4d1c09[_0xb98e86][_0x1f5701]!==0x0&&_0x4d1c09[_0xb98e86][_0x1f5701]!==0x1&&_0x4d1c09[_0xb98e86][_0x1f5701]!==0x5)_0x4d61f7[_0x28f83e(0x23c)]([_0xb98e86,_0x1f5701]);else{if(_0x4d1c09[_0xb98e86][_0x1f5701]==0x0||_0x4d1c09[_0xb98e86][_0x1f5701]==0x5){_0x2ba5b7['push']([_0xb98e86,_0x1f5701,[_0x2d7d5c,_0x2f27fa]]);if(_0x4d1c09[_0x41ce2b]===undefined||_0x4d1c09[_0x41ce2b][_0x253c28]===undefined)continue;if(_0x4d1c09[_0x41ce2b][_0x253c28]==0x6)continue;if(_0x4d1c09[_0x41ce2b][_0x253c28]==0x1&&Math[_0x28f83e(0x282)]()>0.5&&this[_0x28f83e(0x47d)])_0x4d61f7[_0x28f83e(0x23c)]([_0xb98e86,_0x1f5701,[_0x2d7d5c,_0x2f27fa]]);else _0x1e0e3d['push']([_0xb98e86,_0x1f5701,[_0x2d7d5c,_0x2f27fa]]);}}}}function _0x391f81([_0x30eebd,_0x33f8d5,[_0x212e4c,_0x533946]]){const _0x573057=_0x28f83e;let _0x35df3c=0x2,_0x5f1a23=0x2;Math['random']()>0.5&&(_0x5f1a23++,_0x35df3c++);let _0xde698d=0x4,_0x523722=![];Math['random']()>0.5&&(_0xde698d=0x5,_0x523722=!![]);let _0x26c7e7=0x0,_0x59d055=![],_0x25168b=!![],_0x3dbf24=[],_0x1bc189=[],_0x4d9d34=!![];while(_0x25168b==!![]&&Math[_0x573057(0x4bb)](_0x35df3c,_0x5f1a23)<=_0xde698d){_0x523722==!![]&&(_0x35df3c=Math[_0x573057(0x4bb)](_0x35df3c,_0x5f1a23),_0x5f1a23=_0x35df3c);let [_0x1ab220,_0x2d606e]=[_0x30eebd+_0x212e4c*_0x5f1a23,_0x33f8d5+_0x533946*_0x35df3c],_0x48d67c=[],_0x524251=[];for(let _0xd64eab=_0x1ab220-_0x5f1a23;_0xd64eab<=_0x1ab220+_0x5f1a23;_0xd64eab++){for(let _0x2e30e6=_0x2d606e-_0x35df3c;_0x2e30e6<=_0x2d606e+_0x35df3c;_0x2e30e6++){if(_0x523722&&_0x4fc0ee([_0xd64eab,_0x2e30e6],[_0x1ab220,_0x2d606e])>=_0x5f1a23)continue;let _0x3e6bcd=Math[_0x573057(0x3cf)](_0x2e30e6-_0x2d606e),_0x5f3716=Math[_0x573057(0x3cf)](_0xd64eab-_0x1ab220);if(_0x4d1c09[_0xd64eab]===undefined||_0x4d1c09[_0xd64eab][_0x2e30e6]===undefined){_0x25168b=![];break;}if(_0x4d1c09[_0xd64eab][_0x2e30e6]==0x1){_0x25168b=![];break;}if(_0x3e6bcd>=_0x35df3c||_0x5f3716>=_0x5f1a23)_0x4d1c09[_0xd64eab][_0x2e30e6]!==0x6&&_0x524251['push']([_0xd64eab,_0x2e30e6]);else{if(_0x4d1c09[_0xd64eab][_0x2e30e6]==0x6){_0x25168b=![];break;}else _0x48d67c[_0x573057(0x23c)]([_0xd64eab,_0x2e30e6]);}}if(!_0x25168b)break;}if(Math[_0x573057(0x282)]()>0.5)_0x35df3c++,_0x5f1a23++;else{if(Math[_0x573057(0x282)]()>0.5)_0x35df3c++;else _0x5f1a23++;}_0x25168b&&(_0x4d9d34=![],_0x1bc189=_0x524251['slice'](),_0x3dbf24=_0x48d67c[_0x573057(0x428)]());}if(!_0x4d9d34){for(let _0x4f67bf=0x0;_0x4f67bf<_0x3dbf24['length'];_0x4f67bf++){let [_0x299d5f,_0x36f7e1]=_0x3dbf24[_0x4f67bf];_0x4d1c09[_0x299d5f][_0x36f7e1]=0x2;}for(let _0x3ed571=0x0;_0x3ed571<_0x1bc189[_0x573057(0x2e1)];_0x3ed571++){let [_0x2c2236,_0x36992a]=_0x1bc189[_0x3ed571];_0x4d1c09[_0x2c2236][_0x36992a]=0x5;}let _0x546f87=[],_0x22170b=[[_0x30eebd,_0x33f8d5]];while(_0x22170b['length']>0x0){let [_0x4dba71,_0x589b44]=_0x22170b[_0x573057(0x2ed)](),[_0x5d4172,_0x2df004]=[_0x4dba71+_0x212e4c,_0x589b44+_0x533946],[_0x414411,_0x366eb1]=[_0x4dba71-_0x212e4c,_0x589b44-_0x533946];if(_0x4dba71<0x2||_0x4dba71>_0x4d1c09['length']-0x2||_0x589b44<0x2||_0x589b44>_0x4d1c09[0x0][_0x573057(0x2e1)]-0x2)continue;if(_0x4d1c09[_0x4dba71]===undefined||_0x4d1c09[_0x4dba71][_0x589b44]===undefined)continue;let _0x140b54=![];_0x4d1c09[_0x5d4172][_0x2df004]==0x2&&_0x4d1c09[_0x414411][_0x366eb1]==0x1&&(_0x140b54=!![]);if(!_0x140b54)continue;let _0x3cf045=![];for(let _0xf8b500=0x0;_0xf8b500<_0x546f87[_0x573057(0x2e1)];_0xf8b500++){let _0x3d567d=_0x546f87[_0xf8b500];if(_0x3d567d[0x0]==_0x4dba71&&_0x3d567d[0x1]==_0x589b44)_0x3cf045=!![];}if(_0x3cf045)continue;_0x546f87[_0x573057(0x23c)]([_0x4dba71,_0x589b44]);for(let _0x154697=0x0;_0x154697<0x4;_0x154697++){let [_0x6cba0e,_0x26281f]=cardinaldirections[_0x154697],[_0x57e256,_0x1a2821]=[_0x4dba71+_0x6cba0e,_0x589b44+_0x26281f];_0x22170b['push']([_0x57e256,_0x1a2821]);}}_0x546f87=_0x37ead5(_0x546f87);let _0x4488c7=_0x546f87['length'],_0x3d285e=Math[_0x573057(0x4bb)](_0x35df3c,_0x5f1a23)<0x5;!_0x3d285e&&(_0x4488c7=0x1);if(_0x546f87['length']==0x0)_0x546f87=[[_0x30eebd,_0x33f8d5]];for(let _0x16218c=0x0;_0x16218c<_0x4488c7;_0x16218c++){let _0x4b6fa7=_0x546f87[_0x16218c];_0x4d61f7[_0x573057(0x23c)](_0x4b6fa7),!_0x3d285e&&!_0x5a7fd1[_0x573057(0x47d)]&&_0x5a7fd1[_0x573057(0x228)]['push'](_0x4b6fa7);}}}}else{let _0x260b84=[],_0x1b9fb7=[],_0x53c88d=[];for(let _0x2b35b3=0x0;_0x2b35b3<this['roomgrid']['length'];_0x2b35b3++){_0x260b84[_0x2b35b3]=[];for(let _0x2871c7=0x0;_0x2871c7<this['roomgrid'][0x0]['length'];_0x2871c7++){_0x260b84[_0x2b35b3][_0x2871c7]=0x0;}}for(let _0x279de4=0x0;_0x279de4<this['roomgrid'][_0x28f83e(0x2e1)];_0x279de4++){for(let _0x1edd7b=0x0;_0x1edd7b<this[_0x28f83e(0x25b)][0x0][_0x28f83e(0x2e1)];_0x1edd7b++){if(_0x4d1c09[_0x279de4][_0x1edd7b]==0x5&&_0x260b84[_0x279de4][_0x1edd7b]==0x0){_0x1b9fb7=[],_0x53c88d=[],_0x1b9fb7[_0x28f83e(0x23c)]([_0x279de4,_0x1edd7b]);let _0xb1e811=!![];while(_0x1b9fb7[_0x28f83e(0x2e1)]>0x0&&_0xb1e811==!![]){let [_0x5b241d,_0x2437ce]=_0x1b9fb7[_0x28f83e(0x2ed)]();for(let _0x1bc584=0x0;_0x1bc584<0x4;_0x1bc584++){let [_0x382ec6,_0x4ea202]=cardinaldirections[_0x1bc584],[_0x24bb79,_0x2eab87]=[_0x5b241d+_0x382ec6,_0x2437ce+_0x4ea202];if(_0x4d1c09[_0x24bb79]===undefined||_0x4d1c09[_0x24bb79][_0x2eab87]===undefined){_0xb1e811=![];continue;}_0x4d1c09[_0x24bb79][_0x2eab87]==0x5&&_0x260b84[_0x24bb79][_0x2eab87]==0x0&&(_0x1b9fb7['push']([_0x24bb79,_0x2eab87]),_0x53c88d[_0x28f83e(0x23c)]([_0x24bb79,_0x2eab87]),_0x260b84[_0x24bb79][_0x2eab87]=0x1),(_0x4d1c09[_0x24bb79][_0x2eab87]!==0x5&&_0x4d1c09[_0x24bb79][_0x2eab87]!==0x1||_0x260b84[_0x24bb79][_0x2eab87]==0x2)&&(_0xb1e811=![]);}}if(_0xb1e811==!![]&&_0x53c88d[_0x28f83e(0x2e1)]>0xf)for(let _0x50288e=0x0;_0x50288e<_0x53c88d[_0x28f83e(0x2e1)];_0x50288e++){let [_0x39c48f,_0x229af6]=_0x53c88d[_0x50288e];_0x260b84[_0x39c48f][_0x229af6]=0x2,this['pittiles']['push']([_0x39c48f,_0x229af6]);}else for(let _0x507e5d=0x0;_0x507e5d<_0x53c88d['length'];_0x507e5d++){let [_0xd3da6a,_0x287f0e]=_0x53c88d[_0x507e5d];_0x260b84[_0xd3da6a][_0x287f0e]=0x2;}}}}}function _0x63e5c9([_0x5c649c,_0x2d8e1e],[_0x4ba98c,_0x1e811e]){const _0x3467ac=_0x28f83e;let _0x223da5=[],_0x38aa53=Math[_0x3467ac(0x3cf)](_0x4ba98c-_0x5c649c),_0xfa3b6=Math[_0x3467ac(0x3cf)](_0x1e811e-_0x2d8e1e),_0x5883ee=_0x5c649c<_0x4ba98c?0x1:-0x1,_0x3b838a=_0x2d8e1e<_0x1e811e?0x1:-0x1,_0x20301c=_0x38aa53-_0xfa3b6;while(!![]){_0x223da5[_0x3467ac(0x23c)]([_0x5c649c,_0x2d8e1e]);if(_0x5c649c===_0x4ba98c&&_0x2d8e1e===_0x1e811e)break;let _0x38a9f5=0x2*_0x20301c;_0x38a9f5>-_0xfa3b6&&(_0x20301c-=_0xfa3b6,_0x5c649c+=_0x5883ee),_0x38a9f5<_0x38aa53&&(_0x20301c+=_0x38aa53,_0x2d8e1e+=_0x3b838a);}return _0x223da5;}function _0x17fb0f(_0x835f61,_0x31b0f2){const _0x46311d=_0x28f83e,[_0x5d05aa,_0x4ddcef]=_0x835f61,[_0x331591,_0x110ddc]=_0x31b0f2;return Math[_0x46311d(0x4bb)](Math[_0x46311d(0x3cf)](_0x331591-_0x5d05aa),Math['abs'](_0x110ddc-_0x4ddcef));}function _0x4f2992(_0x29e051,_0x56b230){const _0x503d85=_0x28f83e;return Math[_0x503d85(0x3cf)](_0x29e051[0x0]-_0x56b230[0x0])+Math['abs'](_0x29e051[0x1]-_0x56b230[0x1]);}function _0x37ead5(_0x5e2d42){const _0x5cb1e3=_0x28f83e;let _0x2b8595=_0x5e2d42[_0x5cb1e3(0x2e1)],_0x128775,_0x1dccb8=_0x5e2d42['slice']();while(_0x2b8595>0x0){_0x128775=Math[_0x5cb1e3(0x1f4)](Math[_0x5cb1e3(0x282)]()*_0x2b8595),_0x2b8595--,[_0x1dccb8[_0x2b8595],_0x1dccb8[_0x128775]]=[_0x1dccb8[_0x128775],_0x1dccb8[_0x2b8595]];}return _0x1dccb8;}function _0x4fc0ee([_0xf6574d,_0x399c24],[_0x4b7fad,_0x4fb10c]){return Math['sqrt']((_0xf6574d-_0x4b7fad)**0x2+(_0x399c24-_0x4fb10c)**0x2);}}}let _0x513e7e=[];for(let _0x342f2a=0x0;_0x342f2a<_0x4a629b[_0x5eb867(0x2e1)];_0x342f2a++){let [_0x537765,_0x46c8c6]=_0x4a629b[_0x342f2a],_0x3b49e3=perlinNoise(_0x55424c,_0x23594c,_0x537765);_0x513e7e[_0x5eb867(0x23c)](_0x3b49e3);}let _0x3dd9c5=[],_0x5ed763=[],_0x43e14a=[],_0x358b9c=[];for(let _0x315efb=0x0;_0x315efb<_0x23594c;_0x315efb++){_0x43e14a[_0x315efb]=[],_0x3dd9c5[_0x315efb]=[],_0x5ed763[_0x315efb]=[];for(let _0x1e5ab2=0x0;_0x1e5ab2<_0x55424c;_0x1e5ab2++){_0x3dd9c5[_0x315efb][_0x1e5ab2]=0x0;let _0x46e641=0x0;_0x46e641+=Math['max'](_0x1e5ab2-(_0x55424c-_0x21db58),0x0)/_0x21db58,_0x46e641+=Math[_0x5eb867(0x4bb)](_0x315efb-(_0x23594c-_0x21db58),0x0)/_0x21db58,_0x46e641+=Math[_0x5eb867(0x4bb)](-_0x1e5ab2+_0x21db58,0x0)/_0x21db58,_0x46e641+=Math[_0x5eb867(0x4bb)](-_0x315efb+_0x21db58,0x0)/_0x21db58;let _0x357d2a=0x0;_0x357d2a+=Math[_0x5eb867(0x4bb)](_0x1e5ab2-(_0x55424c-_0x21db58*0x4),0x0)/(_0x21db58*0x4),_0x357d2a+=Math['max'](_0x315efb-(_0x23594c-_0x21db58*0x4),0x0)/(_0x21db58*0x4),_0x357d2a+=Math[_0x5eb867(0x4bb)](-_0x1e5ab2+_0x21db58*0x4,0x0)/(_0x21db58*0x4),_0x357d2a+=Math[_0x5eb867(0x4bb)](-_0x315efb+_0x21db58*0x4,0x0)/(_0x21db58*0x4),_0x43e14a[_0x315efb][_0x1e5ab2]=0x0;for(let _0xba413a=0x0;_0xba413a<_0x513e7e[_0x5eb867(0x2e1)];_0xba413a++){let [_0x1d94ac,_0xe4d7a7]=_0x4a629b[_0xba413a];_0x3dd9c5[_0x315efb][_0x1e5ab2]+=_0x513e7e[_0xba413a][_0x315efb][_0x1e5ab2]*_0xe4d7a7+_0x46e641+_0x357d2a/0x10;}_0x5ed763[_0x315efb][_0x1e5ab2]=null;}}let _0xc86f7f=0x0,_0x2cff53=(_0x23594c-0x2*_0x21db58)*(_0x55424c-0x2*_0x21db58)/2.5,_0x1e45a7=0x98967f,_0x3a243f=0.15,[_0x2c9eba,_0x294ef7]=[_0x23594c/0x2,_0x55424c/0x2],[_0x196344,_0x344e27]=[_0x2c9eba,_0x294ef7];while(_0x3dd9c5[_0x196344][_0x344e27]>_0x3a243f){let _0x11616c=_0xfc6da9(cardinaldirections);for(let _0x2cae8b=0x0;_0x2cae8b<0x1;_0x2cae8b++){_0x196344+=_0x11616c[_0x2cae8b][0x0],_0x344e27+=_0x11616c[_0x2cae8b][0x1];}}let _0x4576b7=[[_0x196344,_0x344e27]],_0x5e0054=[],_0x44ea26=![];while((_0xc86f7f<_0x2cff53||_0x44ea26==![])&&_0xc86f7f<_0x1e45a7){let _0x45917f;if(_0x5e0054['length']>0x0)_0x45917f=_0x5e0054['shift']();else{let _0x9eeb24=0x1,_0x1bd145=0x0;for(let _0x7353=0x0;_0x7353<_0x4576b7['length'];_0x7353++){let _0x2ae86a=_0x3dd9c5[_0x4576b7[_0x7353][0x0]][_0x4576b7[_0x7353][0x1]];if(_0x2ae86a<_0x3a243f){_0x45917f=_0x4576b7[_0x5eb867(0x358)](_0x7353,0x1)[0x0];break;}else _0x2ae86a<_0x9eeb24&&(_0x9eeb24=_0x2ae86a,_0x1bd145=_0x7353);_0x7353==_0x4576b7[_0x5eb867(0x2e1)]-0x1&&(_0x45917f=_0x4576b7[_0x5eb867(0x358)](_0x1bd145,0x1)[0x0]);}}if(!_0x45917f)break;let [_0x2836b6,_0x46d79f]=_0x45917f;_0x461b25(_0x45917f);function _0x461b25([_0x404e52,_0x2809c1]){const _0x4cd6b7=_0x5eb867;if(_0x404e52==0x0||_0x404e52>=_0x23594c-0x1)return;if(_0x2809c1==0x0||_0x2809c1>=_0x55424c-0x1)return;if(_0x43e14a[_0x404e52][_0x2809c1]==0x0){_0x43e14a[_0x404e52][_0x2809c1]=0x1;_0x3dd9c5[_0x404e52][_0x2809c1]>_0x3a243f?(_0x44ea26=!![],_0x43e14a[_0x404e52][_0x2809c1]=0x1):_0x44ea26=![];_0x3dd9c5[_0x404e52][_0x2809c1]<_0x3a243f-0.1&&(_0x43e14a[_0x404e52][_0x2809c1]=0x4);let _0x6be4a=_0xfc6da9(cardinaldirections);for(let _0xb30c92=0x0;_0xb30c92<0x4;_0xb30c92++){let [_0x267b5e,_0x260e95]=[_0x404e52+_0x6be4a[_0xb30c92][0x0],_0x2809c1+_0x6be4a[_0xb30c92][0x1]];_0x43e14a[_0x267b5e][_0x260e95]==0x0&&(_0x3dd9c5[_0x267b5e][_0x260e95]<_0x3a243f?_0x5e0054[_0x4cd6b7(0x23c)]([_0x267b5e,_0x260e95]):_0x4576b7[_0x4cd6b7(0x23c)]([_0x267b5e,_0x260e95]));}if(_0xc86f7f>_0x2cff53){}_0xc86f7f++;}}}[_0x5ed763,[tx,ty]]=_0x543411([[_0x196344,_0x344e27]]);let [_0x49e5ec,_0x31b207]=[tx,ty],[_0x508a37,[_0x595ca2,_0x4ab46c]]=_0x543411([[tx,ty]]),_0x13dbda=[];_0x3690a0([[_0x49e5ec,_0x31b207],[_0x595ca2,_0x4ab46c]],_0x1221aa);let _0x3aa4c3=_0x2a893b([_0x49e5ec,_0x31b207],[_0x595ca2,_0x4ab46c],_0x508a37,_0xc86f7f/0x3),_0x56c0b2,_0x15b203;for(let _0xf78d13=0x0;_0xf78d13<_0x3aa4c3['length'];_0xf78d13++){let [_0x2781d1,_0x24c9e4]=_0x3aa4c3[_0xf78d13];_0x13dbda[_0x358b9c[_0x2781d1][_0x24c9e4]]['onhotpath']=!![],_0xf78d13==_0x3aa4c3[_0x5eb867(0x2e1)]-0x1&&(_0x13dbda[_0x358b9c[_0x2781d1][_0x24c9e4]][_0x5eb867(0x3fd)]=!![],_0x56c0b2=_0x13dbda[_0x358b9c[_0x2781d1][_0x24c9e4]]),_0xf78d13==0x0&&(_0x13dbda[_0x358b9c[_0x2781d1][_0x24c9e4]][_0x5eb867(0x4b6)]=!![],_0x15b203=_0x13dbda[_0x358b9c[_0x2781d1][_0x24c9e4]]);}_0x5ea551(_0x56c0b2,0x0),_0x48b028(_0x56c0b2,0x0),_0x590a3d();let _0x372d58=_0x15b203[_0x5eb867(0x2a8)],_0x3e872a=Math[_0x5eb867(0x3de)](_0x372d58/0x2);for(let _0x5d66ce=0x0;_0x5d66ce<_0x13dbda[_0x5eb867(0x2e1)];_0x5d66ce++){let _0x13abf4=_0x13dbda[_0x5d66ce];if(_0x13abf4[_0x5eb867(0x2a8)]==_0x3e872a&&_0x13abf4[_0x5eb867(0x479)]==!![])_0x13abf4[_0x5eb867(0x313)]=!![];else Math[_0x5eb867(0x3cf)](_0x13abf4['depth']-_0x3e872a)==0x1&&_0x13abf4[_0x5eb867(0x479)]==!![]&&(_0x13abf4[_0x5eb867(0x346)]=!![]);_0x13abf4[_0x5eb867(0x2a8)]>_0x372d58*(0x3/0x4)&&_0x13abf4[_0x5eb867(0x479)]==!![]&&(_0x13abf4[_0x5eb867(0x4b4)]=!![]);}for(let _0x4e6392=0x0;_0x4e6392<_0x13dbda[_0x5eb867(0x2e1)];_0x4e6392++){let _0x1225a2=_0x13dbda[_0x4e6392];if(_0x1225a2[_0x5eb867(0x2a8)]%0x2==0x1)_0x1225a2[_0x5eb867(0x3f5)]=!![];_0x1225a2['dungeon']=Math[_0x5eb867(0x282)]()>0.8;if(_0x1225a2['halfboss']===!![])_0x1225a2[_0x5eb867(0x3f5)]=!![];if(_0x1225a2['halfbossbuffer']===!![])_0x1225a2[_0x5eb867(0x3f5)]=!![];if(_0x1225a2[_0x5eb867(0x3f5)]&&(Math[_0x5eb867(0x282)]()>0.5||_0x1225a2['depth']<_0x372d58/0x2))_0x1225a2[_0x5eb867(0x47d)]=!![];_0x1225a2[_0x5eb867(0x281)]=_0x1225a2[_0x5eb867(0x357)]>0x2&&_0x1225a2[_0x5eb867(0x43f)]==_0x1225a2['hotdepth'];if(_0x1225a2[_0x5eb867(0x3f5)]&&Math[_0x5eb867(0x282)]()>0.75)_0x1225a2[_0x5eb867(0x281)]=!![];_0x1225a2['updateneighbors'](),_0x1225a2['restructure'](),_0x1225a2[_0x5eb867(0x44a)]();}for(let _0x1fc620=0x0;_0x1fc620<_0x13dbda['length'];_0x1fc620++){let _0x50235c=_0x13dbda[_0x1fc620];_0x50235c['updateneighbors']();}function _0x5ea551(_0xae2248,_0x13ce61,_0x4eaa7b){const _0x3a8fdd=_0x5eb867;_0xae2248[_0x3a8fdd(0x2a8)]=_0x13ce61;for(let _0x164c1d=0x0;_0x164c1d<_0xae2248[_0x3a8fdd(0x221)][_0x3a8fdd(0x2e1)];_0x164c1d++){let _0x5addf5=_0x13dbda[_0xae2248[_0x3a8fdd(0x221)][_0x164c1d]];(_0x5addf5[_0x3a8fdd(0x2a8)]===undefined||_0x5addf5[_0x3a8fdd(0x2a8)]>_0x13ce61+0x1)&&_0x5ea551(_0x5addf5,_0x13ce61+0x1,_0xae2248);}}function _0x48b028(_0x137ec1,_0x242fda,_0x508966){const _0x2f934d=_0x5eb867;_0x137ec1[_0x2f934d(0x357)]=_0x242fda;_0x137ec1[_0x2f934d(0x479)]==!![]&&(_0x137ec1[_0x2f934d(0x357)]=0x0);for(let _0x14383f=0x0;_0x14383f<_0x137ec1[_0x2f934d(0x221)]['length'];_0x14383f++){let _0x2133eb=_0x13dbda[_0x137ec1['neighbors'][_0x14383f]];(_0x2133eb['hotdepth']===undefined||_0x2133eb['hotdepth']>_0x137ec1[_0x2f934d(0x357)]+0x1)&&_0x48b028(_0x2133eb,_0x137ec1[_0x2f934d(0x357)]+0x1,_0x137ec1);}}function _0x590a3d(){const _0x43cf3f=_0x5eb867;let _0x36b23a=!![],_0x1bee1d=0x0;while(_0x36b23a==!![]&&_0x1bee1d<0x64){_0x36b23a=![];for(let _0x181726=0x0;_0x181726<_0x13dbda['length'];_0x181726++){let _0x6c6518=_0x13dbda[_0x181726];_0x6c6518[_0x43cf3f(0x43f)]<_0x6c6518['hotdepth']&&(_0x6c6518[_0x43cf3f(0x43f)]=_0x6c6518[_0x43cf3f(0x357)],_0x36b23a=!![]);for(let _0x4bc03c=0x0;_0x4bc03c<_0x6c6518[_0x43cf3f(0x221)][_0x43cf3f(0x2e1)];_0x4bc03c++){let _0x50f63c=_0x13dbda[_0x6c6518[_0x43cf3f(0x221)][_0x4bc03c]];_0x50f63c[_0x43cf3f(0x43f)]<_0x6c6518[_0x43cf3f(0x43f)]&&_0x50f63c['maxhotdepth']!==0x0&&(_0x50f63c['maxhotdepth']=_0x6c6518[_0x43cf3f(0x43f)],_0x36b23a=!![]);}}_0x1bee1d++;}}function _0x3b9f44([_0x22bb87,_0x31f6d2],[_0x480ef0,_0x302b04],_0x2f5884){const _0x1e82a2=_0x5eb867;let [_0x2d9107,_0x137ec5]=[_0x480ef0,_0x302b04],_0x2a9e57=[];while(_0x2f5884[_0x2d9107][_0x137ec5]!==0x0){_0x2a9e57[_0x1e82a2(0x23c)]([_0x2d9107,_0x137ec5]);for(let _0x1df07b=0x0;_0x1df07b<0x4;_0x1df07b++){let [_0x3dda2a,_0x49a8df]=directions[_0x1df07b],[_0x2a2b9c,_0x220a5a]=[_0x2d9107+_0x3dda2a,_0x137ec5+_0x49a8df];if(_0x2f5884[_0x2a2b9c][_0x220a5a]!==null&&_0x2f5884[_0x2a2b9c][_0x220a5a]<_0x2f5884[_0x2d9107][_0x137ec5]){[_0x2d9107,_0x137ec5]=[_0x2a2b9c,_0x220a5a];break;}}}return _0x2a9e57;}function _0x2f27c1([_0x379faf,_0x218417],[_0x49bd90,_0x120dfc],_0x17dbab){const _0x106f0c=_0x5eb867;let _0x36ff4f=[],_0x4e9681=[[_0x49bd90,_0x120dfc]];while(_0x4e9681[_0x106f0c(0x2e1)]>0x0){let [_0x25343e,_0x495409]=_0x4e9681['shift']();_0x36ff4f[_0x106f0c(0x23c)]([_0x25343e,_0x495409]);for(let _0x579f76=0x0;_0x579f76<0x4;_0x579f76++){let [_0x3171bb,_0x18913a]=cardinaldirections[_0x579f76],[_0x1a283b,_0x7e4db1]=[_0x25343e+_0x3171bb,_0x495409+_0x18913a];_0x17dbab[_0x1a283b][_0x7e4db1]!==null&&_0x17dbab[_0x1a283b][_0x7e4db1]<_0x17dbab[_0x25343e][_0x495409]&&_0x4e9681[_0x106f0c(0x23c)]([_0x1a283b,_0x7e4db1]);}_0x17dbab[_0x25343e][_0x495409]=null;}return _0x36ff4f;}function _0x2a893b([_0x494443,_0x4d66f1],[_0x13d4c2,_0x509459],_0x394ce0,_0x39fcdf){const _0x51661e=_0x5eb867;let _0x169b3e=0x0,_0x39e29c=[];while(_0x39e29c[_0x51661e(0x2e1)]<_0x39fcdf){_0x39e29c=[];let _0x4b3afe=[[_0x13d4c2,_0x509459]],_0x45359d=[];for(let _0x4f21e8=0x0;_0x4f21e8<_0x394ce0[_0x51661e(0x2e1)];_0x4f21e8++){_0x45359d[_0x4f21e8]=[];for(let _0x269070=0x0;_0x269070<_0x394ce0[0x0][_0x51661e(0x2e1)];_0x269070++){_0x45359d[_0x4f21e8][_0x269070]=_0x394ce0[_0x4f21e8][_0x269070];}}while(_0x4b3afe['length']>0x0){let [_0x398bd0,_0x3e6db9]=_0x4b3afe[_0x51661e(0x2ed)]();_0x39e29c[_0x51661e(0x23c)]([_0x398bd0,_0x3e6db9]);for(let _0xc8626a=0x0;_0xc8626a<0x4;_0xc8626a++){let [_0x306175,_0x54b9dd]=cardinaldirections[_0xc8626a],[_0x51e176,_0x555d0a]=[_0x398bd0+_0x306175,_0x3e6db9+_0x54b9dd];_0x45359d[_0x51e176][_0x555d0a]!==null&&(_0x45359d[_0x51e176][_0x555d0a]<_0x45359d[_0x398bd0][_0x3e6db9]||Math[_0x51661e(0x282)]()<_0x169b3e)&&_0x4b3afe[_0x51661e(0x23c)]([_0x51e176,_0x555d0a]);}_0x45359d[_0x398bd0][_0x3e6db9]=null;}if(_0x169b3e<0.4)_0x169b3e+=0.1;else _0x169b3e+=0.01;}return _0x39e29c;}function _0x3690a0(_0x1e1d91,_0x339841){const _0x9b6dab=_0x5eb867;for(let _0x4e0c9e=0x0;_0x4e0c9e<_0x23594c;_0x4e0c9e++){_0x358b9c[_0x4e0c9e]=[];for(let _0x47af8f=0x0;_0x47af8f<_0x55424c;_0x47af8f++){_0x358b9c[_0x4e0c9e][_0x47af8f]=null;}}let _0xbea4ba=[..._0x1e1d91];while(_0xbea4ba['length']<=_0x339841){let _0x39f6a6=_0x543411(_0xbea4ba),_0x50c87c=_0x39f6a6[0x1];_0xbea4ba[_0x9b6dab(0x23c)](_0x50c87c);}let _0x8d4fee=[];for(let _0x23bce4=0x0;_0x23bce4<_0xbea4ba[_0x9b6dab(0x2e1)];_0x23bce4++){let [_0x3ee72e,_0xada63]=_0xbea4ba[_0x23bce4];_0x358b9c[_0x3ee72e][_0xada63]=_0x23bce4,_0x13dbda[_0x23bce4]=new _0x84001d(),_0x13dbda[_0x23bce4][_0x9b6dab(0x436)]=_0x43e14a,_0x13dbda[_0x23bce4]['tiles']=[[_0x3ee72e,_0xada63]],_0x8d4fee['push']([_0x3ee72e,_0xada63]);}let _0x560875=_0x8d4fee[_0x9b6dab(0x428)](),_0x47139a=[];while(_0x560875[_0x9b6dab(0x2e1)]>0x0){let [_0x4dcdbc,_0x42122f]=_0x560875['shift'](),_0x66f3f3=_0x358b9c[_0x4dcdbc][_0x42122f],_0x4bc6ee=_0xfc6da9(cardinaldirections);for(let _0x3a3312=0x0;_0x3a3312<0x4;_0x3a3312++){let [_0x327a50,_0x4a370b]=_0x4bc6ee[_0x3a3312],[_0x4266bd,_0x1e434c]=[_0x4dcdbc+_0x327a50,_0x42122f+_0x4a370b],_0x316156=_0x358b9c[_0x4266bd][_0x1e434c];_0x316156===null&&(_0x43e14a[_0x4266bd][_0x1e434c]!==0x0?(_0x358b9c[_0x4266bd][_0x1e434c]=_0x66f3f3,_0x13dbda[_0x66f3f3][_0x9b6dab(0x473)]['push']([_0x4266bd,_0x1e434c]),_0x560875[_0x9b6dab(0x23c)]([_0x4266bd,_0x1e434c])):(_0x358b9c[_0x4266bd][_0x1e434c]=_0x66f3f3,_0x13dbda[_0x66f3f3][_0x9b6dab(0x3a1)][_0x9b6dab(0x23c)]([_0x4266bd,_0x1e434c]),_0x47139a['push']([_0x4266bd,_0x1e434c])));if(_0x43e14a[_0x4266bd][_0x1e434c]!==0x0&&_0x358b9c[_0x4266bd][_0x1e434c]!==null&&_0x358b9c[_0x4266bd][_0x1e434c]!==_0x66f3f3){!_0x13dbda[_0x66f3f3][_0x9b6dab(0x330)]&&(_0x13dbda[_0x66f3f3][_0x9b6dab(0x330)]=[]);_0x13dbda[_0x66f3f3][_0x9b6dab(0x330)][_0x9b6dab(0x23c)]([_0x4dcdbc,_0x42122f]);if(!_0x13dbda[_0x66f3f3]['edges'])_0x13dbda[_0x66f3f3]['edges']={};if(!_0x13dbda[_0x66f3f3]['edges'][_0x316156])_0x13dbda[_0x66f3f3][_0x9b6dab(0x446)][_0x316156]=[];_0x13dbda[_0x66f3f3][_0x9b6dab(0x446)][_0x316156][_0x9b6dab(0x23c)]([_0x4dcdbc,_0x42122f]),!_0x13dbda[_0x66f3f3][_0x9b6dab(0x221)]&&(_0x13dbda[_0x66f3f3][_0x9b6dab(0x221)]=[]),!_0x13dbda[_0x66f3f3][_0x9b6dab(0x221)][_0x9b6dab(0x303)](_0x316156)&&(_0x13dbda[_0x66f3f3]['neighbors'][_0x9b6dab(0x23c)](_0x316156),_0x13dbda[_0x66f3f3][_0x9b6dab(0x339)][_0x9b6dab(0x23c)](_0x13dbda[_0x316156])),!_0x13dbda[_0x316156][_0x9b6dab(0x221)]['includes'](_0x66f3f3)&&(_0x13dbda[_0x316156]['neighbors']['push'](_0x66f3f3),_0x13dbda[_0x316156][_0x9b6dab(0x339)]['push'](_0x13dbda[_0x66f3f3]));}}}let _0x455598=_0x47139a[_0x9b6dab(0x428)]();while(_0x455598['length']>0x0){let [_0x4f2bf3,_0x84bca4]=_0x455598['shift'](),_0x104e05=_0x358b9c[_0x4f2bf3][_0x84bca4];for(let _0x4fab3a=0x0;_0x4fab3a<0x4;_0x4fab3a++){let [_0xfac75d,_0xe26719]=cardinaldirections[_0x4fab3a],[_0x317d87,_0x4dd4c2]=[_0x4f2bf3+_0xfac75d,_0x84bca4+_0xe26719];if(_0x358b9c[_0x317d87]===undefined||_0x358b9c[_0x317d87][_0x4dd4c2]===undefined)continue;if(_0x358b9c[_0x317d87][_0x4dd4c2]===_0x104e05||_0x358b9c[_0x317d87][_0x4dd4c2]!==null)continue;_0x358b9c[_0x317d87][_0x4dd4c2]=_0x104e05,_0x13dbda[_0x104e05]['walltiles']['push']([_0x317d87,_0x4dd4c2]),_0x13dbda[_0x104e05]['walltiles'][_0x9b6dab(0x2e1)]<_0x13dbda[_0x104e05][_0x9b6dab(0x473)]['length']&&_0x455598['push']([_0x317d87,_0x4dd4c2]);}}for(let _0x43da4b=0x0;_0x43da4b<_0x13dbda[_0x9b6dab(0x2e1)];_0x43da4b++){_0x13dbda[_0x43da4b][_0x9b6dab(0x425)]();}}function _0x543411(_0x4a3e21){const _0x2d6a8a=_0x5eb867;let _0xd7fe57=[];for(let _0x1e2802=0x0;_0x1e2802<_0x23594c;_0x1e2802++){_0xd7fe57[_0x1e2802]=[];for(let _0x57edfa=0x0;_0x57edfa<_0x55424c;_0x57edfa++){_0xd7fe57[_0x1e2802][_0x57edfa]=null;}}dtiles=_0x4a3e21['slice'](),steps=0x0;let [_0x5539c5,_0x36c1af]=[0x0,0x0],[_0x25267b,_0x4ddf1b]=[0x0,0x0],_0x2106c7=[];while(dtiles['length']>0x0){_0x2106c7=dtiles[_0x2d6a8a(0x428)](),dtiles=[];for(let _0x2b8406=0x0;_0x2b8406<_0x2106c7[_0x2d6a8a(0x2e1)];_0x2b8406++){[_0x25267b,_0x4ddf1b]=_0x2106c7[_0x2b8406];if(_0x43e14a[_0x25267b][_0x4ddf1b]!==0x0){if(_0xd7fe57[_0x25267b][_0x4ddf1b]===null){_0xd7fe57[_0x25267b][_0x4ddf1b]=steps;let _0x11c36d=_0xfc6da9(cardinaldirections);[_0x5539c5,_0x36c1af]=[_0x25267b,_0x4ddf1b];for(let _0x4ae8cd=0x0;_0x4ae8cd<0x4;_0x4ae8cd++){dtiles[_0x2d6a8a(0x23c)]([_0x25267b+_0x11c36d[_0x4ae8cd][0x0],_0x4ddf1b+_0x11c36d[_0x4ae8cd][0x1]]);}}}}steps++;}return[_0xd7fe57,[_0x5539c5,_0x36c1af]];}function _0xfc6da9(_0x47d066){const _0xc55c69=_0x5eb867;let _0x7a1e29=_0x47d066[_0xc55c69(0x2e1)],_0x2fbd29,_0x82e5e6=_0x47d066[_0xc55c69(0x428)]();while(_0x7a1e29>0x0){_0x2fbd29=Math[_0xc55c69(0x1f4)](Math[_0xc55c69(0x282)]()*_0x7a1e29),_0x7a1e29--,[_0x82e5e6[_0x7a1e29],_0x82e5e6[_0x2fbd29]]=[_0x82e5e6[_0x2fbd29],_0x82e5e6[_0x7a1e29]];}return _0x82e5e6;}return[_0x43e14a,_0x13dbda];}function perlinNoise(_0x496d8a,_0x482d29,_0x24a320){const _0x41946d=_0x1a99ef;let _0x223fa8={'rand_vect':function(){const _0x4f955e=_0x4a83;let _0x5ea9b9=Math[_0x4f955e(0x282)]()*0x2*Math['PI'];return{'x':Math[_0x4f955e(0x3a4)](_0x5ea9b9),'y':Math[_0x4f955e(0x296)](_0x5ea9b9)};},'dot_prod_grid':function(_0x131e1c,_0x229943,_0x1243ea,_0x3ab133){const _0x1248c3=_0x4a83;let _0x512dd2,_0x31d0f7={'x':_0x131e1c-_0x1243ea,'y':_0x229943-_0x3ab133};return this[_0x1248c3(0x2bb)][[_0x1243ea,_0x3ab133]]?_0x512dd2=this[_0x1248c3(0x2bb)][[_0x1243ea,_0x3ab133]]:(_0x512dd2=this[_0x1248c3(0x226)](),this[_0x1248c3(0x2bb)][[_0x1243ea,_0x3ab133]]=_0x512dd2),_0x31d0f7['x']*_0x512dd2['x']+_0x31d0f7['y']*_0x512dd2['y'];},'smootherstep':function(_0x2a11bf){return 0x6*_0x2a11bf**0x5-0xf*_0x2a11bf**0x4+0xa*_0x2a11bf**0x3;},'interp':function(_0x332fae,_0x4e2631,_0x5438bc){const _0x275ad8=_0x4a83;return _0x4e2631+this[_0x275ad8(0x4b9)](_0x332fae)*(_0x5438bc-_0x4e2631);},'seed':function(){const _0x5ac65c=_0x4a83;this[_0x5ac65c(0x2bb)]={};},'get':function(_0x3d6b45,_0x5950a7){const _0xe6c389=_0x4a83;let _0xb1e52c=Math[_0xe6c389(0x1f4)](_0x3d6b45),_0x4a5a2a=Math[_0xe6c389(0x1f4)](_0x5950a7),_0x2c9834=this[_0xe6c389(0x3b9)](_0x3d6b45,_0x5950a7,_0xb1e52c,_0x4a5a2a),_0x26d977=this[_0xe6c389(0x3b9)](_0x3d6b45,_0x5950a7,_0xb1e52c+0x1,_0x4a5a2a),_0x4eda9f=this['dot_prod_grid'](_0x3d6b45,_0x5950a7,_0xb1e52c,_0x4a5a2a+0x1),_0x136ad1=this[_0xe6c389(0x3b9)](_0x3d6b45,_0x5950a7,_0xb1e52c+0x1,_0x4a5a2a+0x1),_0x3749fb=this[_0xe6c389(0x1ff)](_0x3d6b45-_0xb1e52c,_0x2c9834,_0x26d977),_0x1043ee=this['interp'](_0x3d6b45-_0xb1e52c,_0x4eda9f,_0x136ad1),_0x2dbb20=this['interp'](_0x5950a7-_0x4a5a2a,_0x3749fb,_0x1043ee);return _0x2dbb20;}};const _0xe96b85=Math['random']();_0x223fa8[_0x41946d(0x4bd)](_0xe96b85);let _0x49ee2e=[];for(let _0x2ca389=0x0;_0x2ca389<_0x482d29;_0x2ca389++){_0x49ee2e[_0x2ca389]=[];for(let _0x3f4f91=0x0;_0x3f4f91<_0x496d8a;_0x3f4f91++){_0x49ee2e[_0x2ca389][_0x3f4f91]=_0x223fa8[_0x41946d(0x210)]((_0x2ca389+_0xe96b85)/_0x24a320,(_0x3f4f91+_0xe96b85)/_0x24a320);}}return _0x49ee2e;}gameText=document[_0x1a99ef(0x227)]('game-text'),canvas=document[_0x1a99ef(0x227)](_0x1a99ef(0x290));const ctx=canvas[_0x1a99ef(0x401)]('2d'),ratio=window['devicePixelRatio'];let width=window[_0x1a99ef(0x3be)],height=window[_0x1a99ef(0x487)];canvas[_0x1a99ef(0x320)]=width*ratio,canvas[_0x1a99ef(0x259)]=height*ratio,canvas['style'][_0x1a99ef(0x320)]=width+'px',canvas[_0x1a99ef(0x411)][_0x1a99ef(0x259)]=height+'px';const offscreen=document[_0x1a99ef(0x30a)](_0x1a99ef(0x33a)),offCtx=offscreen[_0x1a99ef(0x401)]('2d');canvas[_0x1a99ef(0x203)](_0x1a99ef(0x4b0),function(_0x3b6f31){const _0x225d08=_0x1a99ef;let _0x2da08e=getMousePos(canvas,_0x3b6f31),_0x1ed096=viewportpos[0x0]+Math[_0x225d08(0x1f4)](_0x2da08e[0x0]/fontsize)-viewportsizey/0x2,_0x2ea317=viewportpos[0x1]+Math[_0x225d08(0x1f4)](_0x2da08e[0x1]/fontsize)-viewportsizex/0x2;newpos=[_0x1ed096,_0x2ea317],(newpos[0x0]!==cursorpos[0x0]||newpos[0x1]!==cursorpos[0x1])&&(updatedsomething=!![],cursorpos[0x0]=newpos[0x0],cursorpos[0x1]=newpos[0x1]);});function getMousePos(_0x411e3e,_0x44f792){const _0x4c1946=_0x1a99ef;var _0x306bdd=_0x411e3e['getBoundingClientRect']();return[_0x44f792[_0x4c1946(0x470)]-_0x306bdd[_0x4c1946(0x211)],_0x44f792[_0x4c1946(0x395)]-_0x306bdd[_0x4c1946(0x4be)]];}canvas[_0x1a99ef(0x203)]('mousedown',_0x24972a=>{const _0x4b4d8d=_0x1a99ef;keyglossary=![];if(controllock==!![])return;if(_0x24972a[_0x4b4d8d(0x22e)]==0x0){if(_0x24972a[_0x4b4d8d(0x267)]){moveallplayers();return;}controllock==![]&&uilock==![]&&moveplayer();if(controllock==![]&&uilock==!![]&&uilocktype==_0x4b4d8d(0x1e9)){let _0x3fa501=playercs[activecharacter],_0xf6da4f=actions[_0x4b4d8d(0x493)];_0x3fa501[_0x4b4d8d(0x3a8)][_0x4b4d8d(0x23c)](new Attack(..._0xf6da4f,_0x3fa501[_0x4b4d8d(0x398)](),cursorpos,_0x3fa501,_0x3fa501[_0x4b4d8d(0x295)])),canAffordAction(_0x3fa501['actionqueue'][0x0],_0x3fa501)&&playertick(_0x3fa501),uilock=![];}if(controllock==![]&&uilock==!![]&&uilocktype==_0x4b4d8d(0x43a)){const _0x3576b7=activecharacternonindex,_0xef3ce1=Math[_0x4b4d8d(0x4bb)](_0x3576b7[_0x4b4d8d(0x265)][0x0]+0.5,0x2),_0x4be66e=new Jump(_0xef3ce1,cursorpos,_0x3576b7,_0x3576b7[_0x4b4d8d(0x295)]);_0x3576b7['actionqueue'][_0x4b4d8d(0x23c)](_0x4be66e),canAffordAction(_0x3576b7[_0x4b4d8d(0x3a8)][0x0],_0x3576b7)&&playertick(_0x3576b7),uilock=![];}if(controllock==![]&&uilock==!![]&&uilocktype==_0x4b4d8d(0x26d)){const _0xa2d5b4=activecharacternonindex,_0x399f5b=new Kick(cursorpos,_0xa2d5b4,_0xa2d5b4[_0x4b4d8d(0x295)]);_0xa2d5b4[_0x4b4d8d(0x3a8)][_0x4b4d8d(0x23c)](_0x399f5b),canAffordAction(_0xa2d5b4['actionqueue'][0x0],_0xa2d5b4)&&playertick(_0xa2d5b4),uilock=![];}}}),document[_0x1a99ef(0x203)](_0x1a99ef(0x4ad),function(_0x3e7082){const _0x3c698b=_0x1a99ef;if(_0x3e7082[_0x3c698b(0x32f)])return;const _0x186d4d=activecharacternonindex;if(controllock==!![]){activecharacternonindex['pc']==!![]&&(activecharacternonindex[_0x3c698b(0x3a8)]=[],bufferedinputs=[]);return;}if(_0x3e7082['code']==='Space'||_0x3e7082[_0x3c698b(0x2a4)]==='\x20'){if(_0x3e7082[_0x3c698b(0x267)]&&controllock==![])while(controllock==![]){playerendturn();}else controllock==![]&&playerendturn();}_0x3e7082[_0x3c698b(0x2a4)]=='Control'&&(ctrl=!![]);_0x3e7082['key']=='m'&&(uilock==![]?(uilock=!![],uilocktype=_0x3c698b(0x4a9),updatedsomething=!![]):(uilock=![],updatedsomething=!![]));if(_0x3e7082[_0x3c698b(0x2a4)]=='o'){if(uilock)uilock=![];controllock==![]&&uilock==![]&&(_0x186d4d['tc'][0x1]>=0x1&&(_0x186d4d[_0x3c698b(0x3a8)]=[],_0x186d4d[_0x3c698b(0x3a8)][_0x3c698b(0x23c)](new action(_0x3c698b(0x21c),startoverwatch,[0x0,0x1,0x0],0x0,_0x186d4d['pos'],_0x186d4d,_0x186d4d[_0x3c698b(0x295)])),move(_0x186d4d)));}_0x3e7082['key']=='j'&&(r=playercs[activecharacter],_0x186d4d['tc'][0x1]>=0x1&&(uilock==![]?(uilock=!![],updatedsomething=!![]):(uilock=![],updatedsomething=!![])),uilocktype='jump');_0x3e7082[_0x3c698b(0x2a4)]=='k'&&(r=playercs[activecharacter],_0x186d4d['tc'][0x1]>=0x1&&(uilock==![]?(uilock=!![],updatedsomething=!![]):(uilock=![],updatedsomething=!![])),uilocktype=_0x3c698b(0x26d));_0x3e7082[_0x3c698b(0x2a4)]==='d'&&(controllock==![]&&(_0x186d4d['tc'][0x1]>=0x1&&(_0x186d4d[_0x3c698b(0x3a8)][_0x3c698b(0x23c)](new action(_0x3c698b(0x3ea),dashfunc,[0x0,0x1,0x0],0x0,_0x186d4d[_0x3c698b(0x295)],_0x186d4d,_0x186d4d[_0x3c698b(0x295)])),playertick(_0x186d4d))));_0x3e7082[_0x3c698b(0x2a4)]==='s'&&(controllock==![]&&(_0x186d4d['tc'][0x0]>=_0x186d4d[_0x3c698b(0x435)][0x0]&&(_0x186d4d[_0x3c698b(0x3a8)][_0x3c698b(0x23c)](new action('Stand\x20Ground',standgroundfunc,[_0x186d4d['tcmax'][0x0],0x0,0x0],0x0,_0x186d4d[_0x3c698b(0x295)],_0x186d4d,_0x186d4d[_0x3c698b(0x295)])),playertick(_0x186d4d))));_0x3e7082[_0x3c698b(0x2a4)]==='<'&&xstep<0x2&&(xstep+=0.5,ystep+=0.5,updatemap());_0x3e7082[_0x3c698b(0x2a4)]==='>'&&xstep>0x1&&(xstep-=0.5,ystep-=0.5,updatemap());_0x3e7082['key']==='ArrowLeft'&&viewfinderpos[0x1]>0x1&&(viewfinderpos[0x1]-=Math[_0x3c698b(0x3de)](xstep),updatemap());_0x3e7082[_0x3c698b(0x2a4)]===_0x3c698b(0x2cd)&&viewfinderpos[0x1]<mapsizex&&(viewfinderpos[0x1]+=Math[_0x3c698b(0x3de)](xstep),updatemap());_0x3e7082['key']===_0x3c698b(0x249)&&viewfinderpos[0x0]>0x1&&(viewfinderpos[0x0]-=Math[_0x3c698b(0x3de)](ystep),updatemap());_0x3e7082[_0x3c698b(0x2a4)]===_0x3c698b(0x319)&&viewfinderpos[0x0]<mapsizey&&(viewfinderpos[0x0]+=Math[_0x3c698b(0x3de)](ystep),updatemap());if(_0x3e7082[_0x3c698b(0x2a4)]==='a'){if(controllock==![]){const _0x4d6ea6=playercs[activecharacter];_0x4d6ea6['tc'][0x1]>=0x1&&(uilock==![]?(uilock=!![],updatedsomething=!![]):(uilock=![],updatedsomething=!![])),uilocktype=_0x3c698b(0x1e9);}}if(_0x3e7082[_0x3c698b(0x2a4)]==='D'){autodash=!autodash;if(autodash)adduilabel(_0x3c698b(0x48e),activecharacternonindex[_0x3c698b(0x295)],[0x80,0x80,0x80],0x0,!![]);else adduilabel(_0x3c698b(0x33d),activecharacternonindex['pos'],[0x80,0x80,0x80],0x0,!![]);}if(_0x3e7082[_0x3c698b(0x2a4)]==='S'){autosg=!autosg;if(autosg)adduilabel(_0x3c698b(0x3a0),activecharacternonindex[_0x3c698b(0x295)],[0x80,0x80,0x80],0x0,!![]);else adduilabel(_0x3c698b(0x25f),activecharacternonindex['pos'],[0x80,0x80,0x80],0x0,!![]);}if(_0x3e7082[_0x3c698b(0x2a4)]==='A'){autoadv=!autoadv;if(autoadv)adduilabel(_0x3c698b(0x323),activecharacternonindex[_0x3c698b(0x295)],[0x80,0x80,0x80],0x0,!![]);else adduilabel(_0x3c698b(0x2d6),activecharacternonindex[_0x3c698b(0x295)],[0x80,0x80,0x80],0x0,!![]);}if(_0x3e7082[_0x3c698b(0x2a4)]==='x'){if(controllock===![]){const _0x52d442=playercs[activecharacter],_0x81cdf9=new action(...actions['SwitchWeapon'],0x0,_0x52d442[_0x3c698b(0x295)],_0x52d442,_0x52d442[_0x3c698b(0x295)]);_0x52d442[_0x3c698b(0x3a8)]['push'](_0x81cdf9),playertick();}}if(_0x3e7082[_0x3c698b(0x2a4)]==='X'){if(controllock===![]){const _0x355e4e=playercs[activecharacter];let _0x208c34=[0x0,0x0,0x0];if(_0x355e4e['primaryitem'][_0x3c698b(0x41d)]!==_0x3c698b(0x2d9))_0x208c34=[0x0,0x1,0x0];const _0x14ee6d=new action(_0x3c698b(0x42b),switchweaponalt,_0x208c34,0x0,_0x355e4e[_0x3c698b(0x295)],_0x355e4e,_0x355e4e[_0x3c698b(0x295)]);_0x355e4e['actionqueue'][_0x3c698b(0x23c)](_0x14ee6d),playertick();}}if(_0x3e7082[_0x3c698b(0x2a4)]==='g'){if(controllock===![]&&uilock===![]){const _0x657ae4=playercs[activecharacter];newgrid[_0x657ae4[_0x3c698b(0x295)][0x0]][_0x657ae4[_0x3c698b(0x295)][0x1]][_0x3c698b(0x312)]['length']>0x0&&newgrid[_0x657ae4[_0x3c698b(0x295)][0x0]][_0x657ae4[_0x3c698b(0x295)][0x1]][_0x3c698b(0x312)][0x0]instanceof Item&&(_0x657ae4[_0x3c698b(0x3a8)][_0x3c698b(0x23c)](new action('Get',getfunc,[0x0,0x0,0x0],0x0,_0x657ae4['pos'],_0x657ae4,_0x657ae4[_0x3c698b(0x295)])),playertick());}}if(_0x3e7082[_0x3c698b(0x2a4)]==='l'){if(controllock===![]&&uilock===![]){const _0x5e8f28=playercs[activecharacter];_0x5e8f28[_0x3c698b(0x3a8)][_0x3c698b(0x23c)](new action(_0x3c698b(0x3cc),leavefunc,[0x0,0x0,0x0],0x0,_0x5e8f28[_0x3c698b(0x295)],_0x5e8f28,_0x5e8f28[_0x3c698b(0x295)])),playertick();}}if(_0x3e7082[_0x3c698b(0x2a4)]==='L'){if(controllock===![]&&uilock===![]){const _0x19fefa=playercs[activecharacter];_0x19fefa[_0x3c698b(0x3a8)][_0x3c698b(0x23c)](new action(_0x3c698b(0x3cc),leavefuncoffhand,[0x0,0x0,0x0],0x0,_0x19fefa[_0x3c698b(0x295)],_0x19fefa,_0x19fefa[_0x3c698b(0x295)])),playertick();}}_0x3e7082[_0x3c698b(0x2a4)]==='+'&&brightnessadjust<5.1&&(brightnessadjust+=0.1,console[_0x3c698b(0x2b1)](brightnessadjust),updatedsomething=!![]);_0x3e7082['key']==='-'&&brightnessadjust>0.4&&(brightnessadjust-=0.1,console[_0x3c698b(0x2b1)](brightnessadjust),updatedsomething=!![]);if(_0x3e7082[_0x3c698b(0x2a4)]==='?')keyglossary=!keyglossary,updatedsomething=!![];else _0x3e7082[_0x3c698b(0x2a4)]!=_0x3c698b(0x25a)&&(keyglossary=![],updatedsomething=!![]);if(!isNaN(_0x3e7082[_0x3c698b(0x2a4)])){const _0x46293f=_0x3e7082[_0x3c698b(0x2a4)]-0x1;_0x46293f>-0x1&&playercs['length']>0x0&&playercs[_0x3c698b(0x2e1)]>_0x46293f&&(playercs[_0x46293f]&&playercs[_0x46293f]['dead']==![]&&(uilock=![],activecharacter=_0x46293f,activecharacternonindex=playercs[_0x46293f]));}}),document['addEventListener'](_0x1a99ef(0x230),function(_0x2093c5){const _0x32ff56=_0x1a99ef;_0x2093c5[_0x32ff56(0x2a4)]=='Control'&&(ctrl=![]);});let viewportpos=[0x32,0x32],gameover=![],won=![],deathcharacter=null,cursorpos=[0x0,0x0],keyglossary=![],itemmap=[],grid,newgrid=[],noisemap=new Array(mapsizey)[_0x1a99ef(0x4a1)](null)[_0x1a99ef(0x4a9)](()=>new Array(mapsizex)[_0x1a99ef(0x4a1)](0x1)),animationelements=[],nonpcshere=[],objectshere=[],envobjects=[],playercs=[],nonpcs=[],turncounter=0x0,activecharacter=0x0,activecharacternonindex=null,tickcounter=0x0,ctrl=![],autodash=![],autosg=![],autoadv=![],bufferedinputs=[],controllock=![],uilock=![],uilocktype=_0x1a99ef(0x1e9),showdetails=!![],map=[],xstep=0x2,ystep=0x2,viewfinderpos=[0x0,0x0],tutorial=![],verbose=!![],lightsources=[],messageQueue=[],isProcessing=![];gridinit();function gridinit(){const _0x32ea4a=_0x1a99ef;for(let _0x179558=0x0;_0x179558<mapsizey;_0x179558++){newgrid[_0x179558]=[];for(let _0x4b7611=0x0;_0x4b7611<mapsizex;_0x4b7611++){newgrid[_0x179558][_0x4b7611]=0x0;}}envobjects=[],score=0x0;for(let _0x21fce3=0x0;_0x21fce3<mapsizey;_0x21fce3++){for(let _0x3425f3=0x0;_0x3425f3<mapsizex;_0x3425f3++){if(!newgrid[_0x21fce3][_0x3425f3])newgrid[_0x21fce3][_0x3425f3]=new Tile(...tiletypesarr[0x3],[_0x21fce3,_0x3425f3]);if(tutorial)newgrid[_0x21fce3][_0x3425f3]=new Tile(...tiletypesarr[0x2],[_0x21fce3,_0x3425f3]);}}generate(),updatecharacters();for(let _0x3a2258=0x0;_0x3a2258<mapsizey;_0x3a2258++){for(let _0x54c38c=0x0;_0x54c38c<mapsizex;_0x54c38c++){}}const [_0x5d7dd3,_0x18cbaa]=[mapsizey/0x2,mapsizex/0x2];elevupdate(),updateGrid(),updatecharactershere(),updateGrid(),drawGrid(!![]),nonpcs[_0x32ea4a(0x348)](function(_0x44ac89){spot(_0x44ac89);}),updatemap();}function updatemap(){const _0x23a3d6=_0x1a99ef;for(let _0x14ad5a=0x0;_0x14ad5a<viewportsizey;_0x14ad5a++){map[_0x14ad5a]=[];for(let _0x1ed986=0x0;_0x1ed986<viewportsizex;_0x1ed986++){map[_0x14ad5a][_0x1ed986]=[0x0,0x0,0x0];let _0x46b51b=![],_0xc9a7dd=![],_0x57d53f=[0x0,0x0,0x0],_0x49e690=[],_0x51e1ea=![],_0x391c3a='',_0xb02fa2=[0x0,0x0,0x0];for(let _0x3874d8=0x0;_0x3874d8<ystep;_0x3874d8++){for(let _0x5b4fbd=0x0;_0x5b4fbd<xstep;_0x5b4fbd++){let [_0x141f80,_0x16ff71]=[viewfinderpos[0x0]-ystep*viewportsizey/0x2,viewfinderpos[0x1]-xstep*viewportsizex/0x2],[_0x240df6,_0x12f368]=[_0x141f80+_0x14ad5a*ystep+_0x3874d8,_0x16ff71+_0x1ed986*xstep+_0x5b4fbd];[_0x240df6,_0x12f368]=[Math[_0x23a3d6(0x1f4)](_0x240df6),Math[_0x23a3d6(0x1f4)](_0x12f368)];if(!newgrid[_0x240df6]||!newgrid[_0x240df6][_0x12f368])continue;if(!newgrid[_0x240df6][_0x12f368]['seen'])continue;if(newgrid[_0x240df6][_0x12f368][_0x23a3d6(0x3b2)]==!![]){_0x46b51b=!![],_0x49e690['push'](newgrid[_0x240df6][_0x12f368][_0x23a3d6(0x481)][_0x23a3d6(0x428)]()),_0x391c3a=newgrid[_0x240df6][_0x12f368][_0x23a3d6(0x3b5)];if(newgrid[_0x240df6][_0x12f368][_0x23a3d6(0x3ec)]&&newgrid[_0x240df6][_0x12f368][_0x23a3d6(0x3ec)]['pc']==!![]){}}else{let _0x3a8d7c=newgrid[_0x240df6][_0x12f368][_0x23a3d6(0x481)][_0x23a3d6(0x428)]();for(let _0x4c1d8a=0x0;_0x4c1d8a<0x3;_0x4c1d8a++){_0x3a8d7c[_0x4c1d8a]=_0x3a8d7c[_0x4c1d8a]/0x2;}_0x49e690['push'](_0x3a8d7c);}}}for(let _0x55d105=0x0;_0x55d105<_0x49e690[_0x23a3d6(0x2e1)];_0x55d105++){for(let _0x334561=0x0;_0x334561<0x3;_0x334561++){_0x57d53f[_0x334561]+=_0x49e690[_0x55d105][_0x334561]/(_0x49e690[_0x23a3d6(0x2e1)]*0x2);}}_0x57d53f[0x0]*=0.9,_0x57d53f[0x1]*=0.7,_0x57d53f[0x2]*=0.5;if(_0x46b51b)map[_0x14ad5a][_0x1ed986]=_0x57d53f[_0x23a3d6(0x428)]();else _0x51e1ea&&(map[_0x14ad5a][_0x1ed986]=_0x57d53f[_0x23a3d6(0x428)]());}}}function elevupdate(){const _0x5b49a5=_0x1a99ef;for(let _0x5889eb=0x0;_0x5889eb<mapsizey;_0x5889eb++){for(let _0x67e028=0x0;_0x67e028<mapsizex;_0x67e028++){if(!newgrid[_0x5889eb][_0x67e028][_0x5b49a5(0x3b2)])continue;const _0x4ab3c7=[_0x5889eb,_0x67e028],_0x590369=[],_0x2dd9e8=[],_0x2302a7=[],_0x418b1c=[];cardinaldirections[_0x5b49a5(0x348)](function(_0x356719){const _0x194a79=_0x5b49a5,[_0x5c364b,_0x4c6778]=_0x356719['map']((_0x52e1cf,_0x1b6d15)=>_0x52e1cf+_0x4ab3c7[_0x1b6d15]);newgrid[_0x5c364b]&&newgrid[_0x5c364b][_0x4c6778]&&(newgrid[_0x5c364b][_0x4c6778]['traversable']&&(newgrid[_0x5889eb][_0x67e028][_0x194a79(0x439)]-newgrid[_0x5c364b][_0x4c6778][_0x194a79(0x439)]<=-0x2&&(_0x590369[_0x194a79(0x23c)](_0x5c364b),_0x2dd9e8[_0x194a79(0x23c)](_0x4c6778))));}),directions[_0x5b49a5(0x348)](function(_0x1ac029){const _0x57cf9a=_0x5b49a5,[_0x1f5c14,_0x4e27ac]=_0x1ac029['map']((_0x208d70,_0x4ab762)=>_0x208d70+_0x4ab3c7[_0x4ab762]);newgrid[_0x1f5c14]&&newgrid[_0x1f5c14][_0x4e27ac]&&(newgrid[_0x1f5c14][_0x4e27ac][_0x57cf9a(0x3b2)]&&(newgrid[_0x5889eb][_0x67e028][_0x57cf9a(0x439)]-newgrid[_0x1f5c14][_0x4e27ac][_0x57cf9a(0x439)]<=-0x2&&(_0x2302a7['push'](_0x1f5c14),_0x418b1c['push'](_0x4e27ac))));});if(_0x590369['length']>0x0){if(newgrid[_0x5889eb][_0x67e028]['ramp']==!![])break;let _0x3982cc=[takeav(_0x2302a7),takeav(_0x418b1c)];newgrid[_0x5889eb][_0x67e028][_0x5b49a5(0x3b2)]=![],newgrid[_0x5889eb][_0x67e028][_0x5b49a5(0x4c5)]=!![],newgrid[_0x5889eb][_0x67e028][_0x5b49a5(0x3b5)]=linecharacter([_0x5889eb,_0x67e028],_0x3982cc),newgrid[_0x5889eb][_0x67e028][_0x5b49a5(0x3f8)]=[Math[_0x5b49a5(0x3de)](Math['abs'](_0x3982cc[0x0]-_0x5889eb))*Math[_0x5b49a5(0x279)](_0x3982cc[0x0]-_0x5889eb),Math[_0x5b49a5(0x3de)](Math[_0x5b49a5(0x3cf)](_0x3982cc[0x1]-_0x67e028))*Math[_0x5b49a5(0x279)](_0x3982cc[0x1]-_0x67e028)];}}}for(let _0x3f436a=0x0;_0x3f436a<mapsizey;_0x3f436a++){for(let _0x3445af=0x0;_0x3445af<mapsizex;_0x3445af++){const _0xf89aa5=newgrid[_0x3f436a][_0x3445af],_0x1eb98d=_0xf89aa5[_0x5b49a5(0x439)];let _0x376ce9=[],_0x477297=[];cardinaldirections[_0x5b49a5(0x348)](function(_0x4018cb){const _0x51d1fc=_0x5b49a5,[_0x4e113d,_0x3250fa]=_0x4018cb[_0x51d1fc(0x4a9)]((_0x53fa6e,_0x472a8c)=>_0x53fa6e+[_0x3f436a,_0x3445af][_0x472a8c]);if(newgrid[_0x4e113d]&&newgrid[_0x4e113d][_0x3250fa]){if(newgrid[_0x4e113d][_0x3250fa][_0x51d1fc(0x439)]==_0x1eb98d-0x1)_0x376ce9[_0x51d1fc(0x23c)]([_0x4e113d,_0x3250fa]);if(newgrid[_0x4e113d][_0x3250fa]['elevation']==_0x1eb98d+0x1)_0x477297['push']([_0x4e113d,_0x3250fa]);}});if(_0x477297['length']>0x0&&_0x376ce9[_0x5b49a5(0x2e1)]>0x0){let _0x35e515=![];newgrid[_0x3f436a][_0x3445af][_0x5b49a5(0x3b2)]&&(newgrid[_0x3f436a][_0x3445af]['ramp']=!![],_0x477297[_0x5b49a5(0x348)](function([_0x1f83cc,_0x462280]){const _0x2f5fd2=_0x5b49a5;_0x376ce9[_0x2f5fd2(0x348)](function([_0x2b3730,_0x38ec17]){const _0x5464b8=_0x2f5fd2;let _0x8670aa=_0x1f83cc-_0x2b3730,_0xf07b61=_0x462280-_0x38ec17;_0x8670aa==0x2&&_0xf07b61==0x0&&(newgrid[_0x3f436a][_0x3445af][_0x5464b8(0x3b2)]=!![],newgrid[_0x3f436a][_0x3445af]['symbolBase']=_0x5464b8(0x434),_0x35e515=!![]),_0x8670aa==-0x2&&_0xf07b61==0x0&&(newgrid[_0x3f436a][_0x3445af]['traversable']=!![],newgrid[_0x3f436a][_0x3445af][_0x5464b8(0x3b5)]=_0x5464b8(0x2c0),_0x35e515=!![]),_0xf07b61==0x2&&_0x8670aa==0x0&&(newgrid[_0x3f436a][_0x3445af][_0x5464b8(0x3b2)]=!![],newgrid[_0x3f436a][_0x3445af]['symbolBase']=_0x5464b8(0x3d2),_0x35e515=!![]),_0xf07b61==-0x2&&_0x8670aa==0x0&&(newgrid[_0x3f436a][_0x3445af][_0x5464b8(0x3b2)]=!![],newgrid[_0x3f436a][_0x3445af][_0x5464b8(0x3b5)]=_0x5464b8(0x2cc),_0x35e515=!![]);});}),_0x35e515==![]&&(newgrid[_0x3f436a][_0x3445af][_0x5b49a5(0x3b2)]=!![],newgrid[_0x3f436a][_0x3445af][_0x5b49a5(0x3b5)]='*'));}}}}function alinedraw(_0x4e2ce9,_0x597b1f,_0x274fa3){const _0x2114ae=_0x1a99ef;if(!playercs[activecharacter])return;if(!_0x4e2ce9||_0x4e2ce9[_0x2114ae(0x2e1)]==0x0)return;const _0x42f68c=translateAStoAQ(_0x4e2ce9,_0x274fa3);let _0x120a3f=_0x274fa3['tc']['slice'](),_0x1cc3c1=_0x274fa3[_0x2114ae(0x295)],_0x3e98a0=![];for(let _0x3cd178=0x0;_0x3cd178<_0x42f68c[_0x2114ae(0x2e1)];_0x3cd178++){const [_0x4a5609,_0x1f8711]=_0x42f68c[_0x3cd178][_0x2114ae(0x310)];_0x3cd178>0x0&&(_0x1cc3c1=_0x42f68c[_0x3cd178-0x1][_0x2114ae(0x310)]);_0x120a3f[0x0]-_0x42f68c[_0x3cd178][_0x2114ae(0x302)][0x0]<0x0&&_0x120a3f[0x1]>0x0&&autodash==!![]&&(_0x120a3f[0x0]+=_0x274fa3[_0x2114ae(0x435)][0x0],_0x120a3f[0x1]-=0x1,_0x3e98a0=!![]);if(_0x120a3f[0x0]>=_0x42f68c[_0x3cd178]['cost'][0x0]&&_0x120a3f[0x1]>=_0x42f68c[_0x3cd178]['cost'][0x1]){if(_0x42f68c[_0x3cd178][_0x2114ae(0x41d)]==_0x2114ae(0x360)){cost=_0x42f68c[_0x3cd178][_0x2114ae(0x302)][0x0];let _0x4b578c=[0.25*cost**0x2,0.25,0.25];_0x3e98a0==!![]&&(_0x4b578c[0x0]=_0x4b578c[0x0],_0x4b578c[0x1]=_0x4b578c[0x1],_0x4b578c[0x2]=_0x4b578c[0x2]/0x2),newgrid[_0x4a5609][_0x1f8711]['uiElements']['push'](new uielement('',_0x4b578c,[_0x4a5609,_0x1f8711]));}if(_0x42f68c[_0x3cd178][_0x2114ae(0x41d)]==_0x2114ae(0x493)){const _0x14464e=bresenhamLine(_0x1cc3c1,_0x42f68c[_0x3cd178]['target']);let _0x3a2a70=linecharacter(_0x1cc3c1,_0x42f68c[_0x3cd178]['target']);for(let _0x23145f=0x1;_0x23145f<_0x14464e[_0x2114ae(0x2e1)];_0x23145f++){const [_0x591fc2,_0x50fa9c]=_0x14464e[_0x23145f];if(_0x23145f==_0x14464e[_0x2114ae(0x2e1)]-0x1)_0x3a2a70='x';newgrid[_0x591fc2][_0x50fa9c][_0x2114ae(0x3f9)][_0x2114ae(0x23c)](new uielement(_0x3a2a70,[0x1,0x1,0x1],[_0x591fc2,_0x50fa9c]));}}let _0x3b4cdf=Math['sin'](now/0x64)*0x20+0x60;if(_0x42f68c[_0x3cd178][_0x2114ae(0x3b8)][_0x2114ae(0x2e1)]!==0x0)adduilabel(_0x42f68c[_0x3cd178][_0x2114ae(0x3b8)][0x0],_0x42f68c[_0x3cd178]['pos'],[_0x3b4cdf,0x0,0x0],0x1,![],![]);_0x120a3f=_0x120a3f[_0x2114ae(0x4a9)]((_0x224d18,_0x96a678)=>_0x224d18-_0x42f68c[_0x3cd178][_0x2114ae(0x302)][_0x96a678]);}else return _0x120a3f;if(_0x3cd178==_0x42f68c[_0x2114ae(0x2e1)]-0x1)return _0x120a3f;}}function addanimation(_0x16f233,_0x347dbc,_0x16fb2e,_0x265706=0.5,_0x66e3f3=!![],_0x1ee549=![],_0x323dd7=0x0){const _0x5c5cef=_0x1a99ef;let _0x73a99f=_0x16f233[_0x5c5cef(0x2e1)];for(let _0x18a3ba=0x0;_0x18a3ba<_0x73a99f;_0x18a3ba++){const [_0x517089,_0x3c3eb7]=_0x16f233[_0x18a3ba];if(!newgrid[_0x517089]||!newgrid[_0x517089][_0x3c3eb7])continue;let _0x16857b=_0x347dbc[_0x18a3ba%_0x347dbc[_0x5c5cef(0x2e1)]];(newgrid[_0x517089][_0x3c3eb7][_0x5c5cef(0x2de)]==!![]||_0x1ee549==!![])&&newgrid[_0x517089][_0x3c3eb7][_0x5c5cef(0x3f9)][_0x5c5cef(0x23c)](new uielement(_0x16857b,_0x16fb2e,_0x16f233[_0x18a3ba],_0x66e3f3,_0x1ee549,[now+_0x323dd7+_0x265706*0x3e8,now+_0x323dd7]));}updatedsomething=!![];}updateGrid();function noiseupdate(){const _0x28f678=_0x1a99ef;if(procgendebug)return;let _0x38a863=viewportpos[0x1]-Math[_0x28f678(0x1f4)](viewportsizex/0x2),_0x5a2216=viewportpos[0x0]-Math[_0x28f678(0x1f4)](viewportsizey/0x2),_0x4e92cc=viewportpos[0x1]+Math[_0x28f678(0x1f4)](viewportsizex/0x2),_0x5d1304=viewportpos[0x0]+Math[_0x28f678(0x1f4)](viewportsizey/0x2);_0x5a2216<0x0&&(_0x5a2216=0x0,_0x5d1304=viewportsizey);_0x5d1304>mapsizey&&(_0x5d1304=mapsizey,_0x5a2216=mapsizey-viewportsizey);_0x38a863<0x0&&(_0x38a863=0x0,_0x4e92cc=viewportsizex);_0x4e92cc>mapsizex&&(_0x4e92cc=mapsizex,_0x38a863=mapsizex-viewportsizex);let _0x17282e=![];for(let _0x24fba1=_0x5a2216;_0x24fba1<_0x5d1304;_0x24fba1++){for(let _0x16ffaa=_0x38a863;_0x16ffaa<_0x4e92cc;_0x16ffaa++){if(newgrid[_0x24fba1][_0x16ffaa][_0x28f678(0x2de)]!==![]){let _0x25561a=takeav(newgrid[_0x24fba1][_0x16ffaa][_0x28f678(0x2ba)])/0x100;const _0x32065c=newgrid[_0x24fba1][_0x16ffaa]['readLightsource']();if(Math[_0x28f678(0x282)]()>noisethreshold+_0x25561a**0.05*0.5){let _0x139796=0x1-noiseamount+Math[_0x28f678(0x282)]()*noiseamount*0x2;noisemap[_0x24fba1][_0x16ffaa]=_0x139796;}_0x32065c[_0x28f678(0x348)](function(_0x222f44){const _0x3d7ca3=_0x28f678;if(_0x222f44&&(Math[_0x3d7ca3(0x282)]()>lightflickerthreshhold||_0x222f44[_0x3d7ca3(0x3cb)]==0x1&&Math[_0x3d7ca3(0x282)]()>noisethreshold)){_0x17282e=!![];let _0x310c2b=0x1-noiseamount+Math[_0x3d7ca3(0x282)]()*noiseamount*0x2;noisemap[_0x24fba1][_0x16ffaa]=_0x310c2b;}});}}}if(_0x17282e)updatedlighting=!![];else updatedsomething=!![];updateambientsound();}function updateGrid(){if(gameover)return;let _0x2c0512=_0x3975f9();_0x2c0512&&dist(_0x2c0512,viewportpos)>0x2&&(viewportpos[0x0]=_0x2c0512[0x0],viewportpos[0x1]=_0x2c0512[0x1],viewportpos[0x0]-viewportsizey/0x2<0x0&&(viewportpos[0x0]=viewportsizey/0x2),viewportpos[0x1]-viewportsizex/0x2<0x0&&(viewportpos[0x1]=viewportsizex/0x2),viewportpos[0x0]+viewportsizey/0x2>mapsizey&&(viewportpos[0x0]=mapsizey-viewportsizey/0x2),viewportpos[0x1]+viewportsizex/0x2>mapsizex&&(viewportpos[0x1]=mapsizex-viewportsizex/0x2));viewfinderpos=viewportpos['slice'](),updatemap();function _0x3975f9(){const _0x2a83f2=_0x4a83;let _0x2fd204=[],_0x35d329=[],_0x25c582=[];for(let _0x18b385=0x0;_0x18b385<playercs[_0x2a83f2(0x2e1)];_0x18b385++){if(playercs[_0x18b385][_0x2a83f2(0x304)]==![]){_0x35d329[_0x2a83f2(0x23c)](playercs[_0x18b385]['pos'][0x0]),_0x25c582[_0x2a83f2(0x23c)](playercs[_0x18b385]['pos'][0x1]);break;}}if(_0x35d329[_0x2a83f2(0x2e1)]==0x0)return;return _0x2fd204=[Math[_0x2a83f2(0x37a)](takeav(_0x35d329)),Math[_0x2a83f2(0x37a)](takeav(_0x25c582))],_0x2fd204;}}function updateconditions(_0x6fcced){const _0x5920dd=_0x1a99ef;for(let _0x11b8d2=_0x6fcced[_0x5920dd(0x37e)]['length']-0x1;_0x11b8d2>=0x0;_0x11b8d2--){_0x6fcced['conditions'][_0x11b8d2][_0x5920dd(0x28a)]--,_0x6fcced[_0x5920dd(0x37e)][_0x11b8d2]['duration']<=-0x1?(_0x6fcced[_0x5920dd(0x37e)][_0x11b8d2][_0x5920dd(0x341)]!=null&&_0x6fcced['conditions'][_0x11b8d2][_0x5920dd(0x341)](),_0x6fcced[_0x5920dd(0x37e)]['splice'](_0x11b8d2,0x1)):_0x6fcced[_0x5920dd(0x37e)][_0x11b8d2][_0x5920dd(0x4b1)]();}}function updatetraitspassive(){const _0x2c70cf=_0x1a99ef;for(let _0x5c3cd2=0x0;_0x5c3cd2<nonpcshere[_0x2c70cf(0x2e1)];_0x5c3cd2++){const _0xfd4732=nonpcshere[_0x5c3cd2];if(_0xfd4732['dead']===!![])continue;else for(let _0x2d65db=0x0;_0x2d65db<_0xfd4732['traits']['length'];_0x2d65db++){const _0x3d5ef6=_0xfd4732[_0x2c70cf(0x331)][_0x2d65db];_0x3d5ef6[_0x2c70cf(0x258)]==!![]&&(_0x3d5ef6[_0x2c70cf(0x273)]()==!![]&&_0x3d5ef6[_0x2c70cf(0x24a)]());}}for(let _0x2d6fc9=0x0;_0x2d6fc9<playercs[_0x2c70cf(0x2e1)];_0x2d6fc9++){const _0x443b68=playercs[_0x2d6fc9];if(_0x443b68[_0x2c70cf(0x304)]==!![])continue;else for(let _0x24b9b6=0x0;_0x24b9b6<_0x443b68[_0x2c70cf(0x331)][_0x2c70cf(0x2e1)];_0x24b9b6++){const _0x2b7f54=_0x443b68[_0x2c70cf(0x331)][_0x24b9b6];_0x2b7f54[_0x2c70cf(0x258)]==!![]&&(_0x2b7f54['trigger']()==!![]&&_0x2b7f54['effect']());}}for(let _0x195b75=0x0;_0x195b75<objectshere['length'];_0x195b75++){const _0x131de6=objectshere[_0x195b75];for(let _0x507c72=0x0;_0x507c72<_0x131de6[_0x2c70cf(0x322)][_0x2c70cf(0x2e1)];_0x507c72++){const _0x136a8a=_0x131de6[_0x2c70cf(0x322)][_0x507c72];_0x136a8a(_0x131de6);}}}function updatetraitsactive(_0x1f3f3a){const _0xb169e7=_0x1a99ef;for(let _0x22814f=0x0;_0x22814f<_0x1f3f3a['traits']['length'];_0x22814f++){const _0x2ce100=_0x1f3f3a[_0xb169e7(0x331)][_0x22814f];_0x2ce100[_0xb169e7(0x476)]==!![]&&_0x2ce100[_0xb169e7(0x273)]()==!![]&&_0x2ce100[_0xb169e7(0x24a)]();}}function startplayerturn(){const _0x3f9f0d=_0x1a99ef;if(won)controllock=!![];else{if(gameover){enemyturn();return;}};let _0x351ae0,_0x23ba3d=![];for(let _0x3cd604=0x0;_0x3cd604<playercs[_0x3f9f0d(0x2e1)];_0x3cd604++){_0x351ae0=playercs[_0x3cd604];if(_0x351ae0[_0x3f9f0d(0x304)]==![])_0x23ba3d=!![];_0x351ae0['tc']=_0x351ae0[_0x3f9f0d(0x435)][_0x3f9f0d(0x428)](),updateconditions(_0x351ae0);}!_0x23ba3d?(controllock=!![],gameover=!![]):playerturn();}function playerturn(){const _0x40c71f=_0x1a99ef;activecharacter==0x0&&turncounter++,pc=playercs[activecharacter],pc[_0x40c71f(0x304)]==!![]&&playerendturn(),controllock=![],activecharacternonindex=playercs[activecharacter];}function playertick(){const _0x5630da=_0x1a99ef;if(gameover)return;controllock=!![];let _0x4c7e36=playercs[activecharacter];_0x4c7e36['hp']<=0x0&&(_0x4c7e36[_0x5630da(0x304)]=!![]);if(_0x4c7e36['dead']==!![]){playerendturn();return;}if(_0x4c7e36[_0x5630da(0x3a8)][_0x5630da(0x2e1)]>0x0){let _0x40579e=0x1;canAffordAction(_0x4c7e36[_0x5630da(0x3a8)][0x0],_0x4c7e36)?(_0x4c7e36['actionqueue'][0x1]&&_0x4c7e36['actionqueue'][0x1][_0x5630da(0x302)][0x1]>0x0&&_0x4c7e36[_0x5630da(0x3a8)][0x1]['name']!==_0x5630da(0x3ea)&&(_0x40579e=2.5),_0x4c7e36[_0x5630da(0x3a8)][0x0]['cost'][0x1]>0x0&&_0x4c7e36[_0x5630da(0x3a8)][0x0][_0x5630da(0x41d)]!==_0x5630da(0x3ea)&&(_0x40579e=2.5),move(_0x4c7e36),updatetraitspassive()):_0x4c7e36['actionqueue']=[];setTimeout(playertick,ticktimer*_0x40579e),updateGrid();return;}else playercs[activecharacter][_0x5630da(0x3a8)]=[];playercs[activecharacter][_0x5630da(0x3a8)]['length']==0x0&&(playercs[activecharacter]['tc'][0x0]==0x0&&playercs[activecharacter]['tc'][0x1]==0x0&&bufferedinputs[_0x5630da(0x2e1)]==0x0&&autoadv?playerendturn():releasecontrollock());}function releasecontrollock(){controllock=![],triggerbufferedinput();}function playerendturn(){const _0x33f619=_0x1a99ef;updatetraitspassive(),updatecharactershere(),nonpcshere=shuffle(nonpcshere),uilock=![];if(gameover==![]){activecharacter++;if(activecharacter<playercs[_0x33f619(0x2e1)]){if(playercs[activecharacter][_0x33f619(0x304)]==!![]){playerendturn();return;}playerturn();return;}}activecharacter=0x0,controllock=!![],updateEnvironment(),setTimeout(enemyturn,ticktimer);}function restcheck(){const _0x257891=_0x1a99ef;let _0xbe848d=0x0;playercs[_0x257891(0x348)](function(_0x1fe996){const _0x570723=_0x257891;(lackscondition(conditions['Resting'],_0x1fe996)!==!![]||_0x1fe996[_0x570723(0x304)]==!![]||lackscondition(conditions[_0x570723(0x21c)],_0x1fe996)!==!![])&&_0xbe848d++;}),_0xbe848d==playercs[_0x257891(0x2e1)]&&playercs[_0x257891(0x348)](function(_0x5eaf27){const _0x3dc4ac=_0x257891;!_0x5eaf27[_0x3dc4ac(0x304)]&&_0x5eaf27['hp']<_0x5eaf27[_0x3dc4ac(0x486)]&&(_0x5eaf27[_0x3dc4ac(0x1f3)](_0x5eaf27[_0x3dc4ac(0x486)]-_0x5eaf27['hp']),directions[_0x3dc4ac(0x348)](function(_0x437cbf){const _0x4d894a=_0x3dc4ac,[_0x38569a,_0x1de9f6]=_0x437cbf[_0x4d894a(0x4a9)]((_0x351b33,_0x3fe872)=>_0x351b33+_0x5eaf27['pos'][_0x3fe872]);if(newgrid[_0x38569a][_0x1de9f6]['objects'][_0x4d894a(0x2e1)]>0x0){const _0x2b8276=newgrid[_0x38569a][_0x1de9f6][_0x4d894a(0x312)][0x0];_0x2b8276 instanceof bonfire&&_0x2b8276['extinguish']();}}));});}function updateEnvironment(){const _0x510b75=_0x1a99ef;let _0x492871=envobjects[_0x510b75(0x428)]();envobjects=[];while(_0x492871[_0x510b75(0x2e1)]>0x0){const _0x1ab40a=_0x492871[_0x510b75(0x2ed)]();_0x1ab40a[_0x510b75(0x4a0)]();}}function enemyturn(){const _0x40c08c=_0x1a99ef;if(activecharacter==0x0)enemyturnstart=performance[_0x40c08c(0x2c3)]();if(activecharacter>=nonpcshere[_0x40c08c(0x2e1)]){activecharacter=0x0,startplayerturn();return;}let _0x589795=nonpcshere[activecharacter];activecharacternonindex=_0x589795,activecharacter++;if(manhattanDistance(_0x589795[_0x40c08c(0x295)],viewportpos)<dontcaredistance&&_0x589795[_0x40c08c(0x304)]==![]){_0x589795['tc']=_0x589795[_0x40c08c(0x435)][_0x40c08c(0x428)](),tickcounter=0x0,updateconditions(_0x589795),updatetraitsactive(_0x589795),_0x1aff04(_0x589795);return;}enemyturn();function _0x1aff04(_0x3adf92){const _0x5c230d=_0x40c08c;let _0x21cc3a=0x1;tickcounter++;if(tickcounter>0x14){_0x3adf92[_0x5c230d(0x3a8)]=[],enemyturn();return;}if(_0x3adf92['hp']<=0x0)_0x3adf92['dead']=!![];if(_0x3adf92[_0x5c230d(0x304)]==!![]){enemyturn();return;}if(_0x3adf92['tc'][0x0]>0x0||_0x3adf92['tc'][0x1]>0x0){if(_0x3adf92[_0x5c230d(0x3a8)][_0x5c230d(0x2e1)]>0x0){if(canAffordAction(_0x3adf92[_0x5c230d(0x3a8)][0x0],_0x3adf92)){_0x3adf92['actionqueue'][0x1]&&_0x3adf92['actionqueue'][0x1][_0x5c230d(0x41d)]=='End\x20Turn'&&gameover==!![]&&(_0x21cc3a=Math[_0x5c230d(0x37a)](Math['random']()*0x32));_0x3adf92[_0x5c230d(0x3a8)][0x0][_0x5c230d(0x302)][0x1]>0x0&&(_0x21cc3a=0x5);(!_0x3adf92[_0x5c230d(0x3a8)][0x1]||_0x3adf92['actionqueue'][0x1]['cost'][0x1]>0x0)&&(_0x21cc3a=0x5);const [_0x48bf9a,_0x2e9f01]=_0x3adf92[_0x5c230d(0x3a8)][0x0][_0x5c230d(0x310)];newgrid[_0x3adf92[_0x5c230d(0x295)][0x0]][_0x3adf92[_0x5c230d(0x295)][0x1]][_0x5c230d(0x2de)]!==!![]&&newgrid[_0x48bf9a][_0x2e9f01][_0x5c230d(0x2de)]!==!![]&&(_0x21cc3a=0x0),move(_0x3adf92);}else{_0x3adf92[_0x5c230d(0x3a8)]=[],enemyturn();return;}}else{let _0x75510=planturn(_0x3adf92);if(_0x75510['length']>0x0){_0x3adf92[_0x5c230d(0x3a8)]=_0x75510[_0x5c230d(0x428)](),_0x3adf92[_0x5c230d(0x3a8)][_0x5c230d(0x23c)](new endTurn('End\x20Turn',endturnfunc,[0x0,0x0,0x0],0x0,_0x3adf92['pos'],_0x3adf92,_0x3adf92[_0x5c230d(0x295)]));if(_0x3adf92[_0x5c230d(0x3a8)]['length']<0x2){enemyturn();return;}}else{_0x3adf92[_0x5c230d(0x3a8)]=[],enemyturn();return;}}}_0x3adf92['tc'][0x0]>0x0||_0x3adf92['tc'][0x1]>0x0?(newgrid[_0x3adf92[_0x5c230d(0x295)][0x0]][_0x3adf92[_0x5c230d(0x295)][0x1]][_0x5c230d(0x2de)]!==!![]&&(_0x21cc3a=0x0),_0x3adf92[_0x5c230d(0x3a8)][0x0]&&_0x3adf92[_0x5c230d(0x3a8)][0x0]['loudness']&&_0x3adf92[_0x5c230d(0x3a8)][0x0][_0x5c230d(0x26b)]>=chebyshevDistance(viewportpos,_0x3adf92[_0x5c230d(0x295)])&&(_0x21cc3a=Math['max'](0x1,_0x21cc3a)),setTimeout(function(){_0x1aff04(_0x3adf92),updateGrid();},ticktimer*_0x21cc3a)):(_0x3adf92[_0x5c230d(0x3a8)]=[],enemyturn());}}function aStar(_0x1e515f,_0x38f734,_0x18ea26=0x4b,_0xc12772=0x0){const _0x4100b8=_0x1a99ef,_0x4cd364=mapsizey,_0x44f656=mapsizex;let _0x4d434a=[[-0x1,0x0],[0x1,0x0],[0x0,-0x1],[0x0,0x1],[-0x1,-0x1],[0x1,-0x1],[0x1,0x1],[-0x1,0x1]];function _0x127d9a(_0x25e1cc,_0x3de417){const _0x59c4df=_0x4a83;let _0x4eebc6=!![];return newgrid[_0x25e1cc][_0x3de417][_0x59c4df(0x3ec)]!==null&&((_0x25e1cc!==_0x1e515f[0x0]||_0x3de417!==_0x1e515f[0x1])&&((_0x25e1cc!==_0x38f734[0x0]||_0x3de417!==_0x38f734[0x1])&&(_0x4eebc6=![]))),_0x25e1cc>=0x0&&_0x3de417>=0x0&&_0x25e1cc<_0x4cd364&&_0x3de417<_0x44f656&&newgrid[_0x25e1cc][_0x3de417][_0x59c4df(0x3b2)]===!![]&&_0x4eebc6==!![];}const _0x36ad50=new PriorityQueue((_0x4475cd,_0x269a96)=>_0x4475cd['f']-_0x269a96['f']),_0x3c61b3=new Array(_0x4cd364)[_0x4100b8(0x4a1)](null)['map'](()=>new Array(_0x44f656)[_0x4100b8(0x4a1)](Infinity)),[_0x276935,_0x3f5cd5]=_0x1e515f;_0x3c61b3[_0x276935][_0x3f5cd5]=0x0,_0x36ad50[_0x4100b8(0x2aa)]({'x':_0x3f5cd5,'y':_0x276935,'f':0x0});let _0x445c3c=bresenhamLine(_0x1e515f,_0x38f734),_0x389136=0x1,_0x2f2861=0x0;while(!_0x36ad50[_0x4100b8(0x356)]()){const _0x152cb5=_0x36ad50['dequeue']();if(_0x152cb5['x']===_0x38f734[0x1]&&_0x152cb5['y']===_0x38f734[0x0]||dist([_0x152cb5['y'],_0x152cb5['x']],_0x38f734)<=_0xc12772){const _0x46cb17=[];let _0x49863b=_0x152cb5;while(_0x49863b){_0x46cb17[_0x4100b8(0x23c)]([_0x49863b['y']-_0x1e515f[0x0],_0x49863b['x']-_0x1e515f[0x1]]),_0x49863b=_0x49863b[_0x4100b8(0x437)];}return _0x46cb17[_0x4100b8(0x1f7)](),_0x46cb17['reverse']();}_0x445c3c['length']>=_0x389136-0x1&&((_0x152cb5['y']!=_0x445c3c[_0x389136-0x1][0x0]||_0x152cb5['x']!=_0x445c3c[_0x389136-0x1][0x1])&&(_0x445c3c=bresenhamLine([_0x152cb5['y'],_0x152cb5['x']],_0x38f734),_0x389136=0x1));if(_0x2f2861>_0x18ea26)break;for(const [_0x4b7ad2,_0x62ea58]of _0x4d434a){const _0x286140=_0x152cb5['y']+_0x62ea58,_0x490b4d=_0x152cb5['x']+_0x4b7ad2;if(_0x127d9a(_0x286140,_0x490b4d)&&Math[_0x4100b8(0x3cf)](newgrid[_0x286140][_0x490b4d][_0x4100b8(0x439)]-newgrid[_0x152cb5['y']][_0x152cb5['x']]['elevation'])<0x2){let _0x45f82c=_0x3c61b3[_0x152cb5['y']][_0x152cb5['x']]+newgrid[_0x152cb5['y']][_0x152cb5['x']]['moveCost'];if(_0x45f82c<_0x3c61b3[_0x286140][_0x490b4d]){_0x3c61b3[_0x286140][_0x490b4d]=_0x45f82c;const _0x4505ec=Math[_0x4100b8(0x3cf)](_0x286140-_0x38f734[0x0]),_0x3ccab2=Math[_0x4100b8(0x3cf)](_0x490b4d-_0x38f734[0x1]);let _0x31f555;_0x4505ec>_0x3ccab2?_0x31f555=_0x4505ec+0.9*_0x3ccab2:_0x31f555=_0x3ccab2+0.9*_0x4505ec;_0x445c3c[_0x4100b8(0x2e1)]>_0x389136&&(_0x286140==_0x445c3c[_0x389136][0x0]&&_0x490b4d==_0x445c3c[_0x389136][0x1]&&(_0x31f555=-0.1));const _0x4c8490=_0x45f82c+_0x31f555;_0x36ad50['enqueue']({'x':_0x490b4d,'y':_0x286140,'f':_0x4c8490,'parent':_0x152cb5});}}}_0x389136++,_0x2f2861++;}return null;}function translateAStoAQ(_0xc5cc2f,_0x334fa4,_0x14c5e7=![]){const _0x5759a9=_0x1a99ef;let _0xb7ee33=[],_0x1eb71d=[];if(_0xc5cc2f)for(let _0x1ed63e=0x0;_0x1ed63e<_0xc5cc2f[_0x5759a9(0x2e1)];_0x1ed63e++){_0x1eb71d[_0x5759a9(0x23c)](_0xc5cc2f[_0x1ed63e]['map']((_0x1662e8,_0x51cb0c)=>_0x1662e8+_0x334fa4[_0x5759a9(0x295)][_0x51cb0c])),_0x1ed63e==0x0?_0xb7ee33[_0x5759a9(0x23c)](_0xc5cc2f[_0x1ed63e]):_0xb7ee33[_0x5759a9(0x23c)](_0xc5cc2f[_0x1ed63e][_0x5759a9(0x4a9)]((_0xb263cf,_0x38fdd7)=>_0xb263cf-_0xc5cc2f[_0x1ed63e-0x1][_0x38fdd7]));}let [_0x3737f1,_0x298ea6]=_0x334fa4[_0x5759a9(0x295)];_0x1eb71d[_0x5759a9(0x2e1)]>0x0&&([_0x3737f1,_0x298ea6]=_0x1eb71d[_0x1eb71d[_0x5759a9(0x2e1)]-0x1]);const _0x2e12b4=newgrid[_0x3737f1][_0x298ea6][_0x5759a9(0x3ec)],_0x19798a=newgrid[cursorpos[0x0]][cursorpos[0x1]]['objects'][0x0];let _0x5ebecd=![],_0xde106=![],_0x1aed2d;_0x2e12b4!==null&&_0x2e12b4['pc']!==_0x334fa4['pc']&&_0x14c5e7==![]&&(_0x5ebecd=!![]);_0x19798a&&_0x5ebecd==![]&&_0x19798a['action']!==null&&(_0xde106=!![]);let _0x36eccc=[];if(_0x5ebecd&&(_0x334fa4[_0x5759a9(0x375)][_0x5759a9(0x387)]||_0x334fa4[_0x5759a9(0x375)][_0x5759a9(0x3f4)]&&!_0x334fa4[_0x5759a9(0x3dc)][_0x334fa4[_0x5759a9(0x375)][_0x5759a9(0x3f4)]]))return _0x36eccc;let _0x39df11=_0x334fa4[_0x5759a9(0x295)],_0x30d977;_0xde106&&dist(_0x39df11,_0x19798a[_0x5759a9(0x295)])<_0x19798a['action'][0x3]&&_0x36eccc[_0x5759a9(0x23c)](new action(..._0x19798a[_0x5759a9(0x2d0)],_0x19798a[_0x5759a9(0x295)],_0x334fa4,_0x39df11));for(let _0x82033e=0x0;_0x82033e<_0xb7ee33['length'];_0x82033e++){_0x82033e>0x0&&(_0x39df11=_0x1eb71d[_0x82033e-0x1]);_0x30d977=_0x1eb71d[_0x82033e];let _0x2034b4=_0x334fa4[_0x5759a9(0x398)]();if(_0x334fa4[_0x5759a9(0x375)][_0x5759a9(0x3fe)]==!![])_0x2034b4=1.9;if(_0x5ebecd&&dist(_0x39df11,_0x2e12b4[_0x5759a9(0x295)])<=_0x2034b4&&drawline(_0x39df11,_0x2e12b4[_0x5759a9(0x295)])<0x1){let _0x357588=actions[_0x5759a9(0x493)];_0x36eccc[_0x5759a9(0x23c)](new Attack(..._0x357588,_0x334fa4[_0x5759a9(0x398)](),_0x2e12b4['pos'],_0x334fa4,_0x39df11));break;}else{if(_0xde106&&dist(_0x39df11,_0x19798a[_0x5759a9(0x295)])<_0x19798a[_0x5759a9(0x2d0)][0x3]){_0x36eccc['push'](new action(..._0x19798a['action'],_0x19798a[_0x5759a9(0x295)],_0x334fa4,_0x39df11));break;}else{let _0x5262ea=[newgrid[_0x1eb71d[_0x82033e][0x0]][_0x1eb71d[_0x82033e][0x1]][_0x5759a9(0x315)],0x0,0x0];_0x334fa4[_0x5759a9(0x242)]?_0x36eccc[_0x5759a9(0x23c)](new _0x334fa4[(_0x5759a9(0x242))](_0x5759a9(0x360),movefunc,_0x5262ea,0x1,_0x1eb71d[_0x82033e],_0x334fa4,_0x39df11)):_0x36eccc[_0x5759a9(0x23c)](new Move(_0x5759a9(0x360),movefunc,_0x5262ea,0x1,_0x1eb71d[_0x82033e],_0x334fa4,_0x39df11));}}}return _0x36eccc;}function moveplayer(_0x3a6800=![],_0x3c2ff2=[0x0,0x0]){const _0x300d85=_0x1a99ef;let [_0x112292,_0x4908b1]=cursorpos;_0x3a6800&&([_0x112292,_0x4908b1]=_0x3c2ff2);const _0x2b45ba=newgrid[_0x112292][_0x4908b1];if(_0x2b45ba[_0x300d85(0x3ec)]&&_0x2b45ba[_0x300d85(0x3ec)]['pc']==!![]&&!_0x3a6800){activecharacternonindex=_0x2b45ba[_0x300d85(0x3ec)];for(let _0x49ad09=0x0;_0x49ad09<playercs[_0x300d85(0x2e1)];_0x49ad09++){playercs[_0x49ad09][_0x300d85(0x306)]==activecharacternonindex[_0x300d85(0x306)]&&(activecharacter=_0x49ad09);}return![];}if(_0x2b45ba[_0x300d85(0x2d8)]==![])return![];let _0x2659bd=aStar(playercs[activecharacter][_0x300d85(0x295)],[_0x112292,_0x4908b1]),_0x42fa6a=null;if(_0x2b45ba['objects'][_0x300d85(0x2e1)]>0x0&&_0x2b45ba['character']==null){const _0xb31a10=_0x2b45ba[_0x300d85(0x312)][0x0];_0xb31a10['action']!==null&&(_0x2659bd=aStar(playercs[activecharacter][_0x300d85(0x295)],[_0x112292,_0x4908b1],0x1f4,1.9),_0x42fa6a=_0xb31a10[_0x300d85(0x2d0)]);}if(!_0x2659bd)return![];playercs[activecharacter]['actionqueue']=translateAStoAQ(_0x2659bd,playercs[activecharacter])[_0x300d85(0x428)]();_0x42fa6a!==null&&playercs[activecharacter][_0x300d85(0x3a8)][_0x300d85(0x23c)](new action(..._0x42fa6a,[_0x112292,_0x4908b1],playercs[activecharacter]));let _0x415546=0x0;for(let _0x391c4d=0x0;_0x391c4d<playercs[activecharacter][_0x300d85(0x3a8)][_0x300d85(0x2e1)];_0x391c4d++){_0x415546+=playercs[activecharacter][_0x300d85(0x3a8)][_0x391c4d][_0x300d85(0x302)][0x0];}let _0x134e96=0x0;for(let _0x3b8854=0x0;_0x3b8854<playercs[activecharacter]['actionqueue'][_0x300d85(0x2e1)];_0x3b8854++){_0x134e96+=playercs[activecharacter][_0x300d85(0x3a8)][_0x3b8854]['cost'][0x1];}autodash==!![]&&(_0x415546>playercs[activecharacter]['tc'][0x0]&&(playercs[activecharacter]['tc'][0x1]>=0x1&&playercs[activecharacter][_0x300d85(0x3a8)][_0x300d85(0x314)](new action(_0x300d85(0x3ea),dashfunc,[0x0,0x1,0x0],0x0,playercs[activecharacter]['pos'],playercs[activecharacter]))));autosg==!![]&&(_0x134e96>playercs[activecharacter]['tc'][0x1]&&_0x415546<=playercs[activecharacter]['tc'][0x0]-playercs[activecharacter][_0x300d85(0x435)][0x0]&&(playercs[activecharacter]['tc'][0x0]>=playercs[activecharacter][_0x300d85(0x435)][0x0]&&playercs[activecharacter][_0x300d85(0x3a8)][_0x300d85(0x314)](new action(_0x300d85(0x36c),standgroundfunc,[playercs[activecharacter][_0x300d85(0x435)][0x0],0x0,0x0],0x0,playercs[activecharacter][_0x300d85(0x295)],playercs[activecharacter]))));if(playercs[activecharacter][_0x300d85(0x3a8)][_0x300d85(0x2e1)]>0x0)return playertick(),!![];}function moveallplayers(){const _0x5b2b8b=_0x1a99ef;for(let _0x15b5e1=0x0;_0x15b5e1<playercs[_0x5b2b8b(0x2e1)];_0x15b5e1++){let _0x2323d4=playercs[_0x15b5e1],_0x3d747c=cursorpos[_0x5b2b8b(0x428)]();_0x2323d4[_0x5b2b8b(0x304)]==![]&&bufferedinputs['push'](function(){activecharacter=_0x15b5e1,activecharacternonindex=playercs[_0x15b5e1];let _0xc2353a=moveplayer(!![],_0x3d747c);if(!_0xc2353a)bufferedinputs=[];});}triggerbufferedinput();}function triggerbufferedinput(){const _0x2a7552=_0x1a99ef;let _0x47ef3d=bufferedinputs[_0x2a7552(0x2ed)]();_0x47ef3d&&_0x47ef3d();}function move(_0x4e5b01){const _0x5774e8=_0x1a99ef;if(_0x4e5b01[_0x5774e8(0x304)]==!![])return;const [_0x11a63c,_0x7e24c]=_0x4e5b01[_0x5774e8(0x295)],_0x259f7a=_0x4e5b01[_0x5774e8(0x3a8)][_0x5774e8(0x2ed)](),[_0x38ef15,_0x382c9e]=_0x259f7a[_0x5774e8(0x310)];if(!_0x259f7a)return;const _0x9df167=_0x4e5b01['tc'][_0x5774e8(0x428)]();if(_0x4e5b01['tc'][0x2]<_0x259f7a[_0x5774e8(0x302)][0x2])return;_0x4e5b01['tc'][0x2]-=_0x259f7a[_0x5774e8(0x302)][0x2];if(_0x259f7a instanceof Attack){let _0x3776b7=_0x259f7a['func'](!![]);if(_0x3776b7[_0x5774e8(0x3d5)][_0x5774e8(0x2e1)]>0x0)_0x259f7a[_0x5774e8(0x3e1)]=![];}if(_0x259f7a[_0x5774e8(0x3e1)])_0x3fd66c(newgrid[_0x11a63c][_0x7e24c],_0x4e5b01,_0x259f7a);if(_0x4e5b01['tc'][0x0]<_0x259f7a[_0x5774e8(0x302)][0x0]||_0x4e5b01['tc'][0x1]<_0x259f7a[_0x5774e8(0x302)][0x1])return;if(_0x4e5b01['tc'][0x3]&&_0x259f7a['cost'][0x3]&&_0x4e5b01['tc'][0x3]<_0x259f7a[_0x5774e8(0x302)][0x3])return;_0x4e5b01['tc'][0x0]-=_0x259f7a['cost'][0x0],_0x4e5b01['tc'][0x1]-=_0x259f7a['cost'][0x1];if(_0x259f7a['cost'][0x3])_0x4e5b01['tc'][0x3]-=_0x259f7a[_0x5774e8(0x302)][0x3];if(_0x4e5b01['dead']==!![]){}else{if(_0x259f7a['func']()!==![]){if(_0x259f7a[_0x5774e8(0x3e1)])_0x3fd66c(newgrid[_0x38ef15][_0x382c9e],_0x4e5b01,_0x259f7a);if(_0x259f7a['loudness']){let _0x50834a=new Sound([_0x38ef15,_0x382c9e],_0x259f7a[_0x5774e8(0x26b)],_0x4e5b01,_0x259f7a[_0x5774e8(0x41d)]);_0x259f7a[_0x5774e8(0x480)]&&(_0x50834a['content']=_0x259f7a[_0x5774e8(0x480)]),_0x259f7a['soundeffect']&&(_0x50834a[_0x5774e8(0x338)]=_0x259f7a[_0x5774e8(0x338)]),hear(_0x50834a);}}else _0x4e5b01['tc']=_0x9df167[_0x5774e8(0x428)]();}function _0x3fd66c(_0x25da2e,_0x444998,_0x5a1d76){const _0x453c48=_0x5774e8;let [_0x230a57,_0x5021ad,_0x3b77db,_0x257e5d]=getlightingsize();updatelighting(_0x230a57,_0x5021ad,_0x3b77db,_0x257e5d,!![]);let _0x54c72e={},_0xededda=[_0x25da2e,newgrid[_0x5a1d76[_0x453c48(0x310)][0x0]][_0x5a1d76['target'][0x1]]];_0xededda[_0x453c48(0x348)](function(_0xb768f0){const _0x4fdab1=_0x453c48;_0xb768f0[_0x4fdab1(0x318)]['forEach'](function(_0x53567d){const _0x5105fc=_0x4fdab1;if(_0x53567d['pc']==!![]||_0x53567d['dead']==!![]){}else _0x54c72e[_0x53567d[_0x5105fc(0x306)]]=_0x53567d;}),_0xb768f0[_0x4fdab1(0x2de)]==!![]&&playercs['forEach'](function(_0x449495){const _0x4adcf7=_0x4fdab1;if(_0x449495[_0x4adcf7(0x304)]==![])_0x54c72e[_0x449495[_0x4adcf7(0x306)]]=_0x449495;}),_0xb768f0[_0x4fdab1(0x34e)]&&_0xb768f0['objecttriggers'][_0x4fdab1(0x348)](function(_0x1ecaed){_0x1ecaed['react'](_0xb768f0,_0x444998,_0x5a1d76);});}),Object['values'](_0x54c72e)[_0x453c48(0x348)](function(_0x583c34){const _0x196974=_0x453c48;_0x583c34[_0x196974(0x2dc)][_0x196974(0x348)](function(_0x59b09e){_0x59b09e(_0x583c34,_0x444998,_0x5a1d76);});}),_0x444998[_0x453c48(0x2dc)][_0x453c48(0x348)](function(_0x287be0){_0x287be0(_0x444998,null,null);});}updatedsomething=!![];}function adduilabel(_0x1f4527,_0x35cb1f,_0x91d25,_0xb4fb3b,_0x2e9c10=![],_0x3145dc=![],_0x1a309e=![],_0x1d8f4d,_0x510053=0x1,_0x344998=0x0,_0x2de398){const _0x5ea74c=_0x1a99ef,[_0x1b75cd,_0x15bb34]=_0x35cb1f;let _0x157b31=[];if(!newgrid[_0x1b75cd]||!newgrid[_0x1b75cd][_0x15bb34])return _0x157b31;let _0x18984e=!![];if(newgrid[_0x1b75cd][_0x15bb34][_0x5ea74c(0x2de)]===!![]||_0x1d8f4d){let _0x47b198=Math[_0x5ea74c(0x3de)](_0x1f4527[_0x5ea74c(0x2e1)]/0x2-0x1);if(_0x1a309e)_0x47b198=0x0;_0x3145dc==!![]&&(_0x47b198=0x0);let _0x58dec6=!![];(!_0x1f4527[_0x5ea74c(0x2e1)]||_0x1f4527['length']==0x0||_0x1f4527[0x0]=='\x20'||_0x1f4527[0x0]=='$'||_0x1f4527[0x0]=='^')&&(_0x18984e=![]);(_0x2e9c10!==!![]||_0x1d8f4d==![])&&(_0x18984e=![]);let _0x50db81=0x0;while(_0x58dec6==!![]&&_0x50db81<0xa){_0x58dec6==![];for(let _0x37f39b=0x0;_0x37f39b<_0x1f4527['length'];_0x37f39b++){let [_0x2a7bf5,_0x1e6130]=[_0x1b75cd-_0xb4fb3b,_0x15bb34-_0x47b198+_0x37f39b];if(!newgrid[_0x2a7bf5]||!newgrid[_0x2a7bf5][_0x1e6130])break;for(let _0x392f55=0x0;_0x392f55<newgrid[_0x2a7bf5][_0x1e6130]['uiElements']['length'];_0x392f55++){let _0x1c7ecf=newgrid[_0x2a7bf5][_0x1e6130][_0x5ea74c(0x3f9)][_0x392f55];if(_0x18984e&&_0x1c7ecf[_0x5ea74c(0x292)]){let _0x55f2d3=Math[_0x5ea74c(0x279)](_0x2a7bf5-viewportpos[0x0]);if(_0x55f2d3==0x0)_0x55f2d3=0x1;_0x58dec6=!![],_0xb4fb3b+=0x1;}}if(_0x2e9c10!==!![]||_0x1d8f4d==!![]){if(_0x2a7bf5>viewportpos[0x0]+viewportsizey/0x2){_0x58dec6=!![],_0xb4fb3b++;break;}if(_0x1e6130>viewportpos[0x1]+viewportsizex/0x2-0x1){_0x58dec6=!![],_0x47b198++;break;}if(_0x2a7bf5<viewportpos[0x0]-viewportsizey/0x2){_0x58dec6=!![],_0xb4fb3b--;break;}if(_0x1e6130<viewportpos[0x1]-viewportsizex/0x2){_0x58dec6=!![],_0x47b198--;break;};}}_0x50db81++;}if(_0x2e9c10==![]){let _0x152a2c;for(let _0x5730ea=0x0;_0x5730ea<_0x1f4527[_0x5ea74c(0x2e1)];_0x5730ea++){let [_0x694869,_0x51a4cb]=[_0x1b75cd-_0xb4fb3b,_0x15bb34-_0x47b198+_0x5730ea];if(!newgrid[_0x694869]||!newgrid[_0x694869][_0x51a4cb])continue;if(viewportpos[0x0]+viewportsizey/0x2-0x1<_0x694869)continue;if(viewportpos[0x1]+viewportsizex/0x2-0x1<_0x51a4cb)continue;if(viewportpos[0x0]-viewportsizey/0x2>_0x694869)continue;if(viewportpos[0x1]-viewportsizex/0x2>_0x51a4cb)continue;_0x152a2c=new uielement(_0x1f4527[_0x5ea74c(0x407)](_0x5730ea),_0x91d25,[_0x694869,_0x51a4cb],![],![],null,_0x2de398),_0x157b31['push'](_0x152a2c),newgrid[_0x694869][_0x51a4cb][_0x5ea74c(0x3f9)][_0x5ea74c(0x23c)](_0x152a2c);}}else{line=[];for(let _0x8b836e=0x0;_0x8b836e<_0x1f4527[_0x5ea74c(0x2e1)];_0x8b836e++){line[_0x5ea74c(0x23c)]([_0x1b75cd-_0xb4fb3b,_0x15bb34-_0x47b198+_0x8b836e]);}let _0x275a42=line[_0x5ea74c(0x2e1)],_0x35fe83;for(let _0x309c6a=0x0;_0x309c6a<_0x275a42;_0x309c6a++){const [_0x466868,_0x4c8a23]=line[_0x309c6a];if(!newgrid[_0x466868]||!newgrid[_0x466868][_0x4c8a23])continue;let _0x381091=_0x1f4527[_0x309c6a%_0x1f4527[_0x5ea74c(0x2e1)]];_0x35fe83=new uielement(_0x381091,_0x91d25,line[_0x309c6a],_0x2e9c10,_0x1d8f4d,[now+_0x344998+_0x510053*0x3e8,now+_0x344998]),newgrid[_0x466868][_0x4c8a23]['uiElements']['push'](_0x35fe83),_0x157b31['push'](_0x35fe83);}updatedsomething=!![];}}return _0x157b31[_0x5ea74c(0x2e1)]>0x0&&_0x157b31[_0x5ea74c(0x348)](_0x4ac457=>_0x4ac457[_0x5ea74c(0x292)]=_0x18984e),_0x157b31;}function drawGrid(_0x4fe157=![]){const _0x593300=_0x1a99ef;now=performance[_0x593300(0x2c3)](),requestAnimationFrame(function(){drawGrid(!![]),now-noiseupdateticker>noiseupdaterate&&(noiseupdate(),noiseupdateticker=performance['now']());});if(now-lastCall<throttleRate||updatedlighting==![]&&updatedsomething==![])return;width=window['innerWidth'],height=window[_0x593300(0x487)],offscreen[_0x593300(0x320)]=window[_0x593300(0x3be)]*ratio,offscreen[_0x593300(0x259)]=window[_0x593300(0x487)]*ratio,offscreen['style']['width']=width+'px',offscreen['style'][_0x593300(0x259)]=height+'px',offscreen['getContext']('2d')[_0x593300(0x207)](ratio,ratio);Math[_0x593300(0x1f4)](now/0x3e8)>lastframe&&(frameticker=0x0,lastframe=now/0x3e8);lastCall=now;keyglossary&&Object[_0x593300(0x263)](keybindings)[_0x593300(0x348)](function(_0x486579,_0x272efc){adduilabel(_0x486579,[viewportpos[0x0],viewportpos[0x1]-viewportsizex/0x2],[0x80,0x80,0x80],-(viewportsizey/0x2)+_0x272efc+0x3,![],![],!![],!![]);});_0x4fe157&&updatedlighting&&(updatelightmap(),updatedlighting=![]);let _0x4da7e3=viewportpos[0x1]-Math[_0x593300(0x1f4)](viewportsizex/0x2),_0x2b3db3=viewportpos[0x0]-Math[_0x593300(0x1f4)](viewportsizey/0x2),_0x303d48=viewportpos[0x1]+Math[_0x593300(0x1f4)](viewportsizex/0x2),_0x4fb365=viewportpos[0x0]+Math[_0x593300(0x1f4)](viewportsizey/0x2);if(controllock==![]){const _0xc5bfac=activecharacternonindex;adduilabel('$',_0xc5bfac[_0x593300(0x295)],[0x0,0.25,0x0],0x0,![],![],![],!![]);}if(controllock==![]&&newgrid[cursorpos[0x0]][cursorpos[0x1]][_0x593300(0x2d8)]==!![]&&uilock==![]){for(let _0x390750=0x0;_0x390750<playercs[_0x593300(0x2e1)];_0x390750++){if(playercs[_0x390750][_0x593300(0x304)]==!![])continue;if(ctrl&&_0x390750!==activecharacter)alinedraw(aStar(playercs[_0x390750][_0x593300(0x295)],cursorpos),playercs[_0x390750]['tc'],playercs[_0x390750]);}let _0x5c1668=alinedraw(aStar(playercs[activecharacter]['pos'],cursorpos),playercs[activecharacter]['tc'],playercs[activecharacter]);_0x3c19a9(_0x5c1668);}else{if(uilock==!![]&&(uilocktype==_0x593300(0x1e9)||uilocktype==_0x593300(0x26d))){let _0x5c3d39=![],_0x1ee707=activecharacternonindex;_0x1ee707['tc'][0x1]<0x1&&(uilock=![]);let _0x195daa=new Attack(...actions[_0x593300(0x493)],_0x1ee707[_0x593300(0x398)](),cursorpos,_0x1ee707,_0x1ee707['pos']);if(uilocktype==_0x593300(0x26d))_0x195daa=new Kick(cursorpos,_0x1ee707,_0x1ee707[_0x593300(0x295)]);let _0x4df6c1=_0x195daa[_0x593300(0x47f)],_0x4ade81=Math[_0x593300(0x3de)](_0x195daa[_0x593300(0x47f)]);const _0x1db841=_0x1ee707[_0x593300(0x3c3)]();for(let _0x1bcd5d=_0x1ee707['pos'][0x0]-_0x4ade81;_0x1bcd5d<=_0x1ee707['pos'][0x0]+_0x4ade81;_0x1bcd5d++){for(let _0x5e91cc=_0x1ee707[_0x593300(0x295)][0x1]-_0x4ade81;_0x5e91cc<=_0x1ee707['pos'][0x1]+_0x4ade81;_0x5e91cc++){if(newgrid[_0x1bcd5d]===undefined||newgrid[_0x1bcd5d][_0x5e91cc]===undefined)continue;let _0x236cd5=new Attack(...actions[_0x593300(0x493)],_0x1ee707[_0x593300(0x398)](),[_0x1bcd5d,_0x5e91cc],_0x1ee707,_0x1ee707[_0x593300(0x295)]);if(_0x236cd5[_0x593300(0x41b)](!![])[_0x593300(0x3d5)][_0x593300(0x2e1)]>0x0)continue;dist(_0x1ee707['pos'],[_0x1bcd5d,_0x5e91cc],![],!![])<=_0x4df6c1&&adduilabel('$',[_0x1bcd5d,_0x5e91cc],[0.2,0.2,0.1],0x0,![],![],![],!![]);}}const _0x2a7897=_0x195daa[_0x593300(0x41b)](!![]);if(_0x2a7897['errors']&&_0x2a7897['errors']['length']==0x0){let _0x2a9e29=bresenhamLine(_0x1ee707[_0x593300(0x295)],cursorpos);const _0x308eb7=linecharacter([_0x2a9e29[0x0][0x0],_0x2a9e29[0x0][0x1]],[_0x2a9e29[_0x2a9e29['length']-0x1][0x0],_0x2a9e29[_0x2a9e29['length']-0x1][0x1]]);if(dist(_0x1ee707[_0x593300(0x295)],cursorpos,!![])<=_0x4df6c1&&dist(_0x1ee707[_0x593300(0x295)],cursorpos,!![])>_0x1db841){_0x2a9e29[_0x593300(0x2ed)]();for(let _0x30a049=0x0;_0x30a049<_0x2a9e29['length'];_0x30a049++){const [_0x39f030,_0x40082f]=_0x2a9e29[_0x30a049];let _0x39cac9=[0x0,0x0,0x0];if(newgrid[_0x39f030][_0x40082f][_0x593300(0x4cb)](undefined,_0x1ee707['pos'])>0x0)_0x39cac9=[0x80,0x0,0x0];if(newgrid[_0x39f030][_0x40082f][_0x593300(0x2de)]==!![])newgrid[_0x39f030][_0x40082f][_0x593300(0x3f9)]['push'](new uielement(_0x308eb7,_0x39cac9,[0x0,0x0]));}}}if(newgrid[cursorpos[0x0]][cursorpos[0x1]]['character']&&newgrid[cursorpos[0x0]][cursorpos[0x1]]['character']['pc']!==activecharacternonindex['pc']){hypoattack=_0x195daa[_0x593300(0x41b)](!![]);if(hypoattack[_0x593300(0x3d5)]['length']>0x0)for(let _0x2d13f6=0x0;_0x2d13f6<hypoattack[_0x593300(0x3d5)][_0x593300(0x2e1)];_0x2d13f6++){}else{_0x5c3d39=!![];const _0x49f4ff=hypoattack[_0x593300(0x39e)][0x0][_0x593300(0x38d)]()+'-'+hypoattack[_0x593300(0x39e)][0x1][_0x593300(0x38d)](),_0x10fbe2=Math['round'](hypoattack[_0x593300(0x482)])[_0x593300(0x38d)]()+'%';adduilabel(_0x10fbe2,cursorpos,[(0x1-hypoattack[_0x593300(0x482)]/0x64)*0x80,hypoattack[_0x593300(0x482)]/0x64*0x80,0x0],0x2,![],![]),adduilabel(_0x49f4ff,cursorpos,[0x80,0x0,0x0],0x1,![],![]),_0x3c19a9(_0x1ee707['tc'][_0x593300(0x4a9)]((_0x2f2e95,_0x278b7a)=>_0x2f2e95-_0x195daa[_0x593300(0x302)][_0x278b7a]));for(let _0x1bfe78=0x0;_0x1bfe78<hypoattack[_0x593300(0x2d2)]['length'];_0x1bfe78++){const _0x18c223=hypoattack[_0x593300(0x2d2)][_0x1bfe78];let _0x3b99d7=[0x80,0x80,0x80];adduilabel(_0x18c223,cursorpos,_0x3b99d7,_0x1bfe78+0x3,![]);}}}_0x5c3d39==![]&&_0x3c19a9();}else{if(uilock==!![]&&uilocktype==_0x593300(0x43a)){let _0x401c36=activecharacternonindex;_0x401c36['tc'][0x1]<0x1&&(uilock=![]);let _0x1e447e=new Jump(Math[_0x593300(0x4bb)](_0x401c36['stats'][0x0]+0.5,0x2),cursorpos,_0x401c36,_0x401c36['pos']),_0xb02c8c=_0x1e447e[_0x593300(0x47f)],_0xba8bee=Math[_0x593300(0x3de)](_0x1e447e['range']);for(let _0x1ddc71=0x0;_0x1ddc71<_0x1e447e[_0x593300(0x3b8)][_0x593300(0x2e1)];_0x1ddc71++){let _0x345d0b=Math[_0x593300(0x296)](now)*0x20+0x60;adduilabel(_0x1e447e['warnings'][_0x1ddc71],_0x1e447e['target'],[_0x345d0b,0x0,0x0],_0x1ddc71+0x1,![],![]);}for(let _0x3cc9b8=_0x401c36[_0x593300(0x295)][0x0]-_0xba8bee;_0x3cc9b8<=_0x401c36[_0x593300(0x295)][0x0]+_0xba8bee;_0x3cc9b8++){for(let _0xc6e14a=_0x401c36[_0x593300(0x295)][0x1]-_0xba8bee;_0xc6e14a<=_0x401c36['pos'][0x1]+_0xba8bee;_0xc6e14a++){const _0x16c53a=dist(_0x401c36['pos'],[_0x3cc9b8,_0xc6e14a],![],!![]);_0x16c53a<=Math[_0x593300(0x373)](_0xb02c8c,_0xba8bee)&&adduilabel('$',[_0x3cc9b8,_0xc6e14a],[0.2,0.2,0.1],0x0,![],![],![],!![]);}}}else{if(uilock==!![]&&uilocktype=='map')for(let _0x4d778c=0x0;_0x4d778c<viewportsizex*viewportsizey;_0x4d778c++){let [_0x565e45,_0x2a424e]=[_0x2b3db3+_0x4d778c%viewportsizey,_0x4da7e3+Math[_0x593300(0x1f4)](_0x4d778c/viewportsizey)],[_0x453312,_0x1feb7d]=[_0x565e45-_0x2b3db3,_0x2a424e-_0x4da7e3],_0x42d84d=[0x0,0x0,0x0],_0x521e1e=[0x0,0x0,0x0],_0x41ee89=![],_0x2d5d46=![];map[_0x453312][_0x1feb7d]&&(_0x42d84d=map[_0x453312][_0x1feb7d],map[_0x453312][_0x1feb7d][0x3]&&(_0x521e1e=map[_0x453312][_0x1feb7d][0x3],_0x41ee89=!![]));adduilabel('_',[_0x565e45,_0x2a424e],_0x42d84d,0x0,![],![],![],!![]);if(_0x41ee89)adduilabel('@',[_0x565e45,_0x2a424e],_0x521e1e,0x0,![],![],![],!![]);}else activecharacternonindex&&_0x3c19a9();}}}if(activecharacternonindex['pc']==!![]&&controllock==![]&&uilock==![])newgrid[cursorpos[0x0]][cursorpos[0x1]][_0x593300(0x255)]();let _0x54aa3c=adduilabel('x',cursorpos,[0x80,0x80,0x80],0x0,![],![],![],!![]);if(_0x54aa3c&&_0x54aa3c[0x0])_0x54aa3c[0x0]['cursor']=!![];offCtx['clearRect'](0x0,0x0,offscreen['width'],offscreen[_0x593300(0x259)]),offCtx[_0x593300(0x275)]=fontsize+'px\x20\x27Press\x20Start\x202P\x27';let _0x41fd5c='',_0x44df13,_0x1e0286,_0x253cce,_0x29af4a=[];for(let _0x569be4=_0x2b3db3;_0x569be4<_0x4fb365;_0x569be4++){for(let _0x575025=_0x4da7e3;_0x575025<_0x303d48;_0x575025++){_0x1e0286=newgrid[_0x569be4][_0x575025],_0x44df13=_0x1e0286['read'](!![]),_0x29af4a[_0x593300(0x23c)](_0x44df13);const _0x443eb0=(_0x575025-_0x4da7e3)*fontsize,_0x3a777b=(_0x569be4-_0x2b3db3)*fontsize;(!_0x253cce||_0x253cce[0x0]!==_0x44df13[0x1][0x0]||_0x253cce[0x1]!==_0x44df13[0x1][0x1]||_0x253cce[0x2]!==_0x44df13[0x1][0x2])&&(offCtx['fillStyle']=_0x593300(0x344)+_0x44df13[0x1]+')'),offCtx[_0x593300(0x252)](_0x443eb0,_0x3a777b,fontsize,fontsize),_0x253cce=_0x44df13[0x1];}}let _0x1351a9=0x0;for(let _0x216095=_0x2b3db3;_0x216095<_0x4fb365;_0x216095++){for(let _0x1113f2=_0x4da7e3;_0x1113f2<_0x303d48;_0x1113f2++){_0x44df13=_0x29af4a[_0x1351a9],_0x41fd5c=_0x44df13[0x2];while(_0x41fd5c[_0x593300(0x2e1)]>0x1&&(_0x41fd5c[0x0]=='&'||_0x41fd5c[0x0]=='#'||_0x41fd5c[0x0]=='x')){_0x41fd5c=_0x41fd5c[_0x593300(0x428)](0x1);}const _0x3b16f5=(_0x1113f2-_0x4da7e3)*fontsize,_0x9b2718=(_0x216095-_0x2b3db3)*fontsize;(!_0x253cce||_0x253cce[0x0]!==_0x44df13[0x0][0x0]||_0x253cce[0x1]!==_0x44df13[0x0][0x1]||_0x253cce[0x2]!==_0x44df13[0x0][0x2])&&(offCtx[_0x593300(0x3c4)]=_0x593300(0x344)+_0x44df13[0x0]+')'),_0x41fd5c[_0x593300(0x2e1)]>0x1?offCtx[_0x593300(0x30c)](String['fromCharCode'](parseInt(_0x41fd5c,0x10)),_0x3b16f5,_0x9b2718+fontsize,fontsize):offCtx[_0x593300(0x30c)](_0x41fd5c,_0x3b16f5,_0x9b2718+fontsize,fontsize),_0x1351a9++,_0x253cce=_0x44df13[0x0];}}renderqueue['push'](offscreen),renderedlastframe=![];renderqueue[_0x593300(0x2e1)]>0x0&&requestAnimationFrame(()=>{const _0x442621=_0x593300;canvas[_0x442621(0x320)]=width*ratio,canvas[_0x442621(0x259)]=height*ratio,canvas[_0x442621(0x411)]['width']=width+'px',canvas[_0x442621(0x411)][_0x442621(0x259)]=height+'px';const _0x3b2ea5=renderqueue['shift']();ctx[_0x442621(0x3aa)](_0x3b2ea5,0x0,0x0),renderedlastframe=!![],frameticker++,updatedsomething=![],performance[_0x442621(0x2c3)]()-noiseupdateticker>noiseupdaterate&&(noiseupdate(),noiseupdateticker=performance['now']());});uielements=[];function _0x3c19a9(_0x57093f=activecharacternonindex['tc']){const _0x1c57ac=_0x593300;let _0x183b87=activecharacternonindex,_0x3d93bf=_0x183b87['tc'][_0x1c57ac(0x428)](),_0xd94341='',_0x3cd0fc='',_0x2e55d5='';for(let _0x2c6634=0x0;_0x2c6634<_0x3d93bf[0x0];_0x2c6634++){_0x2c6634<_0x57093f[0x0]?_0x3cd0fc+='o':_0x3cd0fc+='x';}for(let _0x2581f3=_0x3d93bf[0x0];_0x2581f3<_0x183b87[_0x1c57ac(0x435)][0x0];_0x2581f3++){_0x3cd0fc+='.';}for(let _0x317f40=0x0;_0x317f40<_0x3d93bf[0x1];_0x317f40++){_0x317f40<_0x57093f[0x1]?_0xd94341+='o':_0xd94341+='x';}for(let _0x69de48=_0x3d93bf[0x1];_0x69de48<_0x183b87[_0x1c57ac(0x435)][0x1];_0x69de48++){_0xd94341+='.';}for(let _0x407464=0x0;_0x407464<_0x183b87[_0x1c57ac(0x37e)][_0x1c57ac(0x2e1)];_0x407464++){_0x2e55d5+=_0x183b87[_0x1c57ac(0x37e)][_0x407464][_0x1c57ac(0x41d)];}let _0x16d2d1=viewportsizex/0x2,_0x598079=viewportsizey/0x2-0x1;if(won){let _0x3702b9=Math[_0x1c57ac(0x296)](now/0x3e8)*0x20+0x60;adduilabel(_0x1c57ac(0x21e),viewportpos,[_0x3702b9,_0x3702b9/0x2,0x0],0x0,![],![],![],!![]);return;}if(gameover){adduilabel('Nothing\x20but\x20ash\x20remains...',viewportpos,[0x40,0x40,0x40],0x0,![],![],![],!![]);return;}if(_0x183b87['pc']===!![]){adduilabel(_0xd94341,[viewportpos[0x0]+_0x598079,viewportpos[0x1]-_0x16d2d1],[0x80,0x0,0x0],0x1,![],![],!![],!![],undefined,undefined,_0x1c57ac(0x451)),adduilabel(_0x3cd0fc,[viewportpos[0x0]+_0x598079,viewportpos[0x1]-_0x16d2d1],[0x0,0x80,0x0],0x0,![],![],!![],!![],undefined,undefined,'Move'),adduilabel(_0x2e55d5,[viewportpos[0x0]+_0x598079,viewportpos[0x1]-_0x16d2d1],[0x80,0x0,0x0],0x2,![],![],!![],!![]);const _0xb0d549=_0x183b87[_0x1c57ac(0x375)][_0x1c57ac(0x41d)]['toString']();let _0x52b5e7=[0x80,0x80,0x80];if(_0x183b87[_0x1c57ac(0x375)]['absorbtion'])_0x52b5e7=convertAbstoColor(_0x183b87[_0x1c57ac(0x375)][_0x1c57ac(0x2bc)]);adduilabel(_0xb0d549,[viewportpos[0x0]+_0x598079,viewportpos[0x1]+_0x16d2d1-_0xb0d549['length']],_0x52b5e7,0x0,![],![],!![],!![],undefined,undefined,'Main\x20Hand');const _0xb984dc=_0x183b87[_0x1c57ac(0x34b)][_0x1c57ac(0x41d)][_0x1c57ac(0x38d)]();_0x52b5e7=[0x40,0x40,0x40];if(_0x183b87[_0x1c57ac(0x34b)][_0x1c57ac(0x2bc)])_0x52b5e7=convertAbstoColor(_0x183b87[_0x1c57ac(0x34b)][_0x1c57ac(0x2bc)])['map'](_0x1d9ce8=>_0x1d9ce8/0x2);if(_0xb984dc!==_0x1c57ac(0x2d9))adduilabel(_0xb984dc,[viewportpos[0x0]+_0x598079,viewportpos[0x1]+_0x16d2d1-_0xb984dc[_0x1c57ac(0x2e1)]],_0x52b5e7,0x1,![],![],!![],!![],undefined,undefined,_0x1c57ac(0x390));const _0x2f789=_0x183b87[_0x1c57ac(0x2be)][_0x1c57ac(0x41d)][_0x1c57ac(0x38d)]();_0x52b5e7=[0x40,0x40,0x40];if(_0x183b87[_0x1c57ac(0x2be)][_0x1c57ac(0x2bc)])_0x52b5e7=convertAbstoColor(_0x183b87[_0x1c57ac(0x2be)][_0x1c57ac(0x2bc)])[_0x1c57ac(0x4a9)](_0x2859d3=>_0x2859d3/0x2);if(_0x2f789!==_0x1c57ac(0x2d9))adduilabel(_0x2f789,[viewportpos[0x0]+_0x598079,viewportpos[0x1]+_0x16d2d1-_0x2f789[_0x1c57ac(0x2e1)]],_0x52b5e7,0x2,![],![],!![],!![],undefined,undefined,_0x1c57ac(0x247));}for(let _0x10b985=0x0;_0x10b985<playercs['length']+0x1;_0x10b985++){if(_0x10b985==playercs[_0x1c57ac(0x2e1)]){let _0x4fcb49=_0x1c57ac(0x277);if(activecharacternonindex['pc']!==!![])_0x4fcb49=_0x1c57ac(0x22f);adduilabel(_0x4fcb49,[viewportpos[0x0]-_0x598079,viewportpos[0x1]-_0x16d2d1+0x1],[0x40,0x0,0x0],-_0x10b985*0x2,![],!![],![],!![]);break;}let _0x13112c=playercs[_0x10b985],_0x4ba3d0=_0x13112c[_0x1c57ac(0x40e)],_0x3c1fed=_0x13112c['name'],_0x58c039=_0x13112c['tc'][0x1],_0x2c7246=_0x13112c['tc'][0x0],_0x98f625=_0x13112c['tc'][0x2];activecharacternonindex===_0x13112c?_0x3c1fed+='<':_0x4ba3d0=_0x4ba3d0[_0x1c57ac(0x4a9)](_0x381f55=>_0x381f55/0x2);if(_0x13112c[_0x1c57ac(0x304)]==!![])_0x4ba3d0=_0x4ba3d0[_0x1c57ac(0x4a9)](_0x33f332=>_0x33f332/0x2);else{let _0x580c4b=adduilabel(_0x58c039['toString'](),[viewportpos[0x0]-_0x598079,viewportpos[0x1]-_0x16d2d1+0x1],[0x40,0x0,0x0],-_0x10b985*0x2-0x1,![],!![],![],!![],undefined,undefined,_0x1c57ac(0x451)),_0x52986d=adduilabel(_0x2c7246[_0x1c57ac(0x38d)](),[viewportpos[0x0]-_0x598079,viewportpos[0x1]-_0x16d2d1+0x2],[0x0,0x40,0x0],-_0x10b985*0x2-0x1,![],!![],![],!![],undefined,undefined,_0x1c57ac(0x360));for(let _0x46da12=0x0;_0x46da12<_0x52986d[_0x1c57ac(0x2e1)];_0x46da12++){const [_0x2ad982,_0x3f139e]=activecharacternonindex[_0x1c57ac(0x295)];_0x52986d[_0x46da12][_0x1c57ac(0x3bc)]=newgrid[_0x2ad982][_0x3f139e];}let _0x5048b8=adduilabel(_0x98f625['toString'](),[viewportpos[0x0]-_0x598079,viewportpos[0x1]-_0x16d2d1+0x3],[0x20,0x20,0x40],-_0x10b985*0x2-0x1,![],!![],![],!![],undefined,undefined,_0x1c57ac(0x285));}adduilabel(_0x3c1fed,[viewportpos[0x0]-_0x598079,viewportpos[0x1]-_0x16d2d1+0x1],_0x4ba3d0,-_0x10b985*0x2,![],!![],![],!![]);}}}function drawline(_0x1bbb0f,_0x43ec67,_0x459c87=![]){const _0x542f37=_0x1a99ef,[_0xdbf934,_0x1c84a6]=_0x1bbb0f,[_0x43505c,_0x4939e5]=_0x43ec67;let _0x1950ba=newgrid[_0xdbf934][_0x1c84a6][_0x542f37(0x439)],_0x4ceadf=newgrid[_0x43505c][_0x4939e5]['elevation'];if(_0x1950ba!==_0x4ceadf&&!_0x459c87)return drawLine3D([_0xdbf934,_0x1c84a6,_0x1950ba],[_0x43505c,_0x4939e5,_0x4ceadf]);const _0x257552=Math['abs'](_0x4939e5-_0x1c84a6),_0x3a9861=Math[_0x542f37(0x3cf)](_0x43505c-_0xdbf934),_0x5d2dd9=_0x1c84a6<_0x4939e5?0x1:-0x1,_0x38491a=_0xdbf934<_0x43505c?0x1:-0x1;let _0x53a950=_0x257552-_0x3a9861,_0xd542fb=_0x1c84a6,_0x1c1aa8=_0xdbf934,_0x55cf40=0x0;while(!![]){if(_0xd542fb===_0x4939e5&&_0x1c1aa8===_0x43505c)return _0x55cf40;(_0xd542fb!=_0x1c84a6||_0x1c1aa8!=_0xdbf934)&&(_0x55cf40+=newgrid[_0x1c1aa8][_0xd542fb]['readOpacity'](_0x1950ba,_0x1bbb0f));if(_0x55cf40>=0x1)return 0x1;const _0xf21ba7=0x2*_0x53a950;_0xf21ba7>-_0x3a9861&&(_0x53a950-=_0x3a9861,_0xd542fb+=_0x5d2dd9),_0xf21ba7<_0x257552&&(_0x53a950+=_0x257552,_0x1c1aa8+=_0x38491a),_0xf21ba7>-_0x3a9861&&_0xf21ba7<_0x257552&&(cornershadows&&(newgrid[_0x1c1aa8][_0xd542fb-_0x5d2dd9][_0x542f37(0x4cb)]()==0x1&&(_0x55cf40+=0.5*newgrid[_0x1c1aa8][_0xd542fb-_0x5d2dd9][_0x542f37(0x4cb)]()),newgrid[_0x1c1aa8-_0x38491a][_0xd542fb][_0x542f37(0x4cb)]()==0x1&&(_0x55cf40+=0.5*newgrid[_0x1c1aa8-_0x38491a][_0xd542fb][_0x542f37(0x4cb)]())));}}function drawLine3D(_0x2d08c6,_0x1a7cc2){const _0x206094=_0x1a99ef;let [_0x1386f9,_0x3b05cb,_0x50afc5]=_0x2d08c6,[_0x4f53f0,_0x3c85bf,_0x227e5c]=_0x1a7cc2;const _0x27480d=Math[_0x206094(0x3cf)](_0x227e5c-_0x50afc5),_0x29bc02=Math['abs'](_0x3c85bf-_0x3b05cb),_0x472821=Math[_0x206094(0x3cf)](_0x4f53f0-_0x1386f9),_0x5c8e94=_0x50afc5<_0x227e5c?0x1:-0x1,_0x50f6e3=_0x3b05cb<_0x3c85bf?0x1:-0x1,_0x3506ac=_0x1386f9<_0x4f53f0?0x1:-0x1;let _0x3e87c8=0x0,_0x4a265b=_0x1386f9,_0x505ac1=_0x3b05cb,_0x78182e=_0x50afc5,_0x5748f3,_0x27fac0;if(_0x29bc02>=_0x472821&&_0x29bc02>=_0x27480d){_0x5748f3=0x2*_0x472821-_0x29bc02,_0x27fac0=0x2*_0x27480d-_0x29bc02;for(let _0x7bba52=0x0;_0x7bba52<=_0x29bc02;_0x7bba52++){if(_0x4a265b==_0x4f53f0&&_0x505ac1==_0x3c85bf)return _0x3e87c8;if(_0x505ac1!=_0x3b05cb||_0x4a265b!=_0x1386f9)_0x3e87c8+=newgrid[_0x4a265b][_0x505ac1]['readOpacity'](_0x78182e,_0x2d08c6);if(_0x3e87c8>=0x1)return 0x1;_0x5748f3>0x0&&(_0x4a265b+=_0x3506ac,_0x5748f3-=0x2*_0x29bc02),_0x27fac0>0x0&&(_0x78182e+=_0x5c8e94,_0x27fac0-=0x2*_0x29bc02),_0x5748f3+=0x2*_0x472821,_0x27fac0+=0x2*_0x27480d,_0x505ac1+=_0x50f6e3;}}else{if(_0x472821>=_0x29bc02&&_0x472821>=_0x27480d){_0x5748f3=0x2*_0x29bc02-_0x472821,_0x27fac0=0x2*_0x27480d-_0x472821;for(let _0x2cd52d=0x0;_0x2cd52d<=_0x472821;_0x2cd52d++){if(_0x4a265b==_0x4f53f0&&_0x505ac1==_0x3c85bf)return _0x3e87c8;if(_0x505ac1!=_0x3b05cb||_0x4a265b!=_0x1386f9)_0x3e87c8+=newgrid[_0x4a265b][_0x505ac1][_0x206094(0x4cb)](_0x78182e,_0x2d08c6);if(_0x3e87c8>=0x1)return 0x1;_0x5748f3>0x0&&(_0x505ac1+=_0x50f6e3,_0x5748f3-=0x2*_0x472821),_0x27fac0>0x0&&(_0x78182e+=_0x5c8e94,_0x27fac0-=0x2*_0x472821),_0x5748f3+=0x2*_0x29bc02,_0x27fac0+=0x2*_0x27480d,_0x4a265b+=_0x3506ac;}}else{_0x5748f3=0x2*_0x472821-_0x27480d,_0x27fac0=0x2*_0x29bc02-_0x27480d;for(let _0x5e3803=0x0;_0x5e3803<=_0x27480d;_0x5e3803++){if(_0x4a265b==_0x4f53f0&&_0x505ac1==_0x3c85bf&&_0x78182e==_0x227e5c)return _0x3e87c8;if(_0x505ac1!=_0x3b05cb||_0x4a265b!=_0x1386f9)_0x3e87c8+=newgrid[_0x4a265b][_0x505ac1][_0x206094(0x4cb)](_0x78182e,_0x2d08c6);if(_0x3e87c8>=0x1)return 0x1;_0x5748f3>0x0&&(_0x4a265b+=_0x3506ac,_0x5748f3-=0x2*_0x27480d),_0x27fac0>0x0&&(_0x505ac1+=_0x50f6e3,_0x27fac0-=0x2*_0x27480d),_0x5748f3+=0x2*_0x472821,_0x27fac0+=0x2*_0x29bc02,_0x78182e+=_0x5c8e94;}}}}const turndiscountrate=0.5;function planturn(_0x3ba4e4){const _0x41c1dd=_0x1a99ef;let _0x16e04e=performance[_0x41c1dd(0x2c3)]();spot(_0x3ba4e4);let _0x3a8ee2=new Map();const _0x4f082a=_0x3ba4e4[_0x41c1dd(0x3c7)][_0x41c1dd(0x3e6)],_0x28bf81=new ActionNode(_0x3ba4e4[_0x41c1dd(0x295)],null,_0x3ba4e4['tc'],0x0,0x0,null,-Infinity,_0x3ba4e4['primaryitem']),_0x2d2d86=[_0x28bf81];let _0x3ff457=_0x28bf81,_0x2e5258=_0x4f082a(_0x28bf81,_0x3ba4e4),_0x7ca55b=_0x2e5258,_0x1ace53=0x0,_0x2d69ae=0x0;if(_0x3ba4e4[_0x41c1dd(0x3c7)][_0x41c1dd(0x41d)]=='idle')return[];while(_0x2d2d86[_0x41c1dd(0x2e1)]>0x0){_0x1ace53++;let _0xdac560=_0x2d2d86[_0x41c1dd(0x2ed)](),[_0x107bdc,_0x74838a]=_0xdac560[_0x41c1dd(0x295)],{tc:_0x4725bd,utility:_0x147542,damagepotential:_0x82118,hazards:_0x2e4176}=_0xdac560,[_0x2bdf13,_0x19c813]=_0x4725bd,_0x26ffb5=![],_0xad7329=0x0;if(_0x19c813<0x0)continue;_0x2bdf13<0x0&&(_0xad7329=Math[_0x41c1dd(0x4bb)](0x1,Math['ceil'](Math[_0x41c1dd(0x3cf)](_0x2bdf13/_0x3ba4e4['tcmax'][0x0])),_0xad7329));if(_0xad7329>0x1)continue;const _0x519270=_0x107bdc+','+_0x74838a;!_0x3a8ee2[_0x41c1dd(0x4c9)](_0x519270)&&_0x3a8ee2[_0x41c1dd(0x268)](_0x519270,[]);let _0x37a3ed=_0x3a8ee2['get'](_0x519270),_0x36d668;for(let _0x19280e=0x0;_0x19280e<_0x37a3ed[_0x41c1dd(0x2e1)];_0x19280e++){_0x36d668=_0x37a3ed[_0x19280e],_0x2d69ae++;if(_0x19c813<=_0x36d668['tc'][0x1]&&_0x2bdf13<=_0x36d668['tc'][0x0]&&_0x82118<=_0x36d668[_0x41c1dd(0x1ed)]&&_0x2e4176>=_0x36d668[_0x41c1dd(0x40d)]&&_0x147542<=_0x36d668[_0x41c1dd(0x4bf)]){_0x26ffb5=!![];break;}}if(_0x26ffb5)continue;_0x37a3ed[_0x41c1dd(0x23c)](_0xdac560);_0x147542>_0x7ca55b&&(_0x3ff457=_0xdac560,_0x7ca55b=_0x147542);const _0x271e10=[];for(let _0x2b507f=0x0;_0x2b507f<_0x3ba4e4[_0x41c1dd(0x3c7)][_0x41c1dd(0x452)]['length'];_0x2b507f++){_0x271e10['push'](_0x3ba4e4['actions'][_0x2b507f]);}let _0x4c3f46,_0x15f620;for(let _0x48e7e2=0x0;_0x48e7e2<_0x271e10['length'];_0x48e7e2++){_0x4c3f46=_0x271e10[_0x48e7e2],_0x15f620=_0x4c3f46(_0xdac560,_0x3ba4e4,_0x147542);for(let _0x217923=0x0;_0x217923<_0x15f620[_0x41c1dd(0x2e1)];_0x217923++){let _0x18b49c=_0x15f620[_0x217923],_0x1f88fd=_0x4f082a(_0x18b49c,_0x3ba4e4);_0x1f88fd*=turndiscountrate**_0xad7329,_0x18b49c[_0x41c1dd(0x4bf)]=_0x1f88fd,_0x2d2d86[_0x41c1dd(0x23c)](_0x18b49c);}}}return _0x37f1ee(_0x3ff457);function _0x37f1ee(_0x56685f){const _0x253ef1=_0x41c1dd;let _0x5e2f4f=[];while(_0x56685f['tc']&&_0x56685f['tc'][0x0]<0x0){_0x56685f=_0x56685f[_0x253ef1(0x232)];}while(_0x56685f['action']!=null){_0x5e2f4f[_0x253ef1(0x314)](_0x56685f[_0x253ef1(0x2d0)]),_0x56685f=_0x56685f[_0x253ef1(0x232)];}return _0x5e2f4f;}}function subtractcost(_0x410efa,_0x390070){const _0x1d6af2=_0x1a99ef,_0x4f73ee=_0x410efa[_0x1d6af2(0x302)],_0x33e0d8=[_0x390070[0x0]-_0x4f73ee[0x0],_0x390070[0x1]-_0x4f73ee[0x1],_0x390070[0x2]-_0x4f73ee[0x2]];return _0x33e0d8;}class ActionNode{constructor(_0x4038b9,_0x53b5c4,_0x2db051,_0x161030,_0x443bc5,_0x14adcc,_0x1bd60f,_0x119c46){const _0x2c6c44=_0x1a99ef;this[_0x2c6c44(0x295)]=_0x4038b9,this[_0x2c6c44(0x2d0)]=_0x53b5c4;if(_0x2db051)this['tc']=_0x2db051[_0x2c6c44(0x428)]();else this['tc']=[];this[_0x2c6c44(0x40d)]=_0x161030,this[_0x2c6c44(0x1ed)]=_0x443bc5,this[_0x2c6c44(0x232)]=_0x14adcc,this[_0x2c6c44(0x305)]=_0x1bd60f,this[_0x2c6c44(0x3df)]=_0x119c46||this[_0x2c6c44(0x232)][_0x2c6c44(0x3df)];}}