const _0x1fd1d8=_0x438d;(function(_0x3fabbf,_0x5317d5){const _0xb49003=_0x438d,_0x354561=_0x3fabbf();while(!![]){try{const _0x53bf31=-parseInt(_0xb49003(0x2c9))/0x1*(-parseInt(_0xb49003(0x31a))/0x2)+-parseInt(_0xb49003(0x250))/0x3+parseInt(_0xb49003(0x2ce))/0x4*(parseInt(_0xb49003(0x288))/0x5)+-parseInt(_0xb49003(0x33f))/0x6*(-parseInt(_0xb49003(0x188))/0x7)+-parseInt(_0xb49003(0x151))/0x8*(parseInt(_0xb49003(0x10d))/0x9)+parseInt(_0xb49003(0x245))/0xa*(parseInt(_0xb49003(0x23f))/0xb)+-parseInt(_0xb49003(0x31d))/0xc;if(_0x53bf31===_0x5317d5)break;else _0x354561['push'](_0x354561['shift']());}catch(_0x3a78aa){_0x354561['push'](_0x354561['shift']());}}}(_0x417e,0xe2628));const audioContext=new(window['AudioContext']||window[(_0x1fd1d8(0x29a))])();class Envelope{constructor(_0x53c3cf,_0x45b678,_0x241edb){const _0x5f18df=_0x1fd1d8;this[_0x5f18df(0xdb)]=_0x53c3cf,this[_0x5f18df(0x119)]=_0x45b678,this['duration']=_0x241edb;}}class SoundManager{constructor(_0x91661e,_0xb0c8d5){const _0x52b03c=_0x1fd1d8;this[_0x52b03c(0x1e4)]=_0x91661e,this[_0x52b03c(0x374)]=_0x91661e[_0x52b03c(0x2cf)](),this[_0x52b03c(0x374)][_0x52b03c(0x2d1)][_0x52b03c(0x354)]=0x1,this['masterAmbientGainNode']=_0x91661e['createGain'](),this[_0x52b03c(0x32c)]['gain'][_0x52b03c(0x354)]=0x1,this['limiter']=_0x91661e[_0x52b03c(0x325)](),this[_0x52b03c(0x374)]['connect'](this['limiter']),this[_0x52b03c(0x32c)][_0x52b03c(0x145)](this[_0x52b03c(0x87)]),this['limiter'][_0x52b03c(0x145)](this[_0x52b03c(0x1e4)]['destination']),this[_0x52b03c(0x189)]=new Array(_0xb0c8d5),this[_0x52b03c(0x1eb)]=new Array(_0xb0c8d5),this['oldestsource']=0x0,this[_0x52b03c(0x2e1)]=0x0,this[_0x52b03c(0x29d)]=0x0,this[_0x52b03c(0xac)]=0x0;for(let _0x5378b3=0x0;_0x5378b3<this[_0x52b03c(0x189)]['length'];_0x5378b3++){this[_0x52b03c(0x189)][_0x5378b3]=new SoundSource(this[_0x52b03c(0x1e4)],this);}for(let _0x3305=0x0;_0x3305<this['ambientsources'][_0x52b03c(0x86)];_0x3305++){this[_0x52b03c(0x1eb)][_0x3305]=new SoundSource(this[_0x52b03c(0x1e4)],this);}this['limiter']['threshold'][_0x52b03c(0x354)]=0x0,this[_0x52b03c(0x87)][_0x52b03c(0x330)]['value']=0x0,this[_0x52b03c(0x87)][_0x52b03c(0x27d)][_0x52b03c(0x354)]=0x14,this[_0x52b03c(0x87)][_0x52b03c(0x155)][_0x52b03c(0x354)]=0x0,this['limiter']['release']['value']=0.25;}[_0x1fd1d8(0xa5)](){const _0x307f3a=_0x1fd1d8,_0x411813=this[_0x307f3a(0x189)][this['oldestsource']];return _0x411813[_0x307f3a(0x333)]&&(_0x411813['output']['disconnect'](),_0x411813[_0x307f3a(0x333)][_0x307f3a(0x19e)](),_0x411813[_0x307f3a(0x1a3)]=null),this[_0x307f3a(0x2e1)]=_0x411813,this[_0x307f3a(0x30a)]++,this[_0x307f3a(0x30a)]>=this[_0x307f3a(0x189)][_0x307f3a(0x86)]&&(this[_0x307f3a(0x30a)]=0x0),_0x411813;}[_0x1fd1d8(0x1ed)](_0x4b3ec5){const _0xeba2e1=_0x1fd1d8;if(!this[_0xeba2e1(0x2e9)])this[_0xeba2e1(0x2e9)]=[];this['effectschain'][_0xeba2e1(0x1c6)](_0x4b3ec5),this[_0xeba2e1(0xed)]();}[_0x1fd1d8(0xed)](){const _0x525705=_0x1fd1d8;let _0x617252=this[_0x525705(0x374)];this['effectschain'][_0x525705(0xb8)](function(_0x338bab){const _0x3a886a=_0x525705;_0x617252[_0x3a886a(0x145)](_0x338bab),_0x617252=_0x338bab;}),_0x617252[_0x525705(0x145)](this[_0x525705(0x87)]);}[_0x1fd1d8(0x270)](){const _0x29891a=_0x1fd1d8,_0x10d77a=this[_0x29891a(0x1eb)][this[_0x29891a(0x29d)]];return _0x10d77a[_0x29891a(0x333)]&&(_0x10d77a[_0x29891a(0x1cc)][_0x29891a(0x130)](),_0x10d77a[_0x29891a(0x333)]['stop'](),_0x10d77a[_0x29891a(0x1a3)]=null),this[_0x29891a(0xac)]=_0x10d77a,this['oldestambientsource']++,this[_0x29891a(0x29d)]>=this['ambientsources'][_0x29891a(0x86)]&&(this['oldestambientsource']=0x0),_0x10d77a;}[_0x1fd1d8(0x1d2)](){const _0x4468c7=_0x1fd1d8;this[_0x4468c7(0x333)]=this[_0x4468c7(0x2e1)],this['soundmaker'][_0x4468c7(0x2e0)](),this[_0x4468c7(0x333)][_0x4468c7(0x1cc)][_0x4468c7(0x145)](this[_0x4468c7(0x374)]);}[_0x1fd1d8(0xdd)](){const _0x580bd8=_0x1fd1d8;this[_0x580bd8(0x277)]=this[_0x580bd8(0xac)],this[_0x580bd8(0x277)]['start'](),this[_0x580bd8(0x277)][_0x580bd8(0x1cc)][_0x580bd8(0x145)](this[_0x580bd8(0x32c)]);}}class SoundSource{constructor(_0x3385a3,_0x1d72a6,_0x58495c,_0x1004f2,_0x3d843b,_0x5c4929,_0x19c2c6,_0x37fa81,_0xcd23a8){const _0x35ef97=_0x1fd1d8;this[_0x35ef97(0x1e4)]=_0x3385a3,this[_0x35ef97(0x35b)]=_0x1d72a6,this[_0x35ef97(0x125)]=_0x58495c,this['freq']=_0x1004f2,this[_0x35ef97(0x2ef)]=_0x3d843b,this[_0x35ef97(0x34e)]=_0x5c4929||0x1,this['fx']=[],this['fxnodes']=[];if(_0x19c2c6)this['fx']=_0x19c2c6[_0x35ef97(0x169)]();this[_0x35ef97(0x106)]=[];if(_0x37fa81)this['overtones']=_0x37fa81['slice']();this['overtonenoisemakers']=[],this[_0x35ef97(0xa1)]=[],this[_0x35ef97(0x2fc)]=[];if(_0xcd23a8)this['freqmod']=_0xcd23a8[_0x35ef97(0x169)]();this[_0x35ef97(0x2b8)]=_0x3385a3[_0x35ef97(0x2cf)](),this['limiter']=this[_0x35ef97(0x1e4)][_0x35ef97(0x325)](),this[_0x35ef97(0x374)]=_0x3385a3[_0x35ef97(0x2cf)](),this[_0x35ef97(0x1cc)]=this[_0x35ef97(0x374)],this[_0x35ef97(0x87)]['threshold'][_0x35ef97(0x354)]=0x0,this['limiter'][_0x35ef97(0x330)]['value']=0x0,this[_0x35ef97(0x87)][_0x35ef97(0x27d)][_0x35ef97(0x354)]=0xa,this[_0x35ef97(0x87)]['attack'][_0x35ef97(0x354)]=0.003,this[_0x35ef97(0x87)][_0x35ef97(0x306)][_0x35ef97(0x354)]=0.25;}[_0x1fd1d8(0x2e0)](){const _0xefab3b=_0x1fd1d8;this[_0xefab3b(0x374)][_0xefab3b(0x2d1)]['value']=this['vol'];const _0x4688bd=this;this[_0xefab3b(0x1cc)][_0xefab3b(0x130)](),this['gainNode'][_0xefab3b(0x130)]();if(this[_0xefab3b(0x333)])this[_0xefab3b(0x333)][_0xefab3b(0x130)]();let _0x4b7c0d=this[_0xefab3b(0x2b8)];this[_0xefab3b(0x2b8)][_0xefab3b(0x2d1)][_0xefab3b(0x354)]=0x0,this[_0xefab3b(0x2b8)][_0xefab3b(0x2d1)][_0xefab3b(0x2f5)](0x0,this[_0xefab3b(0x1e4)][_0xefab3b(0x300)]),this[_0xefab3b(0xe1)][_0xefab3b(0xb8)](function(_0x2fcf17){const _0xc2bea2=_0xefab3b;_0x2fcf17[_0xc2bea2(0x130)](),_0x2fcf17['buffer']=null;}),this[_0xefab3b(0xe1)]=[];this['fx'][_0xefab3b(0x86)]>0x0&&this['fx']['forEach'](function(_0x32965c,_0x1d6af3){const _0x2e4720=_0xefab3b;_0x4688bd[_0x2e4720(0xe1)][_0x2e4720(0x1c6)](_0x32965c()),_0x4b7c0d[_0x2e4720(0x145)](_0x4688bd[_0x2e4720(0xe1)][_0x1d6af3]),_0x4b7c0d=_0x4688bd[_0x2e4720(0xe1)][_0x1d6af3];});_0x4b7c0d['connect'](this[_0xefab3b(0x374)]);if(this[_0xefab3b(0x125)]===_0xefab3b(0xcb)||this['type']===_0xefab3b(0x296)||this['type']===_0xefab3b(0x236)){const _0x16dc6=this[_0xefab3b(0x1e4)][_0xefab3b(0x1bd)]*this[_0xefab3b(0x2ef)][_0xefab3b(0x1f2)],_0x57ba70=this['context'][_0xefab3b(0x27f)](0x1,_0x16dc6,this[_0xefab3b(0x1e4)][_0xefab3b(0x1bd)]),_0x20d638=_0x57ba70[_0xefab3b(0x1d5)](0x0);if(this[_0xefab3b(0x125)]==='lowpass-noise-white')for(let _0x30f51e=0x0;_0x30f51e<_0x16dc6;_0x30f51e++){_0x20d638[_0x30f51e]=Math[_0xefab3b(0x222)]()*0x2-0x1;}else{let _0x155fc2=0x0;const _0x36481a=0x32;let _0x3692e7=0x0;const _0x5cbfd6=Array(_0x36481a)[_0xefab3b(0x216)](0x0);for(let _0x500480=0x0;_0x500480<_0x16dc6;_0x500480++){let _0x5c4ba0=Math['random']()*0x2-0x1;_0x3692e7-=_0x5cbfd6[_0x500480%_0x36481a],_0x5cbfd6[_0x500480%_0x36481a]=_0x5c4ba0,_0x3692e7+=_0x5c4ba0;let _0x249212=_0x3692e7/_0x36481a,_0x153dd3=0.02;_0x20d638[_0x500480]=(_0x155fc2+_0x153dd3*_0x249212)/(0x1+_0x153dd3),_0x155fc2=_0x20d638[_0x500480],_0x20d638[_0x500480]*=3.5;}}this['noise']=this['context'][_0xefab3b(0x268)](),this[_0xefab3b(0xcb)][_0xefab3b(0x1a3)]=_0x57ba70,this[_0xefab3b(0xcb)][_0xefab3b(0x228)]=!![],this[_0xefab3b(0x333)]=this['noise'];if(this[_0xefab3b(0x125)]==='lowpass-noise'||this[_0xefab3b(0x125)]===_0xefab3b(0x236)){const _0x42a23f=this[_0xefab3b(0x1e4)][_0xefab3b(0x24c)]();_0x42a23f['type']='lowpass',_0x42a23f[_0xefab3b(0x22f)][_0xefab3b(0x354)]=this['freq'],this[_0xefab3b(0x2be)]=_0x42a23f,this['soundmaker'][_0xefab3b(0x145)](this[_0xefab3b(0x2be)]),this[_0xefab3b(0x2be)][_0xefab3b(0x145)](this[_0xefab3b(0x2b8)]);}else this[_0xefab3b(0x333)][_0xefab3b(0x145)](this[_0xefab3b(0x2b8)]);}else this[_0xefab3b(0x333)]=this['context'][_0xefab3b(0xd3)](this['type'],this[_0xefab3b(0xea)]),this['soundmaker']['type']=this[_0xefab3b(0x125)],this[_0xefab3b(0x333)][_0xefab3b(0x22f)][_0xefab3b(0x354)]=this[_0xefab3b(0xea)],this[_0xefab3b(0x333)]['connect'](this[_0xefab3b(0x2b8)]);this['soundmaker'][_0xefab3b(0x2e0)]();this[_0xefab3b(0x2ef)]?(this[_0xefab3b(0x2b8)][_0xefab3b(0x2d1)]['value']=0x0,modulateparam(this[_0xefab3b(0x2ef)],this[_0xefab3b(0x2b8)][_0xefab3b(0x2d1)],this['context'],0x1),this[_0xefab3b(0x2b8)][_0xefab3b(0x2d1)]['linearRampToValueAtTime'](0x0,this['context'][_0xefab3b(0x300)]+this[_0xefab3b(0x2ef)][_0xefab3b(0x1f2)])):console[_0xefab3b(0x35f)](_0xefab3b(0x2db));this[_0xefab3b(0x2fc)]&&(this[_0xefab3b(0x125)]!==_0xefab3b(0x296)&&this[_0xefab3b(0x125)]!==_0xefab3b(0xcb)&&this[_0xefab3b(0x125)]!==_0xefab3b(0x236)&&modulateparam(this[_0xefab3b(0x2fc)],this[_0xefab3b(0x333)][_0xefab3b(0x22f)],this[_0xefab3b(0x1e4)],this[_0xefab3b(0xea)]),(this[_0xefab3b(0x125)]=='lowpass-noise'||this[_0xefab3b(0x125)]==_0xefab3b(0x236))&&modulateparam(this[_0xefab3b(0x2fc)],this[_0xefab3b(0x2be)][_0xefab3b(0x22f)],this[_0xefab3b(0x1e4)],this[_0xefab3b(0xea)]));this[_0xefab3b(0x7e)][_0xefab3b(0xb8)](function(_0x50a617){const _0xc5cf97=_0xefab3b;_0x50a617['disconnect'](),_0x50a617[_0xc5cf97(0x19e)]();}),this['overtonesoundmakers'][_0xefab3b(0xb8)](function(_0x106c07){const _0x5cc6ca=_0xefab3b;_0x106c07 instanceof OscillatorNode&&_0x106c07[_0x5cc6ca(0x19e)](),_0x106c07[_0x5cc6ca(0x130)]();}),this[_0xefab3b(0x7e)]=[],this[_0xefab3b(0xa1)]=[];if(this[_0xefab3b(0x106)])for(let _0xa226e9=0x0;_0xa226e9<this[_0xefab3b(0x106)]['length'];_0xa226e9++){if(this['type']!==_0xefab3b(0xcb)&&this[_0xefab3b(0x125)]!==_0xefab3b(0x296)&&this[_0xefab3b(0x125)]!==_0xefab3b(0x236))this['overtonesoundmakers'][_0xefab3b(0x1c6)](this[_0xefab3b(0x1e4)][_0xefab3b(0xd3)](this['type'])),this[_0xefab3b(0xa1)][_0xa226e9][_0xefab3b(0x2e0)]();else(this[_0xefab3b(0x125)]==_0xefab3b(0x296)||this['type']==_0xefab3b(0x236))&&(this['overtonenoisemakers']['push'](this[_0xefab3b(0x1e4)]['createBufferSource']()),this[_0xefab3b(0x7e)][_0xa226e9][_0xefab3b(0x1a3)]=this[_0xefab3b(0xcb)][_0xefab3b(0x1a3)],this[_0xefab3b(0x7e)][_0xa226e9][_0xefab3b(0x228)]=!![],this[_0xefab3b(0xa1)][_0xefab3b(0x1c6)](this[_0xefab3b(0x1e4)][_0xefab3b(0x24c)]()),this[_0xefab3b(0x7e)][_0xa226e9]['connect'](this[_0xefab3b(0xa1)][_0xa226e9]),this[_0xefab3b(0x7e)][_0xa226e9][_0xefab3b(0x2e0)]());this[_0xefab3b(0xa1)][_0xa226e9]['frequency']['setValueAtTime'](this[_0xefab3b(0xea)]*this[_0xefab3b(0x106)][_0xa226e9],this[_0xefab3b(0x1e4)][_0xefab3b(0x300)]),this[_0xefab3b(0xa1)][_0xa226e9][_0xefab3b(0x145)](this['gainNode']),this[_0xefab3b(0x2fc)]&&(this[_0xefab3b(0xa1)][_0xa226e9][_0xefab3b(0x22f)][_0xefab3b(0x354)]=this[_0xefab3b(0xea)]*this[_0xefab3b(0x106)][_0xa226e9],modulateparam(this[_0xefab3b(0x2fc)],this[_0xefab3b(0xa1)][_0xa226e9][_0xefab3b(0x22f)],this[_0xefab3b(0x1e4)],this['freq']*this[_0xefab3b(0x106)][_0xa226e9]));}}}function modulateparam(_0x365559,_0x864908,_0x3bab59,_0x1ef51e,_0x35f76d=!![]){const _0x4e337c=_0x1fd1d8,{grainsize:_0x508a63,duration:_0x26ebe5,func:_0x56ef33}=_0x365559;_0x864908[_0x4e337c(0xad)](_0x3bab59[_0x4e337c(0x300)]);for(let _0x197ca1=0x0;_0x197ca1<_0x26ebe5;_0x197ca1+=_0x508a63*(Math[_0x4e337c(0x222)]()*0.5+0.5)){_0x864908[_0x4e337c(0x2b4)](_0x56ef33(_0x197ca1)*_0x1ef51e,_0x3bab59[_0x4e337c(0x300)]+_0x197ca1);}}const soundManager=new SoundManager(audioContext,0xa);let verb=createReverb(audioContext,0x1)(),lowpass=createLowpassFilter(audioContext,0x2710)(),delaychain=createDelayChain(audioContext,0.25,0.9,[lowpass,verb])();soundManager['effectschain']=[delaychain],soundManager[_0x1fd1d8(0xed)]();const envelopes={'random1sec':new Envelope(_0xb84c42=>Math[_0x1fd1d8(0x222)](),0.01,0x1),'crack':new Envelope(_0x2e74b3=>0x1,0.01,0.2),'stab':new Envelope(_0x329a88=>0x1,0.01,0.1),'boom':new Envelope(_0x40ebf6=>0x1,0.1,0.5),'oldcrack':new Envelope(adsrconvert([0.01,0.05,0x1,0.02],0.01),0.01,0.3),'rainfall':new Envelope(_0x11f219=>Math[_0x1fd1d8(0x222)](),0.1,0x14),'fire':new Envelope(_0x4af769=>adsrconvert([0x3,0.05,0x1,0.02],0x5a)(_0x4af769)*(Math['random']()/0x2+0.5),0.03,0x6),'randomboom':new Envelope(_0x4b3d38=>0x1*Math[_0x1fd1d8(0x222)](),0.1,0x1),'randomstab':new Envelope(_0x1cc830=>Math[_0x1fd1d8(0x222)]()*Math[_0x1fd1d8(0x1ac)](0x1,_0x1cc830*0xa),0.1,0.2),'linearfall':new Envelope(_0x52f559=>Math[_0x1fd1d8(0x115)](0x1-_0x52f559,0.1),0.2,0x1),'linearfallhalf':new Envelope(_0x291d62=>Math[_0x1fd1d8(0x115)](0x1-0x4*_0x291d62,0x0),0.01,0.5),'negabsval':new Envelope(linearspike(0x1),0.1,0x1)};let sounds={'caveambience':[0x64,_0x1fd1d8(0x296),envelopes[_0x1fd1d8(0x159)],[createReverb(audioContext,0x5)],new Envelope(_0x3e84e9=>Math['random']()*0.5+0.5,0.1,0x1),[0x2,0x4,0x8],0.25],'deepspookybong':[0x64,_0x1fd1d8(0x2fa),new Envelope(_0x55f4f5=>linearspike(0x1)(_0x55f4f5)*Math[_0x1fd1d8(0x222)](),0.01,0x1),[createReverb(audioContext,0xa)],new Envelope(_0x4bfc1b=>Math[_0x1fd1d8(0x222)]()*0.1+0.95,0.1,0x1),[2.1],0.1],'highshrillbing':[0x3e8,_0x1fd1d8(0x2fa),new Envelope(linearspike(0x1),0.01,0x1),[createReverb(audioContext,0xa)],new Envelope(_0x3e1b2c=>Math[_0x1fd1d8(0x222)]()*0.1+0.95,0.1,0x1),[2.1],0.1],'footstep2':[0x64,_0x1fd1d8(0x2fa),envelopes[_0x1fd1d8(0x271)],[createReverb(audioContext,0.5)],null,[0x1/0x2]],'footstep':[0x1f4,'lowpass-noise-white',new Envelope(_0x2585d8=>Math[_0x1fd1d8(0x115)](linearspike(0.1)(_0x2585d8)**0.3*Math[_0x1fd1d8(0x222)]()**0x2,linearspike(0.1)(Math[_0x1fd1d8(0x115)](_0x2585d8-0.15,0x0))**0.3*Math[_0x1fd1d8(0x222)]()**0x2),0.015,0.3),[],null,[],0.25],'footstepverb':[0x1f4,'lowpass-noise-white',new Envelope(_0x3fcd1f=>Math[_0x1fd1d8(0x115)](linearspike(0.1)(_0x3fcd1f)**0.3*Math[_0x1fd1d8(0x222)]()**0x2,linearspike(0.1)(Math[_0x1fd1d8(0x115)](_0x3fcd1f-0.15,0x0))**0.3*Math['random']()**0x2),0.015,0.3),[createReverb(audioContext,0.5)],null,[],0.25],'weirdtone':[0x1b8,_0x1fd1d8(0x2fa),envelopes[_0x1fd1d8(0x220)],[],envelopes[_0x1fd1d8(0x21a)],[0x2,0x4]],'weirdnoise':[0x1f4,_0x1fd1d8(0x296),envelopes[_0x1fd1d8(0x220)],[]],'footsteptap':[0xc8,_0x1fd1d8(0x236),new Envelope(_0x58aad9=>Math[_0x1fd1d8(0x115)](linearspike(0.1)(_0x58aad9)**0x5*Math[_0x1fd1d8(0x222)]()/0x2,linearspike(0.1)(Math[_0x1fd1d8(0x115)](_0x58aad9-0.15,0x0))**0x5*Math['random']()/0x2),0.005,0.3),[],null,[1.1,1.2,1.3,0x2],0.5],'footsteptapverb':[0xc8,_0x1fd1d8(0x236),new Envelope(_0x36f882=>Math[_0x1fd1d8(0x115)](linearspike(0.1)(_0x36f882)**0x5,linearspike(0.1)(Math['max'](_0x36f882-0.15,0x0))**0x5*Math[_0x1fd1d8(0x222)]()/0x2),0.005,0.3),[createReverb(audioContext,0.5)],null,[1.1,1.2,1.3,0x2],0.25],'frogribbit':[0x3e8,_0x1fd1d8(0x2fa),new Envelope(_0xd67bf7=>Math[_0x1fd1d8(0x115)](linearspike(0.1)(_0xd67bf7)**0x19,linearspike(0.1)(Math[_0x1fd1d8(0x115)](_0xd67bf7-0.15,0x0))**0x19),0.01,0.3),[],null,[1.1,1.2,1.3,1.4,1.5,1.6,1.7,1.8,1.9,0x2],0x1],'softsine':[0x190,_0x1fd1d8(0x2fa),envelopes['negabsval'],[]],'arrowwhoosh':[0x190,_0x1fd1d8(0x236),new Envelope(linearspike(0.8),0.01,0.3),[],new Envelope(_0x3bc650=>Math[_0x1fd1d8(0x115)](0x1-_0x3bc650*0x4,0.5),0.2,0.5),[0x2]],'arrowwhistle':[0xc8,_0x1fd1d8(0x2fa),new Envelope(_0x253786=>linearspike(0.8)(_0x253786)*Math['random'](),0.1,0.3),[createReverb(audioContext,0.2),createLowpassFilter(audioContext,0xc8)],new Envelope(_0x4e5f21=>Math[_0x1fd1d8(0x115)](0x1-_0x4e5f21*0x4,0.8),0.2,0.5),[0.9,0.95,1.05,1.1]],'arrowthudnoise':[0x96,_0x1fd1d8(0x296),new Envelope(_0x59e09d=>_0x59e09d**0.01*Math['max'](0x1-_0x59e09d*0xa,0x0),0.01,0.2),[createPause(audioContext,0.2)],null,[1.1,1.2,1.3,1.4,1.5,1.6,1.7,1.8,1.9,0x2],0.1],'arrowthudtone':[0x96,_0x1fd1d8(0x2fa),new Envelope(_0xabe1fc=>Math[_0x1fd1d8(0x115)](0x1-_0xabe1fc*0xa,0x0),0.01,0.2),[createReverb(audioContext,0.2),createPause(audioContext,0.2)],new Envelope(_0xbf469a=>Math[_0x1fd1d8(0x222)]()*0x2,0.005,0.2),[1.1,1.2,1.3,1.4,1.5,1.6,1.7,1.8,1.9,0x2],0.1],'clubwhoosh':[0x190,_0x1fd1d8(0x236),new Envelope(linearspike(0.8),0.01,0.3),[],new Envelope(_0x5b26b3=>Math[_0x1fd1d8(0x115)](0x1-_0x5b26b3*0x4,0.5),0.2,0.5),[0x2]],'clubwhoom':[0xc8,_0x1fd1d8(0x2fa),new Envelope(_0x1cd26f=>linearspike(0.2)(_0x1cd26f)*Math[_0x1fd1d8(0x222)](),0.1,0.2),[createReverb(audioContext,0.2),createLowpassFilter(audioContext,0xc8)],new Envelope(_0x12145c=>Math[_0x1fd1d8(0x115)](0x1-_0x12145c*0x4,0.8),0.2,0.5),[0.9,0.95,1.05,1.1]],'clubhitnoise':[0x64,_0x1fd1d8(0x296),new Envelope(_0x35e764=>_0x35e764**0.01*Math[_0x1fd1d8(0x115)](0x1-_0x35e764*0x5,0x0),0.01,0.4),[createDistortion(audioContext,0.5),createPause(audioContext,0.2)],null,[1.1,1.2,1.3,1.4,1.5,1.6,1.7,1.8,1.9,0x2],0.5],'clubhittone':[0x32,_0x1fd1d8(0x2fa),new Envelope(_0x2150c1=>Math[_0x1fd1d8(0x115)](0x1-_0x2150c1*0x5,0x0),0.01,0.4),[createReverb(audioContext,0.2),createPause(audioContext,0.2)],new Envelope(_0x467430=>Math[_0x1fd1d8(0x222)]()*0x2,0.005,0.1),[1.1,1.2,1.3,1.4,1.5,1.6,1.7,1.8,1.9,0x2],0.5],'clubhitcrack':[0x64,_0x1fd1d8(0x296),new Envelope(_0x32dc81=>_0x32dc81**0.01*Math[_0x1fd1d8(0x115)](0x1-_0x32dc81*2.5,0x0)*Math['random']()**0xa,0.005,0.2),[createPause(audioContext,0.2)],new Envelope(_0x36a582=>0x1+_0x36a582*0x1*Math['random'](),0.01,0.2),[1.1,1.2,1.3,1.4,1.5,1.6,1.7,1.8,1.9,0x2,0x4,0x8,0x10,0x20,0x40,0x80],0.1],'swordswingbig':[0xc8,_0x1fd1d8(0x236),new Envelope(linearspike(0.4),0.1,0.4),[],new Envelope(_0x4010ae=>Math[_0x1fd1d8(0x115)](0x1-_0x4010ae*0x6,0.5)),[]],'swordswingsmall':[0x190,'lowpass-noise-white',new Envelope(linearspike(0.2),0.1,0.2),[],new Envelope(_0x3ee09e=>Math[_0x1fd1d8(0x115)](0x1-_0x3ee09e*0xc,0.25)),[]],'swordswingxs':[0x258,_0x1fd1d8(0x236),new Envelope(linearspike(0.15),0.1,0.15),[],new Envelope(_0x5954e5=>Math[_0x1fd1d8(0x115)](0x1-_0x5954e5*0x12,0.2)),[]],'swordswingsmallverb':[0x190,_0x1fd1d8(0x236),new Envelope(linearspike(0.2),0.1,0.2),[createReverb(audioContext,0.5)],new Envelope(_0x366082=>Math[_0x1fd1d8(0x115)](0x1-_0x366082*0xc,0.25)),[]],'deepthudnoise':[0x19,_0x1fd1d8(0x296),new Envelope(_0x1dfd72=>_0x1dfd72**0.01*Math[_0x1fd1d8(0x115)](0x1-_0x1dfd72*0x5,0x0),0.01,0.4),[],null,[1.1,1.2,1.3,1.4,1.5,1.6,1.7,1.8,1.9,0x2],0x1],'deepthudtone':[0x19,_0x1fd1d8(0x2fa),new Envelope(_0x3ce4c9=>Math['max'](0x1-_0x3ce4c9*0x5,0x0),0.01,0.4),[createReverb(audioContext,0.4)],new Envelope(_0x8117b3=>Math['random']()*0x2,0.005,0.1),[1.1,1.2,1.3,1.4,1.5,1.6,1.7,1.8,1.9,0x2],0x1],'medthudnoise':[0x32,_0x1fd1d8(0x296),new Envelope(_0x26b621=>_0x26b621**0.01*Math['max'](0x1-_0x26b621*0xa,0x0),0.01,0.2),[],null,[1.1,1.2,1.3,1.4,1.5,1.6,1.7,1.8,1.9,0x2],0.1],'medthudtone':[0x32,_0x1fd1d8(0x2fa),new Envelope(_0x21e07f=>Math['max'](0x1-_0x21e07f*0xa,0x0),0.01,0.2),[createReverb(audioContext,0.2)],new Envelope(_0x2002de=>Math[_0x1fd1d8(0x222)]()*0x2,0.005,0.1),[1.1,1.2,1.3,1.4,1.5,1.6,1.7,1.8,1.9,0x2],0.1],'drumtemplate':[0x32,_0x1fd1d8(0x2fa),new Envelope(_0x559c03=>Math['max'](0x1-_0x559c03*0xa,0x0),0.01,0.1),[createReverb(audioContext,0x1)],new Envelope(_0x5f862b=>Math['random']()*0x2,0.005,0.1),[1.1,1.2,1.3,1.4,1.5,1.6,1.7,1.8,1.9,0x2],0x1],'stringplucktemplate':[0x258,_0x1fd1d8(0x2fa),new Envelope(_0x3403ab=>Math[_0x1fd1d8(0x115)](0x1-_0x3403ab*0x3,0x0),0.01,0.5),[createReverb(audioContext,0.2)],new Envelope(_0x55b3cc=>Math[_0x1fd1d8(0x115)](0x1-_0x55b3cc*0x4,0.25),0.005,0.5),[1.1,1.2,1.3,1.4,1.5,1.6,1.7,1.8,1.9,0x2],0.5],'stringsine':[0x1b8,_0x1fd1d8(0x2fa),new Envelope(linearspike(0x1),0.01,0x1),[createReverb(audioContext,0.2)],new Envelope(_0x1bb8d5=>0.95+Math['random']()*0.025,0.1,0x1),[1.1,1.2,1.3,1.4,1.5,1.6,1.7,1.8,1.9,0x2]],'highthudnoise':[0x96,_0x1fd1d8(0x296),new Envelope(_0x477041=>0x3*_0x477041**0.01*Math[_0x1fd1d8(0x115)](0x1-_0x477041*0xa,0x0),0.01,0.2),[],null,[1.1,1.2,1.3,1.4,1.5,1.6,1.7,1.8,1.9,0x2],0.1],'highthudnoiseverb':[0x96,'lowpass-noise',new Envelope(_0x5bd6ba=>_0x5bd6ba**0.01*Math['max'](0x1-_0x5bd6ba*0xa,0x0),0.01,0.2),[createReverb(audioContext,0.2)],null,[1.1,1.2,1.3,1.4,1.5,1.6,1.7,1.8,1.9,0x2],0.1],'highthudtone':[0x96,_0x1fd1d8(0x2fa),new Envelope(_0x64f9cf=>Math[_0x1fd1d8(0x115)](0x1-_0x64f9cf*0xa,0x0),0.01,0.2),[createReverb(audioContext,0.2)],new Envelope(_0x40464a=>Math[_0x1fd1d8(0x222)]()*0x2,0.005,0.2),[1.1,1.2,1.3,1.4,1.5,1.6,1.7,1.8,1.9,0x2],0.1],'bassdrum':[0x64,_0x1fd1d8(0x2fa),new Envelope(_0x328806=>linearspike(0.08)(_0x328806)*Math[_0x1fd1d8(0x222)](),0.01,0.1),[createReverb(audioContext,0x2)],null,[1.1,1.2,0x1/0x2],0x2],'snaredrum':[0xc8,_0x1fd1d8(0x236),new Envelope(_0x5f2c13=>linearspike(0.04)(_0x5f2c13)*Math[_0x1fd1d8(0x222)](),0.01,0.1),[],null,[1.1,1.2,0x1/0x2],0x2],'whee':[0x7d0,_0x1fd1d8(0x296),new Envelope(linearspike(0.5),0.01,0.5),[],new Envelope(linearspike(0.5),0.01,0.5),[]],'goblinchat':[0x190,_0x1fd1d8(0x2fa),new Envelope(_0x1e3442=>linearspike(0x1)(_0x1e3442)**0.01*Math[_0x1fd1d8(0x222)]()**0x2,0.05,0x1),[],new Envelope(_0x49cf2a=>Math[_0x1fd1d8(0x222)]()**0x2*0x2,0.0005,0x1),[1.1,1.2,0.9,0.8,0.4,0.3,2.2,3.3],0.01],'goblinchatverb':[0x190,_0x1fd1d8(0x2fa),new Envelope(_0x2e9424=>linearspike(0x1)(_0x2e9424)**0.01*Math[_0x1fd1d8(0x222)]()**0x2,0.05,0x1),[createReverb(audioContext,0.1)],new Envelope(_0x34b358=>Math['random']()**0x2*0x2,0.0005,0x1),[1.1,1.2,0.9,0.8,0.4,0.3,2.2,3.3],0.01],'goblinchat2':[0x190,'sine',new Envelope(_0x138e13=>linearspike(0x1)(_0x138e13)**0.01*Math['random']()**0x2,0.05,0x1),[],new Envelope(_0x3fc2de=>Math[_0x1fd1d8(0x222)]()**0x2*0x2,0.002,0x1),[1.1,1.2,0.9,0.8,0.4,0.3,2.2,3.3],0.02],'goblinchat2old':[0x190,_0x1fd1d8(0x2fa),new Envelope(_0x4d5cb2=>linearspike(1.5)(_0x4d5cb2)**0.01*Math[_0x1fd1d8(0x222)]()**0x2,0.05,1.5),[createReverb(audioContext,0.1)],new Envelope(_0x117ead=>Math['random']()**0x2*0x2,0.002,1.6),[1.1,1.2,0.9,0.8,0.4,0.3,2.2,3.3]],'goblinchat3old':[0x258,_0x1fd1d8(0x2fa),new Envelope(_0x1f34b4=>linearspike(1.5)(_0x1f34b4)**0.01*Math[_0x1fd1d8(0x222)]()**0x2,0.05,1.5),[createReverb(audioContext,0.1)],new Envelope(_0xebf82f=>Math[_0x1fd1d8(0x222)]()**0x2*0x2,0.003,1.6),[1.1,1.2,0.9,0.8,0.4,0.3,2.2,3.3]],'something':[0x2,_0x1fd1d8(0xcb),new Envelope(_0x2f666c=>linearspike(1.5)(_0x2f666c)**0.01*Math[_0x1fd1d8(0x222)](),0.00005,1.5),[createReverb(audioContext,0.1)],new Envelope(_0x66b3da=>Math[_0x1fd1d8(0x222)]()*0x5,0.01,1.5)],'goblinchatnoise':[0x320,_0x1fd1d8(0x236),new Envelope(_0x342ddf=>linearspike(1.5)(_0x342ddf)**0.01*Math[_0x1fd1d8(0x222)]()**0x4,0.05,1.5),[],new Envelope(_0x2144c1=>Math['random']()**0x2*0x2,0.0025,1.6),[1.1,1.2,0.9,0.8,0.4,0.3,2.2,3.3]],'goblinscream':[0x190,_0x1fd1d8(0x2fa),new Envelope(_0x47cc06=>linearspike(1.5)(_0x47cc06)**0.01,0.05,1.5),[],new Envelope(_0x3347c9=>Math[_0x1fd1d8(0x222)]()**0x2*0x2,0.0025,1.5),[1.5,1.6,0.5,0.6,0.4,0.3],0.05],'goblinyelpold':[0x320,_0x1fd1d8(0x2fa),new Envelope(_0x11c4da=>linearspike(0.25)(_0x11c4da)**0.01,0.005,0.25),[],new Envelope(_0x5b73c8=>Math[_0x1fd1d8(0x222)]()**0x2*0x2,0.0005,0.5),[1.5,1.6,0.5,0.6,0.4,0.3],0.01],'goblindeath':[0x320,_0x1fd1d8(0x2fa),new Envelope(_0x296060=>_0x296060**0.2*(0x1-_0x296060)*Math[_0x1fd1d8(0x222)]()**0.5,0.01,0x1),[createDistortion(audioContext,0x1)],new Envelope(_0xf86638=>_0xf86638**0.2*Math[_0x1fd1d8(0x222)]()**0.5*0x2*(0x1-_0xf86638/0x4)*Math[_0x1fd1d8(0x222)]()*0x2,0.005,0x5),[1.5,1.6,0.5,0.6,0.4,0.3],0.05],'ogredeath':[0x190,_0x1fd1d8(0x2fa),new Envelope(_0x359c2a=>_0x359c2a**0.2*(0x1-_0x359c2a)*Math[_0x1fd1d8(0x222)]()**0.5,0.01,0x1),[createDistortion(audioContext,0x1)],new Envelope(_0x27d03e=>_0x27d03e**0.2*Math['random']()**0.5*0x2*(0x1-_0x27d03e/0x4)*Math[_0x1fd1d8(0x222)]()*0x2,0.005,0x5),[1.4,1.2,0.5,0.6,0.4,0.3],0.05],'goblinshriek':[0x4b0,'sine',new Envelope(_0x3c321b=>_0x3c321b**0.2*(0x1-_0x3c321b/0x2)*Math[_0x1fd1d8(0x222)]()**0.5,0.01,0x2),[createDistortion(audioContext,0x1)],new Envelope(_0x3ba393=>_0x3ba393**0.2*Math[_0x1fd1d8(0x222)]()**0.5*0x2*(0x1-_0x3ba393/0x6)*Math[_0x1fd1d8(0x222)]()*0x2,0.005,0x5),[1.5,1.6,0.5,0.6,0.4,0.3],0.05],'deathshriek':[0x4b0,'sine',new Envelope(_0x44151c=>_0x44151c**0.2*(0x1-_0x44151c/0x5)*Math[_0x1fd1d8(0x222)]()**0.5,0.01,0x5),[createDistortion(audioContext,0x1)],new Envelope(_0x9c9e19=>_0x9c9e19**0.2*Math[_0x1fd1d8(0x222)]()**0.5*0x2*(0x1-_0x9c9e19/0x6)*Math[_0x1fd1d8(0x222)]()*0x2,0.005,0x5),[1.5,1.6,0.5,0.6,0.4,0.3],0.05],'goblinyelp':[0x320,_0x1fd1d8(0x2fa),new Envelope(_0x1c645d=>linearspike(0.25)(_0x1c645d)**0.01,0.005,0.25),[],new Envelope(_0xb39e88=>Math['random']()**0x2*0x2,0.005,0.5),[1.5,1.6,0.5,0.6,0.4,0.3],0.01],'rustle':[0x1f4,_0x1fd1d8(0x236),envelopes[_0x1fd1d8(0x176)],[]],'rustleverb':[0x1f4,_0x1fd1d8(0x236),envelopes[_0x1fd1d8(0x176)],[createReverb(audioContext,0.5)]],'eeesound':[0x7d,_0x1fd1d8(0xaf),new Envelope(_0x3425e7=>linearspike(0.25)(_0x3425e7)**0.25*(0.5+Math[_0x1fd1d8(0x222)]()/0x2),0.005,0x3),[createReverb(audioContext,0.25),createBandpassFilter(audioContext,0x12c)],null,[0x1/0x2,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0x9,0xa,0xc]],'eeesound2':[0x7d,_0x1fd1d8(0xaf),new Envelope(_0x5615f6=>linearspike(0.25)(_0x5615f6)**0.25*(0.5+Math[_0x1fd1d8(0x222)]()/0x2),0.005,0x3),[createReverb(audioContext,0.25),createBandpassFilter(audioContext,0x898)],null,[0x1/0x2,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0x9,0xa,0xc]],'eeesound3':[0x7d,_0x1fd1d8(0xaf),new Envelope(_0xa44360=>linearspike(0.25)(_0xa44360)**0.25*(0.5+Math[_0x1fd1d8(0x222)]()/0x2),0.005,0x3),[createReverb(audioContext,0.25),createBandpassFilter(audioContext,0xbb8)],null,[0x1/0x2,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0x9,0xa,0xc]],'aaasound':[0x7d,_0x1fd1d8(0xaf),new Envelope(_0x34fde3=>linearspike(0.25)(_0x34fde3)**0.25*(0.5+Math[_0x1fd1d8(0x222)]()/0x2),0.005,0x3),[createReverb(audioContext,0.25),createBandpassFilter(audioContext,0x3e8)],null,[0x1/0x2,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0x9,0xa,0xc]],'aaasound2':[0x7d,_0x1fd1d8(0xaf),new Envelope(_0x3dd1ac=>linearspike(0.25)(_0x3dd1ac)**0.25*(0.5+Math[_0x1fd1d8(0x222)]()/0x2),0.005,0x3),[createReverb(audioContext,0.25),createBandpassFilter(audioContext,0x514)],null,[0x1/0x2,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0x9,0xa,0xc]],'aaasound3':[0x7d,_0x1fd1d8(0xaf),new Envelope(_0x29c899=>linearspike(0.25)(_0x29c899)**0.25*(0.5+Math['random']()/0x2),0.005,0x3),[createReverb(audioContext,0.25),createBandpassFilter(audioContext,0x960)],null,[0x1/0x2,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0x9,0xa,0xc]],'sine':[0x4b,_0x1fd1d8(0x2fa),new Envelope(_0x24b12f=>linearspike(0.08)(_0x24b12f)*Math[_0x1fd1d8(0x222)](),0.01,0.1),[createDistortion(audioContext,0x19)]],'bowstring':[0x64,_0x1fd1d8(0x236),new Envelope(_0x26dcb9=>linearspike(0x1)(_0x26dcb9)*Math[_0x1fd1d8(0x222)]()**0xa,0.0005,0x1),[],new Envelope(_0x47e7b0=>Math[_0x1fd1d8(0x1ac)](Math[_0x1fd1d8(0x115)]((_0x47e7b0*0xa)**0x2,0x0),0x19),0.1,0x1),[],0.1],'treecreakinginthewind':[0x64,_0x1fd1d8(0x236),new Envelope(_0x5986f7=>linearspike(0x5)(_0x5986f7)**0x4*Math[_0x1fd1d8(0x222)]()**0.5,0.00015,0x5)],'tap':[0x64,'lowpass-noise-white',new Envelope(_0x24986e=>linearspike(0.5)(_0x24986e)**0x4*Math[_0x1fd1d8(0x222)]()**0.5,0.0002,0.5)],'sworddraw':[0x19,'lowpass-noise-white',new Envelope(_0x266c8d=>linearspike(0.5)(_0x266c8d)*Math[_0x1fd1d8(0x222)]()**0.2,0.01,0x1),[],new Envelope(_0x1e91d6=>Math[_0x1fd1d8(0x1ac)](0xc8*(_0x1e91d6+0x1),0x4b),0.01,0x1),[0x1/0x2,0x1/0x4],0.05],'swordring':[0x320,_0x1fd1d8(0x2fa),new Envelope(_0x2a569a=>linearspike(0x1)(_0x2a569a)*Math[_0x1fd1d8(0x222)](),0.03,0x1),[createReverb(audioContext,0.5)],new Envelope(_0x1da1d7=>Math[_0x1fd1d8(0x1ac)](_0x1da1d7*0xa,0x1),0.01,0x1),[],0.01],'swordring2':[0x320/0x3,_0x1fd1d8(0x2fa),new Envelope(_0x45a0e9=>linearspike(0x1)(_0x45a0e9)*Math[_0x1fd1d8(0x222)](),0.03,0x1),[createReverb(audioContext,0.75)],new Envelope(_0x7a13e=>Math[_0x1fd1d8(0x1ac)](_0x7a13e*0xa,0x1),0.01,0x1),[],0.1],'swordring3':[0xc8,_0x1fd1d8(0x2fa),new Envelope(_0x100d70=>linearspike(0x1)(_0x100d70)*Math['random'](),0.03,0x1),[createReverb(audioContext,0.5)],new Envelope(_0x428d98=>Math[_0x1fd1d8(0x1ac)](_0x428d98*0xa,0x1),0.01,0x1),[],0.025],'shortsworddraw':[0x19,_0x1fd1d8(0x236),new Envelope(_0x345ded=>linearspike(0.35)(_0x345ded)*Math[_0x1fd1d8(0x222)]()**0.2,0.01,0.5),[],new Envelope(_0x19862d=>Math[_0x1fd1d8(0x1ac)](0x12c*(_0x19862d+0x1),0x64),0.01,0.5),[],0.05],'daggerdraw':[0x19,_0x1fd1d8(0x236),new Envelope(_0x21df69=>linearspike(0.25)(_0x21df69)*Math[_0x1fd1d8(0x222)]()**0.4,0.01,0.5),[],new Envelope(_0x11a4ca=>Math[_0x1fd1d8(0x1ac)](0x190*(_0x11a4ca+0x1),0x64),0.01,0.5),[],0.05],'daggerdraw2':[0x7d0,_0x1fd1d8(0x236),new Envelope(_0x3ac7cb=>0xa*linearspike(0.25)(_0x3ac7cb)*Math[_0x1fd1d8(0x222)]()**0.4,0.01,0.5),[],new Envelope(_0x4c3731=>Math['min'](0x1*_0x4c3731,0x5),0.01,0.5),[],0.05],'puncture':[0x9c4,'lowpass-noise-white',new Envelope(_0x532b8c=>linearspike(0.25)(_0x532b8c)*Math[_0x1fd1d8(0x222)]()**0.3,0.01,0.5),[],new Envelope(_0x429930=>0x1-_0x429930*0x2,0.01,0.5),[],0.1],'spurt1':[0x32,_0x1fd1d8(0x236),new Envelope(_0x5cb96c=>linearspike(0.2)(_0x5cb96c)**0x2*Math[_0x1fd1d8(0x222)]()**0x2,0.001,0x1),[createPause(audioContext,0.1)],new Envelope(_0x40282f=>Math[_0x1fd1d8(0x115)]((_0x40282f+0x1)*0x2*Math[_0x1fd1d8(0x222)]()**0x2*0x4,0x1),0.01,0.5),[1.1,1.2,1.3,0x2,0x4,0x8],0.1],'spurt2':[0x32,_0x1fd1d8(0x236),new Envelope(_0x232c34=>linearspike(0.2)(_0x232c34)**0x2*Math[_0x1fd1d8(0x222)]()**0x2,0.001,0x1),[createPause(audioContext,0.1)],new Envelope(_0x3a3b65=>Math['max']((_0x3a3b65+0x1)*0x2*Math[_0x1fd1d8(0x222)]()**0x2*0x4,0x1),0.01,0.5),[0x6,0xc],0.1],'spurt1verb':[0x32,_0x1fd1d8(0x236),new Envelope(_0x279ade=>linearspike(0.2)(_0x279ade)**0x4*Math[_0x1fd1d8(0x222)]()**0x2,0.001,0x1),[createReverb(audioContext,0.2),createPause(audioContext,0.1)],new Envelope(_0x3ee45b=>Math[_0x1fd1d8(0x115)]((_0x3ee45b+0x1)*0x2*Math['random']()**0x2*0x4,0x1),0.01,0.5),[1.1,1.2,1.3,0x2,0x4,0x8],0.5],'spurt2verb':[0x32,_0x1fd1d8(0x236),new Envelope(_0x40129c=>linearspike(0.2)(_0x40129c)**0x4*Math[_0x1fd1d8(0x222)]()**0x2,0.001,0x1),[createReverb(audioContext,0.2),createPause(audioContext,0.1)],new Envelope(_0x25dd40=>Math[_0x1fd1d8(0x115)]((_0x25dd40+0x1)*0x2*Math[_0x1fd1d8(0x222)]()**0x2*0x4,0x1),0.01,0.5),[0x6,0xc],0.5],'woodbreaking':[0x64,_0x1fd1d8(0x236),new Envelope(_0x34b89e=>(0x1-_0x34b89e/0.7)*Math[_0x1fd1d8(0x222)]()**(_0x34b89e*0x2),0.00015,0.7),[],new Envelope(_0x3ce6af=>(_0x3ce6af+0x1)*Math[_0x1fd1d8(0x222)](),0.01,0.7),[1.1,1.5,0x2,0x4],0.2],'woodbreaking2':[0x64,_0x1fd1d8(0x236),new Envelope(_0x54792f=>(0x1-_0x54792f/0x2)*Math['random']()**(_0x54792f*0xa+0x1),0.01,0x2),[createReverb(audioContext,0.1)],new Envelope(_0x4d849d=>Math[_0x1fd1d8(0x115)](Math[_0x1fd1d8(0x222)]()**0x4*0x10,0.5),0.01,1.5),[1.1,1.5,0x2,0x4],0.2],'woodbreakingdeep':[0x32,_0x1fd1d8(0x236),new Envelope(_0xfa16a=>(0x1-_0xfa16a/0.7)*Math[_0x1fd1d8(0x222)]()**(_0xfa16a*0x2),0.00015,0.7),[],new Envelope(_0x20a230=>(_0x20a230+0x1)*Math[_0x1fd1d8(0x222)](),0.01,0.7),[0.5,1.1,1.5,0x2],0.2],'woodbreaking2deep':[0x32,'lowpass-noise-white',new Envelope(_0x5d5e7e=>(0x1-_0x5d5e7e/0x2)*Math[_0x1fd1d8(0x222)]()**(_0x5d5e7e*0xa+0x1),0.01,0x2),[createReverb(audioContext,0.1)],new Envelope(_0xeaf58c=>Math[_0x1fd1d8(0x115)](Math[_0x1fd1d8(0x222)]()**0x4*0x10,0.5),0.01,1.5),[0.5,1.1,1.5,0x2],0.2]};function linearspike(_0x999846){return function(_0x29ce56){if(_0x29ce56==0x0)return 0x0;if(_0x29ce56>_0x999846)return 0x0;return _0x29ce56<=_0x999846/0x2?_0x29ce56/(_0x999846/0x2):0x1-(_0x29ce56-_0x999846/0x2)/(_0x999846/0x2);};}const soundeffects={'footstep':[sounds[_0x1fd1d8(0x344)]],'footsteptap':[sounds[_0x1fd1d8(0x36f)]],'arrowflight':[sounds[_0x1fd1d8(0x11e)],sounds['arrowthudtone'],sounds[_0x1fd1d8(0x26c)],sounds[_0x1fd1d8(0x14a)]],'swordswing':[sounds[_0x1fd1d8(0x26c)],sounds[_0x1fd1d8(0x14a)]],'swordhit':[sounds[_0x1fd1d8(0x26c)],sounds[_0x1fd1d8(0x14a)],sounds[_0x1fd1d8(0x312)],sounds[_0x1fd1d8(0x362)]],'clubswing':[sounds[_0x1fd1d8(0x14b)],sounds['clubwhoosh']],'clubhit':[sounds['clubhitcrack'],sounds[_0x1fd1d8(0x2ca)],sounds[_0x1fd1d8(0x2f3)],sounds['clubwhoom'],sounds[_0x1fd1d8(0x25c)]],'woodbreaking':[sounds[_0x1fd1d8(0x11a)],sounds[_0x1fd1d8(0x257)]],'woodbreakingdeep':[sounds[_0x1fd1d8(0x19b)],sounds['woodbreaking2deep']],'caveambience':[sounds['caveambience']],'deepspookybong':[sounds[_0x1fd1d8(0x246)]],'highshrillbing':[sounds[_0x1fd1d8(0x104)]],'bassdrum':[sounds[_0x1fd1d8(0x232)]],'highthud':[sounds[_0x1fd1d8(0x312)],sounds[_0x1fd1d8(0x362)]],'medthud':[sounds[_0x1fd1d8(0x27b)],sounds[_0x1fd1d8(0x308)]],'deepthud':[sounds[_0x1fd1d8(0x16f)],sounds[_0x1fd1d8(0x29c)]],'goblinchat':[sounds['goblinchat'],sounds[_0x1fd1d8(0x10f)],sounds['goblinchat2']],'goblinyelp':[sounds[_0x1fd1d8(0x218)]],'goblindeath':[sounds['goblindeath']],'ogredeath':[sounds['ogredeath']],'goblinscream':[sounds[_0x1fd1d8(0x26a)]],'goblinshriek':[sounds[_0x1fd1d8(0x22c)]],'deathshriek':[sounds[_0x1fd1d8(0x156)]],'aaasound':[sounds['aaasound'],sounds[_0x1fd1d8(0xd4)],sounds[_0x1fd1d8(0x1c7)]],'eeesound':[sounds[_0x1fd1d8(0xf5)],sounds[_0x1fd1d8(0x1a1)],sounds[_0x1fd1d8(0x1e1)]],'sworddraw':[sounds[_0x1fd1d8(0x15e)],sounds[_0x1fd1d8(0x278)],sounds[_0x1fd1d8(0x2c3)],sounds[_0x1fd1d8(0x342)]],'bowdraw':[sounds['bowstring']],'shortsworddraw':[sounds['shortsworddraw']],'daggerdraw':[sounds[_0x1fd1d8(0x294)]],'daggerdraw2':[sounds[_0x1fd1d8(0xbd)]],'tap':[sounds[_0x1fd1d8(0x25d)]],'puncture':[sounds[_0x1fd1d8(0x353)],sounds[_0x1fd1d8(0x230)],sounds[_0x1fd1d8(0x1c5)],sounds['spurt1verb'],sounds[_0x1fd1d8(0x2d5)]]};function playsoundeffect(_0x2c1e8a){_0x2c1e8a['forEach'](function([_0x5921f8,_0x27b28e,_0x4d530a,_0x22e773,_0x5c1590,_0x11703e,_0xc6330d]){const _0x504c88=_0x438d,_0x2f7a11=soundManager['requestSource']();_0x2f7a11[_0x504c88(0x2fc)]=null,_0x2f7a11['overtones']=[];if(_0x5c1590)_0x2f7a11[_0x504c88(0x2fc)]=_0x5c1590;if(_0x11703e)_0x2f7a11[_0x504c88(0x106)]=_0x11703e[_0x504c88(0x169)]();_0x2f7a11[_0x504c88(0x34e)]=0x1;if(_0xc6330d!==undefined)_0x2f7a11[_0x504c88(0x34e)]=_0xc6330d;_0x2f7a11[_0x504c88(0xea)]=null,_0x2f7a11[_0x504c88(0xea)]=_0x5921f8,_0x2f7a11[_0x504c88(0x125)]=null,_0x2f7a11[_0x504c88(0x125)]=_0x27b28e,_0x2f7a11[_0x504c88(0x2ef)]=null,_0x2f7a11['env']=_0x4d530a,_0x2f7a11['fx']=[];if(_0x22e773)_0x2f7a11['fx']=_0x22e773[_0x504c88(0x169)]();soundManager['playSound']();});}function playambientsound(_0x2af4cb){const _0xfea477=_0x1fd1d8;_0x2af4cb[_0xfea477(0xb8)](function([_0x4750fb,_0x4dc6eb,_0x2d7ed4,_0x2b1cbb,_0x2e9482,_0x1067df,_0x12b8ad]){const _0xe4d1e3=_0xfea477,_0x4462b0=soundManager[_0xe4d1e3(0x270)]();_0x4462b0[_0xe4d1e3(0x2fc)]=null,_0x4462b0['overtones']=[];if(_0x2e9482)_0x4462b0['freqmod']=_0x2e9482;if(_0x1067df)_0x4462b0['overtones']=_0x1067df['slice']();_0x4462b0[_0xe4d1e3(0x34e)]=0.2;if(_0x12b8ad)_0x4462b0[_0xe4d1e3(0x34e)]=_0x12b8ad/0x5;_0x4462b0[_0xe4d1e3(0xea)]=null,_0x4462b0['freq']=_0x4750fb,_0x4462b0[_0xe4d1e3(0x125)]=null,_0x4462b0[_0xe4d1e3(0x125)]=_0x4dc6eb,_0x4462b0[_0xe4d1e3(0x2ef)]=null,_0x4462b0['env']=_0x2d7ed4,_0x4462b0['fx']=[];if(_0x2b1cbb)_0x4462b0['fx']=_0x2b1cbb[_0xe4d1e3(0x169)]();soundManager[_0xe4d1e3(0xdd)]();});}function adsrconvert([_0x4e61f2,_0x3947b4,_0x5c7e62,_0x386dd2],_0xf5415b){const _0x3b2933=_0xf5415b-(_0x4e61f2+_0x3947b4+_0x386dd2);return function(_0x3d5bc6){if(_0x3d5bc6<0x0)return 0x0;if(_0x3d5bc6>=0x0&&_0x3d5bc6<=_0x4e61f2)return _0x3d5bc6/_0x4e61f2;if(_0x3d5bc6>_0x4e61f2&&_0x3d5bc6<=_0x4e61f2+_0x3947b4)return 0x1-(_0x3d5bc6-_0x4e61f2)/_0x3947b4*(0x1-_0x5c7e62);if(_0x3d5bc6>_0x4e61f2+_0x3947b4&&_0x3d5bc6<=_0x4e61f2+_0x3947b4+_0x3b2933)return _0x5c7e62;if(_0x3d5bc6>_0x4e61f2+_0x3947b4+_0x3b2933&&_0x3d5bc6<=_0x4e61f2+_0x3947b4+_0x3b2933+_0x386dd2)return _0x5c7e62*(0x1-(_0x3d5bc6-(_0x4e61f2+_0x3947b4+_0x3b2933))/_0x386dd2);return 0x0;};}function calculateGain(_0x5a7ef7,_0x5c00cc,_0x128564){const _0x22a3f1=_0x1fd1d8,_0x516b5c=0x400,_0x1613f6=_0x5c00cc/0x2,_0x36bde4=_0x1613f6/_0x516b5c,_0x1e18f1=new Float32Array(_0x516b5c),_0x393af2=new Float32Array(_0x516b5c),_0xaac5f7=new Float32Array(_0x516b5c);for(let _0x3d3853=0x0;_0x3d3853<_0x516b5c;_0x3d3853++){_0x1e18f1[_0x3d3853]=_0x3d3853*_0x36bde4;}_0x5a7ef7[_0x22a3f1(0x318)](_0x1e18f1,_0x393af2,_0xaac5f7);let _0x274416=0x0,_0x4579ff=0x0;for(let _0x52e78f=0x0;_0x52e78f<_0x516b5c;_0x52e78f++){_0x274416+=0x1,_0x4579ff+=_0x393af2[_0x52e78f];}const _0x56cf9d=_0x274416*_0x36bde4*_0x128564,_0xd720f2=_0x4579ff*_0x36bde4*_0x128564,_0x49e1e8=Math[_0x22a3f1(0xe8)](_0x56cf9d/_0xd720f2);return _0x49e1e8;}function createReverb(_0x5b1c07,_0x3d55d5=0x2){return function(){const _0x1409c9=_0x438d,_0x6c456c=_0x5b1c07[_0x1409c9(0x8e)](),_0x41e546=_0x5b1c07[_0x1409c9(0x1bd)],_0x27586a=_0x41e546*_0x3d55d5,_0xc3ce4e=_0x5b1c07['createBuffer'](0x2,_0x27586a,_0x41e546),_0x19a872=_0xc3ce4e['getChannelData'](0x0),_0x4585b7=_0xc3ce4e[_0x1409c9(0x1d5)](0x1);for(let _0x5e83b6=0x0;_0x5e83b6<_0x27586a;_0x5e83b6++){_0x19a872[_0x5e83b6]=(Math[_0x1409c9(0x222)]()*0x2-0x1)*Math[_0x1409c9(0xbe)](0x1-_0x5e83b6/_0x27586a,0x2),_0x4585b7[_0x5e83b6]=(Math[_0x1409c9(0x222)]()*0x2-0x1)*Math[_0x1409c9(0xbe)](0x1-_0x5e83b6/_0x27586a,0x2);}return _0x6c456c[_0x1409c9(0x1a3)]=_0xc3ce4e,_0x6c456c['normalize']=!![],_0x6c456c;};}function createDistortion(_0x58d15e,_0x52379c){return function(){const _0x52299c=_0x438d,_0x67fb79=_0x58d15e['createWaveShaper']();return _0x67fb79[_0x52299c(0x1c3)]=makeSoftClippingCurve(_0x52379c),_0x67fb79;};}function makeDistortionCurve(_0x1efb28){const _0x2603a5=_0x1fd1d8,_0x4e406e=typeof _0x1efb28==='number'?_0x1efb28:0x32,_0x146862=0xac44,_0x113d31=new Float32Array(_0x146862),_0x4c470c=Math['PI']/0xb4;for(let _0x1e922d=0x0;_0x1e922d<_0x146862;++_0x1e922d){const _0x44c497=_0x1e922d*0x2/_0x146862-0x1;_0x113d31[_0x1e922d]=(0x3+_0x4e406e)*_0x44c497*0x14*_0x4c470c/(Math['PI']+_0x4e406e*Math[_0x2603a5(0x1be)](_0x44c497));}return _0x113d31;}function makeSoftClippingCurve(_0x4ed70f){const _0x2476e4=_0x1fd1d8,_0x5b9ad8=typeof _0x4ed70f==='number'?_0x4ed70f:0x32,_0x170ded=0xac44,_0x20c248=new Float32Array(_0x170ded),_0x1dfd38=Math['PI']/0xb4;for(let _0x32185f=0x0;_0x32185f<_0x170ded;++_0x32185f){const _0x12b401=_0x32185f*0x2/_0x170ded-0x1;_0x20c248[_0x32185f]=_0x12b401/(0x1+_0x5b9ad8*Math[_0x2476e4(0x1be)](_0x12b401));}return _0x20c248;}function makeExponentialDistortionCurve(_0x1cd8b4){const _0x261e21=_0x1fd1d8,_0x47d38f=typeof _0x1cd8b4===_0x261e21(0x21c)?_0x1cd8b4:0x32,_0x247468=0xac44,_0x54b3ae=new Float32Array(_0x247468);for(let _0xa75b66=0x0;_0xa75b66<_0x247468;++_0xa75b66){const _0x4a31da=_0xa75b66*0x2/_0x247468-0x1;_0x54b3ae[_0xa75b66]=(0x1-Math['exp'](-_0x47d38f*Math[_0x261e21(0x1be)](_0x4a31da)))*(_0x4a31da<0x0?-0x1:0x1);}return _0x54b3ae;}function createDelay(_0x49f3a4,_0x43061b=0x1,_0x33d2c6=0.5){return function(){const _0xa55e5b=_0x438d,_0x32115c=_0x49f3a4[_0xa55e5b(0x363)](),_0x3dbe09=_0x49f3a4['createGain']();return _0x3dbe09['gain']['value']=_0x33d2c6,_0x32115c['connect'](_0x3dbe09),_0x3dbe09[_0xa55e5b(0x145)](_0x32115c),_0x32115c['delayTime']['value']=_0x43061b,_0x3dbe09;};}function createPause(_0xabb9f8,_0x4d6db0=0x1,_0x142b6e=0x0){return function(){const _0x3bd5d6=_0x438d,_0x5847d3=_0xabb9f8[_0x3bd5d6(0x363)](),_0x339064=_0xabb9f8[_0x3bd5d6(0x2cf)]();return _0x339064[_0x3bd5d6(0x2d1)]['value']=_0x142b6e,_0x5847d3[_0x3bd5d6(0x145)](_0x339064),_0x339064['connect'](_0x5847d3),_0x5847d3[_0x3bd5d6(0x7b)]['value']=_0x4d6db0,_0x5847d3;};}function createDelayChain(_0x486e26,_0x106732=0x1,_0x71a0aa=0.5,_0x4213cd){return function(){const _0x14f215=_0x438d,_0x16721c=_0x486e26[_0x14f215(0x363)](),_0x2037f1=_0x486e26[_0x14f215(0x2cf)]();_0x2037f1[_0x14f215(0x2d1)][_0x14f215(0x354)]=_0x71a0aa,_0x16721c[_0x14f215(0x145)](_0x2037f1);let _0x3fbad3=_0x2037f1;return _0x4213cd[_0x14f215(0xb8)](function(_0x1b325c){const _0x1c5ae0=_0x14f215;_0x3fbad3[_0x1c5ae0(0x145)](_0x1b325c),_0x3fbad3=_0x1b325c;}),_0x3fbad3[_0x14f215(0x145)](_0x16721c),_0x16721c[_0x14f215(0x7b)][_0x14f215(0x354)]=_0x106732,_0x2037f1;};}function createLowpassFilter(_0x394d78,_0x21ce68){return function(){const _0x50610c=_0x438d,_0x3bc62a=_0x394d78[_0x50610c(0x24c)]();return _0x3bc62a[_0x50610c(0x22f)]['setValueAtTime'](_0x21ce68,_0x394d78[_0x50610c(0x300)]),_0x3bc62a[_0x50610c(0x125)]=_0x50610c(0x282),_0x3bc62a;};}function createBandpassFilter(_0x25c7af,_0x1c9f53){return function(){const _0x10b06b=_0x438d,_0x37b159=_0x25c7af[_0x10b06b(0x24c)]();return _0x37b159['type']=_0x10b06b(0xd8),_0x37b159[_0x10b06b(0x22f)][_0x10b06b(0x354)]=_0x1c9f53,_0x37b159['Q'][_0x10b06b(0x354)]=0x1,_0x37b159;};}class ambientSound{constructor(_0x3376e1,_0x2113f9,_0xb4b673){const _0x1f8f0a=_0x1fd1d8;this[_0x1f8f0a(0x30e)]=_0x3376e1,this['mincadence']=_0x2113f9,this[_0x1f8f0a(0x2d8)]=_0xb4b673,this['lastplayed']=0x0,this[_0x1f8f0a(0x335)]=_0x2113f9+Math[_0x1f8f0a(0x222)]()*(_0xb4b673-_0x2113f9),this[_0x1f8f0a(0x22d)]=!![];}}let ambientsounds=[new ambientSound(soundeffects[_0x1fd1d8(0x260)],0x1388,0x1b58),new ambientSound(soundeffects['deepspookybong'],0x1388,0x3a98),new ambientSound(soundeffects[_0x1fd1d8(0x232)],0x5dc,0x5dc)];ambientsounds[0x2][_0x1fd1d8(0x22d)]=![];function updateambientsound(){const _0xed157f=_0x1fd1d8;ambientsounds[_0xed157f(0xb8)](function(_0x3f930e){const _0x2b85c4=_0xed157f;if(performance[_0x2b85c4(0x273)]()-_0x3f930e[_0x2b85c4(0x337)]>_0x3f930e['thiscadence']){if(_0x3f930e[_0x2b85c4(0x22d)]==!![])_0x3f930e['sound'][0x0][0x0]=Math[_0x2b85c4(0x222)]()*0x3e8;playambientsound(_0x3f930e[_0x2b85c4(0x30e)]),_0x3f930e[_0x2b85c4(0x337)]=performance[_0x2b85c4(0x273)](),_0x3f930e[_0x2b85c4(0x335)]=_0x3f930e[_0x2b85c4(0x307)]+Math[_0x2b85c4(0x222)]()*(_0x3f930e['maxcadence']-_0x3f930e[_0x2b85c4(0x307)]);}});}class character{constructor(_0x56d9b0,_0x1cd0c0,_0x1319f6,_0x484cd9,_0x28857d,_0x2a0b8b,_0x4b67d8,_0x4574e1,_0x3e2014,_0x58201c,_0x514121,_0x84c85a){const _0x31ddf0=_0x1fd1d8;this[_0x31ddf0(0x284)]=[],this[_0x31ddf0(0x284)]=_0x56d9b0[_0x31ddf0(0x169)](),this[_0x31ddf0(0x15f)]=_0x1cd0c0,this[_0x31ddf0(0xde)]=_0x1319f6||[0x0,0x0,0x0],this[_0x31ddf0(0x2e2)]=_0x484cd9,this['hp']=_0x484cd9,this[_0x31ddf0(0x149)]=_0x28857d['slice']();if(this[_0x31ddf0(0x149)][_0x31ddf0(0x86)]<0x4)this[_0x31ddf0(0x149)][0x3]=0x1;this['tc']=this[_0x31ddf0(0x149)]['slice'](),this['pc']=_0x2a0b8b,this[_0x31ddf0(0x25e)]=_0x4b67d8,this[_0x31ddf0(0xd7)]=![],this['actionqueue']=[],this[_0x31ddf0(0x331)]=_0x56d9b0['slice'](),this[_0x31ddf0(0x334)]=_0x4574e1[_0x31ddf0(0x169)](),this['ac']=_0x3e2014,this[_0x31ddf0(0xc8)]=_0x58201c[_0x31ddf0(0xbc)](_0x4f6914=>new trait(_0x4f6914['name'],_0x4f6914[_0x31ddf0(0x13b)],_0x4f6914[_0x31ddf0(0xba)],_0x4f6914['active'],_0x4f6914[_0x31ddf0(0x31f)],this)),this[_0x31ddf0(0x12d)]=[],this[_0x31ddf0(0xc7)]=[],this[_0x31ddf0(0x1c1)]=new Unarmed(),this[_0x31ddf0(0x2e7)]=[];if(_0x514121&&_0x514121[_0x31ddf0(0x86)]>0x0)this[_0x31ddf0(0x2e7)]=_0x514121['slice']()||[];this[_0x31ddf0(0x107)]=this[_0x31ddf0(0x1c1)],this[_0x31ddf0(0x2a8)]=this[_0x31ddf0(0x1c1)],this[_0x31ddf0(0x11d)]=this['unarmed'],this[_0x31ddf0(0x110)]={};const _0x59da3d=this;this[_0x31ddf0(0x2e7)][_0x31ddf0(0xb8)](function(_0x27997d){_0x59da3d['addItem'](_0x27997d,!![]);}),this['specialattack']=_0x84c85a||null,this[_0x31ddf0(0x2d0)]=[],this[_0x31ddf0(0x2a6)]=characterindex,characterindex++,this[_0x31ddf0(0x322)]=[],this['pc']==!![]?playercs[_0x31ddf0(0x1c6)](this):nonpcs[_0x31ddf0(0x1c6)](this);}[_0x1fd1d8(0x375)](_0x2c8dd2){const _0x450984=_0x1fd1d8;if(_0x2c8dd2==0x0)return;let _0x52d76d=0x0;if(this['ownedelements']){let _0x46086a='';for(let _0x5b5843=0x0;_0x5b5843<this[_0x450984(0x367)][_0x450984(0x86)];_0x5b5843++){let _0x2b5fc4=this[_0x450984(0x367)][_0x5b5843];if(_0x2b5fc4['lifespan'][0x0]<now)continue;_0x2b5fc4['lifespan'][0x0]=0x0,_0x46086a+=_0x2b5fc4['symbol'];}_0x52d76d=parseInt(_0x46086a);if(isNaN(_0x52d76d))_0x52d76d=0x0;}else this['ownedelements']=[];let _0x312e6d=(_0x2c8dd2+_0x52d76d)[_0x450984(0x33e)]();for(let _0x318332=0x0;_0x318332<this[_0x450984(0x367)][_0x450984(0x86)];_0x318332++){let _0x5f51d4=this['ownedelements'][_0x318332],[_0x281da3,_0x349558]=_0x5f51d4[_0x450984(0x284)];newgrid[_0x281da3][_0x349558]['uiElements']=newgrid[_0x281da3][_0x349558]['uiElements']['filter'](_0x618fea=>_0x618fea!=_0x5f51d4);}this[_0x450984(0x367)]=adduilabel(_0x312e6d,this['pos'],[0x80,0x0,0x0],0x1,!![]),this['hp']-=_0x2c8dd2;if(this['hp']<=0x0){if(this[_0x450984(0xd7)]==![])this[_0x450984(0x226)]();}this[_0x450984(0x20b)]();}['bleed'](){const _0x17a3a2=_0x1fd1d8,_0x574b05=new blood();newgrid[this[_0x17a3a2(0x284)][0x0]][this[_0x17a3a2(0x284)][0x1]][_0x17a3a2(0x248)](_0x574b05);}['heal'](_0x438537){const _0x1958d9=_0x1fd1d8;this['hp']+=_0x438537,adduilabel(_0x438537[_0x1958d9(0x33e)](),this[_0x1958d9(0x284)],[0x0,0x80,0x0],0x1,!![],![],![],!![],0x1);}['die'](){const _0x52fbde=_0x1fd1d8,[_0x46f70c,_0x22a9ad]=this[_0x52fbde(0x284)];this['actionqueue']=[];let _0x2213c1=null;if(this[_0x52fbde(0x199)])_0x2213c1=this[_0x52fbde(0x199)];const _0x5539fa=new action(_0x52fbde(0x18b),_0xbdb588=>_0xbdb588,[0x0,0x0,0x0],0x0,this[_0x52fbde(0x284)],this,this[_0x52fbde(0x284)],[],_0x2213c1,0x6);_0x5539fa['reactable']=![],this[_0x52fbde(0x117)][_0x52fbde(0x1c6)](_0x5539fa),move(this),this['dead']=!![],adduilabel('x',this[_0x52fbde(0x284)],[0x80,0x0,0x0],0x0,!![],![],![],![]),this[_0x52fbde(0x334)][0x1]*=0.5,this[_0x52fbde(0x334)][0x2]*=0.5,this['color'][0x0]*=0.5;const _0x52dd25=new corpse(_0x52fbde(0x17e),this['symbol'],convertColortoAbs(this[_0x52fbde(0x334)])[_0x52fbde(0xbc)]((_0x2e144a,_0x2798c3)=>_0x2e144a*[0.5,0.1,0.1][_0x2798c3]),null,0x0,!![],0x0);_0x52dd25[_0x52fbde(0x241)]=![],newgrid[this[_0x52fbde(0x284)][0x0]][this[_0x52fbde(0x284)][0x1]]['addObject'](_0x52dd25),this['dropAll'](),newgrid[this[_0x52fbde(0x284)][0x0]][this[_0x52fbde(0x284)][0x1]][_0x52fbde(0xef)]=null;}[_0x1fd1d8(0xf0)](_0x4a8f6f,_0x12d93d=![]){const _0x4c3f67=_0x1fd1d8;if(_0x4a8f6f instanceof Ammunition){this[_0x4c3f67(0x15d)](_0x4a8f6f[_0x4c3f67(0x83)],_0x4a8f6f[_0x4c3f67(0x21c)]);return;}if(this[_0x4c3f67(0x107)]&&this[_0x4c3f67(0x107)]['basename']==_0x4a8f6f['basename']&&this[_0x4c3f67(0x107)]['stacksize']>this['primaryitem']['number']){this[_0x4c3f67(0x107)][_0x4c3f67(0x21c)]++,this['primaryitem'][_0x4c3f67(0x15f)]=this['primaryitem'][_0x4c3f67(0x83)]+'('+this[_0x4c3f67(0x107)][_0x4c3f67(0x21c)]+')';if(!_0x12d93d)adduilabel(this[_0x4c3f67(0x107)]['name'],this[_0x4c3f67(0x284)],this[_0x4c3f67(0x334)],0x1,!![]);}else{if(this[_0x4c3f67(0x2a8)]&&this[_0x4c3f67(0x2a8)][_0x4c3f67(0x83)]==_0x4a8f6f[_0x4c3f67(0x83)]&&this[_0x4c3f67(0x2a8)][_0x4c3f67(0x366)]>this[_0x4c3f67(0x2a8)]['number']){this[_0x4c3f67(0x2a8)][_0x4c3f67(0x21c)]++,this[_0x4c3f67(0x2a8)][_0x4c3f67(0x15f)]=this[_0x4c3f67(0x2a8)][_0x4c3f67(0x83)]+'('+this[_0x4c3f67(0x2a8)][_0x4c3f67(0x21c)]+')';if(!_0x12d93d)adduilabel(this[_0x4c3f67(0x2a8)][_0x4c3f67(0x15f)],this['pos'],this['color'],0x1,!![]);}else{this[_0x4c3f67(0x2a8)][_0x4c3f67(0x15f)]==this[_0x4c3f67(0x1c1)][_0x4c3f67(0x15f)]&&this['itemSwap']();this[_0x4c3f67(0x1e9)](),this[_0x4c3f67(0x107)]=_0x4a8f6f;if(_0x4a8f6f[_0x4c3f67(0x358)]){let _0x251a13=this[_0x4c3f67(0x110)][_0x4a8f6f['ammotype']];if(!_0x251a13)_0x251a13=0x0;_0x4a8f6f[_0x4c3f67(0x15f)]=_0x4a8f6f['basename']+'('+_0x251a13+')';}if(!_0x12d93d)adduilabel(this['primaryitem']['name'],this[_0x4c3f67(0x284)],this[_0x4c3f67(0x334)],0x1,!![]);}}}[_0x1fd1d8(0x244)](){const _0x5c3315=_0x1fd1d8,_0x29fe90=this[_0x5c3315(0x107)];this['primaryitem']=this[_0x5c3315(0x2a8)],this[_0x5c3315(0x2a8)]=_0x29fe90;}[_0x1fd1d8(0x1e9)](_0xe512e5=_0x1fd1d8(0x107)){const _0x487682=_0x1fd1d8,[_0x4af545,_0x3cabb7]=this['pos'],_0x367d9c=this[_0xe512e5];if(!_0x367d9c||_0x367d9c[_0x487682(0x83)]==this['unarmed'][_0x487682(0x83)])return;if(_0x367d9c[_0x487682(0x358)]){const _0x3ad97b=this[_0x487682(0x110)][_0x367d9c['ammotype']];this[_0x487682(0x110)][_0x367d9c[_0x487682(0x358)]]=0x0;if(!_0x3ad97b){}else{const _0xe54dee=new _0x367d9c['ammoconstructor']();_0xe54dee[_0x487682(0x21c)]=_0x3ad97b,newgrid[_0x4af545][_0x3cabb7][_0x487682(0x29b)](_0xe54dee),_0x367d9c[_0x487682(0x15f)]=_0x367d9c[_0x487682(0x83)];}}newgrid[_0x4af545][_0x3cabb7][_0x487682(0x29b)](_0x367d9c),_0x367d9c[_0x487682(0x1e9)](),this[_0xe512e5]=this[_0x487682(0x1c1)];}[_0x1fd1d8(0x361)](){const _0xce9a32=_0x1fd1d8;this['drop'](_0xce9a32(0x11d));}['dropAll'](){const _0x590e12=_0x1fd1d8;this['drop'](),this['drop'](_0x590e12(0x2a8)),this[_0x590e12(0x1e9)]('offhanditem');}[_0x1fd1d8(0x2b1)](_0x5ac416){const _0x4b3853=_0x1fd1d8;if(this['primaryitem']['basename']==_0x5ac416[_0x4b3853(0x83)]){this[_0x4b3853(0x107)][_0x4b3853(0x21c)]--;this[_0x4b3853(0x107)]['number']<=0x0?this['primaryitem']=this['unarmed']:adduilabel(this[_0x4b3853(0x107)]['number'][_0x4b3853(0x33e)](),this[_0x4b3853(0x284)],this[_0x4b3853(0x334)],0x1,!![]);if(this[_0x4b3853(0x107)][_0x4b3853(0x21c)]==0x1)this[_0x4b3853(0x107)][_0x4b3853(0x15f)]=this['primaryitem'][_0x4b3853(0x83)];else this[_0x4b3853(0x107)]['number']>0x1&&(this[_0x4b3853(0x107)][_0x4b3853(0x15f)]=this['primaryitem'][_0x4b3853(0x83)]+'('+this[_0x4b3853(0x107)][_0x4b3853(0x21c)]+')');}else{if(this[_0x4b3853(0x2a8)][_0x4b3853(0x83)]==_0x5ac416[_0x4b3853(0x83)]){this[_0x4b3853(0x2a8)][_0x4b3853(0x21c)]--;this[_0x4b3853(0x2a8)][_0x4b3853(0x21c)]<=0x0?this[_0x4b3853(0x2a8)]=this[_0x4b3853(0x1c1)]:adduilabel(this['secondaryitem'][_0x4b3853(0x21c)]['toString'](),this[_0x4b3853(0x284)],this[_0x4b3853(0x334)],0x1,!![]);if(this[_0x4b3853(0x2a8)][_0x4b3853(0x21c)]==0x1)this[_0x4b3853(0x2a8)][_0x4b3853(0x15f)]=this['secondaryitem'][_0x4b3853(0x83)];else this[_0x4b3853(0x2a8)]['number']>0x1&&(this[_0x4b3853(0x2a8)][_0x4b3853(0x15f)]=this[_0x4b3853(0x2a8)][_0x4b3853(0x83)]+'('+this[_0x4b3853(0x2a8)][_0x4b3853(0x21c)]+')');}else{if(this[_0x4b3853(0x11d)][_0x4b3853(0x83)]==_0x5ac416[_0x4b3853(0x83)]){this[_0x4b3853(0x11d)]['number']--;this[_0x4b3853(0x11d)][_0x4b3853(0x21c)]<=0x0?this['offhanditem']=this['unarmed']:adduilabel(this[_0x4b3853(0x11d)][_0x4b3853(0x21c)][_0x4b3853(0x33e)](),this['pos'],this[_0x4b3853(0x334)],0x1,!![]);if(this[_0x4b3853(0x11d)]['number']==0x1)this[_0x4b3853(0x11d)][_0x4b3853(0x15f)]=this[_0x4b3853(0x11d)][_0x4b3853(0x83)];else this['offhanditem']['number']>0x1&&(this[_0x4b3853(0x11d)]['name']=this[_0x4b3853(0x11d)][_0x4b3853(0x83)]+'('+this[_0x4b3853(0x11d)][_0x4b3853(0x21c)]+')');}}}}[_0x1fd1d8(0x328)](_0x47d739){const _0x13aeb0=_0x1fd1d8;this['ammunition'][_0x47d739]--,adduilabel(this[_0x13aeb0(0x110)][_0x47d739][_0x13aeb0(0x33e)](),this[_0x13aeb0(0x284)],this[_0x13aeb0(0x334)],0x1,!![]),this['updateAmmo']();}[_0x1fd1d8(0x15d)](_0x5306ef,_0x433c24){const _0x2237eb=_0x1fd1d8;if(!this[_0x2237eb(0x110)][_0x5306ef]||this[_0x2237eb(0x110)][_0x5306ef]<=0x0)this[_0x2237eb(0x110)][_0x5306ef]=_0x433c24;else this[_0x2237eb(0x110)][_0x5306ef]+=_0x433c24;adduilabel(this[_0x2237eb(0x110)][_0x5306ef][_0x2237eb(0x33e)](),this[_0x2237eb(0x284)],this[_0x2237eb(0x334)],0x1,!![]),this[_0x2237eb(0x175)]();}[_0x1fd1d8(0x175)](){const _0x23231c=_0x1fd1d8,_0x1b0f5b=[this[_0x23231c(0x107)],this['secondaryitem']],_0x1cd3ab=this;_0x1b0f5b[_0x23231c(0xb8)](function(_0x5c6492){const _0xb7b20e=_0x23231c;if(_0x5c6492[_0xb7b20e(0x358)]){if(!_0x1cd3ab['ammunition'][_0x5c6492[_0xb7b20e(0x358)]])_0x1cd3ab[_0xb7b20e(0x110)][_0x5c6492[_0xb7b20e(0x358)]]=0x0;_0x5c6492[_0xb7b20e(0x15f)]=_0x5c6492['basename']+'('+_0x1cd3ab[_0xb7b20e(0x110)][_0x5c6492[_0xb7b20e(0x358)]]+')';}});}[_0x1fd1d8(0x135)](_0x573054=this[_0x1fd1d8(0x107)]){const _0x40f230=_0x1fd1d8,_0x102635=_0x573054['bonus']+this['stats'][_0x573054[_0x40f230(0x237)]];return _0x102635;}[_0x1fd1d8(0x17b)](){const _0x3342ac=_0x1fd1d8,_0x3cf15f=this[_0x3342ac(0x107)],_0xec28e1=_0x3cf15f['bonus']+this['stats'][_0x3cf15f[_0x3342ac(0x237)]],_0x2d7a3a=roll(_0x3cf15f[_0x3342ac(0x2c2)],_0xec28e1);return _0x2d7a3a;}[_0x1fd1d8(0x1a0)](_0x309bff=this[_0x1fd1d8(0x107)]){const _0x492573=_0x1fd1d8,_0x1f0983=_0x309bff[_0x492573(0x186)]+this['stats'][_0x309bff[_0x492573(0x237)]],_0x169e07=[0x1+_0x1f0983,_0x309bff[_0x492573(0x2c2)]+_0x1f0983];return _0x169e07;}['getrange'](_0x16e759){const _0x34c2c1=_0x1fd1d8;if(!_0x16e759)_0x16e759=this[_0x34c2c1(0x107)];if(_0x16e759[_0x34c2c1(0x358)]&&!this[_0x34c2c1(0x110)][_0x16e759[_0x34c2c1(0x358)]])return 0x0;return _0x16e759[_0x34c2c1(0x286)];}[_0x1fd1d8(0xae)](_0x54b5b9){const _0x18d3ba=_0x1fd1d8;if(!_0x54b5b9)_0x54b5b9=this[_0x18d3ba(0x107)];if(_0x54b5b9[_0x18d3ba(0x358)]&&!this['ammunition'][_0x54b5b9[_0x18d3ba(0x358)]])return 0x0;return _0x54b5b9[_0x18d3ba(0x314)];}[_0x1fd1d8(0x19c)](){const _0x3aeaf4=_0x1fd1d8,[_0x161131,_0x2beafb]=this[_0x3aeaf4(0x284)],_0x10f0f7=this;let _0xdc78dd=[],_0x131707=[],_0x552221=new Set();_0x131707[_0x3aeaf4(0x1c6)](newgrid[_0x161131][_0x2beafb]);let _0x22c330=0x0;for(let _0x71d3ce=0x0;_0x71d3ce<this[_0x3aeaf4(0x322)]['length'];_0x71d3ce++){const _0x1039ba=this[_0x3aeaf4(0x322)][_0x71d3ce];_0x1039ba['removevisiblecharacter'](_0x10f0f7);}while(_0x131707[_0x3aeaf4(0x86)]>0x0&&_0x22c330<0x2710){_0x22c330++;const _0x4e1ab4=_0x131707[_0x3aeaf4(0xe7)](),[_0x3597f9,_0x10e15b]=_0x4e1ab4['pos'];if(newgrid[_0x3597f9][_0x10e15b]['readOpacity']()>=0x1)continue;let _0x446433=dist([_0x161131,_0x2beafb],[_0x3597f9,_0x10e15b]);if(_0x446433>enemysightrange)continue;let [_0x2c8801,_0x564262]=[0x0,0x0],[_0x75dcd1,_0x25797e]=[0x0,0x0],_0x4c17cd=newgrid[_0x161131][_0x2beafb][_0x3aeaf4(0x1e7)],_0x264aed=newgrid[_0x3597f9][_0x10e15b][_0x3aeaf4(0x1e7)];if(drawLine3D([_0x161131,_0x2beafb,_0x4c17cd+0x1],[_0x3597f9,_0x10e15b,_0x264aed])<0x1){_0xdc78dd['push'](_0x4e1ab4),_0x4e1ab4[_0x3aeaf4(0x2a3)](_0x10f0f7);const _0x24d1f6=_0x4e1ab4[_0x3aeaf4(0x284)][0x0]+','+_0x4e1ab4[_0x3aeaf4(0x284)][0x1];_0x10f0f7[_0x3aeaf4(0x12b)][_0x24d1f6]=turncounter;if(_0x446433<enemysightrange)for(let _0x227c3d=0x0;_0x227c3d<0x8;_0x227c3d++){[_0x2c8801,_0x564262]=directions[_0x227c3d],[_0x75dcd1,_0x25797e]=[_0x3597f9+_0x2c8801,_0x10e15b+_0x564262];const _0x5a9e9a=_0x75dcd1+','+_0x25797e;!_0x552221[_0x3aeaf4(0x1c0)](_0x5a9e9a)&&newgrid[_0x75dcd1]&&newgrid[_0x75dcd1][_0x25797e]&&(_0x552221['add'](_0x5a9e9a),_0x131707[_0x3aeaf4(0x1c6)](newgrid[_0x75dcd1][_0x25797e]));}}else{if(_0x4c17cd!==_0x264aed&&drawline([_0x161131,_0x2beafb],[_0x3597f9,_0x10e15b],!![])<0x1)for(let _0x219abb=_0x3597f9-0x1;_0x219abb<=_0x3597f9+0x1;_0x219abb++){for(let _0x157e0f=_0x10e15b-0x1;_0x157e0f<=_0x10e15b+0x1;_0x157e0f++){const _0x3d5f75=_0x219abb+','+_0x157e0f;!_0x552221[_0x3aeaf4(0x1c0)](_0x3d5f75)&&newgrid[_0x219abb]&&newgrid[_0x219abb][_0x157e0f]&&(_0x552221[_0x3aeaf4(0x1f8)](_0x3d5f75),_0x131707[_0x3aeaf4(0x1c6)](newgrid[_0x219abb][_0x157e0f]));}}}}this[_0x3aeaf4(0x322)]=_0xdc78dd;}[_0x1fd1d8(0xa9)](){const _0x2df7b3=_0x1fd1d8,[_0x144b7,_0x40dda8]=this[_0x2df7b3(0x284)],_0x3ef0bb=[_0x144b7,_0x40dda8];let _0x595b02=[],_0x2547e1={},_0x576a53=[];_0x576a53['push'](newgrid[_0x144b7][_0x40dda8]);let _0x5cdab8=0x0;class _0x1a8123{constructor(_0xfd5a76,_0x48e438,_0x268fdc){const _0x534d4e=_0x2df7b3;this['min']=_0xfd5a76,this['max']=_0x48e438,this[_0x534d4e(0x166)]=_0x268fdc,this[_0x534d4e(0x21e)]=null,this[_0x534d4e(0x1fe)]=null;}}class _0x4dc50e{constructor(){this['root']=null;}['insert'](_0x2f0963,_0x3341d2,_0x276509){const _0x205151=_0x2df7b3,_0x19c037=new _0x1a8123(_0x2f0963,_0x3341d2,_0x276509);this['root']===null?this[_0x205151(0x2e8)]=_0x19c037:this[_0x205151(0x2e8)]=this[_0x205151(0x2fd)](this[_0x205151(0x2e8)],_0x19c037);}['_insert'](_0x7204e6,_0x48a922){const _0x177d3d=_0x2df7b3;return _0x48a922[_0x177d3d(0x1ac)]<_0x7204e6['min']?_0x7204e6[_0x177d3d(0x21e)]===null?_0x7204e6[_0x177d3d(0x21e)]=_0x48a922:_0x7204e6['left']=this[_0x177d3d(0x2fd)](_0x7204e6[_0x177d3d(0x21e)],_0x48a922):_0x7204e6['right']===null?_0x7204e6['right']=_0x48a922:_0x7204e6[_0x177d3d(0x1fe)]=this[_0x177d3d(0x2fd)](_0x7204e6[_0x177d3d(0x1fe)],_0x48a922),_0x7204e6;}[_0x2df7b3(0x221)](_0x5ee645){const _0x5e204f=_0x2df7b3;return this[_0x5e204f(0x137)](this[_0x5e204f(0x2e8)],_0x5ee645);}[_0x2df7b3(0x137)](_0x16955e,_0x3e6e40){const _0x5424ca=_0x2df7b3;if(_0x16955e===null)return null;if(_0x3e6e40>=_0x16955e[_0x5424ca(0x1ac)]&&_0x3e6e40<=_0x16955e[_0x5424ca(0x115)])return _0x16955e[_0x5424ca(0x166)];return _0x3e6e40<_0x16955e[_0x5424ca(0x1ac)]?this[_0x5424ca(0x137)](_0x16955e[_0x5424ca(0x21e)],_0x3e6e40):this[_0x5424ca(0x137)](_0x16955e[_0x5424ca(0x1fe)],_0x3e6e40);}[_0x2df7b3(0x23c)](_0x5a2314,_0x25ca43){const _0x46ec31=_0x2df7b3;return this[_0x46ec31(0x2f1)](this[_0x46ec31(0x2e8)],_0x5a2314,_0x25ca43);}[_0x2df7b3(0x2f1)](_0x22e6b6,_0x19e32d,_0x630b0){const _0x448707=_0x2df7b3;if(_0x22e6b6===null)return-0x63;if(_0x22e6b6['max']<_0x19e32d||_0x22e6b6[_0x448707(0x1ac)]>_0x630b0)return-0x63;if(_0x22e6b6[_0x448707(0x1ac)]>=_0x19e32d&&_0x22e6b6[_0x448707(0x115)]<=_0x630b0)return _0x22e6b6[_0x448707(0x359)];let _0x14cbf1=-0x63;return _0x22e6b6[_0x448707(0x1ac)]<=_0x630b0&&_0x22e6b6[_0x448707(0x115)]>=_0x19e32d&&(_0x14cbf1=_0x22e6b6[_0x448707(0x166)]),_0x14cbf1=Math[_0x448707(0x115)](_0x14cbf1,this[_0x448707(0x2f1)](_0x22e6b6['left'],_0x19e32d,_0x630b0),this[_0x448707(0x2f1)](_0x22e6b6[_0x448707(0x1fe)],_0x19e32d,_0x630b0)),_0x14cbf1;}}let _0x3c4ca5=new Array(0x168)[_0x2df7b3(0x216)](0x63);function _0x5c0b66(_0x338de5,_0x12f547){const _0x225be0=_0x2df7b3;let [_0x30f02e,_0x1f4670]=_0x338de5,[_0x2b9a0a,_0x459493]=_0x12f547,_0x3385b6=[[_0x2b9a0a-0.5,_0x459493-0.5],[_0x2b9a0a+0.5,_0x459493-0.5],[_0x2b9a0a-0.5,_0x459493+0.5],[_0x2b9a0a+0.5,_0x459493+0.5]],_0x5b3101=_0x3385b6[_0x225be0(0xbc)](([_0x557970,_0x2edec1])=>{const _0x2a85ad=_0x225be0;let _0x407101=Math[_0x2a85ad(0x161)](_0x2edec1-_0x1f4670,_0x557970-_0x30f02e),_0xb6dc22=_0x407101*(0xb4/Math['PI']);return _0xb6dc22=(_0xb6dc22+0x168)%0x168,Math['round'](_0xb6dc22);}),_0x693188=Math[_0x225be0(0x1ac)](..._0x5b3101),_0x45e913=Math['max'](..._0x5b3101);if(Math[_0x225be0(0x1be)](_0x693188-_0x45e913)>0x10e)return[_0x693188,_0x693188,chebyshevDistance(_0x338de5,_0x12f547)];return[_0x693188,_0x45e913,chebyshevDistance(_0x338de5,_0x12f547)];}function _0x1fb2ad(_0x22a2ae){const _0x511ad3=_0x2df7b3,[_0x369d41,_0x39f685]=_0x22a2ae[_0x511ad3(0x284)],_0x23fc11=_0x5c0b66(_0x3ef0bb,_0x22a2ae[_0x511ad3(0x284)]);console[_0x511ad3(0x35f)](_0x3c4ca5);const _0xb82b8e=_0x3c4ca5[_0x511ad3(0x23c)](_0x23fc11[0x0],_0x23fc11[0x1]);if(_0xb82b8e>=_0x23fc11[0x2]||_0xb82b8e===-0x63)return!![];return![];}function _0x275ee4(_0x1203b4){const _0x25a6c1=_0x5c0b66(_0x3ef0bb,_0x1203b4['pos']);for(let _0x2fbf1e=_0x25a6c1[0x0];_0x2fbf1e<=_0x25a6c1[0x1];_0x2fbf1e++){if(_0x25a6c1[0x2]<=_0x3c4ca5[_0x2fbf1e])return!![];}return![];}while(_0x576a53[_0x2df7b3(0x86)]>0x0&&_0x5cdab8<0x1388){let _0x3a1153=_0x576a53[_0x2df7b3(0x1c4)]();const [_0x1a9847,_0x3172fa]=_0x3a1153[_0x2df7b3(0x284)];_0x5cdab8++,_0x595b02[_0x2df7b3(0x1c6)](_0x3a1153);if(_0x275ee4(_0x3a1153)==![])continue;if(_0x3a1153['readOpacity']()<0x1)for(let _0x14af94=_0x1a9847-0x1;_0x14af94<=_0x1a9847+0x1;_0x14af94++){for(let _0x3758d9=_0x3172fa-0x1;_0x3758d9<=_0x3172fa+0x1;_0x3758d9++){if(!_0x2547e1[_0x14af94])_0x2547e1[_0x14af94]={};!_0x2547e1[_0x14af94][_0x3758d9]&&(_0x2547e1[_0x14af94][_0x3758d9]=0x1,_0x576a53[_0x2df7b3(0x1c6)](newgrid[_0x14af94][_0x3758d9]));}}if(_0x3a1153[_0x2df7b3(0xf6)]()>=0x1){let _0xb650b0=_0x5c0b66(_0x3ef0bb,_0x3a1153[_0x2df7b3(0x284)]);for(let _0x450751=_0xb650b0[0x0];_0x450751<=_0xb650b0[0x1];_0x450751++){_0x3c4ca5[_0x450751]=Math[_0x2df7b3(0x1ac)](_0x3c4ca5[_0x450751],_0xb650b0[0x2]);}}}return _0x595b02[_0x2df7b3(0xb8)](function(_0x366502){}),_0x595b02;}[_0x1fd1d8(0x113)](){const _0x15cbeb=_0x1fd1d8,[_0x5b6628,_0x15244a]=this[_0x15cbeb(0x284)],_0x1dc298=[_0x5b6628,_0x15244a];let _0x549254=newgrid[_0x5b6628][_0x15244a]['elevation']+0x1,_0x4bd43e=[],_0x27ee83={},_0x170243=[];_0x170243[_0x15cbeb(0x1c6)](newgrid[_0x5b6628][_0x15244a]);let _0x23b523=0x0,_0x52b32e=new Array(0x168)[_0x15cbeb(0x216)](0x63);function _0x14d0e6(_0x13d203,_0x170d14){const _0x2b6e80=_0x15cbeb;let [_0x44123b,_0x32eada]=_0x13d203,[_0x218e03,_0x13d64c]=_0x170d14,_0x5ac776=[[_0x218e03-0.5,_0x13d64c-0.5],[_0x218e03+0.5,_0x13d64c-0.5],[_0x218e03-0.5,_0x13d64c+0.5],[_0x218e03+0.5,_0x13d64c+0.5]],[_0x4b52c4,_0x313069]=[0x0,0x0],_0x2c6d5b,_0x44a6f0,_0x254995=[];for(let _0x44b518=0x0;_0x44b518<0x4;_0x44b518++){[_0x4b52c4,_0x313069]=_0x5ac776[_0x44b518],_0x2c6d5b=Math[_0x2b6e80(0x161)](_0x313069-_0x32eada,_0x4b52c4-_0x44123b),_0x44a6f0=_0x2c6d5b*(0xb4/Math['PI']),_0x44a6f0=(_0x44a6f0+0x168)%0x168,_0x254995[_0x44b518]=Math[_0x2b6e80(0x8a)](_0x44a6f0);}let _0x29684f=Math[_0x2b6e80(0x1ac)](..._0x254995),_0x3682bb=Math['max'](..._0x254995);if(Math[_0x2b6e80(0x1be)](_0x29684f-_0x3682bb)>0x10e)return[_0x29684f,_0x29684f,chebyshevDistance(_0x13d203,_0x170d14)];return[_0x29684f,_0x3682bb,chebyshevDistance(_0x13d203,_0x170d14)];}function _0x12e47e(_0x59a862){const _0xc59ec7=_0x14d0e6(_0x1dc298,_0x59a862['pos']);for(let _0x3b4c44=_0xc59ec7[0x0];_0x3b4c44<=_0xc59ec7[0x1];_0x3b4c44++){if(_0xc59ec7[0x2]<=_0x52b32e[_0x3b4c44])return!![];}return![];}while(_0x170243[_0x15cbeb(0x86)]>0x0){let _0x15dc95=_0x170243['shift']();const [_0x3d6cb9,_0x31ad20]=_0x15dc95[_0x15cbeb(0x284)];_0x23b523++,_0x4bd43e[_0x15cbeb(0x1c6)](_0x15dc95);if(_0x12e47e(_0x15dc95)==![])continue;if(_0x15dc95[_0x15cbeb(0xf6)](undefined,_0x1dc298)<0x1)for(let _0x1716be=_0x3d6cb9-0x1;_0x1716be<=_0x3d6cb9+0x1;_0x1716be++){for(let _0xa0fd1e=_0x31ad20-0x1;_0xa0fd1e<=_0x31ad20+0x1;_0xa0fd1e++){if(!_0x27ee83[_0x1716be])_0x27ee83[_0x1716be]={};!_0x27ee83[_0x1716be][_0xa0fd1e]&&(_0x27ee83[_0x1716be][_0xa0fd1e]=0x1,_0x170243[_0x15cbeb(0x1c6)](newgrid[_0x1716be][_0xa0fd1e]));}}if(_0x15dc95[_0x15cbeb(0xf6)](undefined,_0x1dc298)>=0x1){let _0x27a984=_0x14d0e6(_0x1dc298,_0x15dc95[_0x15cbeb(0x284)]);for(let _0x2f1abb=_0x27a984[0x0];_0x2f1abb<=_0x27a984[0x1];_0x2f1abb++){_0x52b32e[_0x2f1abb]=Math[_0x15cbeb(0x1ac)](_0x52b32e[_0x2f1abb],_0x27a984[0x2]);}}}return _0x4bd43e;}['getplayerviewnew'](){}}class playerCharacter extends character{constructor(_0x55f604,_0x24e55d,_0x2579a1,_0x81e236,_0x3dc4f7,_0x2dc4d5,_0x989fc,_0x4bd5c4,_0x3ef84a,_0x2ff5e3,_0x56a7b3,_0x2a06ce){const _0x1ae13d=_0x1fd1d8;super(_0x55f604,_0x24e55d,_0x2579a1,_0x81e236,_0x3dc4f7,_0x2dc4d5,_0x989fc,_0x4bd5c4,_0x3ef84a,_0x2ff5e3,_0x56a7b3,_0x2a06ce),this[_0x1ae13d(0x18e)]=[attackofop,overwatch,autopickup,block];}[_0x1fd1d8(0x1bb)](_0x40f14d,_0x469d5f){const _0x27ed8b=_0x1fd1d8;if(_0x469d5f<0x1)return;if(this[_0x27ed8b(0xd7)]&&!(gameover==!![]&&deathcharacter==this))return;if(_0x40f14d[_0x27ed8b(0x1ff)]===!![])return;const _0x1b94de=this,[_0x236ed0,_0x40ee63]=_0x40f14d[_0x27ed8b(0x284)];_0x40f14d[_0x27ed8b(0x1ff)]=!![];let _0x44d873=[];if(_0x40f14d[_0x27ed8b(0xd9)])_0x44d873=_0x40f14d[_0x27ed8b(0xd9)][_0x27ed8b(0x169)]();let _0x55986b=[];_0x44d873[_0x27ed8b(0xb8)](function(_0x437abe,_0x58bdaa){const _0xa8380c=_0x27ed8b;_0x55986b[_0x58bdaa]=[],_0x55986b[_0x58bdaa]=_0x437abe['slice']();if(_0x55986b[_0x58bdaa][0x6]===undefined)_0x55986b[_0x58bdaa][0x6]=0x1;if(_0x55986b[_0x58bdaa][0x6]!==0x0)_0x55986b[_0x58bdaa][0x6]*=Math[_0xa8380c(0x115)](Math[_0xa8380c(0x1ac)]((_0x469d5f/_0x40f14d[_0xa8380c(0x215)])**0.5,0x1),0.1);});if(_0x40f14d[_0x27ed8b(0x259)]['pc']==!![]){playsoundeffect(_0x55986b);return;}if(newgrid[_0x236ed0][_0x40ee63][_0x27ed8b(0x123)]==![]){setTimeout(()=>{const _0x23fcbe=_0x27ed8b;adduilabel('^',_0x40f14d[_0x23fcbe(0x284)],_0x1b94de[_0x23fcbe(0x334)],0x0,!![],![],![],!![],0x1),playsoundeffect(_0x55986b);},(_0x40f14d[_0x27ed8b(0x215)]-_0x469d5f)*0x32);return;}playsoundeffect(_0x55986b);}['die'](){const _0x1aa5ae=_0x1fd1d8;super[_0x1aa5ae(0x226)]();let _0x4d6c97=!![];for(let _0x506552=0x0;_0x506552<playercs['length'];_0x506552++){let _0x52b512=playercs[_0x506552];if(_0x52b512[_0x1aa5ae(0xd7)]!==!![])_0x4d6c97=![];}_0x4d6c97&&(gameover=!![],deathcharacter=this);}}class Fugitive extends playerCharacter{constructor(_0x432182){const _0x12b070=_0x1fd1d8;super(_0x432182,_0x12b070(0x84),statblocks[_0x12b070(0x102)],0x7,[0x4,0x1,0x1],!![],'@',[0x0,0x20,0x0],0xe,[],[],sneakattackpermute);const _0x184214=this[_0x12b070(0x321)],_0x1eb548=function(_0x438b04,_0x2daf49){const _0x4d93c0=_0x184214['bind'](this),_0x8d0f2=dualwieldpermute['bind'](this);return _0x8d0f2(_0x4d93c0(_0x438b04,_0x2daf49),_0x2daf49);};this[_0x12b070(0x321)]=_0x1eb548;}}class Huntsman extends playerCharacter{constructor(_0x48ac60){const _0x57a7d7=_0x1fd1d8;super(_0x48ac60,_0x57a7d7(0x24b),statblocks[_0x57a7d7(0x275)],0x6,[0x4,0x1,0x1],!![],'@',[0x80,0x60,0x40],0xe,[],[],sharpshooterpermute);const _0x1797af=this[_0x57a7d7(0x321)],_0x25e040=function(_0x467267,_0x5c4831){const _0x2330f4=_0x57a7d7,_0x5742c5=_0x1797af[_0x2330f4(0xca)](this),_0x178520=dualwieldpermute[_0x2330f4(0xca)](this);return _0x178520(_0x5742c5(_0x467267,_0x5c4831),_0x5c4831);};this['specialattack']=_0x25e040;}}class Deserter extends playerCharacter{constructor(_0x491c94){const _0x40db48=_0x1fd1d8;super(_0x491c94,_0x40db48(0xd6),statblocks['Deserter'],0x9,[0x4,0x1,0x1],!![],'@',[0x80,0x80,0x80],0xe,[],[],torchbearerpermute),this['offhanditem']=new Torch(0xc8);const _0x3a93d2=this[_0x40db48(0x321)],_0x283aa4=function(_0x3d0b5b,_0x4b60ea){const _0x385a46=_0x40db48,_0xdd2244=_0x3a93d2[_0x385a46(0xca)](this),_0x4ccd9e=dualwieldpermute[_0x385a46(0xca)](this);return _0x4ccd9e(_0xdd2244(_0x3d0b5b,_0x4b60ea),_0x4b60ea);};this['specialattack']=_0x283aa4;}}class Berserker extends playerCharacter{constructor(_0x46a1eb){const _0x10cd7b=_0x1fd1d8;super(_0x46a1eb,_0x10cd7b(0x1cf),statblocks['Berserker'],0xa,[0x4,0x1,0x1],!![],'@',[0xa0,0x40,0x20],0xe,[],[],savageattack);const _0x542d1a=this,_0x447dba=this[_0x10cd7b(0x321)],_0x462c35=function(_0x472434,_0x3251a0){const _0x265fa7=_0x10cd7b,_0x223011=_0x447dba[_0x265fa7(0xca)](this),_0x1f16ce=dualwieldpermute[_0x265fa7(0xca)](this);return _0x1f16ce(_0x223011(_0x472434,_0x3251a0),_0x3251a0);};this['specialattack']=_0x462c35;}}class Sentinel extends playerCharacter{constructor(_0x1eb9f8){const _0x4d90c6=_0x1fd1d8;super(_0x1eb9f8,_0x4d90c6(0x191),statblocks[_0x4d90c6(0xd6)],0xa,[0x4,0x1,0x1],!![],'@',[0x40,0x80,0x80],0xa,[],[],_0x1fa002=>_0x1fa002);const _0xa6d1e5=this[_0x4d90c6(0x321)],_0x42c8d0=function(_0x534f27,_0x375a34){const _0x513041=_0x4d90c6,_0x1c5903=_0xa6d1e5[_0x513041(0xca)](this),_0x4300fe=dualwieldpermute[_0x513041(0xca)](this);return _0x4300fe(_0x1c5903(_0x534f27,_0x375a34),_0x375a34);};this[_0x4d90c6(0x321)]=_0x42c8d0,this[_0x4d90c6(0x18e)]=this[_0x4d90c6(0x18e)][_0x4d90c6(0x198)](_0x482350=>_0x482350!==block),this['reactions']['push'](defender),this[_0x4d90c6(0x18e)][_0x4d90c6(0x1c6)](riposte);}}class Ranger extends playerCharacter{constructor(_0x4508f6){const _0x578f50=_0x1fd1d8;super(_0x4508f6,_0x578f50(0x212),[0x2,0x2,0x2],0xa,[0x4,0x1,0x1],!![],'@',[0x40,0x80,0x40],0xa,[],[],_0x33755f=>_0x33755f);const _0x587cad=this[_0x578f50(0x321)],_0x29e5b4=function(_0x42bdcb,_0x4cc8b8){const _0x567bb4=_0x578f50,_0x51c1bb=_0x587cad[_0x567bb4(0xca)](this),_0x379010=dualwieldpluspermute[_0x567bb4(0xca)](this);return _0x379010(_0x51c1bb(_0x42bdcb,_0x4cc8b8),_0x4cc8b8);};this[_0x578f50(0x321)]=_0x29e5b4;}}class Prisoner extends playerCharacter{constructor(_0x4ea33b){const _0x3de5c8=_0x1fd1d8;super(_0x4ea33b,'Prisoner',[0x1,0x1,0x1],0x7,[0x4,0x1,0x1],!![],'@',[0x40,0x20,0x0],0xa,[],[],_0x456f33=>_0x456f33);const _0x12c61c=this[_0x3de5c8(0x321)],_0x5e2bc0=function(_0x4f5772,_0x16d58b){const _0x1616e6=_0x3de5c8,_0x2e9832=_0x12c61c[_0x1616e6(0xca)](this),_0x27e3fe=dualwieldpermute[_0x1616e6(0xca)](this);return _0x27e3fe(_0x2e9832(_0x4f5772,_0x16d58b),_0x16d58b);};this[_0x3de5c8(0x321)]=_0x5e2bc0;}}class enemy extends character{constructor(_0x5ea687,_0x1ff0f3,_0x4c65a0,_0x34302c,_0x4f0a9f,_0x24fdd3,_0x2b469d,_0x33da3d,_0x133f5d,_0x262e04,_0x40022c,_0x3f3dbc,_0x271f8f){const _0x26d86e=_0x1fd1d8;super(_0x5ea687,_0x1ff0f3,_0x4c65a0,_0x34302c,_0x4f0a9f,_0x24fdd3,_0x2b469d,_0x33da3d,_0x133f5d,_0x262e04,_0x40022c,_0x271f8f),this[_0x26d86e(0x2c0)]=_0x5ea687['slice'](),this[_0x26d86e(0x12b)]={},this[_0x26d86e(0xeb)]=[],this[_0x26d86e(0x7d)]=[],this[_0x26d86e(0x2ae)],this[_0x26d86e(0x1a4)],this['huntedcharacters']={},this[_0x26d86e(0x204)]={},this[_0x26d86e(0xb5)]={},this[_0x26d86e(0x2f6)]=[],this['actions']=[],this[_0x26d86e(0x18e)]=_0x3f3dbc||[],this['hp']+=Math[_0x26d86e(0x8a)](Math[_0x26d86e(0x222)]()*0x4),this['maxhp']=this['hp'],this[_0x26d86e(0x1ba)]=[moveusecase,attackusecase,dashusecase,chatusecase,standgroundusecase,alertusecase],this[_0x26d86e(0x249)]=[new State('idle',defaultidle,null,[0x0,0x3]),new State(_0x26d86e(0x12f),defaulthostile,defaulttemperment,[0x0,0x1]),new State(_0x26d86e(0x2e4),defaulthunting,null,[0x0]),new State(_0x26d86e(0x272),defaultfleeing,null,[0x0,0x1,0x5])],this[_0x26d86e(0x299)](),this[_0x26d86e(0x199)]=soundeffects[_0x26d86e(0xb7)],spot(this);}[_0x1fd1d8(0x375)](_0x311403){const _0x32e390=_0x1fd1d8;super[_0x32e390(0x375)](_0x311403),this[_0x32e390(0xd7)]==![]&&this['hp']<=Math['ceil'](this['maxhp']/0x4)&&(this[_0x32e390(0x168)]=this['states'][0x3]);}[_0x1fd1d8(0x299)](){const _0xb135ae=_0x1fd1d8,_0x2857b7=this;!this[_0xb135ae(0x168)]&&(this[_0xb135ae(0x168)]=this[_0xb135ae(0x249)][0x0]);let _0xac262=![],_0x3ea241=![];Object[_0xb135ae(0x10c)](_0x2857b7[_0xb135ae(0xb5)])[_0xb135ae(0xb8)](function(_0x3ad563){const _0x2a57cd=_0x3ad563['character'];_0x2a57cd['pc']!=_0x2857b7['pc']&&(_0xac262=!![],_0x3ea241=!![]);});this['state']['name']==this[_0xb135ae(0x249)][0x0]['name']&&_0x3ea241==!![]&&(this[_0xb135ae(0x168)]=this['states'][0x1],this['actionqueue']=[],addconditiondynamic(conditions[_0xb135ae(0x13a)],!![],this)());if(this[_0xb135ae(0x168)][_0xb135ae(0x15f)]==this['states'][0x1][_0xb135ae(0x15f)]&&_0x3ea241==![])this[_0xb135ae(0x1a4)]=null,this[_0xb135ae(0x168)]=this[_0xb135ae(0x249)][0x2],this['actionqueue']=[];else this['state'][_0xb135ae(0x15f)]==this['states'][0x2]['name']&&(_0xac262==!![]&&(this[_0xb135ae(0x168)]=this[_0xb135ae(0x249)][0x1],this['actionqueue']=[]));}[_0x1fd1d8(0x1bb)](_0xfeee07,_0x29067b){const _0x19bac8=_0x1fd1d8,_0x24fdb9=this;if(_0xfeee07[_0x19bac8(0x259)]==_0x24fdb9)return;if(_0xfeee07[_0x19bac8(0x259)]['pc']!==this['pc'])this[_0x19bac8(0xb5)][_0xfeee07[_0x19bac8(0x259)][_0x19bac8(0x2a6)]]=new CharacterMemory(_0xfeee07[_0x19bac8(0x259)],_0xfeee07[_0x19bac8(0x259)][_0x19bac8(0x284)][_0x19bac8(0x169)]()),this[_0x19bac8(0x204)][_0xfeee07[_0x19bac8(0x259)][_0x19bac8(0x2a6)]]=new CharacterMemory(_0xfeee07[_0x19bac8(0x259)],_0xfeee07[_0x19bac8(0x259)]['pos'][_0x19bac8(0x169)]()),this[_0x19bac8(0x299)]();else{if(_0xfeee07[_0x19bac8(0x1d1)]==_0x19bac8(0x373)||_0xfeee07[_0x19bac8(0x1d1)]==_0x19bac8(0x34a)){const [_0x2e4856,_0x376d31]=_0xfeee07[_0x19bac8(0x284)];let _0x5a66b6;if(newgrid[_0x2e4856][_0x376d31][_0x19bac8(0xef)]&&newgrid[_0x2e4856][_0x376d31][_0x19bac8(0xef)]['pc']!==this['pc'])_0x5a66b6=newgrid[_0x2e4856][_0x376d31]['character'];_0x5a66b6&&(this[_0x19bac8(0xb5)][_0x5a66b6[_0x19bac8(0x2a6)]]=new CharacterMemory(_0x5a66b6,_0x5a66b6[_0x19bac8(0x284)][_0x19bac8(0x169)]()),this[_0x19bac8(0x204)][_0x5a66b6[_0x19bac8(0x2a6)]]=new CharacterMemory(_0x5a66b6,_0x5a66b6['pos']['slice']())),this[_0x19bac8(0x299)]();}else{if(_0xfeee07[_0x19bac8(0x1d1)]==_0x19bac8(0x243)||_0xfeee07[_0x19bac8(0x1d1)]==_0x19bac8(0xe2)){if(_0xfeee07[_0x19bac8(0x259)][_0x19bac8(0x204)]){let _0x57ce01=![];Object[_0x19bac8(0x10c)](_0xfeee07[_0x19bac8(0x259)]['knowncharacters'])[_0x19bac8(0xb8)](function(_0x47a3e6){const _0x1fc54e=_0x19bac8,_0x3d79c9=_0x47a3e6[_0x1fc54e(0xef)],_0x541580=_0x47a3e6[_0x1fc54e(0xe9)];if((!_0x24fdb9['visiblecharacters'][_0x3d79c9[_0x1fc54e(0x2a6)]]||_0x24fdb9[_0x1fc54e(0xb5)][_0x3d79c9[_0x1fc54e(0x2a6)]][_0x1fc54e(0x24f)]<_0x47a3e6[_0x1fc54e(0x24f)])&&_0x3d79c9['pc']!==_0x24fdb9['pc']){const _0x53851c=new CharacterMemory(_0x3d79c9,_0x541580);_0x24fdb9[_0x1fc54e(0xb5)][_0x3d79c9[_0x1fc54e(0x2a6)]]=_0x53851c;if(_0x24fdb9['state'][_0x1fc54e(0x15f)]==_0x24fdb9[_0x1fc54e(0x249)][0x0][_0x1fc54e(0x15f)])_0x57ce01=!![];}}),_0x57ce01&&_0x24fdb9[_0x19bac8(0x299)]();}else console['log'](_0x19bac8(0x15a));}}}}[_0x1fd1d8(0x30b)](_0x2a4d93=this['primaryitem']){const _0x40303a=_0x1fd1d8;let _0x3b69b2=super[_0x40303a(0x30b)](_0x2a4d93);return _0x2a4d93[_0x40303a(0x98)]==!![]&&_0x2a4d93[_0x40303a(0x21c)]<0x2&&(this[_0x40303a(0x107)][_0x40303a(0x15f)]==this[_0x40303a(0x1c1)][_0x40303a(0x15f)]||this[_0x40303a(0x2a8)]['name']==this[_0x40303a(0x1c1)][_0x40303a(0x15f)])&&(_0x3b69b2=1.9),_0x2a4d93['ammotype']&&!this[_0x40303a(0x110)][_0x2a4d93[_0x40303a(0x358)]]&&(_0x3b69b2=0x0),_0x3b69b2;}}class Human extends enemy{constructor(_0xf50d7d,_0x2bcd3a,_0x258593,_0x4b6bc4){const _0x2157f6=_0x1fd1d8;super(_0xf50d7d,_0x2bcd3a,statblocks[_0x2157f6(0x28a)],0x4,[0x4,0x1,0x1],![],'@',_0x258593,0xa,[],_0x4b6bc4,[spot,attackofop]);}[_0x1fd1d8(0x19c)](){const _0x1724c6=_0x1fd1d8,[_0x7309d8,_0x1e418c]=this[_0x1724c6(0x284)],_0x5bf4ae=this;let _0x44faf1=[],_0x52c7ea=[],_0xfadbf3=new Set();_0x52c7ea[_0x1724c6(0x1c6)](newgrid[_0x7309d8][_0x1e418c]);let _0x237aaf=0x0;for(let _0xc10205=0x0;_0xc10205<this[_0x1724c6(0x322)]['length'];_0xc10205++){const _0x35d06b=this[_0x1724c6(0x322)][_0xc10205];_0x35d06b[_0x1724c6(0x1b4)](_0x5bf4ae);}while(_0x52c7ea['length']>0x0&&_0x237aaf<0x3e8){_0x237aaf++;const _0x585ff2=_0x52c7ea[_0x1724c6(0x1c4)](),[_0x46ea73,_0x49466b]=_0x585ff2[_0x1724c6(0x284)];if(drawLine3D([_0x7309d8,_0x1e418c,newgrid[_0x7309d8][_0x1e418c]['elevation']+0x1],[_0x46ea73,_0x49466b,newgrid[_0x46ea73][_0x49466b]['elevation']])<0x1){const _0x30d7dd=_0x585ff2[_0x1724c6(0x284)][0x0]+','+_0x585ff2[_0x1724c6(0x284)][0x1];newgrid[_0x46ea73][_0x49466b]['lightlevel']>0x0&&(_0x44faf1[_0x1724c6(0x1c6)](_0x585ff2),_0x585ff2['addvisiblecharacter'](_0x5bf4ae),_0x5bf4ae[_0x1724c6(0x12b)][_0x30d7dd]=turncounter);if(dist([_0x7309d8,_0x1e418c],[_0x46ea73,_0x49466b])<enemysightrange)for(let _0x30ff5c=_0x46ea73-0x1;_0x30ff5c<=_0x46ea73+0x1;_0x30ff5c++){for(let _0x2543db=_0x49466b-0x1;_0x2543db<=_0x49466b+0x1;_0x2543db++){const _0x499766=_0x30ff5c+','+_0x2543db;!_0xfadbf3[_0x1724c6(0x1c0)](_0x499766)&&newgrid[_0x30ff5c]&&newgrid[_0x30ff5c][_0x2543db]&&(_0xfadbf3[_0x1724c6(0x1f8)](_0x499766),_0x52c7ea['push'](newgrid[_0x30ff5c][_0x2543db]));}}}else{if(drawline([_0x7309d8,_0x1e418c],[_0x46ea73,_0x49466b],!![]))for(let _0x59b3ba=_0x46ea73-0x1;_0x59b3ba<=_0x46ea73+0x1;_0x59b3ba++){for(let _0x238ee0=_0x49466b-0x1;_0x238ee0<=_0x49466b+0x1;_0x238ee0++){const _0x47a292=_0x59b3ba+','+_0x238ee0;!_0xfadbf3[_0x1724c6(0x1c0)](_0x47a292)&&newgrid[_0x59b3ba]&&newgrid[_0x59b3ba][_0x238ee0]&&(_0xfadbf3['add'](_0x47a292),_0x52c7ea[_0x1724c6(0x1c6)](newgrid[_0x59b3ba][_0x238ee0]));}}}}this[_0x1724c6(0x322)]=_0x44faf1;}}class Bandit extends Human{constructor(_0xe35d7d){const _0x4126fc=_0x1fd1d8;super(_0xe35d7d,_0x4126fc(0x172),[0x40,0x40,0x20],[]),this[_0x4126fc(0x11d)]=new Torch(0x19);}}class Goblin extends enemy{constructor(_0x2f9e6f,_0x3d3833,_0x9b2b30,_0x308e8c){const _0x1cf97f=_0x1fd1d8;if(!_0x3d3833)_0x3d3833=_0x1cf97f(0x28a);if(!_0x9b2b30)_0x9b2b30=[0x96,0x7d,0x0];if(!_0x308e8c){if(Math['random']()>0.5)_0x308e8c=[new Shiv()];else _0x308e8c=[new Club()];}super(_0x2f9e6f,_0x3d3833,statblocks[_0x1cf97f(0x28a)],0x4,[0x5,0x1,0x1],![],'g',_0x9b2b30,0x8,[],_0x308e8c,[spot,attackofop,lightsensitive],darkattackpermute);}}class Goblin_Dagger extends Goblin{constructor(_0x29c0f3){const _0x37dff9=_0x1fd1d8;let _0x328973;Math[_0x37dff9(0x222)]()>0.5?_0x328973=new Dagger(0x1):_0x328973=new Javelin(0x1),super(_0x29c0f3,'Goblin',[0x96,0x7d,0x0],[_0x328973]);}}class Goblin_Swordsman extends Goblin{constructor(_0x4d3ffd){const _0x108761=_0x1fd1d8;let _0x1543f3=[];Math['random']()>0.5?_0x1543f3[_0x108761(0x1c6)](new Shortsword()):_0x1543f3[_0x108761(0x1c6)](new Scimitar());if(Math[_0x108761(0x222)]()>0.5)_0x1543f3[_0x108761(0x1c6)](new Dagger(randomNumber(0x2,0x1)));super(_0x4d3ffd,'Goblin\x20Swordsman',[0x96,0x7d,0x0],_0x1543f3);}}class Goblin_Spearman extends Goblin{constructor(_0x55094d){const _0x3c0772=_0x1fd1d8;super(_0x55094d,_0x3c0772(0x1ef),[0x96,0x7d,0x0],[new Spear()]);}}class Hobgoblin extends Goblin{constructor(_0x59a25b){const _0x42ada5=_0x1fd1d8;super(_0x59a25b,_0x42ada5(0x13f),[0x64,0xf,0xf],[]);if(Math[_0x42ada5(0x222)]()<0.25)this['primaryitem']=new Longsword();else{if(Math[_0x42ada5(0x222)]()<0.33)this['primaryitem']=new Longbow(),this[_0x42ada5(0x110)][_0x42ada5(0x2eb)]=0x5+Math[_0x42ada5(0xc6)](Math[_0x42ada5(0x222)]()*0x5);else Math[_0x42ada5(0x222)]()<0.5?this[_0x42ada5(0x107)]=new Mace():this['primaryitem']=new Battleaxe();}this['maxhp']+=0x7,this['hp']=this['maxhp'];}}class Hobgoblin_Warlord extends Hobgoblin{constructor(_0x557d32){const _0x3eb196=_0x1fd1d8;super(_0x557d32),this[_0x3eb196(0x15f)]=_0x3eb196(0xf1),this['primaryitem']=this['unarmed'],this[_0x3eb196(0x2a8)]=this[_0x3eb196(0x1c1)],this['offhanditem']=this[_0x3eb196(0x1c1)];let _0x34f069=[[Handaxe,Shield]];this[_0x3eb196(0x107)]=new _0x34f069[0x0][0x0](),this[_0x3eb196(0x11d)]=new _0x34f069[0x0][0x1](),this[_0x3eb196(0x2e2)]+=0x7,this['hp']=this[_0x3eb196(0x2e2)];let _0x4c6ebf=this[_0x3eb196(0x321)];const _0x16d72d=function(_0x4afb53,_0x3e4129){const _0x4fbb16=_0x3eb196,_0x3c1573=_0x4c6ebf['bind'](this),_0xa5bb21=dualwieldpermute[_0x4fbb16(0xca)](this);return _0xa5bb21(_0x3c1573(_0x4afb53,_0x3e4129),_0x3e4129);};this[_0x3eb196(0x321)]=_0x16d72d,this[_0x3eb196(0x18e)][_0x3eb196(0x1c6)](block);}}class Goblin_Longbow extends Goblin{constructor(_0x487762){const _0x4e1f48=_0x1fd1d8;super(_0x487762,'Goblin\x20Archer',[0x64,0x96,0x0],[]),this[_0x4e1f48(0x110)][_0x4e1f48(0x2eb)]=randomNumber(0x5,0x2),this['primaryitem']=new Longbow();}}class Goblin_Shortbow extends Goblin{constructor(_0x18fb48){const _0x40a7c2=_0x1fd1d8;super(_0x18fb48,_0x40a7c2(0x2ad),[0x64,0x96,0x0],[]),this['ammunition']['Arrow']=randomNumber(0x5,0x2),this[_0x40a7c2(0x107)]=new Shortbow();}}class Goblin_Wargmaster extends Goblin{constructor(_0x484d0f){const _0x9d394=_0x1fd1d8;let _0x2a706d;Math[_0x9d394(0x222)]()>0.5?_0x2a706d=new Dagger(0x1):_0x2a706d=new Javelin(0x1);super(_0x484d0f,_0x9d394(0x28a),[0x96,0x7d,0x0],[_0x2a706d]);let _0x1fc1f3=new Warg_Tame(_0x484d0f),_0x349de9=new Leash();_0x1fc1f3[_0x9d394(0xbf)]=this,_0x1fc1f3[_0x9d394(0x28b)]=_0x349de9,newgrid[_0x484d0f[0x0]][_0x484d0f[0x1]][_0x9d394(0x313)](_0x1fc1f3),newgrid[_0x484d0f[0x0]][_0x484d0f[0x1]]['addObject'](_0x349de9);}}class Goblin_Hivequeen extends Goblin{constructor(_0x40eedc){const _0x2e5836=_0x1fd1d8;super(_0x40eedc,_0x2e5836(0x346),[0x80,0x80,0x80],[new Athame(0x1)]),this['ac']=0xc,this['maxhp']*=0x3,this['hp']=this[_0x2e5836(0x2e2)],this[_0x2e5836(0x209)]=-0x3,this[_0x2e5836(0x11d)]=new Light(_0x2e5836(0x17d),'.',[0.6,0.4,0.6]),this[_0x2e5836(0x11d)][_0x2e5836(0x2d0)]=[new lightsource(null,[0x100,0xa4,0x100],[0x1,0x1,0x1],0x2)],this[_0x2e5836(0x199)]=soundeffects[_0x2e5836(0x156)];}[_0x1fd1d8(0x375)](_0x45887c){const _0x3def9a=_0x1fd1d8;super[_0x3def9a(0x375)](_0x45887c);if(this[_0x3def9a(0xd7)]==!![])return;this[_0x3def9a(0xb6)]();}['Shriek'](){const _0x31fea3=_0x1fd1d8;if(turncounter-this[_0x31fea3(0x209)]<0x3)return;this[_0x31fea3(0x209)]=turncounter;let _0xc212ce=this[_0x31fea3(0x334)];const [_0x1c7d6c,_0x33f4f5]=this['pos'];let _0x43e457=new Sound([_0x1c7d6c,_0x33f4f5],0x10,this,_0x31fea3(0xb6),soundeffects[_0x31fea3(0x22c)]);hear(_0x43e457,0x10,0x0,[0x6,0x4,0x6]),adduilabel(_0x31fea3(0xb6),this[_0x31fea3(0x284)],_0xc212ce,0x1,!![]);let _0xdba2c8=0xa;for(let _0x187572=_0x1c7d6c-_0xdba2c8;_0x187572<_0x1c7d6c+_0xdba2c8;_0x187572++){for(let _0x160aea=_0x33f4f5-_0xdba2c8;_0x160aea<_0x33f4f5+_0xdba2c8;_0x160aea++){newgrid[_0x187572]&&newgrid[_0x187572][_0x160aea]&&(dist([_0x1c7d6c,_0x33f4f5],[_0x187572,_0x160aea])<_0xdba2c8&&(newgrid[_0x187572][_0x160aea][_0x31fea3(0x274)][_0x31fea3(0x86)]>0x0&&(Math[_0x31fea3(0x222)]()>0.5&&newgrid[_0x187572][_0x160aea][_0x31fea3(0x274)][0x0][_0x31fea3(0x15f)]==_0x31fea3(0x316)&&newgrid[_0x187572][_0x160aea][_0x31fea3(0x274)][0x0][_0x31fea3(0x375)](0x1)),newgrid[_0x187572][_0x160aea][_0x31fea3(0xef)]!==null&&newgrid[_0x187572][_0x160aea][_0x31fea3(0xef)]['pc']!==this['pc']&&addconditiondynamic(conditions[_0x31fea3(0x217)],!![],newgrid[_0x187572][_0x160aea][_0x31fea3(0xef)])()));}}}[_0x1fd1d8(0x226)](){const _0x2e4bfc=_0x1fd1d8,[_0x1df214,_0x56b6c8]=this[_0x2e4bfc(0x284)];super[_0x2e4bfc(0x226)]();for(let _0x3b0194=_0x1df214-0x19;_0x3b0194<_0x1df214+0x19;_0x3b0194++){for(let _0x2d2dd1=_0x56b6c8-0x19;_0x2d2dd1<_0x56b6c8+0x19;_0x2d2dd1++){if(newgrid[_0x3b0194]&&newgrid[_0x3b0194][_0x2d2dd1]){const _0x3b5c2e=newgrid[_0x3b0194][_0x2d2dd1][_0x2e4bfc(0xef)];_0x3b5c2e!=null&&(_0x3b5c2e instanceof Goblin||_0x3b5c2e instanceof Ogre||_0x3b5c2e instanceof Giant)&&(_0x3b5c2e['pc']=Math[_0x2e4bfc(0x8a)](Math[_0x2e4bfc(0x222)]()*0x3e8)+0x2);}}}won=!![];}}class Necromancer extends enemy{constructor(_0x2d2b53){const _0x2ef5f1=_0x1fd1d8;super(_0x2d2b53,_0x2ef5f1(0x269),[0x0,0x0,0x0],0x10,[0x4,0x1,0x1],0x3,'@',[0x100,0x100,0x100],0xa,[],[new Athame()],[spot,attackofop]);}[_0x1fd1d8(0x375)](_0x57319c){const _0x50a4c7=_0x1fd1d8;super[_0x50a4c7(0x375)](_0x57319c),this['dead']!==!![]&&this[_0x50a4c7(0x1bc)]();}[_0x1fd1d8(0x1bc)](){const _0x233377=_0x1fd1d8,[_0x4b655d,_0x32f297]=this[_0x233377(0x284)],_0x57f8d3=0x5;for(let _0x1bffb1=_0x4b655d-_0x57f8d3;_0x1bffb1<_0x4b655d+_0x57f8d3;_0x1bffb1++){for(let _0x5363e6=_0x32f297-_0x57f8d3;_0x5363e6<_0x32f297+_0x57f8d3;_0x5363e6++){if(newgrid[_0x1bffb1]&&newgrid[_0x1bffb1][_0x5363e6]&&newgrid[_0x1bffb1][_0x5363e6][_0x233377(0x274)][_0x233377(0x86)]>0x0){const _0x27a103=newgrid[_0x1bffb1][_0x5363e6][_0x233377(0x274)][0x0];_0x27a103 instanceof corpse&&(!_0x27a103[_0x233377(0x2cd)]&&!_0x27a103[_0x233377(0x336)]&&(_0x27a103[_0x233377(0x231)](),newgrid[_0x1bffb1][_0x5363e6][_0x233377(0x313)](new Zombie([_0x1bffb1,_0x5363e6]))));}}}}}class Zombie extends enemy{constructor(_0x2311da){const _0x19f89f=_0x1fd1d8;super(_0x2311da,_0x19f89f(0xb1),[0x0,0x0,0x0],0x8,[0x3,0x1,0x0],0x3,'z',[0x40,0x80,0x20],0xa,[],[],[]);}}class ElderSpider extends enemy{constructor(_0x21f0de){const _0x2a3760=_0x1fd1d8;super(_0x21f0de,_0x2a3760(0x340),[0x0,0x2,0x0],0x12,[0x5,0x1,0x1],0x2,'S',[0x30,0x0,0x10],0xe,[],[],[spot,attackofop]),this[_0x2a3760(0x107)][_0x2a3760(0x263)]=conditionattackpermute(conditions['Poisoned']),this[_0x2a3760(0x2a8)][_0x2a3760(0x15f)]=_0x2a3760(0x2a5),this[_0x2a3760(0x2a8)][_0x2a3760(0x358)]='Web',this[_0x2a3760(0x110)][_0x2a3760(0x2a5)]=0xa,this[_0x2a3760(0x2a8)][_0x2a3760(0x314)]=0x3,this[_0x2a3760(0x2a8)]['range']=0xa,this[_0x2a3760(0x2a8)]['specialeffect']=function(_0x4a4621,_0x5c894c){const _0x5f413c=_0x2a3760,[_0x3335dc,_0x216dca]=_0x5c894c,_0x87c574=function(){const _0x433852=_0x438d;newgrid[_0x3335dc][_0x216dca][_0x433852(0x29b)](new Spiderweb()),newgrid[_0x3335dc][_0x216dca][_0x433852(0x29b)](new Spiderweb()),newgrid[_0x3335dc][_0x216dca]['addObject'](new Spiderweb());};return _0x4a4621[_0x5f413c(0x1f9)]['push'](_0x87c574),_0x4a4621[_0x5f413c(0x2b9)][_0x5f413c(0x1c6)](_0x87c574),_0x4a4621;};}}class GiantSpider extends enemy{constructor(_0x27dca0){const _0x59e026=_0x1fd1d8;super(_0x27dca0,_0x59e026(0x1dd),[0x0,0x0,0x0],0x9,[0x5,0x1,0x1],0x2,'s',[0x18,0x18,0x18],0xa,[],[],[spot,attackofop]),this['primaryitem'][_0x59e026(0x263)]=conditionattackpermute(conditions['Poisoned']),this[_0x59e026(0x2a8)]['name']=_0x59e026(0x2a5),this['secondaryitem'][_0x59e026(0x358)]=_0x59e026(0x2a5),this[_0x59e026(0x110)][_0x59e026(0x2a5)]=0x1,this[_0x59e026(0x2a8)][_0x59e026(0x314)]=0x3,this[_0x59e026(0x2a8)][_0x59e026(0x286)]=0x5,this[_0x59e026(0x2a8)][_0x59e026(0x263)]=function(_0x431879,_0x391613){const _0x585625=_0x59e026,[_0x567d2e,_0x14191d]=_0x391613,_0x359189=function(){const _0xd68548=_0x438d;newgrid[_0x567d2e][_0x14191d]['addObject'](new Spiderweb()),newgrid[_0x567d2e][_0x14191d]['addObject'](new Spiderweb()),newgrid[_0x567d2e][_0x14191d][_0xd68548(0x29b)](new Spiderweb());};return _0x431879[_0x585625(0x1f9)][_0x585625(0x1c6)](_0x359189),_0x431879[_0x585625(0x2b9)][_0x585625(0x1c6)](_0x359189),_0x431879;};}}class SpiderBroodMother extends enemy{constructor(_0x523ca9){const _0x3c7cb3=_0x1fd1d8;super(_0x523ca9,_0x3c7cb3(0x1f4),[0x0,0x0,0x0],0x9,[0x5,0x1,0x1],0x2,'s',[0x40,0x18,0x40],0xa,[],[],[spot,attackofop]),this[_0x3c7cb3(0x2a8)][_0x3c7cb3(0x15f)]='Web',this[_0x3c7cb3(0x2a8)][_0x3c7cb3(0x358)]=_0x3c7cb3(0x2a5),this['ammunition']['Web']=0x1,this[_0x3c7cb3(0x2a8)][_0x3c7cb3(0x314)]=0x3,this[_0x3c7cb3(0x2a8)][_0x3c7cb3(0x286)]=0x5,this[_0x3c7cb3(0x2a8)]['specialeffect']=function(_0x13943d,_0xeb0b31){const _0x2c956f=_0x3c7cb3,[_0x2a7bf6,_0xaee832]=_0xeb0b31,_0x39a4bd=function(){const _0x6501b3=_0x438d;newgrid[_0x2a7bf6][_0xaee832][_0x6501b3(0x29b)](new Spiderweb()),newgrid[_0x2a7bf6][_0xaee832][_0x6501b3(0x29b)](new Spiderweb()),newgrid[_0x2a7bf6][_0xaee832][_0x6501b3(0x29b)](new Spiderweb());};return _0x13943d[_0x2c956f(0x1f9)][_0x2c956f(0x1c6)](_0x39a4bd),_0x13943d[_0x2c956f(0x2b9)][_0x2c956f(0x1c6)](_0x39a4bd),_0x13943d;};}[_0x1fd1d8(0x226)](){const _0x52e74a=_0x1fd1d8,[_0x47a178,_0xf8feab]=this[_0x52e74a(0x284)];for(let _0x5e8059=0x0;_0x5e8059<0x4;_0x5e8059++){newgrid[_0x47a178][_0xf8feab][_0x52e74a(0x313)](new Spiderling([_0x47a178,_0xf8feab]));}super['die']();}}class Spiderling extends enemy{constructor(_0x1c65bc){const _0x4b81f0=_0x1fd1d8;super(_0x1c65bc,_0x4b81f0(0x1e2),[0x0,0x0,0x0],0x3,[0x3,0x1,0x1],0x2,'s',[0x30,0x30,0x30],0x8,[],[],[spot,attackofop]);}}class Ogre extends enemy{constructor(_0x2aa398){const _0x17879a=_0x1fd1d8;super(_0x2aa398,'Ogre',[0x3,0x0,0x4],0xc,[0x3,0x1,0x1],![],'o',[0x96,0x7d,0x0],0x8,[],[new Warhammer()],[spot,attackofop],darkattackpermute),this['deathsound']=soundeffects['ogredeath'],this[_0x17879a(0x10a)]=!![];}}class Giant extends enemy{constructor(_0x4edb82){const _0x5f0b96=_0x1fd1d8;super(_0x4edb82,_0x5f0b96(0x2f4),[0x3,0x0,0x4],0x18,[0x3,0x1,0x1],![],'G',[0x96,0x7d,0x0],0x8,[],[new Polehammer()],[spot,attackofop],darkattackpermute);if(Math['random']()>0.33){if(Math['random']()>0.5)this[_0x5f0b96(0x107)]=new Halberd();else this[_0x5f0b96(0x107)]=new Greatsword();}this[_0x5f0b96(0x199)]=soundeffects[_0x5f0b96(0x264)],this[_0x5f0b96(0x10a)]=!![];}}class Skulker extends enemy{constructor(_0x1efc8f){const _0x136c72=_0x1fd1d8;super(_0x1efc8f,'Skulker',[0x0,0x2,0x0],0x5,[0xa,0x1,0x1],![],'s',[0x20,0x20,0x20],0xc,[],[new Bolas(randomNumber(0x3,0x1))],[spot,attackofop,lightsensitive],darkattackpermute),this[_0x136c72(0x2a8)]=new Kukri();}}class Wolf extends enemy{constructor(_0x1f80ab){const _0x1d5f57=_0x1fd1d8;super(_0x1f80ab,_0x1d5f57(0x1b7),[0x0,0x0,0x0],0x5,[0x8,0x2,0x1],0x2,'w',[0x40,0x40,0x40],0x8,[],[new Dagger()],[spot,attackofop]);}}class Warg extends enemy{constructor(_0x3f2edb){const _0x33064c=_0x1fd1d8;super(_0x3f2edb,_0x33064c(0x27e),[0x0,0x0,0x0],0x5,[0x8,0x1,0x1],0x2,'w',[0x60,0x40,0x40],0x8,[],[],[spot,attackofop]);}}class Warg_Tame extends enemy{constructor(_0x297b8d){const _0x39ce82=_0x1fd1d8;super(_0x297b8d,_0x39ce82(0x27e),[0x0,0x0,0x0],0x5,[0x8,0x1,0x1],![],'w',[0x60,0x40,0x40],0x8,[],[],[spot,attackofop]);}}class Carrion_Insect extends enemy{constructor(_0x9251e2){const _0x455bc5=_0x1fd1d8;super(_0x9251e2,_0x455bc5(0x202),[0x0,0x0,0x0],0x5,[0x8,0x2,0x1],0x2,'c',[0x80,0x80,0x80],0x8,[],[],[spot,attackofop]);}}class State{constructor(_0x28df3d,_0x2127ed,_0xe6e786,_0x3fbb58){const _0x4b5370=_0x1fd1d8;this[_0x4b5370(0x15f)]=_0x28df3d,this['utilityfunction']=_0x2127ed,this['temperment']=_0xe6e786||function(){return 0x0;},this['actions']=[];if(_0x3fbb58)this[_0x4b5370(0x1ba)]=_0x3fbb58[_0x4b5370(0x169)]();}}class CharacterMemory{constructor(_0x1f2dbb,_0x4cf23b){const _0x3b6b69=_0x1fd1d8;this['character']=_0x1f2dbb,this[_0x3b6b69(0xe9)]=_0x4cf23b[_0x3b6b69(0x169)](),this[_0x3b6b69(0x24f)]=turncounter;}[_0x1fd1d8(0x1ee)](){const _0x2fa635=_0x1fd1d8;return turncounter-this[_0x2fa635(0x24f)];}}class Statblock{constructor(_0x81c39c,_0x29010c,_0x4e3114){const _0x2986ea=_0x1fd1d8;this[_0x2986ea(0x2a1)]=_0x81c39c,this[_0x2986ea(0x2c8)]=_0x29010c,this['constitution']=_0x4e3114;}}class lightsource{constructor(_0x279706,_0x2cccfa,_0x1496d8,_0x427d0b){const _0x3dcbd9=_0x1fd1d8;this['pos']=_0x279706,this[_0x3dcbd9(0x334)]=_0x2cccfa,this[_0x3dcbd9(0x2c6)]=_0x1496d8,this[_0x3dcbd9(0x9d)]=_0x427d0b||0x2;}}class uielement{constructor(_0x272ff2,_0xd3b982,_0x2eda7d,_0x50d6c2,_0x5f033d,_0x2fce03,_0x68d532){const _0x3cc81e=_0x1fd1d8;this['symbol']=_0x272ff2||'',this[_0x3cc81e(0x334)]=_0xd3b982,this[_0x3cc81e(0x284)]=_0x2eda7d,this[_0x3cc81e(0x351)]=_0x50d6c2||![],!this[_0x3cc81e(0x25e)]&&(this[_0x3cc81e(0x25e)]='$'),this['ui']=_0x5f033d||![],this[_0x3cc81e(0x2bc)]=_0x2fce03||null,this[_0x3cc81e(0x1a6)]=_0x68d532;}}class PriorityQueue{constructor(_0x3c3944){const _0x7bc551=_0x1fd1d8;this[_0x7bc551(0x303)]=[],this[_0x7bc551(0x2e6)]=_0x3c3944;}['enqueue'](_0x211d83){const _0x1651cf=_0x1fd1d8;let _0x39b479=0x0,_0x20f38d=this[_0x1651cf(0x303)]['length'];while(_0x39b479<_0x20f38d){let _0xd7c2d3=Math['floor']((_0x39b479+_0x20f38d)/0x2);this[_0x1651cf(0x2e6)](this[_0x1651cf(0x303)][_0xd7c2d3],_0x211d83)<0x0?_0x39b479=_0xd7c2d3+0x1:_0x20f38d=_0xd7c2d3;}this['array'][_0x1651cf(0x320)](_0x39b479,0x0,_0x211d83);}[_0x1fd1d8(0x105)](){const _0x39ea0d=_0x1fd1d8;return this[_0x39ea0d(0x303)][_0x39ea0d(0x1c4)]();}[_0x1fd1d8(0x127)](){const _0x349366=_0x1fd1d8;return this[_0x349366(0x303)][_0x349366(0x86)]===0x0;}}class condition{constructor(_0x511ce1,_0x2fc668,_0x3d0597,_0x31489c,_0x5381ee,_0x5ab73f,_0x5ebeba){const _0x7dc8fb=_0x1fd1d8;this[_0x7dc8fb(0x15f)]=_0x511ce1,this[_0x7dc8fb(0x1d3)]=_0x2fc668||(()=>{}),this[_0x7dc8fb(0x8c)]=_0x3d0597||(()=>{}),this[_0x7dc8fb(0x1f2)]=_0x31489c,this['resistance']=_0x5381ee,this[_0x7dc8fb(0xef)]=_0x5ebeba||null,this[_0x7dc8fb(0x302)]=_0x5ab73f;}}class trait{constructor(_0x49ef91,_0x1e27c8,_0x641851,_0x29f297,_0x58777c,_0x1d0cc5){const _0xc4ad0f=_0x1fd1d8;this['name']=_0x49ef91,this['trigger']=_0x1e27c8,this[_0xc4ad0f(0xba)]=_0x641851,this['character']=_0x1d0cc5||null,this['passive']=_0x29f297||![],this['active']=_0x58777c||![];}}class trigger{constructor(_0x124961,_0x3fe124,_0x10572c){const _0x107b10=_0x1fd1d8;this[_0x107b10(0x32b)]=_0x124961,this[_0x107b10(0xa7)]=_0x3fe124,this['cb']=_0x10572c;}}class action{constructor(_0x5d26d8,_0x43bd86,_0x5a823c,_0x2e2065,_0x3f0c67,_0x313939,_0x42cd37,_0xb6a9a1,_0x1b9f57,_0x4ffd11){const _0x495ee3=_0x1fd1d8;this[_0x495ee3(0x15f)]=_0x5d26d8,this[_0x495ee3(0x331)]=_0x3f0c67[_0x495ee3(0x169)](),this[_0x495ee3(0xdb)]=_0x43bd86,this[_0x495ee3(0xef)]=_0x313939,this[_0x495ee3(0x2ff)]=_0x5a823c[_0x495ee3(0x169)](),this[_0x495ee3(0x286)]=_0x2e2065||1.9,this[_0x495ee3(0x284)]=_0x42cd37||null,this[_0x495ee3(0x2b6)]=[];if(_0xb6a9a1)this[_0x495ee3(0x2b6)]=_0xb6a9a1['slice']();this[_0x495ee3(0xd9)]=_0x1b9f57,this[_0x495ee3(0x138)]=_0x4ffd11||0x1,this[_0x495ee3(0x1f3)]=!![];}}class Move extends action{constructor(_0x3823cd,_0x241948,_0x512f8f,_0x15b35b,_0x23275d,_0x2ddca2,_0x22f0c6,_0x5024ea){const _0x491ee0=_0x1fd1d8;super(_0x3823cd,_0x241948,_0x512f8f,_0x15b35b,_0x23275d,_0x2ddca2,_0x22f0c6,_0x5024ea);const [_0x409d24,_0x680a60]=this[_0x491ee0(0x331)];this[_0x491ee0(0x2ff)][0x0]=newgrid[_0x409d24][_0x680a60]['moveCost'];if(this[_0x491ee0(0x284)]&&this[_0x491ee0(0xef)]&&this[_0x491ee0(0x331)]){checkforaoomove(this[_0x491ee0(0x284)],this['target'],this[_0x491ee0(0xef)])&&this[_0x491ee0(0x2b6)][_0x491ee0(0x1c6)]('!');const _0x3e5607=newgrid[_0x409d24][_0x680a60][_0x491ee0(0x16c)](_0x2ddca2['pc']);_0x3e5607[_0x491ee0(0x266)](_0x3a405e=>_0x3a405e>0x0)&&this[_0x491ee0(0x2b6)]['push']('!');}this[_0x491ee0(0x138)]=0x6;if(this[_0x491ee0(0xef)][_0x491ee0(0x168)]&&this[_0x491ee0(0xef)][_0x491ee0(0x168)][_0x491ee0(0x15f)]==this[_0x491ee0(0xef)][_0x491ee0(0x249)][0x0]['name']){}this[_0x491ee0(0xd9)]=soundeffects[_0x491ee0(0x344)];if(newgrid[_0x409d24][_0x680a60][_0x491ee0(0x1ad)]==materials[_0x491ee0(0xa0)])this[_0x491ee0(0xd9)]=soundeffects['footsteptap'];_0x2ddca2['large']==!![]&&(this[_0x491ee0(0xd9)]=soundeffects[_0x491ee0(0x1f0)],this[_0x491ee0(0x138)]=0xc);}}class Sneak extends Move{constructor(_0x1c8afc,_0x44f97,_0x35ef37,_0x3bd38d,_0x1a5613,_0x40066,_0x4d3610,_0x143c6d){const _0x101d4c=_0x1fd1d8;super(_0x1c8afc,_0x44f97,_0x35ef37,_0x3bd38d,_0x1a5613,_0x40066,_0x4d3610,_0x143c6d),this[_0x101d4c(0x138)]=0x1;}}class Fall extends action{constructor(_0x2c2f53,_0x282e5f,_0x597a5c){const _0x5c6079=_0x1fd1d8;super(_0x5c6079(0x1d4),movefunc,[0x0,0x0,0x0],0x1,_0x2c2f53,_0x282e5f,_0x597a5c),this[_0x5c6079(0x1f3)]=!![],this[_0x5c6079(0xdb)]=function(){const _0x4fab98=_0x5c6079,[_0x2ede14,_0x41a28f]=_0x2c2f53;if(newgrid[_0x2ede14][_0x41a28f][_0x4fab98(0xef)])newgrid[_0x2ede14][_0x41a28f][_0x4fab98(0xef)][_0x4fab98(0x375)](0x1);let _0x177999=!![];if(movefunc[_0x4fab98(0xca)](this)(!![])===![])_0x177999=![],_0x282e5f['damage'](0x1);else{if(newgrid[_0x2ede14][_0x41a28f][_0x4fab98(0x2a0)]>0x1)addconditiondynamic(conditions[_0x4fab98(0x1fa)],!![],_0x282e5f)();}newgrid[_0x2ede14][_0x41a28f][_0x4fab98(0x274)]['length']>0x0&&newgrid[_0x2ede14][_0x41a28f]['objects']['forEach'](_0x5b997b=>_0x5b997b[_0x4fab98(0x375)](0x1));};}}class Attack extends action{constructor(_0x678856,_0x4a1198,_0x4b8d08,_0x84a3fb,_0x1a64bb,_0x464532,_0xe05666,_0x20c2da){const _0x4626ac=_0x1fd1d8;super(_0x678856,_0x4a1198,_0x4b8d08,_0x84a3fb,_0x1a64bb,_0x464532,_0xe05666,_0x20c2da);this[_0x4626ac(0xef)][_0x4626ac(0x107)][_0x4626ac(0x162)]==!![]&&(this[_0x4626ac(0x2ff)][0x1]=0x2);const [_0x35b851,_0xf8effd]=this[_0x4626ac(0x331)][_0x4626ac(0x169)]();this[_0x4626ac(0x284)]&&this[_0x4626ac(0xef)]&&this[_0x4626ac(0x331)]&&(checkforaooattack(this[_0x4626ac(0x284)],this[_0x4626ac(0x331)],this[_0x4626ac(0xef)])&&this[_0x4626ac(0x2b6)][_0x4626ac(0x1c6)]('Attack\x20of\x20Opportunity')),this['loudness']=0xc;}}class Jump extends action{constructor(_0x29815c,_0x3a2d6e,_0x2dbceb,_0x2573a9){const _0x45fcb=_0x1fd1d8,_0x28237c=chebyshevDistance(_0x3a2d6e,_0x2573a9);super(_0x45fcb(0x31c),jumpfunc,[0x0,0x1,0x0],_0x29815c,_0x3a2d6e,_0x2dbceb,_0x2573a9);const _0xe14db5=newgrid[_0x3a2d6e[0x0]][_0x3a2d6e[0x1]]['elevation']-newgrid[_0x2573a9[0x0]][_0x2573a9[0x1]][_0x45fcb(0x1e7)];if(_0xe14db5<-0x1)this[_0x45fcb(0x2b6)][_0x45fcb(0x1c6)](_0x45fcb(0x15c));}}function _0x417e(){const _0x2bd0b5=['Arrow','Flash\x20Powder','parentutility','Hand\x20Crossbow','env','innerHeight','_findMaxDistanceInRange',';\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20x=','clubhittone','Giant','setValueAtTime','utilityfunctions',');\x22>','mud','read','sine','errors','freqmod','_insert','aftereffects','cost','currentTime','Blood','endeffect','array','bgabsorbtion','o\x20-\x20overwatch','release','mincadence','medthudnoise','Chat','oldestsource','getrange','Resting','Mushroom','sound','Overwatch','(Thrown)','dot_prod_grid','highthudtone','addCharacter','minrange','draw','Spawning\x20Membrane','onhotpath','getFrequencyResponse','Window','638iTFvCI','Prone+25','Jump','38307804ZPXdiW','movecost','passive','splice','specialattack','visibletiles','opacity','activeweapon','createDynamicsCompressor','Dig','Spike\x20Trap','removeAmmo','1,2,3\x20-\x20switch\x20characters','DirtFloor','isactive','masterAmbientGainNode','Wood\x20Floor','getContext','fluids','knee','target','Runic\x20Greatsword','soundmaker','color','thiscadence','burnt','lastplayed','&#25BC','open','sort','choking','updateneighbors','Shiv','toString','72cJglGp','Elder\x20Spider','innerWidth','swordring3','lit','footstep','Thick\x20','Goblin\x20Hive\x20Queen','Get','???<','charAt','Miss','bowdraw','&#25B2','&#x03B8','vol','rand_vect','huntedcharacters','animation','Oil\x20Flask','puncture','value','Disarm','pittiles','templightsources','ammotype','maxDistance','Handaxe','soundManager','goblinchat','targets','percenthitchance','log','No\x20','dropoffhand','highthudnoise','createDelay','sign','objecttriggers','stacksize','ownedelements','Shift','Caltrops\x20Bag','enemies','fillStyle','removeObject','Pit\x20Trap','Can\x20be\x20wielded\x20in\x20offhand','footsteptap','two\x20handed+2max','locked','verbose','Attack','masterGainNode','damage','Mossy\x20Wall','delayTime','Moss\x20Floor','knownenemies','overtonenoisemakers','Confident','gradients','hotdepth','abyss','basename','Fugitive','&#x02D7','length','limiter','Water','Open','round','drawImage','turneffect','addEventListener','createConvolver','Clear\x20Shot+15+2dmg','swordhit','fuel','getrandomtile','MudWall','dmg','Dim\x20Light-10','light','absorbtion','throwable','style','ramp','keyup','&#x0192','radiance','smootherstep','\x20is\x20the\x20new\x20target\x20of\x20this\x20character,\x20it\x20should\x20be\x20the\x20same\x20as\x20','stone','overtonesoundmakers','Asleep','RoughStoneFloor','SwitchWeapon','requestSource','Athame','ispassive','Clear\x20Shot\x20requires\x20no\x20cover','getplayerviewold','Heavy\x20Crossbow','Unconscious','nextambientsource','cancelScheduledValues','getminrange','sawtooth','myCanvas','Zombie','Spent\x20Torch','High\x20Ground+10','Broken\x20','visiblecharacters','Shriek','goblindeath','forEach','baseabsorbtion','effect','readLightsource','map','daggerdraw2','pow','master','Nothing\x20but\x20ash\x20remains...','idle','Caltrops','Door','Mud\x20Wall','Bleeding','ceil','condresists','traits','hazards','bind','noise','concat','traversable','Spiderweb','extreme','MossFloor','prehitpermute','Rough\x20Stone\x20Floor','createOscillator','aaasound2','boss','Deserter','dead','bandpass','soundeffect','getElementById','func','restructure','playAmbientSound','stats','uiElements','extrinsmod','fxnodes','Huh?','fillText','slope','remnants','Longsword','pop','sqrt','lastseen','freq','tasks','Chest','updateRouting','defenderac','character','addItem','Hobgoblin\x20Warlord','walls','utility','ctrlKey','eeesound','readOpacity','Lower','lightlevel','Wood\x20Wall','floor','&#x03A9','updatelight','setFire','we\x20tried\x20to\x20add\x20this\x20object\x20to\x20a\x20tile,\x20but\x20it\x20had\x20a\x20quantity\x20that\x20didn\x27t\x20make\x20any\x20sense','Club','constructor','Offhand\x20Attack','Exile','specialmove','highshrillbing','dequeue','overtones','primaryitem','???','Greathammer','large','mousemove','values','4220487ujHYnT','edges','goblinchatverb','ammunition','Grenade','clubhit','getplayerview','Lit\x20','max','getnewplayercharacter','actionqueue','revealed','grainsize','woodbreaking','code','ammoconstructor','offhanditem','arrowthudnoise','charred\x20','specialtag','mousedown','top','visible','freeCreature','type','Dirt\x20Floor','isEmpty','canbeblocked','Restrained','metal','knowntiles','Bolas','conditions','react','hostile','disconnect','avdamageac10','CavernWall','immovable','neighborsnonindex','getatkbonus','Restrained+30','_find','loudness','warg','Surprised','trigger','hard','Space','d\x20-\x20dash','Hobgoblin','addTempSource','wood','Recurve\x20Bow','Bonus\x20determined\x20by\x20dexterity','Greatclub','connect','auto-dash\x20disabled','Blinded','crystal','tcmax','swordswingsmallverb','clubwhoom','Burning','baseMoveCost','halfboss','Torchbearer\x20requires\x20lightsource','explode','8JIhktn','Mud\x20Floor','Unaware+50','Shield','attack','deathshriek','soundcontent','Smoke','fire','trying\x20to\x20alert,\x20but\x20don\x27t\x20know\x20any\x20enemies','Three\x20Quarters\x20Cover-25','fall','addAmmo','sworddraw','name','update','atan2','reloading','apply','reactBlocked-','End\x20Turn','distance','removeFluid','state','slice','Control','reduce','gethazards','effects','RoughStoneWall','deepthudtone','resistance','unshift','Bandit','Unarmed','Kukri','updateAmmo','randomstab','Warhammer','oil','destroyed','damagepotential','getdamage','Secondary','Glowing\x20Jade','Corpse','\x20to\x20','clubswing','removeFuel','charactersinview','Dwarf','Need\x20two\x20free\x20hands','damagerange','bonus','ArrowDown','678727grrygs','sources','Interact','Die','Barrel','damage\x20bonus\x20of\x20','reactions','Smooth\x20Stone\x20Floor','Half\x20Cover-10','Sentinel','MossyWall','Savage\x20Attack\x20Requires\x20Two-Handed\x20Weapon','auto-stand-ground\x20disabled','extinguish','freeWolf','depth','filter','deathsound','2022','woodbreakingdeep','getvisibletiles','stow','stop','Sneak\x20attack\x20requires\x20melee\x20or\x20thrown\x20weapon','getavdamage','eeesound2','Extra\x20Attack','buffer','huntmap','heal','tooltip','Flanked+10','key','consumable','creature','(Light)','min','absorbtionBase','tiles','parent','SmoothstoneFloor','Bonfire','ranged','Locked','removevisiblecharacter','fillRect','&#25B6','Wolf','auto-advance\x20enabled','ProneAttack','actions','hear','raiseDead','sampleRate','abs','roomgrid','has','unarmed','</span>','curve','shift','spurt2','push','aaasound3','getBoundingClientRect','Move','Torch\x20','&#x2020','output','&nbsp','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20>&nbsp</span>','Berserker','ruins','content','playSound','starteffect','Fall','getChannelData','forgiving','addRemnants','maxhotdepth','symbolBase','a\x20-\x20aim\x20attack','Rough\x20Stone\x20Wall','MudFloor','Giant\x20Spider','delta','Table','<span\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20y\x20=\x20','eeesound3','Spiderling','blood','context','Shortbow','font','elevation','walltiles','drop','Halberd','ambientsources','damageinit','addEffect','getage','Goblin\x20Spearman','deepthud','Oil\x20Lamp','duration','reactable','Spider\x20Brood\x20Mother','keys','deadend','baselightsource','add','onhiteffects','Prone','StoneFloor','defender','redirect','right','heard','sin','Can\x20be\x20wielded\x20with\x201\x20or\x202\x20hands','Carrion\x20Insect','keydown','knowncharacters','Dash','hitsound','durability','clearRect','shriekcooldown','Cleavebow','bleed','height','Maul','rgb(','Actions','g\x20-\x20Get\x20Item','jump','Ranger','Switch\x20Weapon','Polehammer','volume','fill','Stunned','goblinyelp','Asleep+50','randomboom','set','number','ArrowUp','left','flammable','random1sec','find','random','Sarcophagus','Brazier','Rapier','die','Runic\x20Longsword','loop','reverse','interact','Leave','goblinshriek','randomize','grid','frequency','spurt1','break','bassdrum','misssound','swordswing','Mace','lowpass-noise-white','stat','active','burn','Statue','iterations','findMaxDistanceInRange','Bed','move','11pSjgon','Javelin','destructable','Damage\x20Range','Alert','itemSwap','15686110sjirza','deepspookybong','shortsworddraw','addFluid','states','Katana','Huntsman','createBiquadFilter','action','interp','time','255381faWsqX','Fire\x20Pit','Stunned+25','doors','scale','halfbossbuffer','px\x20\x27Press\x20Start\x202P\x27','woodbreaking2','dirt','origin','dungeon','Grass','clubwhoosh','tap','symbol','ArrowLeft','caveambience','enqueue','Fortification','specialeffect','ogredeath','parentnode','some','Bolt','createBufferSource','Necromancer','goblinscream','thickness','swordswingsmall','burnduration','edgetiles','Too\x20Close-25','requestAmbientSource','oldcrack','fleeing','now','objects','Wanderer','trace','ambientsoundmaker','swordring','Stand\x20Ground','seen','medthudtone','reveal','ratio','Warg','createBuffer','moss','evaluate','lowpass','generategrid','pos','&#x222B','range','Punching\x20Red\x20Glove\x20Expanding\x20Arm\x20Kapow','5LXTNdw','miniboss','Goblin','leash','damagebonus','Larval\x20Fluid','canvas','neighbors','weapon','initialize','Burning\x20','get','daggerdraw','includes','lowpass-noise','auto-stand-ground\x20enabled','Speedsword','updatestate','webkitAudioContext','addObject','deepthudnoise','oldestambientsource','201D','removeThickness','moveCost','strength',';\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20rgb(','addvisiblecharacter','versatile','Web','index','water','secondaryitem','intrinsmod','devicePixelRatio','Runic\x20Dagger','fleemap','Goblin\x20Archer','activetask','Shortsword','&#25C0','removeItem','(Two-handed)','Greatsword','linearRampToValueAtTime','kick','warnings','updateObjects','gainNode','onmisseffects','On\x20Fire','los','lifespan','addthickness','lowpassFilter','findspawnpoints','startingpos','Low\x20Ground-10','damagedie','swordring2','drawsound','Break\x20to\x20go\x20from\x20','lightpref','twohanded','dexterity','4687XNofVB','clubhitnoise','spreadfire','modbreakdown','burning','1785452NChHmo','createGain','lightsources','gain','Reactions','(Versatile)','Glaive','spurt2verb','(Finnesse)','x\x20-\x20switch\x20weapons','maxcadence','Sneak\x20Attack+','fromCharCode','error\x20this\x20sound\x20played\x20with\x20no\x20envelope',');background-color:\x20rgb(','auto-dash\x20enabled','bossbuffer','transparancy','start','nextsource','maxhp','width','hunting','spawnpoints','comparator','equipment','root','effectschain','arrowflight'];_0x417e=function(){return _0x2bd0b5;};return _0x417e();}class Kick extends Attack{constructor(_0xecd2f,_0x195391,_0x20463e){const _0xc2c8a=_0x1fd1d8;super('Kick',null,[0x0,0x1,0x0],1.9,_0xecd2f,_0x195391,_0x20463e);let _0x32c14b=this,_0x384c61=function(_0x2e64ab,_0x5c5fb9){const _0x40070b=_0x438d;return attackfunc[_0x40070b(0x163)](_0x32c14b,[_0x2e64ab,new Foot()]);};this[_0xc2c8a(0xdb)]=_0x384c61;}}class Offhandattack extends Attack{constructor(_0x5544f5,_0x178ec1,_0x5b9e01){const _0x1ab7d5=_0x1fd1d8;super(_0x1ab7d5(0x373),null,[0x0,0x0,0x0],_0x178ec1[_0x1ab7d5(0x11d)][_0x1ab7d5(0x286)],_0x5544f5,_0x178ec1,_0x5b9e01);let _0x23674e=this,_0x4bb4b2=function(_0x287b17,_0x3a3646){return attackfunc['apply'](_0x23674e,[_0x287b17,_0x178ec1['offhanditem']]);};this['func']=_0x4bb4b2;}}function jumpfunc(){const _0x2459d0=_0x1fd1d8;let _0x95a6c8=this['character'];const _0x7f696a=newgrid[_0x95a6c8[_0x2459d0(0x284)][0x0]][_0x95a6c8['pos'][0x1]],[_0x4c30b3,_0x407583]=this[_0x2459d0(0x331)],_0x510a34=newgrid[_0x4c30b3][_0x407583][_0x2459d0(0x1e7)]-_0x7f696a[_0x2459d0(0x1e7)];if(dist(_0x95a6c8['pos'],this[_0x2459d0(0x331)],![],!![])>this['range'])return![];let _0x36c68a=bresenhamLine(_0x95a6c8[_0x2459d0(0x284)],this[_0x2459d0(0x331)]);if(_0x36c68a[_0x2459d0(0x86)]==0x0||_0x36c68a[_0x2459d0(0x86)]==0x1)return![];for(let _0x235cb2=0x0;_0x235cb2<_0x36c68a[_0x2459d0(0x86)];_0x235cb2++){const _0x502286=newgrid[_0x36c68a[_0x235cb2][0x0]][_0x36c68a[_0x235cb2][0x1]];if(_0x502286[_0x2459d0(0xcd)]==![]&&!_0x502286[_0x2459d0(0xe4)])return![];}if(newgrid[_0x4c30b3][_0x407583]['traversable']!==![]&&newgrid[_0x4c30b3][_0x407583]['character']==null){newgrid[_0x95a6c8['pos'][0x0]][_0x95a6c8['pos'][0x1]][_0x2459d0(0xef)]=null,_0x95a6c8[_0x2459d0(0x284)]=[_0x4c30b3,_0x407583],newgrid[_0x4c30b3][_0x407583][_0x2459d0(0xef)]=this[_0x2459d0(0xef)],removecondition(_0x95a6c8,_0x2459d0(0x1fa));if(_0x510a34<-0x1){let _0x27628d=0x0,_0x70a0a3=Math[_0x2459d0(0xfa)](_0x510a34/0x2)**0x2;for(let _0x1e4bf4=0x0;_0x1e4bf4<_0x70a0a3;_0x1e4bf4++){_0x27628d+=randomNumber(0x3,0x1);}this['soundeffect']=soundeffects[_0x2459d0(0x1f0)],this[_0x2459d0(0x138)]=0xa,addconditiondynamic(conditions[_0x2459d0(0x1fa)],!![],_0x95a6c8)(),this[_0x2459d0(0xef)]['damage'](_0x27628d);}return;}else{if(newgrid[_0x4c30b3][_0x407583]['traversable']!==![]&&newgrid[_0x4c30b3][_0x407583][_0x2459d0(0xef)]!==null){if(_0x510a34<-0x1){newgrid[_0x95a6c8['pos'][0x0]][_0x95a6c8['pos'][0x1]]['character']=null,_0x95a6c8['pos']=[_0x4c30b3,_0x407583],newgrid[_0x4c30b3][_0x407583]['addCharacter'](this[_0x2459d0(0xef)]),removecondition(_0x95a6c8,_0x2459d0(0x1fa));let _0x8b7809=0x0,_0x40c851=Math[_0x2459d0(0xfa)](_0x510a34/0x2)**0x2;for(let _0xe87602=0x0;_0xe87602<_0x40c851;_0xe87602++){_0x8b7809+=randomNumber(0x3,0x1);}this[_0x2459d0(0xd9)]=soundeffects[_0x2459d0(0x1f0)],this[_0x2459d0(0x138)]=0xa,addconditiondynamic(conditions[_0x2459d0(0x1fa)],!![],_0x95a6c8)(),this[_0x2459d0(0xef)]['damage'](_0x8b7809),newgrid[_0x4c30b3][_0x407583]['character'][_0x2459d0(0x375)](_0x8b7809);return;}}}return _0x95a6c8[_0x2459d0(0x117)]=[],![];}class Get extends action{constructor(_0x24ff41,_0x53c540,_0x4ce402,_0x528b1a,_0x2f1149,_0xe1e5dd,_0x19a1af,_0x346a4a,_0x23721e,_0x17f713){const _0x3136b7=_0x1fd1d8;super(_0x24ff41,_0x53c540,_0x4ce402,_0x528b1a,_0x2f1149,_0xe1e5dd,_0x19a1af,_0x346a4a,_0x23721e,_0x17f713),this[_0x3136b7(0x1f3)]=![];}}class endTurn extends action{constructor(_0x802c3e,_0x2bf8a2,_0x303d13,_0x5b59eb,_0x3b8d60,_0x358bdb,_0x5ba3aa,_0x4e3039){const _0x26240c=_0x1fd1d8;super(_0x802c3e,_0x2bf8a2,_0x303d13,_0x5b59eb,_0x3b8d60,_0x358bdb,_0x5ba3aa,_0x4e3039);if(this[_0x26240c(0x284)]){const [_0x35a976,_0x474612]=this['pos'];newgrid[_0x35a976][_0x474612]['objects'][_0x26240c(0x86)]>0x0&&newgrid[_0x35a976][_0x474612][_0x26240c(0x274)][0x0][_0x26240c(0x2cd)]&&this[_0x26240c(0x2b6)][_0x26240c(0x1c6)]('!');}}}class Tile{constructor(_0xdcceb8,_0x26bcb6,_0x1d484e,_0x191f22,_0x25c97d,_0x5ea2fd,_0xe08a8a){const _0x496008=_0x1fd1d8;this['name'],this[_0x496008(0x1ad)]=_0x26bcb6,this[_0x496008(0x1d9)]=_0x1d484e,this[_0x496008(0x123)]=![],this[_0x496008(0x96)]=[0x0,0x0,0x0],this[_0x496008(0xf8)]=0x0,this['objects']=[],this['character']=null,this[_0x496008(0xdf)]=[],this[_0x496008(0xcd)]=_0x191f22,this[_0x496008(0x2a0)]=_0x25c97d,this[_0x496008(0x14d)]=_0x25c97d,this[_0x496008(0x284)]=_0xe08a8a,this[_0x496008(0x2df)]=_0x5ea2fd,this['specularity']=0x0,this[_0x496008(0x182)]=[],this[_0x496008(0x32f)]=[],this[_0x496008(0x1e7)]=0x0;}[_0x1fd1d8(0x2f9)](_0x8c07b8=![]){const _0x5c9b22=_0x1fd1d8,_0x508322=this['readOpacity']();procgendebug&&(this[_0x5c9b22(0x123)]=!![],this[_0x5c9b22(0x96)]=[0x40,0x40,0x40]);const [_0x14ca49,_0x2ac9ae]=this['pos'];let _0x23eabc=this[_0x5c9b22(0x96)][_0x5c9b22(0x169)](),_0x3e3205=![];if((_0x508322>=0x1||_0x3e3205)&&this[_0x5c9b22(0xef)]==null){let _0x1fed50=[0x0,0x0,0x0],_0x4b69a1=0x0;for(let _0x3d8a83=0x0;_0x3d8a83<0x8;_0x3d8a83++){let [_0x2b91a3,_0x260ece]=directions[_0x3d8a83],[_0x5cbbfc,_0x4335c3]=[_0x14ca49+_0x2b91a3,_0x2ac9ae+_0x260ece];if(!newgrid[_0x5cbbfc]||!newgrid[_0x5cbbfc][_0x4335c3])continue;if(newgrid[_0x5cbbfc][_0x4335c3][_0x5c9b22(0x123)]==![])continue;let _0x48e5e0=newgrid[_0x5cbbfc][_0x4335c3][_0x5c9b22(0x96)];if(newgrid[_0x5cbbfc][_0x4335c3]['readOpacity']()<0x1){let _0xd5dce=_0x48e5e0[0x0]+_0x48e5e0[0x1]+_0x48e5e0[0x2];_0xd5dce>_0x4b69a1&&(_0x1fed50[0x0]=_0x48e5e0[0x0],_0x1fed50[0x1]=_0x48e5e0[0x1],_0x1fed50[0x2]=_0x48e5e0[0x2],_0x4b69a1=_0xd5dce);}}_0x23eabc=_0x1fed50;}let _0x26193b=[0x0,0x0,0x0],_0x31dddb=[0x0,0x0,0x0],_0x3c9bbd=_0x5c9b22(0x1cd),_0xc888b7=0x1,_0x5d6cd3=0x1;_0x508322>=0x1&&(_0xc888b7=0.25);if(this[_0x5c9b22(0x123)]!==![]){let _0x4c9c44=0x0;for(let _0x4ffa63=0x0;_0x4ffa63<0x3;_0x4ffa63++){_0x26193b[_0x4ffa63]=0x100*(Math[_0x5c9b22(0x115)](_0x23eabc[_0x4ffa63]*this[_0x5c9b22(0x1ad)][_0x4ffa63]*_0xc888b7,0x0)*noisemap[_0x14ca49][_0x2ac9ae]/0x100)**(0x1/gamma),_0x31dddb[_0x4ffa63]=_0x5d6cd3*_0x26193b[_0x4ffa63]/0x2,_0x4c9c44+=_0x26193b[_0x4ffa63];}if(_0x4c9c44<memorytilebrightness*0x3){_0x4c9c44=Math[_0x5c9b22(0x115)](_0x4c9c44,0.5);let _0x5eef0f=memorytilebrightness*0x3/_0x4c9c44;for(let _0x37e152=0x0;_0x37e152<0x3;_0x37e152++){_0x26193b[_0x37e152]*=_0x5eef0f;}}_0x3c9bbd=this[_0x5c9b22(0x1d9)];}if(this[_0x5c9b22(0x32f)][_0x5c9b22(0x86)]>0x0&&this['visible']!==![]){let _0x1d7b5e=[0x1,0x1,0x1];this['fluids'][_0x5c9b22(0xb8)](function(_0x3cba42){const _0xff096=_0x5c9b22;_0x3cba42[_0xff096(0x25e)]&&(_0x3c9bbd=_0x3cba42['symbol']);if(_0x3cba42[_0xff096(0x304)]!==null){let _0xc3f7b1=0x1;if(_0x3cba42[_0xff096(0x26b)])_0xc3f7b1=_0x3cba42[_0xff096(0x26b)];for(let _0x1b9a55=0x0;_0x1b9a55<_0xc3f7b1;_0x1b9a55++){_0x1d7b5e=_0x1d7b5e['map']((_0xc133b4,_0x44cdbd)=>_0xc133b4*_0x3cba42[_0xff096(0x304)][_0x44cdbd]);}}});for(let _0x3fd7b3=0x0;_0x3fd7b3<0x3;_0x3fd7b3++){_0x26193b[_0x3fd7b3]=Math['max'](_0x26193b[_0x3fd7b3]*_0x1d7b5e[_0x3fd7b3],0x0),_0x31dddb[_0x3fd7b3]=_0x26193b[_0x3fd7b3]/0x2;}}if(this['objects'][_0x5c9b22(0x86)]>0x0&&this[_0x5c9b22(0x123)]!==![]){const _0x4181fc=this['objects'][0x0];_0x4181fc[_0x5c9b22(0x25e)]&&(_0x3c9bbd=_0x4181fc[_0x5c9b22(0x25e)]);if(_0x4181fc[_0x5c9b22(0x97)])for(let _0x4d3e6e=0x0;_0x4d3e6e<0x3;_0x4d3e6e++){_0x26193b[_0x4d3e6e]=0x100*(Math[_0x5c9b22(0x115)](_0x23eabc[_0x4d3e6e]*_0x4181fc[_0x5c9b22(0x97)][_0x4d3e6e],0x0)/0x100);}if(_0x4181fc[_0x5c9b22(0x304)]!==null)for(let _0x290c39=0x0;_0x290c39<0x3;_0x290c39++){_0x31dddb[_0x290c39]=_0x23eabc[_0x290c39]*_0x4181fc[_0x5c9b22(0x304)][_0x290c39]*0.5;}}if(this[_0x5c9b22(0xef)]!==null&&this['visible']!==![]){const _0xcdd2fd=this['character'];if(_0xcdd2fd!==![]){let _0x555764=takeav(newgrid[_0x14ca49][_0x2ac9ae][_0x5c9b22(0x96)])/0x100;_0x26193b=_0xcdd2fd[_0x5c9b22(0x334)][_0x5c9b22(0xbc)](_0x8cab4a=>Math[_0x5c9b22(0x115)](_0x8cab4a/0x2,_0x555764*_0x8cab4a)),_0x31dddb=_0x31dddb[_0x5c9b22(0xbc)](_0x395b6f=>_0x395b6f*0.75),_0x3c9bbd=_0xcdd2fd[_0x5c9b22(0x25e)];}}this[_0x5c9b22(0x27a)]==!![]&&this[_0x5c9b22(0x123)]!==!![]&&(_0x3c9bbd=this[_0x5c9b22(0x1d9)],_0x26193b=[memorytilebrightness,memorytilebrightness,memorytilebrightness]);!this[_0x5c9b22(0x27a)]&&this[_0x5c9b22(0x123)]&&(this['seen']=!![]);if(this[_0x5c9b22(0xdf)][_0x5c9b22(0x86)]>0x0)for(let _0xec67b2=0x0;_0xec67b2<this[_0x5c9b22(0xdf)][_0x5c9b22(0x86)];_0xec67b2++){const _0x1ac861=this[_0x5c9b22(0xdf)][_0xec67b2];if(_0x1ac861[_0x5c9b22(0x2bc)]){updatedlighting=!![];if(_0x1ac861[_0x5c9b22(0x2bc)][0x1]>=now)continue;if(_0x1ac861[_0x5c9b22(0x2bc)][0x0]<now){updatedsomething=!![],this[_0x5c9b22(0xdf)][_0x5c9b22(0x320)](_0xec67b2,0x1),_0xec67b2--;continue;}}if(_0x1ac861[_0x5c9b22(0x25e)]==='$')for(let _0x2e18b0=0x0;_0x2e18b0<0x3;_0x2e18b0++){_0x26193b[_0x2e18b0]+=_0x1ac861[_0x5c9b22(0x334)][_0x2e18b0]*0x100,_0x31dddb[_0x2e18b0]+=_0x1ac861[_0x5c9b22(0x334)][_0x2e18b0]*0x80;}else{if(_0x1ac861[_0x5c9b22(0x25e)]==='^'){_0x1ac861[_0x5c9b22(0x25e)]='B7',_0x3c9bbd=_0x1ac861['symbol'];for(let _0x8482a7=0x0;_0x8482a7<0x3;_0x8482a7++){_0x26193b[_0x8482a7]=_0x1ac861['color'][_0x8482a7];}}else{if(_0x1ac861[_0x5c9b22(0x25e)]=='_')for(let _0x141389=0x0;_0x141389<0x3;_0x141389++){_0x26193b[_0x141389]=_0x1ac861[_0x5c9b22(0x334)][_0x141389]*0x100,_0x31dddb[_0x141389]=_0x1ac861[_0x5c9b22(0x334)][_0x141389]*0x100;}else{if(_0x1ac861[_0x5c9b22(0x25e)]==='\x20');else{_0x3c9bbd=_0x1ac861['symbol'];for(let _0xfec4d0=0x0;_0xfec4d0<0x3;_0xfec4d0++){_0x26193b[_0xfec4d0]=_0x1ac861[_0x5c9b22(0x334)][_0xfec4d0];}}}}}!_0x1ac861[_0x5c9b22(0x2bc)]&&(_0x1ac861[_0x5c9b22(0x2bc)]=[],_0x1ac861[_0x5c9b22(0x2bc)][0x0]=0x0);}for(let _0x364d5d=0x0;_0x364d5d<0x3;_0x364d5d++){_0x26193b[_0x364d5d]=Math[_0x5c9b22(0x8a)](_0x26193b[_0x364d5d]*brightnessadjust),_0x31dddb[_0x364d5d]=Math['round'](_0x31dddb[_0x364d5d]*brightnessadjust);}if(_0x8c07b8)return[_0x26193b,_0x31dddb,_0x3c9bbd];if(_0x3c9bbd==_0x5c9b22(0x1cd))return _0x5c9b22(0x1e0)+_0x14ca49+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20x\x20=\x20'+_0x2ac9ae+_0x5c9b22(0x1ce);const _0x2d9de1='<span\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20y='+_0x14ca49+_0x5c9b22(0x2f2)+_0x2ac9ae+_0x5c9b22(0x2a2)+_0x26193b+_0x5c9b22(0x2dc)+_0x31dddb+_0x5c9b22(0x2f7)+_0x3c9bbd+_0x5c9b22(0x1c2);return _0x2d9de1;}['cursorread'](_0x2038f8=![]){const _0xf1d16d=_0x1fd1d8,_0x17aaa8=this;let _0x1afd08=0x0;const _0x1c5344=this[_0xf1d16d(0xef)];let _0x20d018=![];for(let _0x25abf5=0x0;_0x25abf5<this['uiElements'][_0xf1d16d(0x86)];_0x25abf5++){let _0x35f3ee=this[_0xf1d16d(0xdf)][_0x25abf5];if(_0x35f3ee[_0xf1d16d(0x1fd)]!==undefined){}_0x35f3ee[_0xf1d16d(0x1a6)]&&adduilabel(_0x35f3ee['tooltip'],cursorpos,_0x35f3ee['color'],0x1,![],![],![],!![]);if(_0x20d018)break;}if(_0x20d018)return;this['fluids'][_0xf1d16d(0x86)]>0x0&&this[_0xf1d16d(0x32f)][_0xf1d16d(0xb8)](function(_0x4797a0){const _0x44ed0c=_0xf1d16d;_0x1afd08++,adduilabel(_0x4797a0[_0x44ed0c(0x15f)],_0x17aaa8[_0x44ed0c(0x284)],[0x40,0x40,0x40],_0x1afd08);});this[_0xf1d16d(0x274)][_0xf1d16d(0x86)]>0x0&&this[_0xf1d16d(0x274)][_0xf1d16d(0xb8)](function(_0x2474ab){const _0x111c1a=_0xf1d16d;_0x1afd08++;let _0x32b450=adduilabel(_0x2474ab[_0x111c1a(0x15f)],_0x17aaa8[_0x111c1a(0x284)],[0x40,0x40,0x40],_0x1afd08);if(_0x2474ab instanceof Weapon){for(let _0xb511c4=0x0;_0xb511c4<_0x32b450['length'];_0xb511c4++){let _0x294c84=_0x32b450[_0xb511c4];_0x294c84[_0x111c1a(0x1fd)]=_0x17aaa8;}let _0x455455=[],_0x4e6c63=0x0,_0x594c9d='1-'+_0x2474ab[_0x111c1a(0x2c2)][_0x111c1a(0x33e)]();_0x1ecc8b(_0x111c1a(0x242)),_0x594c9d+='+'+activecharacternonindex[_0x111c1a(0x135)](_0x2474ab),_0x1ecc8b('Bonus');_0x2474ab[_0x111c1a(0x98)]&&(_0x594c9d+=_0x111c1a(0x310),_0x1ecc8b());_0x2474ab[_0x111c1a(0x2c7)]&&(_0x594c9d+=_0x111c1a(0x2b2),_0x1ecc8b());_0x2474ab[_0x111c1a(0x237)]==0x1&&(_0x594c9d+=_0x111c1a(0x2d6),_0x1ecc8b(_0x111c1a(0x143)));_0x2474ab[_0x111c1a(0x2a4)]&&(_0x594c9d+=_0x111c1a(0x2d3),_0x1ecc8b(_0x111c1a(0x201)));_0x2474ab['light']&&(_0x594c9d+=_0x111c1a(0x1ab),_0x1ecc8b(_0x111c1a(0x36e)));_0x1afd08++;let _0x2d81e5=adduilabel(_0x594c9d,_0x17aaa8[_0x111c1a(0x284)],[0x40,0x40,0x40],_0x1afd08);for(let _0x4bac62=0x0;_0x4bac62<_0x2d81e5[_0x111c1a(0x86)];_0x4bac62++){let _0x3d1d64=_0x2d81e5[_0x4bac62];_0x3d1d64[_0x111c1a(0x1fd)]=_0x17aaa8;if(_0x455455[_0x4bac62])_0x3d1d64['tooltip']=_0x455455[_0x4bac62];}function _0x1ecc8b(_0x13ec85){const _0x34e837=_0x111c1a;for(let _0x259174=_0x4e6c63;_0x259174<_0x594c9d['length'];_0x259174++){_0x455455[_0x34e837(0x1c6)](_0x13ec85);}_0x4e6c63=_0x594c9d['length'];}}if(_0x2474ab instanceof Shield){let _0x53885e='Dmg-'+activecharacternonindex[_0x111c1a(0xde)][0x0];_0x1afd08++,adduilabel(_0x53885e,_0x17aaa8[_0x111c1a(0x284)],[0x40,0x40,0x40],_0x1afd08);}if(_0x2474ab['verbose']){const _0x48e0b4=_0x2474ab[_0x111c1a(0x372)]();_0x1afd08++,adduilabel(_0x48e0b4,_0x17aaa8['pos'],[0x100,0x100,0x100],_0x1afd08);}});if(_0x1c5344!==null){const _0x154e87=_0x1c5344[_0xf1d16d(0x15f)],_0x2b7e1d=_0x1c5344['hp'],_0x4bac66=_0x1c5344['pos'];let _0x315562=_0x2b7e1d[_0xf1d16d(0x33e)](),_0x3175ec=_0x1c5344[_0xf1d16d(0x2e2)],_0x1a6a91;_0x1afd08++,_0x1a6a91=adduilabel(_0x315562+'/'+_0x3175ec,_0x4bac66,_0x1c5344[_0xf1d16d(0x334)],_0x1afd08);for(let _0x4667eb=0x0;_0x4667eb<_0x1a6a91[_0xf1d16d(0x86)];_0x4667eb++){let _0x23224c=_0x1a6a91[_0x4667eb];_0x23224c['redirect']=_0x17aaa8;}_0x1afd08++,_0x1a6a91=adduilabel(_0x154e87,_0x4bac66,_0x1c5344[_0xf1d16d(0x334)],_0x1afd08);for(let _0x23478d=0x0;_0x23478d<_0x1a6a91[_0xf1d16d(0x86)];_0x23478d++){let _0x4f19ee=_0x1a6a91[_0x23478d];_0x4f19ee[_0xf1d16d(0x1fd)]=_0x17aaa8;}for(let _0x367046=0x0;_0x367046<_0x1c5344[_0xf1d16d(0x12d)][_0xf1d16d(0x86)];_0x367046++){_0x1afd08++;const _0x7a46ae=_0x1c5344[_0xf1d16d(0x12d)][_0x367046][_0xf1d16d(0x15f)]+'('+_0x1c5344['conditions'][_0x367046][_0xf1d16d(0x1f2)]['toString']()+')';_0x1a6a91=adduilabel(_0x7a46ae,_0x4bac66,_0x1c5344[_0xf1d16d(0x334)],_0x1afd08);for(let _0x3886b7=0x0;_0x3886b7<_0x1a6a91[_0xf1d16d(0x86)];_0x3886b7++){let _0x67f9d8=_0x1a6a91[_0x3886b7];_0x67f9d8[_0xf1d16d(0x1fd)]=_0x17aaa8;}}const _0x4b9c34=[_0x1c5344[_0xf1d16d(0x107)],_0x1c5344[_0xf1d16d(0x2a8)],_0x1c5344['offhanditem']];for(let _0x58603e=0x0;_0x58603e<0x3;_0x58603e++){const _0x533a79=_0x4b9c34[_0x58603e][_0xf1d16d(0x15f)];if(_0x533a79==_0xf1d16d(0x173))continue;_0x1afd08++,_0x1a6a91=adduilabel(_0x533a79,_0x1c5344['pos'],_0x1c5344[_0xf1d16d(0x334)],_0x1afd08);for(let _0x30e0bc=0x0;_0x30e0bc<_0x1a6a91['length'];_0x30e0bc++){let _0x4e5d05=_0x1a6a91[_0x30e0bc];_0x4e5d05[_0xf1d16d(0x1fd)]=_0x17aaa8;}}}}['readOpacity'](_0x44effd=undefined,_0x450b20){const _0x1d54ca=_0x1fd1d8;if(_0x44effd!==undefined&&_0x44effd<this[_0x1d54ca(0x1e7)])return 0x1;let _0x85a856=this['transparancy'];if(this[_0x1d54ca(0xef)]!==null&&(_0x44effd==undefined||_0x44effd-0x1<=this[_0x1d54ca(0x1e7)])){if(lackscondition(conditions[_0x1d54ca(0x1fa)],this['character']))_0x85a856=0.75;}else{if(this[_0x1d54ca(0x274)][_0x1d54ca(0x86)]>0x0){if(_0x450b20&&this['objects'][0x0][_0x1d54ca(0x15f)]==_0x1d54ca(0x262)&&dist(_0x450b20,this[_0x1d54ca(0x284)])<0x2){}else(_0x44effd==undefined||_0x44effd<=this[_0x1d54ca(0x1e7)]+0x1||this['objects'][0x0][_0x1d54ca(0xcd)]==![])&&(_0x85a856-=this[_0x1d54ca(0x274)][0x0][_0x1d54ca(0x323)]);}}if(this[_0x1d54ca(0x32f)][_0x1d54ca(0x86)]>0x0)for(let _0x3b7b19=0x0;_0x3b7b19<this[_0x1d54ca(0x32f)][_0x1d54ca(0x86)];_0x3b7b19++){const _0xcd26ca=this[_0x1d54ca(0x32f)][_0x3b7b19];let _0x4abc31=0x1;if(_0xcd26ca[_0x1d54ca(0x26b)])_0x4abc31=_0xcd26ca[_0x1d54ca(0x26b)];_0x85a856*=0x1-_0xcd26ca[_0x1d54ca(0x323)];}let _0x1ae0ee=0x1-_0x85a856;return _0x1ae0ee;}[_0x1fd1d8(0x313)](_0x265671){const _0x6a9e69=_0x1fd1d8;if(this[_0x6a9e69(0xef)]==null&&this['traversable']===!![])this[_0x6a9e69(0xef)]=_0x265671,_0x265671[_0x6a9e69(0x284)]=this[_0x6a9e69(0x284)][_0x6a9e69(0x169)]();else{if(!_0x265671['iterations'])_0x265671['iterations']=0x0;if(_0x265671[_0x6a9e69(0x23b)]>0x32)return;_0x265671['iterations']++;const _0x17e3cf=shuffle(directions);let _0x59c07f=[],[_0x361a1f,_0x5a1fdc]=this[_0x6a9e69(0x284)];for(let _0x105bf1=0x0;_0x105bf1<_0x17e3cf[_0x6a9e69(0x86)];_0x105bf1++){const [_0x5b8fcf,_0x3a9bb8]=_0x17e3cf[_0x105bf1],[_0x4e479e,_0x42d10e]=[_0x361a1f+_0x5b8fcf,_0x5a1fdc+_0x3a9bb8];if(!newgrid[_0x4e479e]||!newgrid[_0x4e479e][_0x42d10e])continue;const _0x36cc33=newgrid[_0x4e479e][_0x42d10e];_0x59c07f[_0x6a9e69(0x1c6)](_0x36cc33);if(_0x36cc33[_0x6a9e69(0xef)]==null&&_0x36cc33[_0x6a9e69(0xcd)]==!![]){_0x36cc33[_0x6a9e69(0x313)](_0x265671);return;}}_0x59c07f[0x0][_0x6a9e69(0x313)](_0x265671);}}['addObject'](_0x3164a8){const _0x4d7636=_0x1fd1d8;if(_0x3164a8[_0x4d7636(0x21c)]<=0x0)return;if(_0x3164a8['number']!==undefined&&isNaN(_0x3164a8[_0x4d7636(0x21c)])){console[_0x4d7636(0x35f)](_0x4d7636(0xfe)),console[_0x4d7636(0x35f)](_0x3164a8);return;}if(_0x3164a8 instanceof fluid){this[_0x4d7636(0x248)](_0x3164a8);return;}if(_0x3164a8[_0x4d7636(0x21c)]>0x1&&!(_0x3164a8 instanceof Ammunition)){_0x3164a8[_0x4d7636(0x15f)]=_0x3164a8[_0x4d7636(0x83)],_0x3164a8[_0x4d7636(0x21c)]--,this[_0x4d7636(0x29b)](new _0x3164a8[(_0x4d7636(0x100))]()),this[_0x4d7636(0x29b)](_0x3164a8);return;}else _0x3164a8[_0x4d7636(0x21c)]>0x1?_0x3164a8[_0x4d7636(0x15f)]=_0x3164a8[_0x4d7636(0x83)]+'('+_0x3164a8[_0x4d7636(0x21c)]+')':_0x3164a8[_0x4d7636(0x15f)]=_0x3164a8[_0x4d7636(0x83)];if(_0x3164a8['iterations']>0x64)return;const _0x1c6c6e=this;let _0x5a365f=!![];(this['objects'][_0x4d7636(0x86)]>0x0||this[_0x4d7636(0xcd)]!==!![])&&(_0x5a365f=![]);_0x3164a8[_0x4d7636(0xcd)]==![]&&this['character']!==null&&(_0x5a365f=![]);if(_0x5a365f)_0x3164a8['iterations']=0x0,_0x3164a8[_0x4d7636(0x284)]=this[_0x4d7636(0x284)][_0x4d7636(0x169)](),this[_0x4d7636(0x274)][_0x4d7636(0x1c6)](_0x3164a8),this[_0x4d7636(0x2b7)](),_0x3164a8[_0x4d7636(0x291)]();else{if(!_0x3164a8[_0x4d7636(0x23b)])_0x3164a8[_0x4d7636(0x23b)]=0x0;_0x3164a8[_0x4d7636(0x23b)]++;const _0x13580a=shuffle(directions);let _0x2a085c=[];for(let _0x28ca6c=0x0;_0x28ca6c<_0x13580a['length'];_0x28ca6c++){const [_0x1fd917,_0x23a439]=_0x13580a[_0x28ca6c][_0x4d7636(0xbc)]((_0x2ac0f0,_0x20dee9)=>_0x2ac0f0+_0x1c6c6e[_0x4d7636(0x284)][_0x20dee9]);if(!newgrid[_0x1fd917]||!newgrid[_0x1fd917][_0x23a439])continue;const _0x54b769=newgrid[_0x1fd917][_0x23a439];if((_0x54b769['traversable']||_0x54b769[_0x4d7636(0xe4)]==!![])&&_0x54b769[_0x4d7636(0x1e7)]<=this[_0x4d7636(0x1e7)]){_0x2a085c[_0x4d7636(0x1c6)](_0x54b769);if(_0x54b769[_0x4d7636(0x274)][_0x4d7636(0x86)]==0x0){_0x54b769[_0x4d7636(0x29b)](_0x3164a8);break;}}_0x28ca6c==_0x13580a[_0x4d7636(0x86)]-0x1&&_0x2a085c[_0x4d7636(0x86)]>0x0&&_0x2a085c[0x0][_0x4d7636(0x29b)](_0x3164a8);}}}[_0x1fd1d8(0x36c)](){const _0x37e710=_0x1fd1d8;this[_0x37e710(0x274)]=[],this[_0x37e710(0x2b7)]();}[_0x1fd1d8(0x2b7)](){const _0x27dbe8=_0x1fd1d8,_0x5ba63e=this;this[_0x27dbe8(0xcd)]=!![],this['moveCost']=this[_0x27dbe8(0x14d)];if(this[_0x27dbe8(0x274)]['length']>0x0){const _0x45ceb3=this[_0x27dbe8(0x274)][0x0];_0x45ceb3[_0x27dbe8(0xcd)]==![]&&(this[_0x27dbe8(0xcd)]=![]),this[_0x27dbe8(0x2a0)]+=_0x45ceb3['movecost'],_0x45ceb3[_0x27dbe8(0x284)]=this[_0x27dbe8(0x284)][_0x27dbe8(0x169)]();}this['fluids'][_0x27dbe8(0x86)]>0x0&&this[_0x27dbe8(0x32f)]['forEach'](function(_0x5245c3){const _0x3febe6=_0x27dbe8;_0x5ba63e[_0x3febe6(0x2a0)]+=_0x5245c3[_0x3febe6(0x31e)],_0x5245c3[_0x3febe6(0x284)]=_0x5ba63e[_0x3febe6(0x284)][_0x3febe6(0x169)]();});}[_0x1fd1d8(0x248)](_0x4eca63){const _0x31b353=_0x1fd1d8;if(_0x4eca63['iterations']>0x14)return;const _0x5a4234=this;let _0xb830ee=!![],_0x5cd6bf=![];this[_0x31b353(0x32f)][_0x31b353(0xb8)](function(_0x4285c3){const _0x36fa64=_0x31b353;_0x4285c3[_0x36fa64(0x83)]==_0x4eca63[_0x36fa64(0x83)]&&(_0xb830ee=![],_0x4285c3 instanceof gas&&(Math['random']()>0.5&&_0x4285c3[_0x36fa64(0x26b)]<0x3&&(_0x4285c3[_0x36fa64(0x2bd)](),_0x5cd6bf=!![])));});if(_0x5cd6bf)return;if(_0xb830ee)_0x4eca63['pos']=this[_0x31b353(0x284)]['slice'](),this[_0x31b353(0x32f)]['push'](_0x4eca63),this[_0x31b353(0x2b7)](),_0x4eca63[_0x31b353(0x291)]();else{if(!_0x4eca63[_0x31b353(0x23b)])_0x4eca63[_0x31b353(0x23b)]=0x0;_0x4eca63[_0x31b353(0x23b)]++;const _0x49a1d5=shuffle(directions);let _0x38197a=[];for(let _0x31e458=0x0;_0x31e458<_0x49a1d5[_0x31b353(0x86)];_0x31e458++){const [_0x3a290d,_0x303086]=_0x49a1d5[_0x31e458]['map']((_0x3bdd22,_0xb829db)=>_0x3bdd22+_0x5a4234['pos'][_0xb829db]);if(!newgrid[_0x3a290d]||!newgrid[_0x3a290d][_0x303086])continue;const _0xbafd67=newgrid[_0x3a290d][_0x303086];if(_0xbafd67['traversable']&&(_0xbafd67['elevation']<=_0x5a4234[_0x31b353(0x1e7)]||_0x4eca63 instanceof gas)){_0x38197a[_0x31b353(0x1c6)](_0xbafd67);if(_0xbafd67[_0x31b353(0x32f)]['length']==0x0){_0xbafd67['addFluid'](_0x4eca63);break;}}_0x31e458==_0x49a1d5[_0x31b353(0x86)]-0x1&&_0x38197a[_0x31b353(0x86)]>0x0&&_0x38197a[0x0][_0x31b353(0x248)](_0x4eca63);}}}[_0x1fd1d8(0x167)](_0x2fc160){const _0x330049=_0x1fd1d8;_0x2fc160['destroyed']=!![],this[_0x330049(0x32f)]=this[_0x330049(0x32f)][_0x330049(0x198)](_0x24f977=>_0x24f977['basename']!=_0x2fc160[_0x330049(0x83)]);}[_0x1fd1d8(0xbb)](){const _0x466336=_0x1fd1d8,_0x440b9b=this;let _0x4f4552=[];if(this[_0x466336(0x357)]&&this[_0x466336(0x357)][_0x466336(0x86)]>0x0){const _0x224d03=this[_0x466336(0x357)][0x0][0x0];this[_0x466336(0x357)][0x0][0x1]--;if(this[_0x466336(0x357)][0x0][0x1]<=0x0)this['templightsources'][_0x466336(0x1c4)]();_0x4f4552['push'](_0x224d03);}if(this[_0x466336(0xef)]!==null){const _0x367ed2=[this[_0x466336(0xef)]['primaryitem'],this[_0x466336(0xef)][_0x466336(0x11d)]];_0x367ed2[_0x466336(0xb8)](function(_0x595ba6){const _0x5bad3a=_0x466336;_0x595ba6[_0x5bad3a(0x2d0)]&&_0x595ba6[_0x5bad3a(0x2d0)][_0x5bad3a(0x86)]>0x0&&_0x595ba6[_0x5bad3a(0x2d0)][_0x5bad3a(0xb8)](function(_0x1406f3){_0x4f4552['push'](_0x1406f3);});}),this[_0x466336(0xef)][_0x466336(0x2d0)]&&this['character'][_0x466336(0x2d0)]['length']>0x0&&_0x4f4552['push'](this[_0x466336(0xef)][_0x466336(0x2d0)][0x0]);}this[_0x466336(0x274)][_0x466336(0x86)]>0x0&&(this['objects'][0x0]['lightsources'][_0x466336(0x86)]>0x0&&_0x4f4552['push'](this['objects'][0x0][_0x466336(0x2d0)][0x0]));if(this['fluids'][_0x466336(0x86)]>0x0)for(let _0x77366a=0x0;_0x77366a<this[_0x466336(0x32f)][_0x466336(0x86)];_0x77366a++){this['fluids'][_0x77366a][_0x466336(0x2d0)][_0x466336(0x86)]>0x0&&_0x4f4552[_0x466336(0x1c6)](this['fluids'][_0x77366a][_0x466336(0x2d0)][0x0]);}return _0x4f4552;}[_0x1fd1d8(0x140)](_0x2e20aa,_0x2ef6aa){const _0x3f438f=_0x1fd1d8;if(!this[_0x3f438f(0x357)])this[_0x3f438f(0x357)]=[];this[_0x3f438f(0x357)][_0x3f438f(0x1c6)]([_0x2e20aa,_0x2ef6aa]);}[_0x1fd1d8(0x2a3)](_0x40191a){const _0x3ca8ed=_0x1fd1d8;let _0x5a1fb7=![];this[_0x3ca8ed(0x182)][_0x3ca8ed(0xb8)](function(_0x53bc73){const _0x398a53=_0x3ca8ed;_0x53bc73[_0x398a53(0x2a6)]==_0x40191a[_0x398a53(0x2a6)]&&(_0x5a1fb7=!![]);});if(_0x5a1fb7==![])this[_0x3ca8ed(0x182)][_0x3ca8ed(0x1c6)](_0x40191a);}[_0x1fd1d8(0x1b4)](_0x325e12){const _0x2c7085=_0x1fd1d8;for(let _0x591ea0=0x0;_0x591ea0<this[_0x2c7085(0x182)][_0x2c7085(0x86)];_0x591ea0++){if(this[_0x2c7085(0x182)][_0x591ea0][_0x2c7085(0x2a6)]==_0x325e12[_0x2c7085(0x2a6)]){this[_0x2c7085(0x182)][_0x2c7085(0x320)](_0x591ea0,0x1);break;}}}[_0x1fd1d8(0x16c)](_0x508bb3){const _0x221b85=_0x1fd1d8;let _0x308999=[0x0,0x0];return this[_0x221b85(0x274)][_0x221b85(0x86)]>0x0&&this[_0x221b85(0x274)][_0x221b85(0xb8)](function(_0x5019c5){const _0x349c7f=_0x221b85;if(_0x5019c5[_0x349c7f(0x118)]===![]&&_0x508bb3==!![]){}else _0x308999=_0x308999[_0x349c7f(0xbc)]((_0x4d64f1,_0x502deb)=>_0x4d64f1+_0x5019c5[_0x349c7f(0xc9)][_0x502deb]);}),this[_0x221b85(0x32f)][_0x221b85(0x86)]>0x0&&this[_0x221b85(0x32f)]['forEach'](function(_0x958fde){const _0x6b6903=_0x221b85;_0x308999=_0x308999[_0x6b6903(0xbc)]((_0x2de53b,_0x2c183e)=>_0x2de53b+_0x958fde[_0x6b6903(0xc9)][_0x2c183e]);}),_0x308999;}}class object{constructor(_0x4cdde2,_0x333436,_0x3e0fb1,_0x5489bc,_0x1aa7fb,_0x1756fe,_0x55f7bc,_0x374257,_0x513a9d,_0x5ee82d){const _0x276581=_0x1fd1d8;this['name']=_0x4cdde2,this[_0x276581(0x25e)]=_0x333436,this[_0x276581(0x97)]=_0x3e0fb1,this[_0x276581(0x304)]=_0x5489bc||null,this[_0x276581(0x323)]=_0x1aa7fb||0x0,this[_0x276581(0xcd)]=_0x1756fe,this[_0x276581(0x31e)]=_0x55f7bc||0x0,this['action']=_0x374257||null,this['effects']=_0x513a9d||[],this[_0x276581(0x2d0)]=_0x5ee82d||[],this[_0x276581(0x284)]=[],this['ac']=0x0,this['pc']=![],this[_0x276581(0x241)]=![],this[_0x276581(0x207)]=0x1,this['hp']=0x1,this['basename']=_0x4cdde2,this[_0x276581(0xb9)]=_0x3e0fb1,this['basesymbol']=_0x333436,this[_0x276581(0x26d)]=0x1,this[_0x276581(0x21f)]=![],this[_0x276581(0xc9)]=[0x0,0x0];if(this[_0x276581(0xcd)]==![])this[_0x276581(0x133)]=!![];}[_0x1fd1d8(0x375)](_0x167db6){const _0x2f6f89=_0x1fd1d8;if(this['destructable']&&!this[_0x2f6f89(0x179)]){const _0x2be872=Math[_0x2f6f89(0xfa)](_0x167db6/this['durability']);this['hp']-=_0x2be872;let _0x2b5066=_0x2be872[_0x2f6f89(0x33e)]();adduilabel(_0x2b5066,this[_0x2f6f89(0x284)],convertAbstoColor(this[_0x2f6f89(0xb9)]),0x1,!![],![],![],![]),this['hp']<=0x0&&this[_0x2f6f89(0x231)]();}}[_0x1fd1d8(0x231)](){const _0x16dec8=_0x1fd1d8,[_0x509ef7,_0x3092ea]=this[_0x16dec8(0x284)];newgrid[_0x509ef7][_0x3092ea][_0x16dec8(0x274)]['shift'](),this[_0x16dec8(0x179)]=!![];this[_0x16dec8(0xe5)]&&this['remnants'][_0x16dec8(0xb8)](function(_0x2e3c7c){const _0x2cddd2=_0x16dec8;_0x2e3c7c instanceof fluid?newgrid[_0x509ef7][_0x3092ea][_0x2cddd2(0x248)](_0x2e3c7c):newgrid[_0x509ef7][_0x3092ea][_0x2cddd2(0x29b)](_0x2e3c7c);});if(this[_0x16dec8(0x2cd)])this[_0x16dec8(0x2cb)]();hear(new Sound(this[_0x16dec8(0x284)],0xa,this,null,soundeffects[_0x16dec8(0x11a)])),newgrid[_0x509ef7][_0x3092ea][_0x16dec8(0x2b7)]();}[_0x1fd1d8(0x1d7)](){const _0x598ef3=_0x1fd1d8;this[_0x598ef3(0xe5)]=[];for(let _0x44db86=0x0;_0x44db86<0x2;_0x44db86++){let _0x5231de=new Wreckage(this);this[_0x598ef3(0xe5)][_0x598ef3(0x1c6)](_0x5231de);}}[_0x1fd1d8(0x291)](){const _0x9ace4f=_0x1fd1d8;this[_0x9ace4f(0x241)]&&this[_0x9ace4f(0x1d7)]();const _0x2a1915=directionsincl[_0x9ace4f(0x169)]();for(let _0x29a7d2=0x0;_0x29a7d2<_0x2a1915[_0x9ace4f(0x86)];_0x29a7d2++){const [_0x284342,_0x1426db]=_0x2a1915[_0x29a7d2][_0x9ace4f(0xbc)]((_0x18b1bc,_0x1bf544)=>_0x18b1bc+this[_0x9ace4f(0x284)][_0x1bf544]);if(!newgrid[_0x284342]||!newgrid[_0x284342][_0x1426db])continue;const _0x4ee82f=newgrid[_0x284342][_0x1426db];if(!_0x4ee82f['objecttriggers'])_0x4ee82f['objecttriggers']=[];_0x4ee82f[_0x9ace4f(0x365)][_0x9ace4f(0x1c6)](this);}}['react'](_0x53aa86,_0x510bd9,_0x39aca0){const _0x55ebb7=_0x1fd1d8;!this['destroyed']&&_0x39aca0[_0x55ebb7(0x157)]==_0x55ebb7(0x34a)&&chebyshevDistance(_0x39aca0[_0x55ebb7(0x331)],this[_0x55ebb7(0x284)])<=0x1&&(Math[_0x55ebb7(0x222)]()>0.75&&this[_0x55ebb7(0x375)](0x1)),!this['destroyed']&&this['burning']&&chebyshevDistance(_0x510bd9[_0x55ebb7(0x284)],this[_0x55ebb7(0x284)])==0x0&&_0x510bd9[_0x55ebb7(0x375)](0x1);}['burn'](){const _0x4c211d=_0x1fd1d8;if(this[_0x4c211d(0x2cd)]||this['burnt']||!this[_0x4c211d(0x21f)])return;this[_0x4c211d(0x15f)]=_0x4c211d(0x292)+this[_0x4c211d(0x83)],this[_0x4c211d(0xc9)]=this['hazards'][_0x4c211d(0xbc)]((_0x523858,_0x364e27)=>_0x523858+[0x1,0x5][_0x364e27]),this['burning']=!![],this['lightsources'][_0x4c211d(0x1c6)](new lightsource(this[_0x4c211d(0x284)],[0x80,0x80,0x80],[2.5,1.5,0x1],0x2)),this['absorbtion']=materials[_0x4c211d(0x159)];if(this[_0x4c211d(0x304)]!=null)this['bgabsorbtion']=materials['fire'];const [_0x4e0fd1,_0xc24e73]=this['pos'];newgrid[_0x4e0fd1][_0xc24e73][_0x4c211d(0xef)]&&newgrid[_0x4e0fd1][_0xc24e73][_0x4c211d(0xef)][_0x4c211d(0x375)](0x5),envobjects[_0x4c211d(0x1c6)](this);}[_0x1fd1d8(0x160)](){const _0x52f004=_0x1fd1d8;if(this[_0x52f004(0x2cd)]&&!this['destroyed']){const [_0x276bf3,_0x2e08af]=this['pos'];if(newgrid[_0x276bf3][_0x2e08af][_0x52f004(0xef)]!==null)newgrid[_0x276bf3][_0x2e08af][_0x52f004(0xef)]['damage'](0x5);for(let _0x9da17b=0x0;_0x9da17b<0x4;_0x9da17b++){newgrid[_0x276bf3][_0x2e08af]['addFluid'](new smoke());}this[_0x52f004(0x2cb)]();this[_0x52f004(0x241)]&&(this[_0x52f004(0x375)](0x1),!this['destroyed']&&envobjects[_0x52f004(0x1c6)](this));this[_0x52f004(0x26d)]-=0x1;if(this[_0x52f004(0x26d)]>0x0)envobjects[_0x52f004(0x1c6)](this);else{this[_0x52f004(0x2d0)]=[],this[_0x52f004(0x2cd)]=![],this[_0x52f004(0x336)]=!![],this[_0x52f004(0x15f)]=_0x52f004(0x11f)+this[_0x52f004(0x83)],this['hazards']=[0x0,0x0],this[_0x52f004(0x97)]=[0x0,0x0,0x0];if(this[_0x52f004(0x304)]!=null)this[_0x52f004(0x304)]=[0.2,0.2,0.2];}}}[_0x1fd1d8(0x2cb)](){const _0x6ec262=_0x1fd1d8;for(let _0x2fb23b=0x0;_0x2fb23b<directions['length'];_0x2fb23b++){const [_0x2e8735,_0x907888]=directions[_0x2fb23b][_0x6ec262(0xbc)]((_0x110a17,_0x56facc)=>_0x110a17+this[_0x6ec262(0x284)][_0x56facc]);if(!newgrid[_0x2e8735]||!newgrid[_0x2e8735][_0x907888])continue;const _0x4c15e2=newgrid[_0x2e8735][_0x907888];_0x4c15e2[_0x6ec262(0x274)][_0x6ec262(0x86)]>0x0&&!_0x4c15e2[_0x6ec262(0x274)][0x0][_0x6ec262(0x2cd)]&&_0x4c15e2[_0x6ec262(0x274)][0x0][_0x6ec262(0x239)](),_0x4c15e2[_0x6ec262(0x32f)]&&_0x4c15e2[_0x6ec262(0x32f)][_0x6ec262(0x86)]>0x0&&_0x4c15e2[_0x6ec262(0x32f)][_0x6ec262(0xb8)](function(_0x27a78){const _0x1e23b7=_0x6ec262;!_0x27a78['burning']&&!_0x27a78[_0x1e23b7(0x336)]&&_0x27a78[_0x1e23b7(0x239)]();});}}['move'](_0x116d4a){const _0x249a87=_0x1fd1d8,[_0x1fb9b8,_0x59d98b]=this['pos'];let [_0x44e23a,_0x463512]=this[_0x249a87(0x284)][_0x249a87(0xbc)]((_0x24cac7,_0x15a24c)=>_0x24cac7-_0x116d4a[_0x15a24c]);if(!newgrid[_0x44e23a]||!newgrid[_0x44e23a][_0x463512])return;const _0x1ebfb6=newgrid[_0x44e23a][_0x463512][_0x249a87(0xef)];while(newgrid[_0x44e23a][_0x463512][_0x249a87(0xe4)]==!![]){[_0x44e23a,_0x463512]=[_0x44e23a,_0x463512]['map']((_0x4f8ab4,_0x1faa44)=>_0x4f8ab4-_0x116d4a[_0x1faa44]);}const _0x5cd1d1=newgrid[_0x44e23a][_0x463512][_0x249a87(0x1e7)]-newgrid[_0x1fb9b8][_0x59d98b]['elevation'],_0x389547=_0x5cd1d1**0x2,_0x121598=this['hp'];newgrid[_0x44e23a][_0x463512][_0x249a87(0xcd)]==!![]&&(newgrid[_0x1fb9b8][_0x59d98b]['removeObject'](),newgrid[_0x44e23a][_0x463512]['addObject'](this),_0x5cd1d1<-0x1&&this['damage'](_0x389547)),_0x1ebfb6!==null&&(_0x5cd1d1<-0x1&&_0x1ebfb6[_0x249a87(0x375)](Math['min'](_0x389547,_0x121598)),this[_0x249a87(0x31e)]>0x0&&addconditiondynamic(conditions[_0x249a87(0x1fa)],!![],_0x1ebfb6)());}}class Item extends object{constructor(_0x4b6dc4,_0x21a840,_0x1ea13b){const _0x50fceb=_0x1fd1d8;super(_0x4b6dc4,_0x21a840,_0x1ea13b,null,0x0,!![]),this[_0x50fceb(0x15f)]=_0x4b6dc4,this[_0x50fceb(0x25e)]=_0x21a840,this[_0x50fceb(0x97)]=_0x1ea13b||[0x1,0x1,0x1];}['stow'](){}['draw'](){}[_0x1fd1d8(0x1e9)](){}}class Weapon extends Item{constructor(_0x125746,_0x1f9f6c,_0x37188d,_0x9d0143,_0x15d018,_0x5c59c4,_0x106eef,_0x6977b5,_0x1de607,_0x498e91,_0x3fc071,_0x4bc3b1){const _0x3f6f2d=_0x1fd1d8;super(_0x125746,_0x1f9f6c,_0x37188d),this[_0x3f6f2d(0x286)]=_0x15d018||1.9,this['bonus']=_0x5c59c4||0x0,this['damagedie']=_0x106eef||0x1,this['stat']=_0x6977b5||0x0,this[_0x3f6f2d(0x314)]=_0x1de607||0x0,this[_0x3f6f2d(0x2c4)]=_0x498e91||soundeffects[_0x3f6f2d(0xbd)],this[_0x3f6f2d(0x206)]=_0x3fc071||soundeffects[_0x3f6f2d(0x90)],this[_0x3f6f2d(0x233)]=_0x4bc3b1||soundeffects[_0x3f6f2d(0x234)],this['stacksize']=0x1,this['number']=0x1,this[_0x3f6f2d(0x2c7)]=![];}[_0x1fd1d8(0x1d7)](){const _0xac3352=_0x1fd1d8;this[_0xac3352(0xe5)]=[new BrokenWeapon(this)];}}class BrokenWeapon extends object{constructor(_0x121133){const _0x43e80b=_0x1fd1d8,_0x4b5b93=_0x43e80b(0xb4)+_0x121133['name'],_0x5b4895=_0x121133[_0x43e80b(0x25e)],_0x10d13c=_0x121133[_0x43e80b(0x97)],_0x3edd54=_0x121133[_0x43e80b(0x304)],_0x3bd748=_0x121133['opacity'];super(_0x4b5b93,_0x5b4895,_0x10d13c,_0x3edd54,_0x3bd748,!![]);}}class Unarmed extends Weapon{constructor(){const _0x146583=_0x1fd1d8;super(_0x146583(0x173),null,null,null,1.9,0x0,0x1,0x0,0x0,null,null,null);}}class Foot extends Unarmed{constructor(){const _0x312521=_0x1fd1d8;super(_0x312521(0x173),null,null,null,1.9,0x0,0x0,0x0,0x0,null,null,null),this['specialeffect']=kickattackpermute;}}class Kukri extends Weapon{constructor(){const _0x48bbaa=_0x1fd1d8;super(_0x48bbaa(0x174),_0x48bbaa(0x9c),materials['metal'],actions['Attack'],1.9,0x0,0x2,0x1,0x0,soundeffects[_0x48bbaa(0x294)],soundeffects[_0x48bbaa(0x353)]),this['light']=!![],this[_0x48bbaa(0x263)]=conditionattackpermute(conditions[_0x48bbaa(0xc5)]);}}class Dagger extends Weapon{constructor(_0x2f22fb){const _0x4838b0=_0x1fd1d8;super('Dagger',_0x4838b0(0x1cb),materials['metal'],actions[_0x4838b0(0x373)],3.5,0x0,0x2,0x1,0x0,soundeffects[_0x4838b0(0x294)],soundeffects[_0x4838b0(0x353)]),this[_0x4838b0(0x366)]=0x3,this[_0x4838b0(0x98)]=!![],this['number']=_0x2f22fb||0x1,this[_0x4838b0(0x96)]=!![],_0x2f22fb>0x1&&(this[_0x4838b0(0x15f)]=this['basename']+'('+this[_0x4838b0(0x21c)]+')');}}class Runic_Dagger extends Weapon{constructor(_0x4b6b42){const _0x294dae=_0x1fd1d8;super(_0x294dae(0x2ab),_0x294dae(0x1cb),materials[_0x294dae(0x12a)],actions['Attack'],3.5,0x0,0x2,0x1,0x0,soundeffects['daggerdraw'],soundeffects[_0x294dae(0x353)]),this['stacksize']=0x3,this[_0x294dae(0x98)]=!![],this['number']=_0x4b6b42||0x1,this[_0x294dae(0x96)]=!![],_0x4b6b42>0x1&&(this[_0x294dae(0x15f)]=this[_0x294dae(0x83)]+'('+this['number']+')'),this[_0x294dae(0x2d0)][_0x294dae(0x1c6)](new lightsource([0x0,0x0],[0x100,0x100,0x100],[1.5,1.5,1.5],0x3));}}class Shiv extends Weapon{constructor(){const _0x9dd188=_0x1fd1d8;super(_0x9dd188(0x33d),_0x9dd188(0x1cb),materials[_0x9dd188(0x12a)],actions[_0x9dd188(0x373)],1.9,0x0,0x2,0x1,0x0,soundeffects[_0x9dd188(0x294)],soundeffects[_0x9dd188(0x353)]),this[_0x9dd188(0x96)]=!![];}}class Athame extends Weapon{constructor(_0x4b5153){const _0xf159b4=_0x1fd1d8;super(_0xf159b4(0xa6),'&#x2020',[0.2,0.2,0.2],actions['Attack'],3.5,0x0,0x2,0x1,0x0,soundeffects['daggerdraw'],soundeffects[_0xf159b4(0x353)]),this[_0xf159b4(0x366)]=0x3,this[_0xf159b4(0x98)]=!![],this[_0xf159b4(0x21c)]=_0x4b5153||0x1,_0x4b5153>0x1&&(this[_0xf159b4(0x15f)]=this[_0xf159b4(0x83)]+'('+this[_0xf159b4(0x21c)]+')'),this[_0xf159b4(0x263)]=conditionattackpermute(conditions[_0xf159b4(0xc5)]),this[_0xf159b4(0x96)]=!![];}}class Javelin extends Weapon{constructor(_0x58bf89){const _0x3afc76=_0x1fd1d8;super(_0x3afc76(0x240),'-',materials[_0x3afc76(0x141)],actions[_0x3afc76(0x373)],3.5,0x0,0x2,0x0,0x0,soundeffects['tap'],soundeffects[_0x3afc76(0x2ea)]),this['stacksize']=0x3,this['throwable']=!![],this[_0x3afc76(0x21c)]=_0x58bf89||0x1,this['light']=!![],_0x58bf89>0x1&&(this[_0x3afc76(0x15f)]=this['basename']+'('+this[_0x3afc76(0x21c)]+')');}}class Club extends Weapon{constructor(){const _0x2fffa9=_0x1fd1d8;super(_0x2fffa9(0xff),'|',materials[_0x2fffa9(0x141)],actions[_0x2fffa9(0x373)],1.9,0x0,0x2,0x0,null);}}class Greatclub extends Weapon{constructor(){const _0x128b76=_0x1fd1d8;super(_0x128b76(0x144),'|',materials[_0x128b76(0x141)],actions[_0x128b76(0x373)],1.9,0x0,0x4,0x0,null),this[_0x128b76(0x2c7)]=!![];}}class Longsword extends Weapon{constructor(){const _0x2fcf02=_0x1fd1d8;super(_0x2fcf02(0xe6),'/',materials[_0x2fcf02(0x12a)],actions[_0x2fcf02(0x373)],1.9,0x0,0x6,0x0,null,soundeffects['sworddraw'],soundeffects[_0x2fcf02(0x90)],soundeffects[_0x2fcf02(0x234)]),this[_0x2fcf02(0x2a4)]=!![];}}class Runic_Longsword extends Weapon{constructor(){const _0x3d8268=_0x1fd1d8;super(_0x3d8268(0x227),'/',materials[_0x3d8268(0x12a)],actions[_0x3d8268(0x373)],1.9,0x0,0x6,0x0,null,soundeffects[_0x3d8268(0x15e)],soundeffects[_0x3d8268(0x90)],soundeffects[_0x3d8268(0x234)]),this[_0x3d8268(0x2a4)]=!![],this['lightsources'][_0x3d8268(0x1c6)](new lightsource([0x0,0x0],[0x100,0x100,0x100],[1.5,1.5,1.5],0x3));}}class Greatsword extends Weapon{constructor(){const _0xc8984b=_0x1fd1d8;super(_0xc8984b(0x2b3),'/',materials[_0xc8984b(0x12a)],actions[_0xc8984b(0x373)],1.9,0x0,0xa,0x0,null,soundeffects[_0xc8984b(0x15e)],soundeffects[_0xc8984b(0x90)],soundeffects['swordswing']),this[_0xc8984b(0x2c7)]=!![];}}class Runic_Greatsword extends Weapon{constructor(){const _0x3862d6=_0x1fd1d8;super(_0x3862d6(0x332),'/',materials[_0x3862d6(0x12a)],actions[_0x3862d6(0x373)],1.9,0x0,0xa,0x0,null,soundeffects[_0x3862d6(0x15e)],soundeffects[_0x3862d6(0x90)],soundeffects[_0x3862d6(0x234)]),this[_0x3862d6(0x2c7)]=!![],this[_0x3862d6(0x2d0)][_0x3862d6(0x1c6)](new lightsource([0x0,0x0],[0x100,0x100,0x100],[1.5,1.5,0x2],0x3));}}class Speedsword extends Weapon{constructor(){const _0x5049d8=_0x1fd1d8;super(_0x5049d8(0x298),'/',materials[_0x5049d8(0x12a)],actions[_0x5049d8(0x373)],1.9,0x0,0x6,0x0,null,soundeffects['sworddraw'],soundeffects[_0x5049d8(0x90)],soundeffects[_0x5049d8(0x234)]),this[_0x5049d8(0x263)]=function(_0x59ddcf,_0x40c98c){const _0x5a9b88=_0x5049d8,_0x2cd67c=function(){const _0x4f037e=_0x438d;_0x59ddcf[_0x4f037e(0xef)]['tc'][0x2]>0x0&&(_0x59ddcf[_0x4f037e(0xef)]['tc'][0x2]--,_0x59ddcf[_0x4f037e(0xef)]['tc'][0x1]++);};return _0x59ddcf[_0x5a9b88(0x1f9)][_0x5a9b88(0x1c6)](_0x2cd67c),_0x59ddcf['onmisseffects'][_0x5a9b88(0x1c6)](_0x2cd67c),_0x59ddcf;};}}class Shortsword extends Weapon{constructor(){const _0xe963db=_0x1fd1d8;super(_0xe963db(0x2af),'/',materials[_0xe963db(0x12a)],actions[_0xe963db(0x373)],1.9,0x0,0x4,0x1,null,soundeffects[_0xe963db(0x247)]),this[_0xe963db(0x96)]=!![];}}class Scimitar extends Weapon{constructor(){const _0x1f54d7=_0x1fd1d8;super('Scimitar','/',materials[_0x1f54d7(0x12a)],actions[_0x1f54d7(0x373)],1.9,0x0,0x4,0x0,null,soundeffects[_0x1f54d7(0x247)]),this['light']=!![];}}class Rapier extends Weapon{constructor(){const _0xf67793=_0x1fd1d8;super(_0xf67793(0x225),'/',materials[_0xf67793(0x12a)],actions[_0xf67793(0x373)],1.9,0x0,0x4,0x1,null,soundeffects[_0xf67793(0x15e)],soundeffects[_0xf67793(0x90)],soundeffects[_0xf67793(0x234)]),this[_0xf67793(0x263)]=function(_0xe48da9,_0x1df168){const _0xe01cac=_0xf67793,_0x45c015=function(){const _0x386e55=_0x438d,[_0x131fdb,_0x58b3eb]=_0x1df168,_0x14ed8a=newgrid[_0x131fdb][_0x58b3eb][_0x386e55(0xef)];_0x14ed8a&&_0x14ed8a[_0x386e55(0x1e9)]();};return _0xe48da9['onhiteffects']['push'](_0x45c015),_0xe48da9[_0xe01cac(0x2cc)][_0xe01cac(0x1c6)](_0xe01cac(0x355)),_0xe48da9;};}}class Katana extends Weapon{constructor(){const _0x2dceb0=_0x1fd1d8;super(_0x2dceb0(0x24a),'/',materials[_0x2dceb0(0x12a)],actions[_0x2dceb0(0x373)],1.9,0x0,0x1,0x0,null,soundeffects[_0x2dceb0(0x15e)],soundeffects[_0x2dceb0(0x90)],soundeffects[_0x2dceb0(0x234)]),this[_0x2dceb0(0x263)]=conditionattackpermute(conditions[_0x2dceb0(0xc5)]);}}class Punching_Red_Glove_Expanding_Arm_Kapow extends Weapon{constructor(){const _0xd5e180=_0x1fd1d8;super(_0xd5e180(0x287),'/',materials[_0xd5e180(0x12a)],actions[_0xd5e180(0x373)],1.9,0x0,0x1,0x0,null,soundeffects['sworddraw'],soundeffects[_0xd5e180(0x90)],soundeffects[_0xd5e180(0x234)]),this['specialeffect']=function(_0x1c42bc,_0x1c81c6){const _0x219577=_0xd5e180,_0x3ffa92=function(){const _0x54dcfa=_0x438d,[_0x23c5d6,_0xd5def2]=_0x1c81c6;let _0x5e384d=newgrid[_0x23c5d6][_0xd5def2]['character'];const _0x1facab=_0x1c42bc[_0x54dcfa(0x284)][_0x54dcfa(0x169)](),_0x5bb45f=_0x1c81c6['map']((_0x262661,_0x2cb042)=>_0x1facab[_0x2cb042]-_0x262661);if(_0x5e384d)for(let _0x44d59c=0x0;_0x44d59c<0x1;_0x44d59c++){let _0x4ea3db=_0x5e384d['pos'][_0x54dcfa(0xbc)]((_0x352bbe,_0x145ef1)=>_0x352bbe-_0x5bb45f[_0x145ef1]);_0x5e384d[_0x54dcfa(0x117)]['push'](new action(_0x54dcfa(0x1d4),movefunc,[0x0,0x0,0x0],0x1,_0x4ea3db,_0x5e384d,_0x1c81c6)),move(_0x5e384d);}};return _0x1c42bc['onhiteffects'][_0x219577(0x1c6)](_0x3ffa92),_0x1c42bc;};}}class Handaxe extends Weapon{constructor(){const _0x3ef68e=_0x1fd1d8;super(_0x3ef68e(0x35a),'/',materials[_0x3ef68e(0x12a)],actions[_0x3ef68e(0x373)],1.9,0x0,0x2,0x0,null,soundeffects[_0x3ef68e(0x15e)],soundeffects[_0x3ef68e(0x90)],soundeffects[_0x3ef68e(0x234)]),this[_0x3ef68e(0x263)]=cleaveattackspecial,this[_0x3ef68e(0x96)]=!![];}}class Battleaxe extends Weapon{constructor(){const _0x24888c=_0x1fd1d8;super('Battleaxe','/',materials[_0x24888c(0x12a)],actions[_0x24888c(0x373)],1.9,0x0,0x4,0x0,null,soundeffects['sworddraw'],soundeffects[_0x24888c(0x90)],soundeffects[_0x24888c(0x234)]),this['specialeffect']=cleaveattack,this['versatile']=!![];}}class Greataxe extends Weapon{constructor(){const _0x69948=_0x1fd1d8;super('Greataxe','/',materials[_0x69948(0x12a)],actions[_0x69948(0x373)],1.9,0x0,0x8,0x0,null,soundeffects[_0x69948(0x15e)],soundeffects[_0x69948(0x90)],soundeffects[_0x69948(0x234)]),this[_0x69948(0x263)]=cleaveattack,this['twohanded']=!![];}}class Warhammer extends Weapon{constructor(){const _0x12d404=_0x1fd1d8;super(_0x12d404(0x177),'T',materials[_0x12d404(0x12a)],actions[_0x12d404(0x373)],1.9,0x0,0x4,0x0,null,null,soundeffects['clubhit'],soundeffects['clubswing']),this[_0x12d404(0x263)]=conditionattackpermute(conditions['Prone']),this[_0x12d404(0x2a4)]=!![];}}class Greathammer extends Weapon{constructor(){const _0x50715a=_0x1fd1d8;super(_0x50715a(0x109),'T',materials[_0x50715a(0x12a)],actions[_0x50715a(0x373)],1.9,0x0,0x8,0x0,null,null,soundeffects[_0x50715a(0x112)],soundeffects[_0x50715a(0x180)]),this[_0x50715a(0x263)]=conditionattackpermute(conditions[_0x50715a(0x1fa)]),this[_0x50715a(0x2c7)]=!![];}}class Mace extends Weapon{constructor(){const _0x3883e3=_0x1fd1d8;super(_0x3883e3(0x235),'T',materials['metal'],actions['Attack'],1.9,0x0,0x4,0x0,null,null,soundeffects['clubhit'],soundeffects['clubswing']),this[_0x3883e3(0x263)]=shoveattackpermute,this[_0x3883e3(0x2a4)]=!![];}}class Maul extends Weapon{constructor(){const _0x355ea4=_0x1fd1d8;super(_0x355ea4(0x20d),'T',materials['metal'],actions[_0x355ea4(0x373)],1.9,0x0,0x6,0x0,null,null,soundeffects[_0x355ea4(0x112)],soundeffects[_0x355ea4(0x180)]),this[_0x355ea4(0x263)]=shoveattackpermute,this[_0x355ea4(0x2a4)]=!![];}}class Spear extends Weapon{constructor(){const _0x5d6dbc=_0x1fd1d8;super('Spear','-',materials[_0x5d6dbc(0x141)],actions[_0x5d6dbc(0x373)],2.5,0x0,0x2,0x0,0x0,soundeffects[_0x5d6dbc(0x25d)]),this['versatile']=!![];}}class Pike extends Weapon{constructor(){const _0x2d2555=_0x1fd1d8;super('Pike','/',materials[_0x2d2555(0x12a)],actions[_0x2d2555(0x373)],2.5,0x0,0x6,0x0,null,soundeffects['sworddraw'],soundeffects[_0x2d2555(0x90)],soundeffects[_0x2d2555(0x234)]),this['twohanded']=!![];}}class Halberd extends Weapon{constructor(){const _0x5a3ee2=_0x1fd1d8;super(_0x5a3ee2(0x1ea),'/',materials[_0x5a3ee2(0x12a)],actions[_0x5a3ee2(0x373)],2.5,0x0,0x4,0x0,null,soundeffects[_0x5a3ee2(0x15e)],soundeffects['swordhit'],soundeffects[_0x5a3ee2(0x234)]),this[_0x5a3ee2(0x263)]=cleaveattack,this['twohanded']=!![];}}class Glaive extends Weapon{constructor(){const _0x2d7048=_0x1fd1d8;super(_0x2d7048(0x2d4),'/',materials[_0x2d7048(0x12a)],actions[_0x2d7048(0x373)],2.5,0x0,0x6,0x0,null,soundeffects[_0x2d7048(0x15e)],soundeffects['swordhit'],soundeffects[_0x2d7048(0x234)]),this[_0x2d7048(0x263)]=cleaveattack,this[_0x2d7048(0x2c7)]=!![];}}class Polehammer extends Weapon{constructor(){const _0x17e9ff=_0x1fd1d8;super(_0x17e9ff(0x214),'T',materials[_0x17e9ff(0x12a)],actions[_0x17e9ff(0x1b9)],2.5,0x0,0x4,0x0,null,null,soundeffects[_0x17e9ff(0x112)],soundeffects[_0x17e9ff(0x180)]),this[_0x17e9ff(0x263)]=conditionattackpermute(conditions[_0x17e9ff(0x1fa)]),this['twohanded']=!![];}}class Ammunition extends object{constructor(_0x23f08b,_0x4a4504,_0x1ce6a6){super(_0x23f08b,_0x4a4504,_0x1ce6a6,null,0x0,!![],0x0,null,null,null);}}class Arrow extends Ammunition{constructor(_0xfd5f1d){const _0x238f3f=_0x1fd1d8;super(_0x238f3f(0x2eb),_0x238f3f(0x85),materials[_0x238f3f(0x141)]),this[_0x238f3f(0x366)]=0xf,this[_0x238f3f(0x98)]=!![],this[_0x238f3f(0x21c)]=_0xfd5f1d||0x1,_0xfd5f1d>0x1&&(this[_0x238f3f(0x15f)]=this[_0x238f3f(0x83)]+'('+this['number']+')');}}class Bolt extends Ammunition{constructor(_0x3a9e90){const _0x449348=_0x1fd1d8;super('Bolt',_0x449348(0x85),materials[_0x449348(0x141)]),this[_0x449348(0x366)]=0xf,this[_0x449348(0x98)]=!![],this[_0x449348(0x21c)]=_0x3a9e90||0x1,_0x3a9e90>0x1&&(this[_0x449348(0x15f)]=this['basename']+'('+this[_0x449348(0x21c)]+')');}}class Longbow extends Weapon{constructor(){const _0x29103f=_0x1fd1d8;super('Longbow',')',materials[_0x29103f(0x141)],actions[_0x29103f(0x373)],7.9,0x0,0x4,0x1,1.9,soundeffects[_0x29103f(0x34b)],soundeffects['arrowflight']),this[_0x29103f(0x358)]='Arrow',this[_0x29103f(0x11c)]=Arrow,this['twohanded']=!![],this[_0x29103f(0x1b2)]=!![];}}class Cleavebow extends Weapon{constructor(){const _0x3d1de1=_0x1fd1d8;super(_0x3d1de1(0x20a),')',materials[_0x3d1de1(0x141)],actions['Attack'],7.9,0x0,0x4,0x1,1.9,soundeffects[_0x3d1de1(0x34b)],soundeffects[_0x3d1de1(0x2ea)]),this[_0x3d1de1(0x358)]='Arrow',this[_0x3d1de1(0x11c)]=Arrow,this[_0x3d1de1(0x2c7)]=!![],this[_0x3d1de1(0x263)]=cleaveattack;}}class Recurve_Bow extends Weapon{constructor(){const _0x47ca09=_0x1fd1d8;super(_0x47ca09(0x142),'}',materials[_0x47ca09(0x141)],actions[_0x47ca09(0x373)],8.9,0x0,0x6,0x1,1.9,soundeffects[_0x47ca09(0x34b)],soundeffects[_0x47ca09(0x2ea)]),this[_0x47ca09(0x358)]=_0x47ca09(0x2eb),this[_0x47ca09(0x11c)]=Arrow,this[_0x47ca09(0x2c7)]=!![],this[_0x47ca09(0x1b2)]=!![],this[_0x47ca09(0x263)]=function(_0x4fbbc7,_0x3bb477){const _0x3a027e=_0x47ca09;for(let _0x2f0921=_0x4fbbc7[_0x3a027e(0x2cc)][_0x3a027e(0x86)]-0x1;_0x2f0921>=0x0;_0x2f0921--){if(_0x4fbbc7[_0x3a027e(0x2cc)][_0x2f0921]==_0x3a027e(0x190)){_0x4fbbc7['modbreakdown'][_0x3a027e(0x320)](_0x2f0921,0x1),_0x4fbbc7['extrinsmod']+=0x2,_0x4fbbc7['percenthitchance']+=0xa,_0x4fbbc7[_0x3a027e(0x131)]+=takeav(_0x4fbbc7['damagerange'])*0.1;continue;}if(_0x4fbbc7[_0x3a027e(0x2cc)][_0x2f0921]==_0x3a027e(0x15b)){_0x4fbbc7[_0x3a027e(0x2cc)]['splice'](_0x2f0921,0x1),_0x4fbbc7[_0x3a027e(0xe0)]+=0x5,_0x4fbbc7[_0x3a027e(0x35e)]+=0x19,_0x4fbbc7[_0x3a027e(0x131)]+=takeav(_0x4fbbc7[_0x3a027e(0x185)])*0.25;continue;}}_0x4fbbc7['percenthitchance']=Math[_0x3a027e(0x1ac)](_0x4fbbc7[_0x3a027e(0x35e)],0x64);const _0x46332f=function(){const _0x218575=_0x3a027e,_0x3e9b0d=bresenhamLine(_0x4fbbc7[_0x218575(0x284)],_0x3bb477),_0x37b7a0=_0x3e9b0d[_0x218575(0xbc)](_0x656f71=>newgrid[_0x656f71[0x0]][_0x656f71[0x1]]);_0x37b7a0[_0x218575(0xb8)](function(_0x4c5e9b){const _0x4fe141=_0x218575;if(_0x4c5e9b[_0x4fe141(0xef)]&&_0x4c5e9b['character']['pc']!==_0x4fbbc7[_0x4fe141(0xef)]['pc']){const _0x29c09c=_0x4fbbc7,_0x13b5e9=_0x4c5e9b['character'];Math[_0x4fe141(0x222)]()*0x64<_0x29c09c[_0x4fe141(0x35e)]&&_0x13b5e9?_0x13b5e9[_0x4fe141(0x375)](randomNumber(_0x29c09c[_0x4fe141(0x185)][0x1],_0x29c09c[_0x4fe141(0x185)][0x0])):adduilabel(_0x4fe141(0x34a),_0x4c5e9b[_0x4fe141(0x284)],[0x80,0x80,0x80],0x1,!![],![]);}});};return _0x4fbbc7['onhiteffects'][_0x3a027e(0x1c6)](_0x46332f),_0x4fbbc7['onmisseffects']['push'](_0x46332f),_0x4fbbc7;};}}class Double_Recurve_Bow extends Weapon{constructor(){const _0xd23642=_0x1fd1d8;super(_0xd23642(0x142),'}',materials[_0xd23642(0x141)],actions[_0xd23642(0x373)],8.9,0x0,0x8,0x1,1.9,soundeffects[_0xd23642(0x34b)],soundeffects[_0xd23642(0x2ea)]),this['ammotype']=_0xd23642(0x2eb),this[_0xd23642(0x11c)]=Arrow,this[_0xd23642(0x2c7)]=!![],this['specialeffect']=function(_0x10bcc7,_0x181c8b){const _0x311bc8=_0xd23642;for(let _0x27337b=_0x10bcc7['modbreakdown'][_0x311bc8(0x86)]-0x1;_0x27337b>=0x0;_0x27337b--){if(_0x10bcc7[_0x311bc8(0x2cc)][_0x27337b]==_0x311bc8(0x190)){_0x10bcc7[_0x311bc8(0x2cc)][_0x311bc8(0x320)](_0x27337b,0x1),_0x10bcc7['extrinsmod']+=0x2,_0x10bcc7[_0x311bc8(0x35e)]+=0xa,_0x10bcc7[_0x311bc8(0x131)]+=takeav(_0x10bcc7[_0x311bc8(0x185)])*0.1;continue;}if(_0x10bcc7['modbreakdown'][_0x27337b]=='Three\x20Quarters\x20Cover-25'){_0x10bcc7['modbreakdown'][_0x311bc8(0x320)](_0x27337b,0x1),_0x10bcc7['extrinsmod']+=0x5,_0x10bcc7[_0x311bc8(0x35e)]+=0x19,_0x10bcc7[_0x311bc8(0x131)]+=takeav(_0x10bcc7[_0x311bc8(0x185)])*0.25;continue;}}_0x10bcc7[_0x311bc8(0x35e)]=Math[_0x311bc8(0x1ac)](_0x10bcc7[_0x311bc8(0x35e)],0x64);const _0x5f5105=function(){const _0x57c87c=_0x311bc8,_0x1e580d=bresenhamLine(_0x10bcc7['pos'],_0x181c8b),_0x790020=_0x1e580d[_0x57c87c(0xbc)](_0x7271c0=>newgrid[_0x7271c0[0x0]][_0x7271c0[0x1]]);_0x790020[_0x57c87c(0xb8)](function(_0x4dc67e){const _0xe9569a=_0x57c87c;if(_0x4dc67e[_0xe9569a(0xef)]&&_0x4dc67e['character']['pc']!==_0x10bcc7['character']['pc']){const _0x28092f=_0x10bcc7,_0x18b8b3=_0x4dc67e['character'];Math[_0xe9569a(0x222)]()*0x64<_0x28092f[_0xe9569a(0x35e)]&&_0x18b8b3?_0x18b8b3[_0xe9569a(0x375)](randomNumber(_0x28092f['damagerange'][0x1],_0x28092f['damagerange'][0x0])):adduilabel(_0xe9569a(0x34a),_0x4dc67e[_0xe9569a(0x284)],[0x80,0x80,0x80],0x1,!![],![]);}});},_0x30c965=function(){const _0x2dc266=_0x311bc8;let _0x15dba8=new Attack(_0x2dc266(0x373),attackfunc,[0x0,0x0,0x0,0x1],_0x10bcc7[_0x2dc266(0xef)][_0x2dc266(0x30b)](_0x10bcc7['weapon']),_0x181c8b,_0x10bcc7['character'],_0x10bcc7['pos']);_0x10bcc7[_0x2dc266(0xef)][_0x2dc266(0x117)][_0x2dc266(0x1c6)](_0x15dba8);};return _0x10bcc7[_0x311bc8(0x1f9)][_0x311bc8(0x1c6)](_0x5f5105),_0x10bcc7[_0x311bc8(0x2b9)]['push'](_0x5f5105),_0x10bcc7[_0x311bc8(0x1f9)][_0x311bc8(0x1c6)](_0x30c965),_0x10bcc7['onmisseffects'][_0x311bc8(0x1c6)](_0x30c965),_0x10bcc7;};}}class Shortbow extends Weapon{constructor(){const _0x52423e=_0x1fd1d8;super(_0x52423e(0x1e5),')',materials[_0x52423e(0x141)],actions[_0x52423e(0x373)],6.9,0x0,0x2,0x1,1.9,soundeffects[_0x52423e(0x34b)]),this['ammotype']='Arrow',this['ammoconstructor']=Arrow,this['twohanded']=!![],this[_0x52423e(0x1b2)]=!![];}}class Handcrossbow extends Weapon{constructor(){const _0xe9ce11=_0x1fd1d8;super(_0xe9ce11(0x2ee),')',materials[_0xe9ce11(0x141)],actions[_0xe9ce11(0x373)],6.9,0x0,0x2,0x1,1.9,soundeffects[_0xe9ce11(0x34b)]),this['ammotype']='Bolt',this[_0xe9ce11(0x11c)]=Bolt,this[_0xe9ce11(0x96)]=!![],this[_0xe9ce11(0x1b2)]=!![];}}class Heavy_Crossbow extends Weapon{constructor(){const _0x1f6349=_0x1fd1d8;super(_0x1f6349(0xaa),')',materials[_0x1f6349(0x141)],actions[_0x1f6349(0x373)][_0x1f6349(0x169)](),7.9,0x0,0x6,0x1,1.9,soundeffects['bowdraw']),this[_0x1f6349(0x358)]=_0x1f6349(0x267),this[_0x1f6349(0x11c)]=Bolt,this['ranged']=!![],this[_0x1f6349(0x162)]=!![],this['specialeffect']=shoveattackpermute;}}class Bolas extends Weapon{constructor(_0x3fb224){const _0x199a2d=_0x1fd1d8;super(_0x199a2d(0x12c),'%',materials[_0x199a2d(0x141)],actions[_0x199a2d(0x373)],5.5,0x0,0x1,0x1,null,soundeffects[_0x199a2d(0x294)],soundeffects[_0x199a2d(0x353)]),this[_0x199a2d(0x366)]=0x3,this[_0x199a2d(0x1a9)]=!![],this[_0x199a2d(0x21c)]=_0x3fb224||0x1,_0x3fb224>0x1&&(this['name']=this[_0x199a2d(0x83)]+'('+this['number']+')'),this['specialeffect']=function(_0x154185,_0x2f6220){const _0x250260=_0x199a2d,[_0x4cff02,_0x2c196b]=_0x2f6220,_0x5328bf=function(){const _0xf7f987=_0x438d;addconditiondynamic(conditions[_0xf7f987(0x1fa)],!![],newgrid[_0x4cff02][_0x2c196b][_0xf7f987(0xef)])();};return _0x154185['onhiteffects'][_0x250260(0x1c6)](_0x5328bf),_0x154185['damagerange']=[0x1,0x1],newgrid[_0x4cff02][_0x2c196b][_0x250260(0xef)]&&lackscondition(conditions['Prone'],newgrid[_0x4cff02][_0x2c196b][_0x250260(0xef)])&&(_0x154185[_0x250260(0x131)]+=0x5),_0x154185;};}}class OilFlask extends Weapon{constructor(_0x178f35){const _0x4904e4=_0x1fd1d8;super(_0x4904e4(0x352),',',materials[_0x4904e4(0x2f8)],actions[_0x4904e4(0x373)],5.5,0x0,0x1,0x1,null,soundeffects[_0x4904e4(0x294)],soundeffects['woodbreaking']),this[_0x4904e4(0x366)]=0x3,this['consumable']=!![],this[_0x4904e4(0x21c)]=_0x178f35||0x1,_0x178f35>0x1&&(this[_0x4904e4(0x15f)]=this[_0x4904e4(0x83)]+'('+this['number']+')'),this['specialeffect']=function(_0x3f96ef,_0x226ed7){const _0x3af369=_0x4904e4,[_0x470036,_0x26f5c2]=_0x226ed7,_0x43e208=function(){const _0x3ba139=_0x438d;for(let _0x25d67b=0x0;_0x25d67b<0x9;_0x25d67b++){newgrid[_0x470036][_0x26f5c2]['addFluid'](new oil());}newgrid[_0x470036][_0x26f5c2][_0x3ba139(0x32f)][_0x3ba139(0xb8)](_0x4c4a41=>_0x4c4a41[_0x3ba139(0x239)]());};return _0x3f96ef[_0x3af369(0x1f9)][_0x3af369(0x1c6)](_0x43e208),_0x3f96ef[_0x3af369(0x2b9)]['push'](_0x43e208),_0x3f96ef[_0x3af369(0x185)]=[0x0,0x0],_0x3f96ef[_0x3af369(0x35e)]=0x64,_0x3f96ef[_0x3af369(0x2a9)]=0x0,_0x3f96ef['extrinsmod']=0x0,_0x3f96ef[_0x3af369(0x2cc)]=[],_0x3f96ef;};}}class SmokeBomb extends Weapon{constructor(_0x4ae30e){const _0x1b55bb=_0x1fd1d8;super('Smoke\x20Bomb',',',materials[_0x1b55bb(0x2f8)],actions[_0x1b55bb(0x373)],5.5,0x0,0x1,0x1,null,soundeffects[_0x1b55bb(0x294)],soundeffects['puncture']),this[_0x1b55bb(0x366)]=0x3,this[_0x1b55bb(0x1a9)]=!![],this[_0x1b55bb(0x21c)]=_0x4ae30e||0x1,_0x4ae30e>0x1&&(this[_0x1b55bb(0x15f)]=this[_0x1b55bb(0x83)]+'('+this[_0x1b55bb(0x21c)]+')'),this[_0x1b55bb(0x263)]=function(_0x5754ce,_0x56666a){const _0x4da5bb=_0x1b55bb,[_0x16aa33,_0x119e9d]=_0x56666a,_0x19a593=function(){for(let _0x3cdf56=0x0;_0x3cdf56<0xc8;_0x3cdf56++){newgrid[_0x16aa33][_0x119e9d]['addFluid'](new smoke());}};return _0x5754ce[_0x4da5bb(0x1f9)]['push'](_0x19a593),_0x5754ce[_0x4da5bb(0x2b9)][_0x4da5bb(0x1c6)](_0x19a593),_0x5754ce[_0x4da5bb(0x185)]=[0x0,0x0],_0x5754ce[_0x4da5bb(0x35e)]=0x64,_0x5754ce['intrinsmod']=0x0,_0x5754ce[_0x4da5bb(0xe0)]=0x0,_0x5754ce[_0x4da5bb(0x2cc)]=[],_0x5754ce;};}}class CaltropsBag extends Weapon{constructor(_0x40210d){const _0xeda245=_0x1fd1d8;super(_0xeda245(0x369),'.',materials[_0xeda245(0x141)],actions['Attack'],50.5,0x0,0x1,0x1,null,soundeffects[_0xeda245(0x294)],soundeffects[_0xeda245(0x353)]),this[_0xeda245(0x366)]=0x3,this[_0xeda245(0x1a9)]=!![],this[_0xeda245(0x21c)]=_0x40210d||0x1,_0x40210d>0x1&&(this[_0xeda245(0x15f)]=this['basename']+'('+this[_0xeda245(0x21c)]+')'),this[_0xeda245(0x263)]=function(_0x668d8b,_0xd589f1){const _0x2eca7c=_0xeda245;_0x668d8b[_0x2eca7c(0x2fb)][_0x2eca7c(0x86)]==0x1&&_0x668d8b[_0x2eca7c(0x2fb)][0x0]=='No\x20Target'&&(_0x668d8b[_0x2eca7c(0x2fb)]=[]);const [_0x3f25c3,_0x302bf3]=_0xd589f1,_0x1e1772=function(){const _0x56c605=_0x2eca7c;for(let _0x12e2f7=0x0;_0x12e2f7<0x8;_0x12e2f7++){newgrid[_0x3f25c3][_0x302bf3][_0x56c605(0x29b)](new Caltrops());}};return _0x668d8b[_0x2eca7c(0x1f9)][_0x2eca7c(0x1c6)](_0x1e1772),_0x668d8b['onmisseffects']['push'](_0x1e1772),_0x668d8b[_0x2eca7c(0x185)]=[0x0,0x0],_0x668d8b['percenthitchance']=0x64,_0x668d8b['intrinsmod']=0x0,_0x668d8b['extrinsmod']=0x0,_0x668d8b[_0x2eca7c(0x2cc)]=[],_0x668d8b;};}}class FlashPowder extends Weapon{constructor(_0x252fba){const _0x1c2049=_0x1fd1d8;super(_0x1c2049(0x2ec),'.',materials[_0x1c2049(0x141)],actions[_0x1c2049(0x373)],5.5,0x0,0x1,0x1,null,soundeffects[_0x1c2049(0x294)],soundeffects[_0x1c2049(0x353)]),this[_0x1c2049(0x366)]=0x3,this['consumable']=!![],this[_0x1c2049(0x21c)]=_0x252fba||0x1,_0x252fba>0x1&&(this[_0x1c2049(0x15f)]=this[_0x1c2049(0x83)]+'('+this['number']+')'),this['specialeffect']=function(_0x9d00e6,_0x34f03e){const _0x2b5e0e=_0x1c2049;_0x9d00e6[_0x2b5e0e(0x2fb)][_0x2b5e0e(0x86)]==0x1&&_0x9d00e6['errors'][0x0]=='No\x20Target'&&(_0x9d00e6[_0x2b5e0e(0x2fb)]=[]);const [_0x33f9a2,_0x1a28ae]=_0x34f03e,_0xad7166=function(){const _0x44bd3f=_0x2b5e0e;for(let _0x5476f4=0x1;_0x5476f4<0xa;_0x5476f4+=0x2){newgrid[_0x33f9a2][_0x1a28ae][_0x44bd3f(0x140)](new lightsource(this[_0x44bd3f(0x284)],[0x100,0x100,0x100],[_0x5476f4,_0x5476f4*(0x6/0xa),_0x5476f4*(0x4/0xa)],0x3),0x1);}for(let _0x516d18=0xa;_0x516d18>0x1;_0x516d18-=0x2){newgrid[_0x33f9a2][_0x1a28ae][_0x44bd3f(0x140)](new lightsource(this['pos'],[0x100,0x100,0x100],[_0x516d18,_0x516d18*(0x6/0xa),_0x516d18*(0x4/0xa)],0x3),0x1);}updatelightmap(),updatetraitspassive();};return _0x9d00e6[_0x2b5e0e(0x1f9)][_0x2b5e0e(0x1c6)](_0xad7166),_0x9d00e6[_0x2b5e0e(0x2b9)][_0x2b5e0e(0x1c6)](_0xad7166),_0x9d00e6[_0x2b5e0e(0x185)]=[0x0,0x0],_0x9d00e6[_0x2b5e0e(0x35e)]=0x64,_0x9d00e6[_0x2b5e0e(0x2a9)]=0x0,_0x9d00e6[_0x2b5e0e(0xe0)]=0x0,_0x9d00e6[_0x2b5e0e(0x2cc)]=[],_0x9d00e6;};}}class Grenade extends Weapon{constructor(_0x103532){const _0x4c6498=_0x1fd1d8;super(_0x4c6498(0x111),_0x4c6498(0x1cb),materials[_0x4c6498(0x12a)],actions[_0x4c6498(0x373)],5.5,0x0,0x1,0x1,null,soundeffects['daggerdraw'],soundeffects[_0x4c6498(0x353)]),this['stacksize']=0x3,this[_0x4c6498(0x1a9)]=!![],this[_0x4c6498(0x21c)]=_0x103532||0x1;_0x103532>0x1&&(this['name']=this['basename']+'('+this[_0x4c6498(0x21c)]+')');const _0x4b851a=this;this[_0x4c6498(0x263)]=function(_0x4d783e,_0x3c2b7a){const _0x53ea0b=_0x4c6498,[_0x52441f,_0x20f54a]=_0x3c2b7a,_0x18bb17=function(){const _0x567937=_0x438d,_0xe0980f=[...directions,[0x0,0x0]];_0xe0980f[_0x567937(0xb8)](function(_0x2ac9b2){const _0x438d3d=_0x567937,[_0x5c282b,_0x4335d6]=_0x2ac9b2[_0x438d3d(0xbc)]((_0x20508e,_0x216c5e)=>_0x20508e+_0x3c2b7a[_0x216c5e]),_0x48e84a=newgrid[_0x5c282b][_0x4335d6],_0x417df3=_0x48e84a[_0x438d3d(0xef)];_0x48e84a[_0x438d3d(0x274)][_0x438d3d(0x86)]>0x0&&_0x48e84a[_0x438d3d(0x274)][_0x438d3d(0xb8)](_0xd6801f=>_0xd6801f[_0x438d3d(0x375)](0xa));rangedanimate(_0x3c2b7a,[_0x5c282b,_0x4335d6],convertAbstoColor(_0x4b851a[_0x438d3d(0x97)]));if(_0x417df3&&_0x417df3[_0x438d3d(0xd7)]!==!![])_0x417df3['damage'](0xa);_0x48e84a[_0x438d3d(0x248)](new smoke(_0x438d3d(0x158),'',[0.1,0.1,0.1],[0.5,0.5,0.5],0.1,!![],0x0,null,null,null));}),adduilabel('*',_0x3c2b7a,convertAbstoColor(materials['fire']),0x0,!![],![],![],![],0x1);};return _0x4d783e[_0x53ea0b(0x1f9)][_0x53ea0b(0x1c6)](_0x18bb17),_0x4d783e[_0x53ea0b(0x2b9)]['push'](_0x18bb17),_0x4d783e[_0x53ea0b(0x185)]=[0x0,0x0],_0x4d783e[_0x53ea0b(0x35e)]=0x64,_0x4d783e[_0x53ea0b(0x2a9)]=0x0,_0x4d783e[_0x53ea0b(0xe0)]=0x0,_0x4d783e[_0x53ea0b(0x2cc)]=[],_0x4d783e;};}}class Bonfire extends object{constructor(){const _0x2eb323=_0x1fd1d8;super(_0x2eb323(0x251),'*',[0.2,0.2,0.2],null,0.25,![],null,null,null,null,null),this[_0x2eb323(0x241)]=![];}[_0x1fd1d8(0x291)](){const _0x445d44=_0x1fd1d8;super[_0x445d44(0x291)](),this['action']=actions['Interact'];}[_0x1fd1d8(0x22a)](_0x3ad7be){const _0x573b46=_0x1fd1d8;if(!this['lit'])this[_0x573b46(0x239)]();else _0x3ad7be[_0x573b46(0x1a5)](_0x3ad7be[_0x573b46(0x2e2)]-_0x3ad7be['hp']);}[_0x1fd1d8(0x239)](){const _0x544096=_0x1fd1d8;this[_0x544096(0x343)]=!![],this[_0x544096(0x15f)]=_0x544096(0x1b1),this['absorbtion']=materials[_0x544096(0x159)],this[_0x544096(0x2d0)]['push'](new lightsource(this[_0x544096(0x284)],[0x100,0x100,0x100],[2.5,1.5,0x1],0x2));}}class Brazier extends object{constructor(){const _0x1ac131=_0x1fd1d8;super(_0x1ac131(0x224),'o',materials[_0x1ac131(0x12a)],null,0.25,![],null,null),this[_0x1ac131(0x21f)]=!![],this[_0x1ac131(0x26d)]=Infinity,this[_0x1ac131(0x133)]=![];}[_0x1fd1d8(0x239)](){const _0x1e727d=_0x1fd1d8;this[_0x1e727d(0x15f)]='Lit\x20'+this[_0x1e727d(0x83)],this[_0x1e727d(0x83)]=_0x1e727d(0x114)+this[_0x1e727d(0x83)],this[_0x1e727d(0x2cd)]=!![],this[_0x1e727d(0x2d0)][_0x1e727d(0x1c6)](new lightsource(this[_0x1e727d(0x284)],[0x100,0x100,0x100],[2.5,1.5,0x1],0x2));}}class corpse extends object{constructor(_0x1aac16,_0x43d40e,_0x1fc6a6,_0x510c3d,_0x264014,_0x1fa248,_0x53863f,_0x52ba1b,_0x17ad7b,_0x2b46ae,_0x3e4abc){const _0x2cabf2=_0x1fd1d8;super(_0x1aac16,_0x43d40e,_0x1fc6a6,_0x510c3d,_0x264014,_0x1fa248,_0x53863f,_0x52ba1b,_0x17ad7b,_0x2b46ae,_0x3e4abc),this[_0x2cabf2(0x21f)]=!![];}[_0x1fd1d8(0x291)](){const _0x286498=_0x1fd1d8;super[_0x286498(0x291)](),envobjects[_0x286498(0x1c6)](this),newgrid[this[_0x286498(0x284)][0x0]][this[_0x286498(0x284)][0x1]]['addFluid'](new blood('Blood','',[0x0,0x0,0x0],materials[_0x286498(0x1e3)],0x0,!![],0x0));}['update'](){const _0x55c4f3=_0x1fd1d8;super[_0x55c4f3(0x160)]();const [_0x3da2b8,_0x111a6f]=this[_0x55c4f3(0x284)],_0x2effe8=newgrid[_0x3da2b8][_0x111a6f];Math[_0x55c4f3(0x222)]()>0.5&&newgrid[_0x3da2b8][_0x111a6f][_0x55c4f3(0x248)](new blood(_0x55c4f3(0x301),'',[0x0,0x0,0x0],[0.5,0.1,0.1],0x0,!![],0x0)),Math[_0x55c4f3(0x222)]()>0.25&&envobjects[_0x55c4f3(0x1c6)](this);}}class explodingBarrel extends object{constructor(){const _0x2e0927=_0x1fd1d8;super(_0x2e0927(0x18c),_0x2e0927(0x19a),materials[_0x2e0927(0x141)]),this['destructable']=!![];}[_0x1fd1d8(0x231)](){const _0x447c7a=_0x1fd1d8;super['break'](),this[_0x447c7a(0x150)]();}[_0x1fd1d8(0x150)](){const _0x53e590=_0x1fd1d8,_0x41e8b2=this,[_0x45ad6f,_0x1fb6ae]=this['pos'];for(let _0x2ce452=0x1;_0x2ce452<0xa;_0x2ce452+=0x2){newgrid[_0x45ad6f][_0x1fb6ae]['addTempSource'](new lightsource(this[_0x53e590(0x284)],[0x100,0x100,0x100],[_0x2ce452,_0x2ce452*(0x6/0xa),_0x2ce452*(0x4/0xa)],0x3),0x1);}for(let _0x431030=0xa;_0x431030>0x1;_0x431030-=0x2){newgrid[_0x45ad6f][_0x1fb6ae][_0x53e590(0x140)](new lightsource(this[_0x53e590(0x284)],[0x100,0x100,0x100],[_0x431030,_0x431030*(0x6/0xa),_0x431030*(0x4/0xa)],0x3),0x1);}drawGrid(!![]),updatetraitspassive(),directions['forEach'](function(_0x45a1e5){const _0x5dfa44=_0x53e590,[_0x469860,_0x494635]=_0x45a1e5[_0x5dfa44(0xbc)]((_0x4f4e05,_0x176b9e)=>_0x4f4e05+_0x41e8b2[_0x5dfa44(0x284)][_0x176b9e]),_0x538783=newgrid[_0x469860][_0x494635],_0x13d034=_0x538783[_0x5dfa44(0xef)];_0x538783[_0x5dfa44(0x274)][_0x5dfa44(0x86)]>0x0&&_0x538783[_0x5dfa44(0x274)][_0x5dfa44(0xb8)](_0x175d11=>_0x175d11[_0x5dfa44(0x375)](0xa));rangedanimate(_0x41e8b2[_0x5dfa44(0x284)],[_0x469860,_0x494635],convertAbstoColor(_0x41e8b2[_0x5dfa44(0x97)]));if(_0x13d034&&_0x13d034[_0x5dfa44(0xd7)]!==!![])_0x13d034[_0x5dfa44(0x375)](0xa);}),adduilabel('*',_0x41e8b2[_0x53e590(0x284)],convertAbstoColor(materials[_0x53e590(0x159)]),0x0,!![],![],![],![],0x1);}}class door extends object{constructor(_0x546a63=![]){const _0x278a58=_0x1fd1d8;super(_0x278a58(0xc3),'+',materials[_0x278a58(0x141)],null,0x1,![],0x0,actions['Open']);if(Math[_0x278a58(0x222)]()>0.6)this[_0x278a58(0x371)]=!![];if(_0x546a63)this['locked']=![];else this['locked']=![];this[_0x278a58(0x207)]=0x2,this['hp']=0x2,this[_0x278a58(0x241)]=!![],this['flammable']=!![];}[_0x1fd1d8(0x339)](){const _0x23c39c=_0x1fd1d8;if(this[_0x23c39c(0x371)])return![];this[_0x23c39c(0x24d)]=null,this[_0x23c39c(0x323)]=0x0,this[_0x23c39c(0xcd)]=!![],this['movecost']=0x0,this[_0x23c39c(0x25e)]='/';}[_0x1fd1d8(0x23e)](){const _0x1e3618=_0x1fd1d8;this[_0x1e3618(0x339)]();const [_0x5767b0,_0x2e482b]=this[_0x1e3618(0x284)];newgrid[_0x5767b0][_0x2e482b][_0x1e3618(0x2b7)]();}}class Window extends object{constructor(){const _0x2d5660=_0x1fd1d8;super(_0x2d5660(0x319),'=',materials[_0x2d5660(0x141)],null,0x0,![],null);}}class Pit extends object{constructor(){super('','',null,null,0x0,![],null);}['initialize'](){const _0x102aa7=_0x1fd1d8,[_0x59795f,_0x209649]=this['pos'];newgrid[_0x59795f][_0x209649][_0x102aa7(0x1e7)]-=0x5,newgrid[_0x59795f-0x1][_0x209649]['elevation']-=0x5,newgrid[_0x59795f+0x1][_0x209649]['elevation']-=0x5,newgrid[_0x59795f][_0x209649-0x1][_0x102aa7(0x1e7)]-=0x5,newgrid[_0x59795f][_0x209649+0x1][_0x102aa7(0x1e7)]-=0x5;}}class wolfCage extends object{constructor(_0x55a454,_0x576490,_0x3cdcb5,_0x3fbf58,_0x3347ff,_0x532136,_0x15a602,_0x40fcb5,_0x3c6e1f,_0x177ce0,_0x3fe4e7){super(_0x55a454,_0x576490,_0x3cdcb5,_0x3fbf58,_0x3347ff,_0x532136,_0x15a602,_0x40fcb5,_0x3c6e1f,_0x177ce0,_0x3fe4e7);}[_0x1fd1d8(0x231)](){const _0x6acc23=_0x1fd1d8;this[_0x6acc23(0x196)](),super['break']();}[_0x1fd1d8(0x196)](){const _0x51850e=_0x1fd1d8,[_0x3780ce,_0x1a9eab]=this['pos'];newgrid[_0x3780ce][_0x1a9eab][_0x51850e(0x313)](new Wolf([_0x3780ce,_0x1a9eab]));}}class WargPost extends object{constructor(){const _0x365e06=_0x1fd1d8;super('Post',_0x365e06(0x19a),materials[_0x365e06(0x141)],null,0.25,![],null,null,null,[]);}[_0x1fd1d8(0x291)](){const _0x539036=_0x1fd1d8;super[_0x539036(0x291)]();const [_0x5c6693,_0x1b66ba]=this['pos'];this['warg']=new Warg([_0x5c6693,_0x1b66ba]);for(let _0x5efd97=0x0;_0x5efd97<0x1;_0x5efd97++){newgrid[_0x5c6693][_0x1b66ba][_0x539036(0x313)](this[_0x539036(0x139)]);}envobjects[_0x539036(0x1c6)](this);}[_0x1fd1d8(0x160)](){const _0xc08501=_0x1fd1d8;this[_0xc08501(0x179)]!==!![]&&envobjects[_0xc08501(0x1c6)](this);for(let _0x5e0979=0x0;_0x5e0979<this[_0xc08501(0x139)][_0xc08501(0x12d)][_0xc08501(0x86)];_0x5e0979++){const _0x2edb43=this[_0xc08501(0x139)][_0xc08501(0x12d)][_0x5e0979];if(_0x2edb43[_0xc08501(0x15f)]==_0xc08501(0x129)){_0x2edb43['duration']=0x1;return;}}addconditiondynamic(conditions[_0xc08501(0x129)],![],this[_0xc08501(0x139)])();}[_0x1fd1d8(0x231)](){const _0x4c0ad0=_0x1fd1d8;removecondition(this[_0x4c0ad0(0x139)],_0x4c0ad0(0x129)),super[_0x4c0ad0(0x231)]();}}class Spawning_Membrane extends object{constructor(){const _0x3194b7=_0x1fd1d8;super('Spawning\x20Membrane',_0x3194b7(0xfb),[0.5,0.5,0.5],null,0.5,![],null,null,null),this[_0x3194b7(0x1aa)]=[Goblin_Dagger,Goblin_Shortbow,Ogre,Giant][randomNumber(0x4)],this[_0x3194b7(0x2d0)]=[new lightsource(null,[0x80,0x8,0x40],[0x1,0x1,0x1],0x1)],this[_0x3194b7(0x241)]=!![],this[_0x3194b7(0x21f)]=!![];}['initialize'](){const _0x65d98=_0x1fd1d8;super[_0x65d98(0x291)]();const [_0x59577a,_0x47e843]=this['pos'];newgrid[_0x59577a][_0x47e843][_0x65d98(0x248)](new LarvalFluid()),newgrid[_0x59577a][_0x47e843][_0x65d98(0x248)](new LarvalFluid()),newgrid[_0x59577a][_0x47e843]['addFluid'](new LarvalFluid()),newgrid[_0x59577a][_0x47e843][_0x65d98(0x248)](new LarvalFluid());}[_0x1fd1d8(0x1d7)](){const _0x19f706=_0x1fd1d8;this[_0x19f706(0xe5)]=[new LarvalFluid(),new LarvalFluid(),new LarvalFluid(),new LarvalFluid(),new LarvalFluid()];}[_0x1fd1d8(0x375)](_0x48ace5){const _0x2ff0a0=_0x1fd1d8;this[_0x2ff0a0(0x1ec)]=_0x48ace5,this['break']();}[_0x1fd1d8(0x231)](){const _0x2c8840=_0x1fd1d8;this[_0x2c8840(0x124)](),super[_0x2c8840(0x231)]();}[_0x1fd1d8(0x124)](){const _0x1abf7d=_0x1fd1d8,[_0x58c67f,_0x95f1b1]=this[_0x1abf7d(0x284)],_0x17acb0=new this[(_0x1abf7d(0x1aa))]([_0x58c67f,_0x95f1b1]);_0x17acb0[_0x1abf7d(0x107)]=_0x17acb0[_0x1abf7d(0x1c1)],_0x17acb0['hp']=Math['round'](_0x17acb0['hp']/(0x4/0x3));if(Math[_0x1abf7d(0x222)]()>0.5)addconditiondynamic(conditions['Bleeding'],!![],_0x17acb0)();newgrid[_0x58c67f][_0x95f1b1][_0x1abf7d(0x313)](_0x17acb0),_0x17acb0['damage'](this[_0x1abf7d(0x1ec)]);}}class Spawning_Membrane_Special extends object{constructor(_0x44414d){const _0x1d7dfb=_0x1fd1d8;super(_0x1d7dfb(0x316),_0x1d7dfb(0xfb),[0.5,0.5,0.5],null,0.5,![],null,null,null),this['creature']=_0x44414d,this['lightsources']=[new lightsource(null,[0x80,0x8,0x40],[0x1,0x1,0x1],0x1)],this[_0x1d7dfb(0x241)]=!![],this['flammable']=!![];}['verbose'](){const _0x35668d=_0x1fd1d8,_0x2870d7=[_0x35668d(0xcf),_0x35668d(0x13c),'moderate',_0x35668d(0x1d6)],_0x1ed300=Math['max'](playercs[_0x35668d(0x86)]-0x1,0x0),_0x6e8d30=Math[_0x35668d(0x1ac)](playercs['length'],0x3),_0x1ab371=_0x35668d(0x2c5)+_0x2870d7[_0x1ed300]+_0x35668d(0x17f)+_0x2870d7[_0x6e8d30];return _0x1ab371;}[_0x1fd1d8(0x116)](){const _0x4bb8b3=_0x1fd1d8;let _0x145d82=[Deserter,Fugitive,Huntsman,Berserker,Sentinel,Ranger];for(let _0xeb4dd8=0x0;_0xeb4dd8<_0x145d82[_0x4bb8b3(0x86)];_0xeb4dd8++){for(let _0x290e0f=0x0;_0x290e0f<playercs['length'];_0x290e0f++){_0x145d82[_0xeb4dd8]&&playercs[_0x290e0f]instanceof _0x145d82[_0xeb4dd8]&&_0x145d82['splice'](_0xeb4dd8,0x1);}}if(_0x145d82[_0x4bb8b3(0x86)]>0x0)return _0x145d82[0x0];else return Prisoner;}[_0x1fd1d8(0x291)](){const _0x422101=_0x1fd1d8;super[_0x422101(0x291)]();const [_0x543374,_0x470ba5]=this['pos'];newgrid[_0x543374][_0x470ba5]['addFluid'](new LarvalFluid()),newgrid[_0x543374][_0x470ba5]['addFluid'](new LarvalFluid()),newgrid[_0x543374][_0x470ba5][_0x422101(0x248)](new LarvalFluid()),newgrid[_0x543374][_0x470ba5][_0x422101(0x248)](new LarvalFluid());}['addRemnants'](){const _0x2b5bb0=_0x1fd1d8;this[_0x2b5bb0(0xe5)]=[new LarvalFluid(),new LarvalFluid(),new LarvalFluid(),new LarvalFluid(),new LarvalFluid()];}['damage'](_0x1dd265){const _0x4fbc53=_0x1fd1d8;this[_0x4fbc53(0x1ec)]=_0x1dd265,this[_0x4fbc53(0x231)]();}[_0x1fd1d8(0x231)](){this['freeCreature'](),super['break']();}['freeCreature'](){const _0x35f1fe=_0x1fd1d8;if(!this['creature'])this[_0x35f1fe(0x1aa)]=this[_0x35f1fe(0x116)]();const [_0x469e64,_0x313db4]=this[_0x35f1fe(0x284)],_0x184355=new this[(_0x35f1fe(0x1aa))]([_0x469e64,_0x313db4]);addconditiondynamic(conditions[_0x35f1fe(0x217)],!![],_0x184355)(),newgrid[_0x469e64][_0x313db4][_0x35f1fe(0x313)](_0x184355);}}class spikeTrap extends object{constructor(){const _0x2c40b4=_0x1fd1d8;super('Spike\x20Trap',';',materials[_0x2c40b4(0x12a)]),this[_0x2c40b4(0x241)]=!![],this['hp']=0x2,this[_0x2c40b4(0x21f)]=!![],this[_0x2c40b4(0x118)]=![],this[_0x2c40b4(0xc9)]=[0x1,0x0];}[_0x1fd1d8(0x12e)](_0x3351d0,_0x50f250,_0x398cd8){const _0x642e62=_0x1fd1d8;super[_0x642e62(0x12e)](_0x3351d0,_0x50f250,_0x398cd8);if(this[_0x642e62(0x179)]!==!![]){const [_0x4b4ee7,_0x300a6e]=this[_0x642e62(0x284)];let _0x517497=newgrid[_0x4b4ee7][_0x300a6e]['lightlevel']>0x2,_0x42a490=this[_0x642e62(0x118)]==![],_0x2bd7a6=_0x50f250['pc']==!![],_0x408fc8=chebyshevDistance(_0x50f250[_0x642e62(0x284)],[_0x4b4ee7,_0x300a6e])<=0x1;_0x517497&&_0x42a490&&_0x2bd7a6&&_0x408fc8&&(this[_0x642e62(0x27c)](),activecharacternonindex['pc']==!![]&&(activecharacternonindex[_0x642e62(0x117)]=[]));const _0x2434e8=newgrid[_0x4b4ee7][_0x300a6e][_0x642e62(0xef)];_0x2434e8!==null&&(_0x2434e8[_0x642e62(0x375)](roll(0x3,0x0)),this[_0x642e62(0x231)]());}}['reveal'](){const _0x103ace=_0x1fd1d8;adduilabel('!',this[_0x103ace(0x284)],[0x100,0x0,0x0],0x0,!![],![],![],![]),this[_0x103ace(0x25e)]=';',this[_0x103ace(0x97)]=materials['metal'],this['revealed']=!![],this['name']=_0x103ace(0x327);}[_0x1fd1d8(0x291)](){const _0x4b62f5=_0x1fd1d8;super[_0x4b62f5(0x291)]();const [_0x1330fb,_0x4677f4]=this[_0x4b62f5(0x284)];this[_0x4b62f5(0x97)]=null,this[_0x4b62f5(0x25e)]='',this[_0x4b62f5(0x15f)]='';}}class Light extends Item{constructor(_0x205372,_0x51b29c,_0x2ad2b6){super(_0x205372,_0x51b29c,_0x2ad2b6);}}class oilLamp extends Light{constructor(){const _0x34841c=_0x1fd1d8;super(_0x34841c(0x1f1),'&#9827',materials['metal']),this[_0x34841c(0x2d0)]['push'](new lightsource(null,[0x100,0x100,0x100],[0x1,0.5,0.25],0x2)),this[_0x34841c(0x241)]=!![],this[_0x34841c(0x21f)]=!![];}[_0x1fd1d8(0x231)](){const _0x38182d=_0x1fd1d8;super[_0x38182d(0x231)](),this['setFire']();}[_0x1fd1d8(0x1d7)](){const _0x453d67=_0x1fd1d8;super[_0x453d67(0x1d7)]();const [_0x4c671a,_0x39037b]=this[_0x453d67(0x284)],_0x409ff7=newgrid[_0x4c671a][_0x39037b];for(let _0x4f6178=0x0;_0x4f6178<0x1;_0x4f6178++){const _0x2c748e=new oil(_0x453d67(0x178),'',[0.75,0.75,0.75],[0.2,0.2,0.2],0x0,!![],0x1,null,null,null);_0x2c748e['destructable']=![],_0x2c748e[_0x453d67(0x26d)]=0x5,this['remnants'][_0x453d67(0x1c6)](_0x2c748e);}}[_0x1fd1d8(0xfd)](){const _0xd337c3=_0x1fd1d8,[_0x40ca04,_0x4aa2db]=this[_0xd337c3(0x284)],_0x305d5d=newgrid[_0x40ca04][_0x4aa2db];_0x305d5d['fluids'][_0xd337c3(0xb8)](_0xb655d9=>_0xb655d9['burn']());}[_0x1fd1d8(0x150)](){const _0x3bc518=_0x1fd1d8,_0x42fceb=this,[_0x5ad69b,_0x3acc25]=this[_0x3bc518(0x284)];for(let _0x1e90f9=0x1;_0x1e90f9<0xa;_0x1e90f9+=0x2){newgrid[_0x5ad69b][_0x3acc25][_0x3bc518(0x140)](new lightsource(this['pos'],[0x100,0x100,0x100],[_0x1e90f9,_0x1e90f9*(0x6/0xa),_0x1e90f9*(0x4/0xa)],0x3),0x1);}for(let _0x1b40ef=0xa;_0x1b40ef>0x1;_0x1b40ef-=0x2){newgrid[_0x5ad69b][_0x3acc25]['addTempSource'](new lightsource(this[_0x3bc518(0x284)],[0x100,0x100,0x100],[_0x1b40ef,_0x1b40ef*(0x6/0xa),_0x1b40ef*(0x4/0xa)],0x3),0x1);}drawGrid(!![]),updatetraitspassive(),directions['forEach'](function(_0x473267){const _0x48a907=_0x3bc518,[_0x4a6ff9,_0x1275be]=_0x473267[_0x48a907(0xbc)]((_0x47d7f0,_0x45b20b)=>_0x47d7f0+_0x42fceb[_0x48a907(0x284)][_0x45b20b]),_0x25e10a=newgrid[_0x4a6ff9][_0x1275be],_0x270dcf=_0x25e10a[_0x48a907(0xef)];_0x25e10a[_0x48a907(0x274)][_0x48a907(0x86)]>0x0&&_0x25e10a['objects']['forEach'](_0x52a633=>_0x52a633[_0x48a907(0x375)](0xa));rangedanimate(_0x42fceb[_0x48a907(0x284)],[_0x4a6ff9,_0x1275be],convertAbstoColor(_0x42fceb[_0x48a907(0x97)]));if(_0x270dcf&&_0x270dcf[_0x48a907(0xd7)]!==!![])_0x270dcf[_0x48a907(0x375)](0xa);}),adduilabel('*',_0x42fceb[_0x3bc518(0x284)],convertAbstoColor(materials[_0x3bc518(0x159)]),0x0,!![],![],![],![],0x1);}[_0x1fd1d8(0x291)](){const _0x279de0=_0x1fd1d8;super[_0x279de0(0x291)]();}}class Shield extends Item{constructor(){const _0x4be440=_0x1fd1d8;super(_0x4be440(0x154),_0x4be440(0x34d),materials[_0x4be440(0x141)]);}}class Torch extends Weapon{constructor(_0x1f21b1){const _0x3e58ed=_0x1fd1d8;super('Torch','|',materials['wood'],null,0x5),this[_0x3e58ed(0x343)]=!![],this[_0x3e58ed(0x2d0)]=[],this[_0x3e58ed(0x1f7)]=new lightsource([0x0,0x0],[0x100,0x100,0x100],[2.5,1.5,0x1],0x3),this[_0x3e58ed(0xfc)]();if(_0x1f21b1)this['fuel']=_0x1f21b1;this[_0x3e58ed(0x181)](0x0),this[_0x3e58ed(0x15f)]=_0x3e58ed(0x1ca)+this[_0x3e58ed(0x91)],this['throwable']=!![];const _0x1f834d=this;this['specialeffect']=function(_0x1fe77c,[_0x348119,_0x178e26]){const _0x12ad4c=_0x3e58ed,_0x5a58e2=function(){const _0x3b9548=_0x438d;if(_0x1f834d[_0x3b9548(0x343)]!==!![])return;_0x1f834d[_0x3b9548(0x181)](0xa),newgrid[_0x348119][_0x178e26][_0x3b9548(0x274)][_0x3b9548(0x86)]>0x0&&newgrid[_0x348119][_0x178e26][_0x3b9548(0x274)][0x0][_0x3b9548(0x239)]();};return _0x1fe77c[_0x12ad4c(0x1f9)]['push'](_0x5a58e2),_0x1fe77c[_0x12ad4c(0x2b9)][_0x12ad4c(0x1c6)](_0x5a58e2),_0x1fe77c;},envobjects[_0x3e58ed(0x1c6)](this);}[_0x1fd1d8(0x160)](){const _0x1f9d62=_0x1fd1d8;if(this[_0x1f9d62(0x343)]===!![])this['removeFuel'](0x1);if(this[_0x1f9d62(0x91)]>0x0)envobjects[_0x1f9d62(0x1c6)](this);}[_0x1fd1d8(0x181)](_0x3601b9=0x1){const _0x3153a3=_0x1fd1d8;this[_0x3153a3(0x91)]-=_0x3601b9,this[_0x3153a3(0x15f)]='Torch\x20'+this[_0x3153a3(0x91)];if(this[_0x3153a3(0x91)]<=0x0)this['extinguish']();else this[_0x3153a3(0x91)]<0x64&&(this['baselightsource']['lightpref']=[1.875,1.135,0.75],this[_0x3153a3(0x1f7)]['radiance']=0x2,this['updatelight']());}['updatelight'](){const _0x4175af=_0x1fd1d8;if(this[_0x4175af(0x343)]===!![])this[_0x4175af(0x2d0)][0x0]=this[_0x4175af(0x1f7)];if(this['lit']===![])this[_0x4175af(0x2d0)]=[];}[_0x1fd1d8(0x195)](){const _0x52f9e1=_0x1fd1d8;this[_0x52f9e1(0x2d0)]=[],this[_0x52f9e1(0x83)]=_0x52f9e1(0xb2),this['name']=this[_0x52f9e1(0x83)],this[_0x52f9e1(0x343)]=![];}[_0x1fd1d8(0x19d)](){const _0x199c36=_0x1fd1d8;this[_0x199c36(0x343)]==!![]&&(this[_0x199c36(0x181)](0x5),this['lit']=![]),this[_0x199c36(0xfc)]();}['drop'](){const _0x3a86fb=_0x1fd1d8;this['removeFuel'](0x5),this[_0x3a86fb(0xfc)]();}[_0x1fd1d8(0x315)](){const _0x29d778=_0x1fd1d8;this['fuel']>0x0&&(this[_0x29d778(0x343)]=!![]),this[_0x29d778(0xfc)]();}}class Sarcophagus extends object{constructor(){const _0x34b06c=_0x1fd1d8;super(_0x34b06c(0x223),'I',materials[_0x34b06c(0xa0)],null,0.5,![]),this[_0x34b06c(0x241)]=!![];}[_0x1fd1d8(0x231)](){const _0x2482b8=_0x1fd1d8,[_0x156fc4,_0x3a261a]=this[_0x2482b8(0x284)];let _0x2954d0;if(Math['random']()>0.66)Math['random']()<0.5?Math[_0x2482b8(0x222)]()<0.5?_0x2954d0=new Longsword():_0x2954d0=new Battleaxe():_0x2954d0=new Halberd();else{if(Math[_0x2482b8(0x222)]()>0.5){if(Math[_0x2482b8(0x222)]()<0.5)_0x2954d0=new Shortsword();else _0x2954d0=new Athame();}else{if(Math[_0x2482b8(0x222)]<0.5)_0x2954d0=new Longbow();else _0x2954d0=new Recurve_Bow();}}newgrid[_0x156fc4][_0x3a261a]['addObject'](_0x2954d0),super['break']();}}class Chest extends object{constructor(){const _0x431b51=_0x1fd1d8;super(_0x431b51(0xec),_0x431b51(0x19a),materials[_0x431b51(0x141)],null,0.5,![]),this[_0x431b51(0x241)]=!![];}[_0x1fd1d8(0x231)](){const _0x407906=_0x1fd1d8,[_0x2cac0f,_0x5d0eae]=this['pos'];let _0x20a031;if(Math[_0x407906(0x222)]()>0.66)Math[_0x407906(0x222)]()<0.5?Math[_0x407906(0x222)]()<0.5?_0x20a031=new Longsword():_0x20a031=new Battleaxe():_0x20a031=new Halberd();else{if(Math[_0x407906(0x222)]()>0.5){if(Math[_0x407906(0x222)]()<0.5)_0x20a031=new Rapier();else _0x20a031=new Athame();}else _0x20a031=new Longbow();}newgrid[_0x2cac0f][_0x5d0eae]['addObject'](_0x20a031),super[_0x407906(0x231)]();}}class Rock extends object{constructor(){const _0x18a9a4=_0x1fd1d8;super('Rock',_0x18a9a4(0x19a),materials[_0x18a9a4(0xa0)],null,0.25,![],null,null),this[_0x18a9a4(0x207)]=0xa,this[_0x18a9a4(0x241)]=!![];}}class Leash extends object{constructor(){const _0x450779=_0x1fd1d8;super('Rope','*',materials[_0x450779(0x141)],null,0x0,!![],null,null),this['durability']=0xa,this[_0x450779(0x241)]=!![];}}class oilBarrel extends object{constructor(){const _0x343934=_0x1fd1d8;super(_0x343934(0x18c),_0x343934(0x19a),materials[_0x343934(0x141)]),this[_0x343934(0x241)]=!![],this[_0x343934(0x21f)]=!![];}[_0x1fd1d8(0x1d7)](){const _0x27fca9=_0x1fd1d8;super[_0x27fca9(0x1d7)]();const [_0xbae7f3,_0x37d158]=this[_0x27fca9(0x284)],_0x1395d9=newgrid[_0xbae7f3][_0x37d158];for(let _0x3e7835=0x0;_0x3e7835<0xa;_0x3e7835++){const _0x47743f=new oil(_0x27fca9(0x178),'',[0.75,0.75,0.75],[0.2,0.2,0.2],0x0,!![],0x1,null,null,null);_0x47743f[_0x27fca9(0x241)]=![],_0x47743f[_0x27fca9(0x26d)]=0x5,this[_0x27fca9(0xe5)][_0x27fca9(0x1c6)](_0x47743f);}}}class Chair extends object{constructor(){const _0x3afd54=_0x1fd1d8;super('Chair','&#X043F',materials[_0x3afd54(0x141)],null,0.1,!![],0x2),this[_0x3afd54(0x241)]=!![],this['flammable']=!![];}}class Statue extends object{constructor(){const _0x39e78f=_0x1fd1d8;super(_0x39e78f(0x23a),'&#X03A9',materials['marble'],null,0.5,![]);}}class Fortification extends object{constructor(){const _0x1c6b9d=_0x1fd1d8;super(_0x1c6b9d(0x262),'#',materials[_0x1c6b9d(0xa0)],null,0x1,![]);}}class WoodWall extends object{constructor(){const _0x40cdcd=_0x1fd1d8;super('','#',materials['wood'],null,0x1,![],null,null,[],[]),this[_0x40cdcd(0x21f)]=!![],this[_0x40cdcd(0x241)]=!![],this[_0x40cdcd(0x207)]=0x1,this['hp']=0xa,this[_0x40cdcd(0x26d)]=0x63;}}class Bed extends object{constructor(){const _0x458662=_0x1fd1d8;super(_0x458662(0x23d),'0',materials[_0x458662(0x141)],null,0.2,!![],0x2),this[_0x458662(0x241)]=!![],this[_0x458662(0x21f)]=!![];}}class Wreckage extends object{constructor(_0x128d66){const _0x3e6711=_0x1fd1d8,_0x56a852=_0x128d66[_0x3e6711(0x97)],_0x5c1442=_0x128d66[_0x3e6711(0x21f)];super('Wreckage',randomSymbol(['/','\x5c']),_0x56a852,null,0x0,!![],0x0),this[_0x3e6711(0x21f)]=_0x5c1442;}}class TallGrass extends object{constructor(){const _0x1ba68a=_0x1fd1d8;super(_0x1ba68a(0x25b),_0x1ba68a(0x285),materials['moss'],null,0.5,!![],0x1),this[_0x1ba68a(0x21f)]=!![],this[_0x1ba68a(0x241)]=!![];}}class GlowingMushroom extends object{constructor(){const _0x3b5461=_0x1fd1d8;super(_0x3b5461(0x30d),',',[0x1,0x0,0x1],null,0.25,!![],0x1),this[_0x3b5461(0x21f)]=!![],this[_0x3b5461(0x2d0)][_0x3b5461(0x1c6)](new lightsource(this[_0x3b5461(0x284)],[0x40,0x40,0x40],[0x1,0.75,0x1],0x1));}}class Table extends object{constructor(){const _0x19a7c8=_0x1fd1d8;super(_0x19a7c8(0x1df),'&#X20B8',materials[_0x19a7c8(0x141)],null,0.2,!![],0x2),this[_0x19a7c8(0x241)]=!![],this['flammable']=!![];}}class Spiderweb extends object{constructor(){const _0x354f33=_0x1fd1d8;super(_0x354f33(0xce),'*',[0.6,0.6,0.6],null,0x0,!![],0x0,null,null,null),this[_0x354f33(0xc9)]=[0x1,0x0],this[_0x354f33(0x207)]=0x2,this[_0x354f33(0x241)]=!![],this['immovable']=!![];}[_0x1fd1d8(0x12e)](_0x14e0bf,_0x53f2c7,_0x26364c){const _0x3d7a73=_0x1fd1d8;super[_0x3d7a73(0x12e)](_0x14e0bf,_0x53f2c7,_0x26364c);if(this['destroyed']!==!![]){const [_0x15eb5a,_0x360e5c]=this[_0x3d7a73(0x284)],_0x48b181=newgrid[_0x15eb5a][_0x360e5c]['character'];_0x48b181!==null&&(addconditiondynamic(conditions[_0x3d7a73(0x129)],!![],_0x48b181)(),this[_0x3d7a73(0x231)]());}}['addRemnants'](){const _0x11eb7d=_0x1fd1d8;this[_0x11eb7d(0xe5)]=[];}}class PitTrap extends object{constructor(){const _0x18fb56=_0x1fd1d8;super(_0x18fb56(0x36d),'*',[0.6,0.6,0.6],null,0x0,!![],0x0,null,null,null),this[_0x18fb56(0x207)]=0x2,this['hazards']=[0x1,0x0];}[_0x1fd1d8(0x12e)](_0x46c991,_0x4e3cba,_0x2685bd){const _0x465714=_0x1fd1d8;super[_0x465714(0x12e)](_0x46c991,_0x4e3cba,_0x2685bd);if(this[_0x465714(0x179)]!==!![]){const [_0x3ad6bc,_0x1f67ff]=this[_0x465714(0x284)];if(_0x2685bd[_0x465714(0x331)][0x0]==_0x3ad6bc&&_0x2685bd['target'][0x1]==_0x1f67ff){for(let _0x1752cd=0x0;_0x1752cd<0x4;_0x1752cd++){const [_0x43c2a7,_0xb272d8]=this[_0x465714(0x284)][_0x465714(0xbc)]((_0x4d965c,_0x3d73a9)=>_0x4d965c+cardinaldirections[_0x1752cd][_0x3d73a9]);if(newgrid[_0x43c2a7]&&newgrid[_0x43c2a7][_0xb272d8])newgrid[_0x43c2a7][_0xb272d8]['elevation']=-0x1;}newgrid[_0x3ad6bc][_0x1f67ff][_0x465714(0x1e7)]=-0x2,elevupdate(),this[_0x465714(0x231)]();}}}[_0x1fd1d8(0x1d7)](){this['remnants']=[];}[_0x1fd1d8(0x291)](){const _0x3c4ed1=_0x1fd1d8;super[_0x3c4ed1(0x291)]();const [_0x49052d,_0x46f838]=this[_0x3c4ed1(0x284)];this[_0x3c4ed1(0x97)]=newgrid[_0x49052d][_0x46f838][_0x3c4ed1(0x1ad)],this[_0x3c4ed1(0x25e)]='',this['name']='';}}class PitTrapBig extends object{constructor(){const _0x3d8751=_0x1fd1d8;super(_0x3d8751(0x36d),'*',[0.6,0.6,0.6],null,0x0,!![],0x0,null,null,null),this[_0x3d8751(0x207)]=0x2,this[_0x3d8751(0xc9)]=[0x1,0x0];}[_0x1fd1d8(0x12e)](_0x55e03c,_0x5e06ae,_0x14d5fb){const _0x1e65df=_0x1fd1d8;super[_0x1e65df(0x12e)](_0x55e03c,_0x5e06ae,_0x14d5fb);if(this[_0x1e65df(0x179)]!==!![]){const [_0x18df4d,_0x3989a2]=this[_0x1e65df(0x284)],[_0x5be8d3,_0x3b3a5b]=this['pos'];if(_0x14d5fb[_0x1e65df(0x331)][0x0]==_0x18df4d&&_0x14d5fb['target'][0x1]==_0x3989a2){for(let _0x480981=0x0;_0x480981<directionsextra[_0x1e65df(0x86)];_0x480981++){const [_0x5e7c8b,_0x1c4428]=this[_0x1e65df(0x284)]['map']((_0x3b239f,_0x54ee03)=>_0x3b239f+directionsextra[_0x480981][_0x54ee03]);if(newgrid[_0x5e7c8b]&&newgrid[_0x5e7c8b][_0x1c4428])newgrid[_0x5e7c8b][_0x1c4428][_0x1e65df(0x1e7)]=-0x2;if(chebyshevDistance([_0x5e7c8b,_0x1c4428],[_0x5be8d3,_0x3b3a5b])>0x1)newgrid[_0x5e7c8b][_0x1c4428][_0x1e65df(0x1e7)]=-0x1;}newgrid[_0x18df4d][_0x3989a2][_0x1e65df(0x1e7)]=-0x2,elevupdate(),this[_0x1e65df(0x231)]();}}}[_0x1fd1d8(0x1d7)](){const _0x1e6344=_0x1fd1d8;this[_0x1e6344(0xe5)]=[];}['initialize'](){const _0x166a58=_0x1fd1d8;super['initialize']();const [_0x1c4672,_0x7ba011]=this['pos'];this['absorbtion']=newgrid[_0x1c4672][_0x7ba011][_0x166a58(0x1ad)],this[_0x166a58(0x25e)]='',this[_0x166a58(0x15f)]='';}}class fluid extends object{constructor(_0x350e07,_0x433404,_0x4331cb,_0x1e3770,_0x136778,_0x5f194a,_0x28ffa1,_0x1dbc63,_0x22c580,_0x13bae4,_0x5efa1d){super(_0x350e07,_0x433404,_0x4331cb,_0x1e3770,_0x136778,_0x5f194a,_0x28ffa1,_0x1dbc63,_0x22c580,_0x13bae4,_0x5efa1d);}[_0x1fd1d8(0x231)](){const _0x220782=_0x1fd1d8,[_0x1ff4e9,_0x2407a8]=this['pos'],_0x26731f=this;newgrid[_0x1ff4e9][_0x2407a8][_0x220782(0x32f)]=newgrid[_0x1ff4e9][_0x2407a8][_0x220782(0x32f)][_0x220782(0x198)](_0x4f4b10=>_0x4f4b10[_0x220782(0x83)]!==_0x26731f['basename']),this['destroyed']=!![];}}class liquid extends fluid{constructor(_0x2a88fa,_0x332bf5,_0x5d7c5e,_0x851cd2,_0x36ac11,_0x14e715,_0x2e4b78,_0x16afda,_0x11ba11,_0x18af20,_0x1b024c){super(_0x2a88fa,_0x332bf5,_0x5d7c5e,_0x851cd2,_0x36ac11,_0x14e715,_0x2e4b78,_0x16afda,_0x11ba11,_0x18af20,_0x1b024c);}}class oil extends liquid{constructor(_0x4668e3,_0x2f460d,_0x5be217,_0x219cfe,_0xba6ec4,_0x295479,_0x5d5d2a,_0x1fad16,_0x1e216c,_0x299425,_0x348d6b){const _0x54d133=_0x1fd1d8;super('oil','',[0.75,0.75,0.75],[0.2,0.2,0.2],0x0,!![],0x1,null,null,null),this[_0x54d133(0x21f)]=!![];}[_0x1fd1d8(0x239)](){const _0x3e29e3=_0x1fd1d8;if(this[_0x3e29e3(0x2cd)]||this[_0x3e29e3(0x336)])return;super[_0x3e29e3(0x239)](),this[_0x3e29e3(0x2cb)]();}}class Water extends liquid{constructor(){const _0x38ffa6=_0x1fd1d8;super(_0x38ffa6(0x88),'~',materials[_0x38ffa6(0x2a7)],materials['water'],0x0,!![],0x1,null,null),this['flammable']=![],this['destructable']=![];}}class LarvalFluid extends liquid{constructor(){const _0x3b1783=_0x1fd1d8;super(_0x3b1783(0x28d),'~',null,[0.5,0.5,0.5],0x0,!![],0x1,null,null),this['flammable']=!![],this[_0x3b1783(0x241)]=![];}}class blood extends liquid{constructor(_0x54e2c1,_0x57d82f,_0x593ca3,_0x14ce06,_0x5db3ab,_0x45dbd7,_0x5d4cc6,_0xc283b2,_0x689f4a,_0x40868b,_0x3a231b){const _0x291020=_0x1fd1d8;super(_0x291020(0x301),'',[0x0,0x0,0x0],[0.5,0.1,0.1],0x0,!![],0x0),this['destructable']=![],this[_0x291020(0x21f)]=![];}}class Caltrops extends object{constructor(){const _0x3cdcc5=_0x1fd1d8;super(_0x3cdcc5(0xc2),'%',materials[_0x3cdcc5(0x12a)]),this[_0x3cdcc5(0xc9)]=[0x1,0x0],this[_0x3cdcc5(0x207)]=0x2;}['react'](_0x240fec,_0x31587f,_0x5af1e9){const _0x414b1c=_0x1fd1d8;if(this[_0x414b1c(0x179)]!==!![]){const [_0x26d7eb,_0x59b1b9]=this['pos'],_0x2b8108=newgrid[_0x26d7eb][_0x59b1b9]['character'];_0x2b8108!==null&&(_0x2b8108[_0x414b1c(0x375)](0x1),this[_0x414b1c(0x231)]());}}['addRemnants'](){this['remnants']=[];}}class gas extends fluid{constructor(_0x29cd98,_0x5e8393,_0x5741f4,_0x1bff67,_0x1b090f,_0x3776b0,_0x18b424,_0x35464c,_0x136b8a,_0x5d328e,_0x145638){const _0xc23e59=_0x1fd1d8;super(_0x29cd98,_0x5e8393,_0x5741f4,_0x1bff67,_0x1b090f,_0x3776b0,_0x18b424,_0x35464c,_0x136b8a,_0x5d328e,_0x145638),this[_0xc23e59(0x26b)]=0x1;}[_0x1fd1d8(0x2bd)](){const _0x5315d3=_0x1fd1d8;this[_0x5315d3(0x26b)]++,this[_0x5315d3(0x26b)]>0x1&&(this[_0x5315d3(0x15f)]=_0x5315d3(0x345)+this['basename']);}[_0x1fd1d8(0x29f)](){const _0x1dd005=_0x1fd1d8;if(this[_0x1dd005(0x179)])return;this[_0x1dd005(0x26b)]--;if(this[_0x1dd005(0x26b)]<0x1){const [_0x117925,_0x4a31c1]=this[_0x1dd005(0x284)],_0x33d1db=newgrid[_0x117925][_0x4a31c1];_0x33d1db[_0x1dd005(0x167)](this);}this[_0x1dd005(0x26b)]<0x2&&(this[_0x1dd005(0x15f)]=this[_0x1dd005(0x83)]);}}class smoke extends gas{constructor(){const _0x1339fe=_0x1fd1d8;super(_0x1339fe(0x158),'',[0.1,0.1,0.1],[0.2,0.2,0.2],0.3,!![],0x0,null,null,null),this[_0x1339fe(0x21f)]=![];}[_0x1fd1d8(0x160)](){const _0x287643=_0x1fd1d8;super[_0x287643(0x160)]();Math[_0x287643(0x222)]()>0.75&&this[_0x287643(0x29f)]();this['destroyed']!==!![]&&envobjects['push'](this);if(this[_0x287643(0x26b)]>0x1){this['choking']=!![],this[_0x287643(0xc9)]=[0x1,0x0];const [_0x387dd9,_0xd12182]=this[_0x287643(0x284)],_0x2319ce=newgrid[_0x387dd9][_0xd12182],_0x10be8d=_0x2319ce['character'];if(_0x10be8d)_0x10be8d[_0x287643(0x375)](0x1);Math['random']()>0.5&&(this[_0x287643(0x29f)](),newgrid[_0x387dd9][_0xd12182][_0x287643(0x248)](new smoke(_0x287643(0x158),'',[0.1,0.1,0.1],[0.5,0.5,0.5],0.1,!![],0x0,null,null,null)));}else this[_0x287643(0x33b)]=![];}[_0x1fd1d8(0x291)](){const _0x4dddfa=_0x1fd1d8;super[_0x4dddfa(0x291)](),envobjects[_0x4dddfa(0x1c6)](this);}[_0x1fd1d8(0x29f)](){const _0xaa49d0=_0x1fd1d8;super['removeThickness'](),this['thickness']<0x2&&(this['hazards']=[0x0,0x0],this[_0xaa49d0(0x33b)]=![]);}}class AttackRoll{constructor(_0x2bb9dc,_0x19830a,_0x1e6bed,_0x45fcc6,_0x2653a0){const _0x170c2e=_0x1fd1d8;this[_0x170c2e(0xef)]=_0x2bb9dc,this[_0x170c2e(0x290)]=_0x45fcc6;!(_0x45fcc6 instanceof Weapon)&&(this[_0x170c2e(0x290)]=_0x2bb9dc[_0x170c2e(0x1c1)]);this[_0x170c2e(0x24d)]=_0x2653a0;const _0x3294ec=_0x2bb9dc[_0x170c2e(0x1a0)](_0x45fcc6);!_0x45fcc6&&(_0x45fcc6=_0x2bb9dc[_0x170c2e(0x107)]);const [_0x543c32,_0xb95282]=_0x19830a;let _0x4e8182=0x0,_0x4862cd=_0x2bb9dc[_0x170c2e(0x135)](_0x45fcc6),_0x2d52e7=[],_0x490a34=[],_0x3c64b2=newgrid[_0x543c32][_0xb95282][_0x170c2e(0xef)];if(_0x3c64b2&&_0x3c64b2['pc']==_0x2bb9dc['pc'])_0x3c64b2=null;(_0x3c64b2==null||_0x3c64b2['pc']==_0x2bb9dc['pc'])&&(_0x3c64b2=newgrid[_0x543c32][_0xb95282][_0x170c2e(0x274)][0x0]);const _0x424ab5=dist(_0x1e6bed,_0x19830a,![],!![]);_0x45fcc6[_0x170c2e(0x358)]&&!_0x2bb9dc[_0x170c2e(0x110)][_0x45fcc6[_0x170c2e(0x358)]]&&_0x490a34['push'](_0x170c2e(0x360)+_0x45fcc6[_0x170c2e(0x358)]+'s');_0x45fcc6[_0x170c2e(0x2c7)]&&_0x2bb9dc[_0x170c2e(0x11d)]&&_0x2bb9dc[_0x170c2e(0x11d)][_0x170c2e(0x83)]!==_0x2bb9dc[_0x170c2e(0x1c1)][_0x170c2e(0x83)]&&_0x490a34[_0x170c2e(0x1c6)](_0x170c2e(0x184));!(_0x45fcc6 instanceof Weapon)&&_0x490a34[_0x170c2e(0x1c6)]('Not\x20a\x20Weapon');const _0x491cbb=newgrid[_0x19830a[0x0]][_0x19830a[0x1]][_0x170c2e(0x1e7)],_0xb0d044=newgrid[_0x1e6bed[0x0]][_0x1e6bed[0x1]]['elevation'],_0x403f34=[_0x19830a[0x0],_0x19830a[0x1],_0x491cbb],_0x1d6318=[_0x1e6bed[0x0],_0x1e6bed[0x1],_0xb0d044+0x1];let _0x231ed0=drawLine3D(_0x1d6318,_0x403f34);if(_0x231ed0>=0x1)_0x490a34[_0x170c2e(0x1c6)]('Something\x20in\x20the\x20way');else{if(_0x2bb9dc[_0x170c2e(0x30b)](_0x45fcc6)<_0x424ab5)_0x490a34[_0x170c2e(0x1c6)]('Out\x20of\x20range');else{if(_0x3c64b2==null){}}}if(_0x490a34[_0x170c2e(0x86)]===0x0&&_0x3c64b2){_0x45fcc6['versatile']&&_0x2bb9dc[_0x170c2e(0x11d)]&&_0x2bb9dc['offhanditem'][_0x170c2e(0x83)]==_0x2bb9dc['unarmed'][_0x170c2e(0x83)]&&(_0x3294ec[0x1]+=0x2,_0x2d52e7[_0x170c2e(0x1c6)](_0x170c2e(0x370)));if(chebyshevDistance(_0x1e6bed,[_0x543c32,_0xb95282])===0x1){const _0xe75594=[_0x543c32,_0xb95282][_0x170c2e(0xbc)]((_0x572082,_0x548a3d)=>_0x572082-(_0x1e6bed[_0x548a3d]-_0x572082)),_0x4e3ed7=newgrid[_0xe75594[0x0]][_0xe75594[0x1]];_0x4e3ed7&&_0x4e3ed7[_0x170c2e(0xef)]&&_0x4e3ed7[_0x170c2e(0xef)]['pc']==_0x2bb9dc['pc']&&_0x4e3ed7[_0x170c2e(0xef)]!==_0x2bb9dc&&(_0x2d52e7[_0x170c2e(0x1c6)](_0x170c2e(0x1a7)),_0x4e8182+=0x2);}_0x3c64b2['pc']==![]&&(!_0x3c64b2[_0x170c2e(0xb5)]||!_0x3c64b2[_0x170c2e(0xb5)][_0x2bb9dc[_0x170c2e(0x2a6)]])&&(_0x2d52e7[_0x170c2e(0x1c6)](_0x170c2e(0x153)),_0x4e8182+=0xa);_0x3c64b2['pc']==!![]&&newgrid[_0x1e6bed[0x0]][_0x1e6bed[0x1]][_0x170c2e(0x123)]==![]&&(_0x2d52e7[_0x170c2e(0x1c6)]('Unaware+50'),_0x4e8182+=0xa);_0x45fcc6[_0x170c2e(0x286)]>1.9&&_0x231ed0>0x0&&(_0x231ed0>=0.5?(_0x2d52e7[_0x170c2e(0x1c6)](_0x170c2e(0x15b)),_0x4e8182-=0x5):(_0x2d52e7[_0x170c2e(0x1c6)](_0x170c2e(0x190)),_0x4e8182-=0x2));newgrid[_0x543c32][_0xb95282][_0x170c2e(0xf8)]<0x2&&(_0x2d52e7[_0x170c2e(0x1c6)](_0x170c2e(0x95)),_0x4e8182-=0x2);dist(_0x1e6bed,_0x19830a)<_0x45fcc6['minrange']&&(_0x2d52e7['push'](_0x170c2e(0x26f)),_0x4e8182-=0x5);lackscondition(conditions[_0x170c2e(0x217)],_0x3c64b2)==![]&&(_0x2d52e7[_0x170c2e(0x1c6)](_0x170c2e(0x252)),_0x4e8182+=0x5);lackscondition(conditions['Prone'],_0x3c64b2)==![]&&(_0x2d52e7[_0x170c2e(0x1c6)](_0x170c2e(0x31b)),_0x4e8182+=0x5);lackscondition(conditions['Restrained'],_0x3c64b2)==![]&&(_0x2d52e7[_0x170c2e(0x1c6)](_0x170c2e(0x136)),_0x4e8182+=0x6);lackscondition(conditions[_0x170c2e(0xa2)],_0x3c64b2)==![]&&(_0x2d52e7[_0x170c2e(0x1c6)](_0x170c2e(0x219)),_0x4e8182+=0xa);lackscondition(conditions[_0x170c2e(0x13a)],_0x3c64b2)==![]&&(_0x2d52e7[_0x170c2e(0x1c6)]('Surprised+10'),_0x4e8182+=0x2);const _0x1c2f14=newgrid[_0x1e6bed[0x0]][_0x1e6bed[0x1]],_0xee44e8=newgrid[_0x543c32][_0xb95282],_0x1b45ac=_0x1c2f14['elevation']-_0xee44e8[_0x170c2e(0x1e7)];_0x1b45ac>0x1&&(_0x2d52e7['push'](_0x170c2e(0xb3)),_0x4e8182+=0x2),_0x1b45ac<-0x1&&(_0x2d52e7['push'](_0x170c2e(0x2c1)),_0x4e8182-=0x2);}this[_0x170c2e(0x1fc)]=_0x3c64b2;let _0x220ec6;if(_0x3c64b2)_0x220ec6=_0x3c64b2['ac'];const _0x25f30d=Math['min']((0x1-(_0x220ec6-(_0x4862cd+_0x4e8182))/0x14)*0x64,0x64),_0x36332e=_0x4862cd+_0x4e8182,_0x71f879=takeav(_0x3294ec)*(0xa+_0x36332e)/0x14;this['pos']=_0x1e6bed,this['percenthitchance']=_0x25f30d,this[_0x170c2e(0x185)]=_0x3294ec,this[_0x170c2e(0x131)]=_0x71f879,this[_0x170c2e(0x2a9)]=_0x4862cd,this[_0x170c2e(0xe0)]=_0x4e8182,this[_0x170c2e(0xee)]=_0x220ec6,this[_0x170c2e(0x2cc)]=_0x2d52e7,this[_0x170c2e(0x2fb)]=_0x490a34,this[_0x170c2e(0x1f9)]=[],this['aftereffects']=[];if(_0x45fcc6[_0x170c2e(0x1f9)])this['onhiteffects']=_0x45fcc6[_0x170c2e(0x1f9)][_0x170c2e(0x169)]();this['onmisseffects']=[];if(_0x45fcc6['onmisseffects'])this[_0x170c2e(0x2b9)]=_0x45fcc6[_0x170c2e(0x2b9)]['slice']();if(_0x45fcc6[_0x170c2e(0x98)]==!![]&&_0x424ab5>1.9){const _0x35decb=()=>_0x2bb9dc[_0x170c2e(0x2b1)](_0x45fcc6);this['onhiteffects'][_0x170c2e(0x1c6)](_0x35decb),this[_0x170c2e(0x2b9)]['push'](_0x35decb);const _0x3daf4a=()=>{const _0x1bacc8=_0x170c2e;let _0x858e16=newgrid[_0x543c32][_0xb95282],[_0x2c66a9,_0x31a33c]=[_0x543c32,_0xb95282];const [_0x28d790,_0x23450f]=_0x1e6bed,[_0x2ebd3a,_0xf17589]=[_0x543c32-_0x28d790,_0xb95282-_0x23450f];while(_0x858e16[_0x1bacc8(0xcd)]==![]&&_0x858e16[_0x1bacc8(0xe4)]==![]){_0x858e16=newgrid[_0x2c66a9][_0x31a33c],Math[_0x1bacc8(0x1be)](_0x2ebd3a)>0x0&&(_0x2c66a9-=Math[_0x1bacc8(0x364)](_0x2ebd3a)),Math[_0x1bacc8(0x1be)](_0xf17589)>0x0&&(_0x31a33c-=Math[_0x1bacc8(0x364)](_0xf17589));}if(_0x45fcc6['number']>0x0)_0x858e16['addObject'](new _0x45fcc6[(_0x1bacc8(0x100))]());else _0x45fcc6['number']=0x1,_0x858e16[_0x1bacc8(0x29b)](_0x45fcc6);};this[_0x170c2e(0x1f9)][_0x170c2e(0x1c6)](_0x3daf4a),this[_0x170c2e(0x2b9)][_0x170c2e(0x1c6)](_0x3daf4a);}if(_0x45fcc6[_0x170c2e(0x1a9)]==!![]){const _0x5bdbe9=()=>_0x2bb9dc['removeItem'](_0x45fcc6);this['onhiteffects'][_0x170c2e(0x1c6)](_0x5bdbe9),this[_0x170c2e(0x2b9)][_0x170c2e(0x1c6)](_0x5bdbe9);}if(_0x45fcc6[_0x170c2e(0x358)]){const _0x581808=[()=>_0x2bb9dc[_0x170c2e(0x328)](_0x45fcc6[_0x170c2e(0x358)])];this[_0x170c2e(0x1f9)][_0x170c2e(0x1c6)](..._0x581808),this[_0x170c2e(0x2b9)][_0x170c2e(0x1c6)](..._0x581808);}}}function attackfunc(_0x2ed67e=![],_0x58a799=null,_0x56f6ce){const _0x524ce5=_0x1fd1d8;!_0x58a799&&(_0x58a799=this[_0x524ce5(0xef)][_0x524ce5(0x107)]);let _0x513f58=_0x47ed61=>_0x47ed61;if(this['character'][_0x524ce5(0x321)]!=null)_0x513f58=this[_0x524ce5(0xef)][_0x524ce5(0x321)];if(_0x2ed67e==!![]){let _0x2e72a5=_0x513f58(new AttackRoll(this['character'],this[_0x524ce5(0x331)],this['pos'],_0x58a799,this),this[_0x524ce5(0x331)]);if(_0x58a799[_0x524ce5(0x263)]!=null)_0x2e72a5=_0x58a799[_0x524ce5(0x263)](_0x2e72a5,this['target']);return _0x2e72a5;}const [_0x4b1354,_0x1d9b2a]=this[_0x524ce5(0x331)];let _0x276880=[];if(newgrid[_0x4b1354][_0x1d9b2a][_0x524ce5(0xef)]&&newgrid[_0x4b1354][_0x1d9b2a][_0x524ce5(0xef)]['pc']!==this[_0x524ce5(0xef)]['pc'])_0x276880[_0x524ce5(0x1c6)](newgrid[_0x4b1354][_0x1d9b2a][_0x524ce5(0xef)]);newgrid[_0x4b1354][_0x1d9b2a]['objects'][_0x524ce5(0x86)]&&_0x276880[_0x524ce5(0x1c6)](newgrid[_0x4b1354][_0x1d9b2a][_0x524ce5(0x274)][0x0]);let _0x5825cd=0x0;const _0x243716=_0x276880[0x0];let _0x5a7977=_0x513f58(new AttackRoll(this[_0x524ce5(0xef)],this[_0x524ce5(0x331)],this['pos'],_0x58a799,this),this[_0x524ce5(0x331)]);_0x56f6ce&&(_0x5a7977=_0x56f6ce(_0x5a7977,[_0x4b1354,_0x1d9b2a]));if(_0x58a799[_0x524ce5(0x263)]!=null)_0x5a7977=_0x58a799[_0x524ce5(0x263)](_0x5a7977,this['target']);if(_0x5a7977[_0x524ce5(0x2fb)][_0x524ce5(0x86)]!==0x0&&_0x2ed67e==![]){for(let _0x11b8b8=0x0;_0x11b8b8<_0x5a7977[_0x524ce5(0x2fb)][_0x524ce5(0x86)];_0x11b8b8++){_0x5825cd++,adduilabel(_0x5a7977['errors'][_0x11b8b8],this['character'][_0x524ce5(0x284)],[0x80,0x80,0x80],_0x5825cd,!![],![],![],![]);}return this[_0x524ce5(0xef)][_0x524ce5(0x117)]=[],![];}if(_0x5a7977[_0x524ce5(0x2fb)][_0x524ce5(0x86)]===0x0&&_0x2ed67e==![]){rangedanimate(this['character']['pos'],this['target'],convertAbstoColor(_0x58a799['absorbtion']));let _0x49d82c;if(Math[_0x524ce5(0x222)]()*0x64<_0x5a7977[_0x524ce5(0x35e)]&&_0x243716)_0x49d82c=!![];else _0x49d82c=![];_0x5a7977['prehitpermute']&&([_0x5a7977,_0x49d82c]=_0x5a7977['prehitpermute'](_0x5a7977,_0x49d82c));if(_0x49d82c){const _0x2a8255=randomNumber(_0x5a7977[_0x524ce5(0x185)][0x1]+0x1,_0x5a7977[_0x524ce5(0x185)][0x0]);for(let _0x415ec4=0x0;_0x415ec4<_0x5a7977[_0x524ce5(0x1f9)][_0x524ce5(0x86)];_0x415ec4++){_0x5a7977[_0x524ce5(0x1f9)][_0x415ec4](_0x2a8255);}_0x5825cd++,_0x243716[_0x524ce5(0x375)](_0x2a8255);for(let _0x20e1cc=0x0;_0x20e1cc<_0x5a7977[_0x524ce5(0x2fe)][_0x524ce5(0x86)];_0x20e1cc++){_0x5a7977['aftereffects'][_0x20e1cc](_0x2a8255);}if(_0x2a8255>0x0){if(_0x58a799[_0x524ce5(0x206)])this['soundeffect']=_0x58a799[_0x524ce5(0x206)];this[_0x524ce5(0x157)]=_0x524ce5(0x373);}else this[_0x524ce5(0xd9)]=soundeffects[_0x524ce5(0x1f0)],this['soundcontent']='Attack';}else{_0x5825cd++,this['soundcontent']=_0x524ce5(0x34a);if(_0x58a799[_0x524ce5(0x233)])this[_0x524ce5(0xd9)]=_0x58a799['misssound'];for(let _0x37e131=0x0;_0x37e131<_0x5a7977['onmisseffects'][_0x524ce5(0x86)];_0x37e131++){_0x5a7977[_0x524ce5(0x2b9)][_0x37e131]();}}if(!_0x243716||!(_0x243716 instanceof character))return;for(let _0x4be9f3=0x0;_0x4be9f3<_0x5a7977[_0x524ce5(0x2cc)]['length'];_0x4be9f3++){_0x5825cd++;let _0x4ff304=_0x5a7977[_0x524ce5(0x2cc)][_0x4be9f3],_0xc231b1=[0x80,0x80,0x80];for(let _0x4bb5f4=0x0;_0x4bb5f4<_0x4ff304[_0x524ce5(0x86)];_0x4bb5f4++){if(_0x4ff304[_0x524ce5(0x349)](_0x4bb5f4)=='+')_0xc231b1=[0x0,0x40,0x0];if(_0x4ff304[_0x524ce5(0x349)](_0x4bb5f4)=='-')_0xc231b1=[0x40,0x0,0x0];}_0x4ff304[_0x524ce5(0x86)]>0x5&&_0x4ff304[_0x524ce5(0x169)](0x0,0x5)==_0x524ce5(0x12e)&&(_0x4ff304=_0x4ff304['slice'](0x5,_0x4ff304[_0x524ce5(0x86)]),_0xc231b1=[0x20,0x20,0x40]),adduilabel(_0x4ff304,[_0x4b1354,_0x1d9b2a],_0xc231b1,_0x5825cd,!![],![]);}}}class Sound{constructor(_0x520aa2,_0x236c7b,_0x48cc8c,_0x1a91e8,_0x316096){const _0x9d2da7=_0x1fd1d8;this['pos']=_0x520aa2,this['volume']=_0x236c7b,this[_0x9d2da7(0x259)]=_0x48cc8c,this[_0x9d2da7(0x1d1)]=_0x1a91e8||null,this['soundeffect']=_0x316096;}}class Dwarf extends enemy{constructor(_0x52c9db){const _0x3a6bcf=_0x1fd1d8;super(_0x52c9db,_0x3a6bcf(0x183),[0x0,0x0,0x0],0x1,[0x5,0x1,0x1],![],'D',[0x80,0x80,0x80],0x64,[],[],[],null),this[_0x3a6bcf(0x249)]=[new State(_0x3a6bcf(0xc1),defaultdwarf,null,[0x0,0x1]),new State('hostile',defaultdwarf,null,[0x0,0x1]),new State(_0x3a6bcf(0x2e4),defaultdwarf,null,[0x0,0x1]),new State(_0x3a6bcf(0x272),defaultdwarf,null,[0x0,0x1])],this[_0x3a6bcf(0x18e)]=[],this[_0x3a6bcf(0x1ba)]=[moveusecase,digusecase];}}function updatecharacters(){characters=[...playercs,...nonpcs];}function updatecharactershere(){const _0x56b36c=_0x1fd1d8;nonpcshere=[],objectshere=[];for(let _0x37906d=viewportpos[0x0]-dontcaredistance;_0x37906d<=viewportpos[0x0]+dontcaredistance;_0x37906d++){for(let _0xa51e87=viewportpos[0x1]-dontcaredistance;_0xa51e87<=viewportpos[0x1]+dontcaredistance;_0xa51e87++){if(_0x37906d<0x0||_0x37906d>=mapsizey||_0xa51e87<0x0||_0xa51e87>=mapsizex)continue;newgrid[_0x37906d][_0xa51e87][_0x56b36c(0xef)]!==null&&newgrid[_0x37906d][_0xa51e87]['character']['pc']!==!![]&&nonpcshere[_0x56b36c(0x1c6)](newgrid[_0x37906d][_0xa51e87]['character']);const _0x234901=newgrid[_0x37906d][_0xa51e87][_0x56b36c(0x274)];for(let _0x49cb0f=0x0;_0x49cb0f<_0x234901[_0x56b36c(0x86)];_0x49cb0f++){const _0xbac3d=_0x234901[_0x49cb0f];objectshere[_0x56b36c(0x1c6)](_0xbac3d);}}}}function lightcheck(_0x3fa1d9,_0x5031b5){return function(){const _0x236eb4=_0x438d,[_0x5a8a2f,_0x5c46b8]=this[_0x236eb4(0xef)]['pos'];if(_0x3fa1d9==!![]){if(newgrid[_0x5a8a2f][_0x5c46b8][_0x236eb4(0xf8)]>=_0x5031b5)return!![];return![];}else{if(newgrid[_0x5a8a2f][_0x5c46b8][_0x236eb4(0xf8)]<=_0x5031b5)return!![];return![];}};}function hostileallycheck(){const _0x1240aa=_0x1fd1d8,[_0x57d57f,_0x359f64]=this[_0x1240aa(0xef)][_0x1240aa(0x284)];for(let _0x416c09=0x0;_0x416c09<nonpcshere[_0x1240aa(0x86)];_0x416c09++){const _0x348ab7=nonpcshere[_0x416c09];if(_0x348ab7[_0x1240aa(0x168)]!==_0x1240aa(0xc1)&&drawline([_0x57d57f,_0x359f64],_0x348ab7['pos'])<0x1&&(_0x57d57f!==_0x348ab7[_0x1240aa(0x284)][0x0]||_0x359f64!==_0x348ab7[_0x1240aa(0x284)][0x1]))return this['character']['target']=_0x348ab7[_0x1240aa(0x331)],console['log'](this[_0x1240aa(0xef)][_0x1240aa(0x331)]+_0x1240aa(0x9f)+_0x348ab7[_0x1240aa(0x331)]),!![];}}function hostilecheck(){}function friendlyadjacent(){const _0x1c0267=_0x1fd1d8;[y,x]=this[_0x1c0267(0xef)][_0x1c0267(0x284)];for(let _0x2ba501=y-0x1;_0x2ba501<=y+0x1;_0x2ba501++){for(let _0x149813=x-0x1;_0x149813<=x+0x1;_0x149813++){if(newgrid[_0x2ba501][_0x149813][_0x1c0267(0xef)]!==null&&(_0x2ba501!=y||_0x149813!=x)){if(newgrid[_0x2ba501][_0x149813][_0x1c0267(0x15f)]==this['character'][_0x1c0267(0x15f)])return!![];}}}return![];}function addcondition(_0x4167f0,_0x4ca86a){return function(){const _0x168460=_0x438d;let _0x2fd6dd=new condition(_0x4167f0[_0x168460(0x15f)],_0x4167f0[_0x168460(0x1d3)],_0x4167f0[_0x168460(0x8c)],_0x4167f0['duration'],_0x4167f0[_0x168460(0x170)],_0x4167f0[_0x168460(0x302)],this[_0x168460(0xef)]);if(lacksresistance(_0x2fd6dd,this[_0x168460(0xef)])==!![]&&lackscondition(_0x2fd6dd,this[_0x168460(0xef)])==!![]){this[_0x168460(0xef)][_0x168460(0x12d)][_0x168460(0x1c6)](_0x2fd6dd),this['character'][_0x168460(0x12d)][this[_0x168460(0xef)][_0x168460(0x12d)][_0x168460(0x86)]-0x1][_0x168460(0x1d3)]();if(_0x4ca86a)adduilabel(_0x2fd6dd['name'],_0x2fd6dd[_0x168460(0xef)]['pos'],[0x80,0x80,0x0],0x1,!![]);_0x2fd6dd[_0x168460(0x170)]==!![]&&this[_0x168460(0xef)][_0x168460(0xc7)][_0x168460(0x1c6)](_0x2fd6dd[_0x168460(0x15f)]),updateGrid();}};}function addconditiondynamic(_0x43ebba,_0xb0dd77,_0xebd996){return function(){const _0x1e114f=_0x438d;if(!(_0xebd996 instanceof character))return;let _0xf390b6=new condition(_0x43ebba['name'],_0x43ebba[_0x1e114f(0x1d3)],_0x43ebba['turneffect'],_0x43ebba[_0x1e114f(0x1f2)],_0x43ebba['resistance'],_0x43ebba[_0x1e114f(0x302)],_0xebd996);if(lacksresistance(_0xf390b6,_0xebd996)==!![]&&lackscondition(_0xf390b6,_0xebd996)==!![]){_0xebd996['conditions'][_0x1e114f(0x1c6)](_0xf390b6),_0xebd996[_0x1e114f(0x12d)][_0xebd996[_0x1e114f(0x12d)][_0x1e114f(0x86)]-0x1]['starteffect']();if(_0xb0dd77)adduilabel(_0xf390b6[_0x1e114f(0x15f)],_0xf390b6[_0x1e114f(0xef)][_0x1e114f(0x284)],_0xf390b6['character'][_0x1e114f(0x334)],0x1,!![],![],![]);_0xf390b6[_0x1e114f(0x170)]==!![]&&_0xebd996['condresists'][_0x1e114f(0x1c6)](_0xf390b6[_0x1e114f(0x15f)]);}};}function lacksresistance(_0x365998,_0x4857a4){const _0x5db122=_0x1fd1d8;for(const _0x1c694d of _0x4857a4[_0x5db122(0xc7)]){if(_0x1c694d==_0x365998['name'])return![];}return!![];}function lackscondition(_0x20b691,_0x5bb905){const _0x4fd3bf=_0x1fd1d8;if(!_0x5bb905[_0x4fd3bf(0x12d)])return!![];for(const _0x4dcf44 of _0x5bb905[_0x4fd3bf(0x12d)]){if(_0x4dcf44['name']==_0x20b691[_0x4fd3bf(0x15f)])return![];}return!![];}function skipturn(){const _0x2d8f19=_0x1fd1d8,[_0x32259b,_0x47f2f6]=this['character'][_0x2d8f19(0x284)];adduilabel('!',[_0x32259b,_0x47f2f6],[0x80,0x80,0x0],0x0,!![],![],![],![]),this['character']['tc']=[0x0,0x0,0x0];}function skipturnandyelp(){const _0x482fe6=_0x1fd1d8,[_0x30b4c3,_0x3ea1b1]=this[_0x482fe6(0xef)][_0x482fe6(0x284)];adduilabel('!',[_0x30b4c3,_0x3ea1b1],[0x80,0x80,0x0],0x0,!![],![],![],![]);if(this['character']['pc']!==!![]){const _0x4c6eb5=new action(_0x482fe6(0xe2),chatfunc,[0x0,0x0,0x1],0x0,this['character'][_0x482fe6(0x284)],this[_0x482fe6(0xef)],this[_0x482fe6(0xef)]['pos'],null,soundeffects[_0x482fe6(0x218)]);_0x4c6eb5[_0x482fe6(0x138)]=0xf,this[_0x482fe6(0xef)]['actionqueue']['push'](_0x4c6eb5),move(this['character']);}this[_0x482fe6(0xef)]['tc']=[0x0,0x0,0x0];}function losemove(){const _0x593434=_0x1fd1d8,[_0x206f22,_0x209923]=this[_0x593434(0xef)][_0x593434(0x284)];adduilabel('+',[_0x206f22,_0x209923],[0x80,0x80,0x0],0x0,!![],![],![],![]),this['character']['tc'][0x0]=0x0,this['character']['tc'][0x2]=0x0,this[_0x593434(0xef)]['actionqueue']=[];}function takedamage(_0x4b19c5=0x1){return function(){const _0x2b1bd8=_0x438d;this['character'][_0x2b1bd8(0x375)](_0x4b19c5);};}function damagebonus(_0x1d94ef){return function(){const _0x56b3bb=_0x438d;this[_0x56b3bb(0xef)][_0x56b3bb(0x28c)]+=_0x1d94ef,console[_0x56b3bb(0x35f)](_0x56b3bb(0x18d)+this['character'][_0x56b3bb(0x28c)]);};}function tohitbonus(_0x4363d5){return function(){const _0x1a8730=_0x438d;this[_0x1a8730(0xef)]['tohitbonus']+=_0x4363d5;};}function becomehostile(){const _0x3b85bc=_0x1fd1d8;let _0x53d4e0=null;for(let _0xa8756f=0x0;_0xa8756f<playercs[_0x3b85bc(0x86)];_0xa8756f++){if(drawline(this[_0x3b85bc(0xef)][_0x3b85bc(0x284)],playercs[_0xa8756f][_0x3b85bc(0x284)])!==![]&&playercs[_0xa8756f][_0x3b85bc(0xd7)]==![]){if(_0x53d4e0==null)_0x53d4e0=playercs[_0xa8756f];else dist(this[_0x3b85bc(0xef)]['pos'],playercs[_0xa8756f][_0x3b85bc(0x284)])<dist(this[_0x3b85bc(0xef)][_0x3b85bc(0x284)],_0x53d4e0['pos'])&&(_0x53d4e0=playercs[_0xa8756f]);}}if(_0x53d4e0==null)return;this[_0x3b85bc(0xef)]['target']=_0x53d4e0[_0x3b85bc(0x284)][_0x3b85bc(0x169)]();if(this[_0x3b85bc(0xef)]['state']==_0x3b85bc(0xc1)){}if(this[_0x3b85bc(0xef)]['state']!='agro'){}}function becomehostilelowesthp(){const _0x260535=_0x1fd1d8;let _0x25d326=null;for(let _0x5a61ee=0x0;_0x5a61ee<playercs['length'];_0x5a61ee++){if(drawline(this[_0x260535(0xef)][_0x260535(0x284)],playercs[_0x5a61ee]['pos'])!==![]&&playercs[_0x5a61ee]['dead']==![]){if(_0x25d326==null)_0x25d326=playercs[_0x5a61ee];else playercs[_0x5a61ee]['hp']<_0x25d326['hp']&&(_0x25d326=playercs[_0x5a61ee]);}}if(_0x25d326==null)return;this[_0x260535(0xef)][_0x260535(0x331)]=_0x25d326[_0x260535(0x284)][_0x260535(0x169)]();if(this[_0x260535(0xef)]['state']=='idle'){}this[_0x260535(0xef)][_0x260535(0x168)]!='agro'&&(this[_0x260535(0xef)]['state']='agro');}function movefunc(_0x3f2551=![]){const _0x1303a2=_0x1fd1d8;let _0x4deb83=this['character'];const _0x4f8633=newgrid[_0x4deb83[_0x1303a2(0x284)][0x0]][_0x4deb83['pos'][0x1]],[_0x43b218,_0x517583]=this[_0x1303a2(0x331)],_0xf9fa2a=newgrid[_0x43b218][_0x517583][_0x1303a2(0x1e7)]-_0x4f8633[_0x1303a2(0x1e7)];if(newgrid[_0x43b218][_0x517583]['traversable']!==![]&&newgrid[_0x43b218][_0x517583]['character']==null){if(_0xf9fa2a<=0x1){newgrid[_0x4deb83[_0x1303a2(0x284)][0x0]][_0x4deb83[_0x1303a2(0x284)][0x1]][_0x1303a2(0xef)]=null,_0x4deb83['pos']=[_0x43b218,_0x517583],newgrid[_0x43b218][_0x517583]['character']=this[_0x1303a2(0xef)];if(!_0x3f2551)removecondition(_0x4deb83,_0x1303a2(0x1fa));if(_0xf9fa2a<-0x1){let _0x4e0aeb=0x0,_0x57d7cd=Math[_0x1303a2(0xfa)](_0xf9fa2a/0x2)**0x2;for(let _0x503898=0x0;_0x503898<_0x57d7cd;_0x503898++){_0x4e0aeb+=randomNumber(0x3,0x1);}this[_0x1303a2(0xd9)]=soundeffects['deepthud'],this[_0x1303a2(0x138)]=0x5,addconditiondynamic(conditions[_0x1303a2(0x1fa)],!![],_0x4deb83)(),this[_0x1303a2(0xef)][_0x1303a2(0x375)](_0x4e0aeb);}}return;}else{if(newgrid[_0x43b218][_0x517583][_0x1303a2(0xcd)]!==![]&&newgrid[_0x43b218][_0x517583][_0x1303a2(0xef)]!==null){if(_0xf9fa2a<-0x1){newgrid[_0x4deb83['pos'][0x0]][_0x4deb83['pos'][0x1]][_0x1303a2(0xef)]=null,_0x4deb83[_0x1303a2(0x284)]=[_0x43b218,_0x517583],newgrid[_0x43b218][_0x517583][_0x1303a2(0x313)](this[_0x1303a2(0xef)]),removecondition(_0x4deb83,_0x1303a2(0x1fa));if(_0xf9fa2a<-0x1){let _0x33a651=0x0,_0x2132b4=Math[_0x1303a2(0xfa)](_0xf9fa2a/0x2)**0x2;for(let _0x3d6696=0x0;_0x3d6696<_0x2132b4;_0x3d6696++){_0x33a651+=randomNumber(0x3,0x1);}this[_0x1303a2(0xd9)]=soundeffects['deepthud'],this[_0x1303a2(0x138)]=0xa,addconditiondynamic(conditions['Prone'],!![],_0x4deb83)(),this['character'][_0x1303a2(0x375)](_0x33a651),newgrid[_0x43b218][_0x517583][_0x1303a2(0xef)]['damage'](_0x33a651);}return;}}}return _0x4deb83[_0x1303a2(0x117)]=[],![];}function endturnfunc(){const _0x38f5b3=_0x1fd1d8;this[_0x38f5b3(0xef)]['tc'][0x0]=0x0,this[_0x38f5b3(0xef)]['tc'][0x1]=0x0;}function digfunc(){const _0x1b9500=_0x1fd1d8,[_0x2c4b69,_0x58ec12]=this['target'];newgrid[_0x2c4b69][_0x58ec12]=new Tile(...tiletypes[_0x1b9500(0xa3)],[_0x2c4b69,_0x58ec12]);if(Math[_0x1b9500(0x222)]()>0.95)newgrid[_0x2c4b69][_0x58ec12]['addCharacter'](new Dwarf([_0x2c4b69,_0x58ec12]));}function chatfunc(){}function switchweapon(){const _0x242a68=_0x1fd1d8;char=this[_0x242a68(0xef)];const _0x5a9cbf=char[_0x242a68(0x107)];char['primaryitem']=char[_0x242a68(0x2a8)],char['secondaryitem']=_0x5a9cbf,_0x5a9cbf[_0x242a68(0x19d)](),char[_0x242a68(0x107)][_0x242a68(0x315)](),adduilabel(char[_0x242a68(0x107)][_0x242a68(0x15f)],char['pos'],char[_0x242a68(0x334)],0x1,!![],![]);if(char[_0x242a68(0x107)]['drawsound'])this[_0x242a68(0xd9)]=char[_0x242a68(0x107)][_0x242a68(0x2c4)];this[_0x242a68(0x138)]=0x1;}function switchweaponalt(){const _0x2724c5=_0x1fd1d8;char=this[_0x2724c5(0xef)];const _0x559b8f=char[_0x2724c5(0x11d)];char[_0x2724c5(0x11d)]=char[_0x2724c5(0x107)],char[_0x2724c5(0x107)]=_0x559b8f,adduilabel(char['primaryitem'][_0x2724c5(0x15f)],char[_0x2724c5(0x284)],char[_0x2724c5(0x334)],0x1,!![],![]);if(char[_0x2724c5(0x107)][_0x2724c5(0x2c4)])this[_0x2724c5(0xd9)]=char[_0x2724c5(0x107)][_0x2724c5(0x2c4)];this['loudness']=0x1;if(char[_0x2724c5(0x11d)][_0x2724c5(0x21c)]>0x1){let _0x2d82a5=new char[(_0x2724c5(0x11d))][(_0x2724c5(0x100))]();char['offhanditem'][_0x2724c5(0x21c)]--,char[_0x2724c5(0x1e9)]('offhanditem'),char[_0x2724c5(0x11d)]=_0x2d82a5;}}function getfunc(){const _0x53d818=_0x1fd1d8;char=this[_0x53d818(0xef)];const _0x7b3919=newgrid[char[_0x53d818(0x284)][0x0]][char[_0x53d818(0x284)][0x1]][_0x53d818(0x274)][_0x53d818(0x1c4)]();if(_0x7b3919[_0x53d818(0x2c4)])this[_0x53d818(0xd9)]=_0x7b3919['drawsound'];char[_0x53d818(0xf0)](_0x7b3919);}function leavefunc(){const _0x2fca90=_0x1fd1d8,_0x21f957=this['character'];_0x21f957[_0x2fca90(0x1e9)]();}function leavefuncoffhand(){const _0x304ef7=_0x1fd1d8,_0x2ded51=this[_0x304ef7(0xef)];_0x2ded51[_0x304ef7(0x361)]();}function darkattackpermute(_0x1ace03){const _0x43613c=_0x1fd1d8;let _0xc5610=_0x1ace03;for(let _0x371439=0x0;_0x371439<_0x1ace03[_0x43613c(0x2cc)][_0x43613c(0x86)];_0x371439++){_0x1ace03[_0x43613c(0x2cc)][_0x371439]=='Dim\x20Light-10'&&(_0xc5610[_0x43613c(0xe0)]+=0x4,_0xc5610[_0x43613c(0x35e)]+=0x14,_0x1ace03['modbreakdown'][_0x371439]='Dim\x20Light+10',_0xc5610[_0x43613c(0x131)]=takeav(_0xc5610[_0x43613c(0x185)])*((0xa+(_0xc5610['intrinsmod']+_0xc5610[_0x43613c(0xe0)]))/0x14));}return _0xc5610;}function sneakattackpermute(_0xce6670){const _0x2b39b7=_0x1fd1d8;if(_0xce6670[_0x2b39b7(0x290)][_0x2b39b7(0x237)]!==0x1){if(verbose)_0xce6670[_0x2b39b7(0x2cc)][_0x2b39b7(0x1c6)]('Sneak\x20attack\x20requires\x20finnesse\x20weapon');return _0xce6670;}if(_0xce6670[_0x2b39b7(0x290)]['throwable']!==!![]&&_0xce6670['weapon'][_0x2b39b7(0x286)]>1.9){if(verbose)_0xce6670[_0x2b39b7(0x2cc)][_0x2b39b7(0x1c6)](_0x2b39b7(0x19f));return _0xce6670;}if(_0xce6670[_0x2b39b7(0xef)][_0x2b39b7(0x11d)]&&_0xce6670[_0x2b39b7(0xef)][_0x2b39b7(0x11d)]['basename']!==_0xce6670[_0x2b39b7(0xef)][_0x2b39b7(0x1c1)][_0x2b39b7(0x83)]){if(verbose)_0xce6670['modbreakdown'][_0x2b39b7(0x1c6)]('Sneak\x20attack\x20requires\x20free\x20offhand');return _0xce6670;}return _0xce6670[_0x2b39b7(0x185)]=_0xce6670[_0x2b39b7(0x185)]['map'](_0x116524=>_0x116524+Math[_0x2b39b7(0x115)](0x0,_0xce6670[_0x2b39b7(0xe0)])),_0xce6670['extrinsmod']>0x0&&(_0xce6670[_0x2b39b7(0x2cc)][_0x2b39b7(0x1c6)](_0x2b39b7(0x2d9)+_0xce6670[_0x2b39b7(0xe0)]+_0x2b39b7(0x94)),_0xce6670[_0x2b39b7(0x24d)][_0x2b39b7(0x138)]=0x3),_0xce6670;}function torchbearerpermute(_0x479335){const _0x51c4d8=_0x1fd1d8,_0x57b9c4=_0x479335[_0x51c4d8(0xef)],_0x408ae1=_0x57b9c4[_0x51c4d8(0x11d)],_0x246770=_0x479335[_0x51c4d8(0x290)];if(_0x408ae1[_0x51c4d8(0x2d0)][_0x51c4d8(0x86)]>0x0&&_0x246770['versatile']==!![]||_0x246770['lightsources'][_0x51c4d8(0x86)]>0x0)return _0x479335[_0x51c4d8(0x185)][0x1]+=0x1,_0x479335[_0x51c4d8(0x2cc)][_0x51c4d8(0x1c6)]('Torchbearer+1max'),_0x479335;if(_0x408ae1[_0x51c4d8(0x2d0)]['length']==0x0){if(verbose)_0x479335[_0x51c4d8(0x2cc)][_0x51c4d8(0x1c6)](_0x51c4d8(0x14f));return _0x479335;}if(_0x246770[_0x51c4d8(0x2a4)]!==!![]){if(verbose)_0x479335[_0x51c4d8(0x2cc)][_0x51c4d8(0x1c6)]('Torchbearer\x20requires\x20versatile');return _0x479335;}return _0x479335;}function shoveattackpermute(_0x4833fb,_0x180e07){const _0xdefc39=_0x1fd1d8,_0x28ef3d=_0x4833fb[_0xdefc39(0xef)][_0xdefc39(0xde)][0x0],_0x344fce=Math[_0xdefc39(0x115)](_0x28ef3d,0x1),_0x5ce673=function(){const _0x3fd86d=_0xdefc39,[_0x1d8829,_0x3393d0]=_0x180e07;let _0x12684c=newgrid[_0x1d8829][_0x3393d0][_0x3fd86d(0xef)];const _0x4b43fb=_0x4833fb['pos'][_0x3fd86d(0x169)]();let _0x1b8534=_0x180e07[_0x3fd86d(0xbc)]((_0x3409ba,_0x1d6847)=>_0x4b43fb[_0x1d6847]-_0x3409ba);_0x1b8534=_0x1b8534['map']((_0x33dbc3,_0x1152a8)=>Math[_0x3fd86d(0x364)](_0x33dbc3));if(_0x12684c)for(let _0x342529=0x0;_0x342529<_0x344fce;_0x342529++){let _0x2ab022=_0x12684c['pos'][_0x3fd86d(0xbc)]((_0x3e2a48,_0x5d4231)=>_0x3e2a48-_0x1b8534[_0x5d4231]);while(newgrid[_0x2ab022[0x0]][_0x2ab022[0x1]][_0x3fd86d(0xe4)]==!![]){_0x1b8534=newgrid[_0x2ab022[0x0]][_0x2ab022[0x1]][_0x3fd86d(0x1de)],_0x2ab022=_0x2ab022[_0x3fd86d(0xbc)]((_0x4dedc5,_0x2e6c8c)=>_0x4dedc5-_0x1b8534[_0x2e6c8c]);}_0x12684c[_0x3fd86d(0x117)][_0x3fd86d(0x171)](new Fall(_0x2ab022,_0x12684c,_0x180e07)),move(_0x12684c);}else obj=newgrid[_0x1d8829][_0x3393d0]['objects'][0x0],obj&&(!obj[_0x3fd86d(0x133)]&&obj[_0x3fd86d(0x23e)](_0x1b8534));};return _0x4833fb[_0xdefc39(0x2cc)]['push']('Shove('+_0x344fce+')'),_0x4833fb[_0xdefc39(0x1f9)][_0xdefc39(0x1c6)](_0x5ce673),_0x4833fb;}function kickattackpermute(_0x1dfb05,_0x384956){const _0x247ba1=_0x1fd1d8,_0x3b2079=function(){const _0x591a3e=_0x438d,[_0x536e9b,_0x59eb28]=_0x384956;let _0x40c85f=newgrid[_0x536e9b][_0x59eb28][_0x591a3e(0xef)];const _0x41b689=_0x1dfb05[_0x591a3e(0x284)][_0x591a3e(0x169)]();let _0x58bd97=_0x384956['map']((_0x939f95,_0x19e340)=>_0x41b689[_0x19e340]-_0x939f95);_0x58bd97=_0x58bd97[_0x591a3e(0xbc)]((_0x35372c,_0xad5724)=>Math[_0x591a3e(0x364)](_0x35372c));if(_0x40c85f)for(let _0x23df0b=0x0;_0x23df0b<Math['max'](_0x1dfb05['character'][_0x591a3e(0xde)][0x0],0x1);_0x23df0b++){let _0x1371f1=_0x40c85f['pos'][_0x591a3e(0xbc)]((_0x285dec,_0x3e266e)=>_0x285dec-_0x58bd97[_0x3e266e]);while(newgrid[_0x1371f1[0x0]][_0x1371f1[0x1]][_0x591a3e(0xe4)]==!![]){_0x58bd97=newgrid[_0x1371f1[0x0]][_0x1371f1[0x1]][_0x591a3e(0x1de)],_0x1371f1=_0x1371f1[_0x591a3e(0xbc)]((_0x2abf37,_0x3ed9a3)=>_0x2abf37-_0x58bd97[_0x3ed9a3]);}_0x40c85f[_0x591a3e(0x117)][_0x591a3e(0x171)](new Fall(_0x1371f1,_0x40c85f,_0x384956)),move(_0x40c85f);}else obj=newgrid[_0x536e9b][_0x59eb28][_0x591a3e(0x274)][0x0],obj&&(!obj[_0x591a3e(0x133)]&&obj[_0x591a3e(0x23e)](_0x58bd97));};return _0x1dfb05[_0x247ba1(0x185)]=[0x0,0x0],_0x1dfb05[_0x247ba1(0x1f9)]['push'](_0x3b2079),_0x1dfb05;}function dualwieldpermute(_0x44188e,_0x343a54){const _0x5dfb5a=_0x1fd1d8;if(_0x44188e['action']['cost'][0x1]<0x1)return _0x44188e;const _0x10d6d6=_0x44188e[_0x5dfb5a(0xef)],_0x3ac22c=_0x44188e[_0x5dfb5a(0x290)],_0x1c8a8b=_0x44188e['character']['offhanditem'],[_0x2f6362,_0xc8d975]=_0x44188e[_0x5dfb5a(0xef)][_0x5dfb5a(0x284)];if(_0x1c8a8b instanceof Weapon&&!(_0x1c8a8b instanceof Unarmed)&&_0x3ac22c instanceof Weapon&&!(_0x3ac22c instanceof Unarmed)&&_0x1c8a8b[_0x5dfb5a(0x96)]==!![]){let _0x5eac33=_0x343a54[_0x5dfb5a(0x169)](),_0x1d21f0=new Offhandattack(_0x5eac33,_0x10d6d6,_0x44188e[_0x5dfb5a(0x284)]);if(_0x1d21f0[_0x5dfb5a(0xdb)](!![])[_0x5dfb5a(0x2fb)][_0x5dfb5a(0x86)]>0x0){let _0x50561a=Math[_0x5dfb5a(0xc6)](_0x1c8a8b[_0x5dfb5a(0x286)]);for(let _0x177a76=_0x2f6362-_0x50561a;_0x177a76<_0x2f6362+_0x50561a;_0x177a76++){for(let _0x13de67=_0xc8d975-_0x50561a;_0x13de67<_0xc8d975+_0x50561a;_0x13de67++){if(!newgrid[_0x177a76]||!newgrid[_0x177a76][_0x13de67])continue;if(newgrid[_0x177a76][_0x13de67][_0x5dfb5a(0xef)]&&newgrid[_0x177a76][_0x13de67][_0x5dfb5a(0xef)]['pc']!==_0x10d6d6['pc']){(_0x177a76!==_0x343a54[0x0]||_0x13de67!==_0x343a54[0x1])&&(_0x5eac33=[_0x177a76,_0x13de67]);let _0x5cdf3a=new Offhandattack(_0x5eac33,_0x10d6d6,_0x44188e[_0x5dfb5a(0x284)]),_0x20d54f=_0x5cdf3a[_0x5dfb5a(0xdb)](!![]);_0x20d54f['errors'][_0x5dfb5a(0x86)]==0x0&&(_0x1d21f0=_0x5cdf3a);}}}}const _0xdf252e=function(_0x3fab63){const _0x33bf1c=_0x5dfb5a,_0xb92fa1=newgrid[_0x343a54[0x0]][_0x343a54[0x1]][_0x33bf1c(0xef)];let _0x59e5e3=_0x343a54['slice'](),_0x5395e6=new Offhandattack(_0x59e5e3,_0x10d6d6,_0x44188e[_0x33bf1c(0x284)]),_0xc9e49a=_0x5395e6[_0x33bf1c(0xdb)](!![])[_0x33bf1c(0x131)];if(!_0xb92fa1)_0xc9e49a=0x0;if(!_0xb92fa1||_0x5395e6[_0x33bf1c(0xdb)](!![])['errors']['length']>0x0){_0xc9e49a=0x0;let _0x55c4cb=Math[_0x33bf1c(0xc6)](_0x1c8a8b[_0x33bf1c(0x286)]);for(let _0x43e77f=_0x2f6362-_0x55c4cb;_0x43e77f<_0x2f6362+_0x55c4cb;_0x43e77f++){for(let _0x387591=_0xc8d975-_0x55c4cb;_0x387591<_0xc8d975+_0x55c4cb;_0x387591++){if(!newgrid[_0x43e77f]||!newgrid[_0x43e77f][_0x387591])continue;if(newgrid[_0x43e77f][_0x387591]['character']&&newgrid[_0x43e77f][_0x387591][_0x33bf1c(0xef)]['pc']!==_0x10d6d6['pc']){if(_0x43e77f!==_0x343a54[0x0]||_0x387591!==_0x343a54[0x1]){_0x59e5e3=[_0x43e77f,_0x387591];let _0x3992bb=new Offhandattack(_0x59e5e3,_0x10d6d6,_0x44188e[_0x33bf1c(0x284)]),_0x5e668e=_0x3992bb[_0x33bf1c(0xdb)](!![]);_0x5e668e[_0x33bf1c(0x2fb)][_0x33bf1c(0x86)]==0x0&&(_0x5e668e[_0x33bf1c(0x131)]>=_0xc9e49a&&(_0x5395e6=_0x3992bb,_0xc9e49a=_0x5e668e[_0x33bf1c(0x131)]));}}}}}let _0x1e547e=_0x5395e6['func'](!![]);if(_0x1e547e[_0x33bf1c(0x2fb)][_0x33bf1c(0x86)]==0x0&&_0xc9e49a>0x0)_0x44188e['character'][_0x33bf1c(0x117)][_0x33bf1c(0x171)](_0x5395e6);};let _0x7ac384=_0x1d21f0['func'](!![]);_0x7ac384[_0x5dfb5a(0x2fb)][_0x5dfb5a(0x86)]==0x0&&(_0x44188e[_0x5dfb5a(0x2fe)][_0x5dfb5a(0x1c6)](_0xdf252e),_0x44188e['onmisseffects']['push'](_0xdf252e),_0x44188e[_0x5dfb5a(0x131)]+=_0x7ac384[_0x5dfb5a(0x131)],_0x44188e[_0x5dfb5a(0x2cc)][_0x5dfb5a(0x1c6)]('Offhand\x20Attack'));}return _0x44188e;}function dualwieldpluspermute(_0x49e864,_0x14ef23){const _0x3eb7ee=_0x1fd1d8;if(_0x49e864['action'][_0x3eb7ee(0x2ff)][0x1]<0x1&&!_0x49e864[_0x3eb7ee(0x24d)][_0x3eb7ee(0x120)])return _0x49e864;let _0x55de11=!![];if(_0x49e864[_0x3eb7ee(0x24d)]['specialtag']||_0x49e864['weapon'][_0x3eb7ee(0x96)]!==!![])_0x55de11=![];const _0x58f122=_0x49e864[_0x3eb7ee(0xef)],_0x52cd2f=_0x49e864[_0x3eb7ee(0x290)],_0x2040d3=_0x49e864[_0x3eb7ee(0xef)][_0x3eb7ee(0x11d)],[_0x422d8b,_0x546855]=_0x49e864[_0x3eb7ee(0xef)]['pos'];if(_0x2040d3 instanceof Weapon&&!(_0x2040d3 instanceof Unarmed)&&_0x52cd2f instanceof Weapon&&!(_0x52cd2f instanceof Unarmed)&&_0x2040d3['light']==!![]){let _0x2bde18=_0x14ef23['slice'](),_0x25fcc3=new Offhandattack(_0x2bde18,_0x58f122,_0x49e864['pos']);if(_0x25fcc3[_0x3eb7ee(0xdb)](!![])[_0x3eb7ee(0x2fb)][_0x3eb7ee(0x86)]>0x0){let _0x5f4341=Math[_0x3eb7ee(0xc6)](_0x2040d3[_0x3eb7ee(0x286)]);for(let _0x3359c4=_0x422d8b-_0x5f4341;_0x3359c4<_0x422d8b+_0x5f4341;_0x3359c4++){for(let _0x3261ce=_0x546855-_0x5f4341;_0x3261ce<_0x546855+_0x5f4341;_0x3261ce++){if(!newgrid[_0x3359c4]||!newgrid[_0x3359c4][_0x3261ce])continue;if(newgrid[_0x3359c4][_0x3261ce][_0x3eb7ee(0xef)]&&newgrid[_0x3359c4][_0x3261ce]['character']['pc']!==_0x58f122['pc']){(_0x3359c4!==_0x14ef23[0x0]||_0x3261ce!==_0x14ef23[0x1])&&(_0x2bde18=[_0x3359c4,_0x3261ce]);let _0x691c5e=new Offhandattack(_0x2bde18,_0x58f122,_0x49e864['pos']),_0x5ed955=_0x691c5e['func'](!![]);_0x5ed955[_0x3eb7ee(0x2fb)][_0x3eb7ee(0x86)]==0x0&&(_0x25fcc3=_0x691c5e);}}}}const _0x2ff9ec=function(_0x1bf4a0){const _0x492521=_0x3eb7ee,_0x58158b=newgrid[_0x14ef23[0x0]][_0x14ef23[0x1]][_0x492521(0xef)];let _0x1ab52c=new Offhandattack(_0x2bde18,_0x58f122,_0x49e864[_0x492521(0x284)]),_0x827f35=_0x1ab52c[_0x492521(0xdb)](!![])['avdamageac10'];if(!_0x58158b)_0x827f35=0x0;if(!_0x58158b||_0x1ab52c[_0x492521(0xdb)](!![])['errors'][_0x492521(0x86)]>0x0){_0x827f35=0x0;let _0x1018b9=Math[_0x492521(0xc6)](_0x2040d3[_0x492521(0x286)]);for(let _0x952310=_0x422d8b-_0x1018b9;_0x952310<_0x422d8b+_0x1018b9;_0x952310++){for(let _0x4092d1=_0x546855-_0x1018b9;_0x4092d1<_0x546855+_0x1018b9;_0x4092d1++){if(!newgrid[_0x952310]||!newgrid[_0x952310][_0x4092d1])continue;if(newgrid[_0x952310][_0x4092d1][_0x492521(0xef)]&&newgrid[_0x952310][_0x4092d1][_0x492521(0xef)]['pc']!==_0x58f122['pc']){if(_0x952310!==_0x14ef23[0x0]||_0x4092d1!==_0x14ef23[0x1]){_0x2bde18=[_0x952310,_0x4092d1];let _0x1417db=new Offhandattack(_0x2bde18,_0x58f122,_0x49e864[_0x492521(0x284)]);_0x1417db[_0x492521(0xdb)](!![])[_0x492521(0x2fb)]['length']==0x0&&(_0x1417db['func'](!![])[_0x492521(0x131)]>=_0x827f35&&(_0x1ab52c=_0x1417db,_0x827f35=_0x1ab52c[_0x492521(0xdb)](!![])[_0x492521(0x131)]));}}}}}let _0x1596c5=_0x1ab52c[_0x492521(0xdb)](!![]);if(_0x55de11==!![])_0x1ab52c[_0x492521(0x120)]=!![];if(_0x1596c5[_0x492521(0x2fb)][_0x492521(0x86)]==0x0&&_0x827f35>0x0)_0x49e864[_0x492521(0xef)][_0x492521(0x117)][_0x492521(0x1c6)](_0x1ab52c);};_0x25fcc3[_0x3eb7ee(0xdb)](!![])[_0x3eb7ee(0x2fb)][_0x3eb7ee(0x86)]==0x0&&(_0x49e864[_0x3eb7ee(0x2fe)][_0x3eb7ee(0x1c6)](_0x2ff9ec),_0x49e864[_0x3eb7ee(0x2b9)][_0x3eb7ee(0x1c6)](_0x2ff9ec),_0x49e864[_0x3eb7ee(0x2cc)]['push'](_0x3eb7ee(0x101)));}return _0x49e864;}function cleaveattack(_0x155da7,_0x3843cd){const _0x1e748b=_0x1fd1d8;let _0x421ac5=[];directions['forEach'](function(_0xc39f3a){const _0x55cfd0=_0x438d,[_0x53d140,_0x1873af]=_0xc39f3a[_0x55cfd0(0xbc)]((_0x356c03,_0xcf69e4)=>_0x356c03+_0x3843cd[_0xcf69e4]);let _0x5219dc=dist(_0x155da7[_0x55cfd0(0x284)],[_0x53d140,_0x1873af],!![])<=_0x155da7[_0x55cfd0(0x290)][_0x55cfd0(0x286)];_0x5219dc&&newgrid[_0x53d140][_0x1873af]&&newgrid[_0x53d140][_0x1873af][_0x55cfd0(0xef)]!==null&&newgrid[_0x53d140][_0x1873af][_0x55cfd0(0xef)]['pc']!==_0x155da7[_0x55cfd0(0xef)]['pc']&&_0x421ac5[_0x55cfd0(0x1c6)]([_0x53d140,_0x1873af]);});const _0xc33a79=function(){const _0x3e4b65=_0x438d;_0x421ac5[_0x3e4b65(0xb8)](function([_0x85673c,_0x48b46d]){const _0x510722=_0x3e4b65;!![]&&_0x155da7[_0x510722(0xef)][_0x510722(0x117)][_0x510722(0x171)](new Attack('Attack',attackfunc,[0x0,0x0,0x0],1.9,[_0x85673c,_0x48b46d],_0x155da7[_0x510722(0xef)],_0x155da7['character'][_0x510722(0x284)]));});};if(_0x155da7[_0x1e748b(0x24d)]['cost'][0x1]>0x0){_0x155da7[_0x1e748b(0x2fe)]['push'](_0xc33a79),_0x155da7['onmisseffects'][_0x1e748b(0x1c6)](_0xc33a79);if(_0x421ac5[_0x1e748b(0x86)]>0x0){for(let _0x2c0a52=0x0;_0x2c0a52<_0x421ac5[_0x1e748b(0x86)];_0x2c0a52++){let _0x14b451=_0x421ac5[_0x2c0a52],_0x27853a=new Attack('Attack',attackfunc,[0x0,0x0,0x0],1.9,_0x14b451,_0x155da7[_0x1e748b(0xef)],_0x155da7[_0x1e748b(0x24d)][_0x1e748b(0x284)]),_0x1a0c76=_0x27853a[_0x1e748b(0xdb)](!![]);_0x1a0c76[_0x1e748b(0x2fb)][_0x1e748b(0x86)]==0x0&&(_0x155da7[_0x1e748b(0x131)]+=_0x1a0c76[_0x1e748b(0x131)]);}_0x155da7['modbreakdown'][_0x1e748b(0x1c6)](_0x421ac5['length']+0x1+_0x1e748b(0x35d));}}else _0x155da7['modbreakdown']=[];return _0x155da7;}function cleaveattackspecial(_0x261a56,_0x335dac){const _0x3d54cd=_0x1fd1d8;if(_0x261a56['action'][_0x3d54cd(0x2ff)][0x1]<0x1&&_0x261a56[_0x3d54cd(0x24d)]['specialtag'])return _0x261a56;let _0x1c91d7=[];directions['forEach'](function(_0x140375){const _0x420a23=_0x3d54cd,[_0xdfc690,_0x18525c]=_0x140375[_0x420a23(0xbc)]((_0x4f1d93,_0x186065)=>_0x4f1d93+_0x335dac[_0x186065]);let _0x53061e=dist(_0x261a56[_0x420a23(0x284)],[_0xdfc690,_0x18525c],!![])<=_0x261a56[_0x420a23(0x290)][_0x420a23(0x286)];_0x53061e&&newgrid[_0xdfc690][_0x18525c]&&newgrid[_0xdfc690][_0x18525c][_0x420a23(0xef)]!==null&&newgrid[_0xdfc690][_0x18525c][_0x420a23(0xef)]['pc']!==_0x261a56[_0x420a23(0xef)]['pc']&&_0x1c91d7['push']([_0xdfc690,_0x18525c]);});const _0x5d6989=function(){const _0x2566f3=_0x3d54cd;_0x1c91d7[_0x2566f3(0xb8)](function([_0x385351,_0x142301]){const _0x5d8b38=_0x2566f3;if(!![]){let _0x42d04a=new Attack('Attack',attackfunc,[0x0,0x0,0x0],1.9,[_0x385351,_0x142301],_0x261a56['character'],_0x261a56[_0x5d8b38(0xef)]['pos']);_0x42d04a[_0x5d8b38(0x120)]=!![],_0x261a56[_0x5d8b38(0xef)][_0x5d8b38(0x117)][_0x5d8b38(0x171)](_0x42d04a);}});};if(!_0x261a56[_0x3d54cd(0x24d)][_0x3d54cd(0x120)]){_0x261a56[_0x3d54cd(0x2fe)]['push'](_0x5d6989),_0x261a56[_0x3d54cd(0x2b9)][_0x3d54cd(0x1c6)](_0x5d6989);if(_0x1c91d7[_0x3d54cd(0x86)]>0x0){for(let _0x5e827e=0x0;_0x5e827e<_0x1c91d7['length'];_0x5e827e++){let _0x544fae=_0x1c91d7[_0x5e827e],_0x6cb702=new Attack(_0x3d54cd(0x373),attackfunc,[0x0,0x0,0x0],1.9,_0x544fae,_0x261a56[_0x3d54cd(0xef)],_0x261a56[_0x3d54cd(0x24d)]['pos']);_0x6cb702[_0x3d54cd(0x120)]=!![];let _0x3e4a44=_0x6cb702[_0x3d54cd(0xdb)](!![]);_0x3e4a44[_0x3d54cd(0x2fb)][_0x3d54cd(0x86)]==0x0&&(console['log'](_0x261a56[_0x3d54cd(0x131)]),_0x261a56[_0x3d54cd(0x131)]+=_0x3e4a44[_0x3d54cd(0x131)],console[_0x3d54cd(0x35f)](_0x261a56['avdamageac10']));}_0x261a56[_0x3d54cd(0x2cc)][_0x3d54cd(0x1c6)](_0x1c91d7[_0x3d54cd(0x86)]+0x1+'targets');}}else _0x261a56[_0x3d54cd(0x2cc)]=[];return _0x261a56;}function extraattack(_0x3766e7,_0x386d68){const _0x882b04=_0x1fd1d8;if(_0x3766e7[_0x882b04(0x24d)][_0x882b04(0x2ff)][0x1]<0x1)return _0x3766e7;const _0x3f1a96=_0x3766e7[_0x882b04(0xef)],_0x15158e=_0x3766e7[_0x882b04(0x290)],[_0x2afc38,_0x1d01f2]=_0x3766e7['character'][_0x882b04(0x284)],_0x15d8d6=newgrid[_0x386d68[0x0]][_0x386d68[0x1]][_0x882b04(0xef)];let _0x172092=_0x386d68[_0x882b04(0x169)](),_0x1811c6=new Attack(_0x882b04(0x373),attackfunc,[0x0,0x0,0x0],_0x15158e[_0x882b04(0x286)],_0x386d68,_0x3766e7['character'],_0x3766e7[_0x882b04(0xef)][_0x882b04(0x284)]);if(_0x1811c6[_0x882b04(0xdb)](!![])[_0x882b04(0x2fb)][_0x882b04(0x86)]>0x0){let _0x3cf7e1=Math[_0x882b04(0xc6)](_0x15158e['range']);for(let _0x21fe6d=_0x2afc38-_0x3cf7e1;_0x21fe6d<_0x2afc38+_0x3cf7e1;_0x21fe6d++){for(let _0x396f53=_0x1d01f2-_0x3cf7e1;_0x396f53<_0x1d01f2+_0x3cf7e1;_0x396f53++){if(!newgrid[_0x21fe6d]||!newgrid[_0x21fe6d][_0x396f53])continue;if(newgrid[_0x21fe6d][_0x396f53][_0x882b04(0xef)]&&newgrid[_0x21fe6d][_0x396f53][_0x882b04(0xef)]['pc']!==_0x3f1a96['pc']){if(_0x21fe6d!==_0x386d68[0x0]||_0x396f53!==_0x386d68[0x1])_0x172092=[_0x21fe6d,_0x396f53];let _0x2a245b=new Attack(_0x882b04(0x373),attackfunc,[0x0,0x0,0x0],_0x15158e['range'],_0x172092,_0x3766e7['character'],_0x3766e7[_0x882b04(0xef)][_0x882b04(0x284)]);_0x1811c6['func'](!![])[_0x882b04(0x2fb)][_0x882b04(0x86)]==0x0&&(_0x1811c6=_0x2a245b);}}}}const _0x4b604b=function(_0x3c6ae0){const _0x25724d=_0x882b04,_0x5d85ed=newgrid[_0x386d68[0x0]][_0x386d68[0x1]]['character'];let _0x43c634=new Attack(_0x25724d(0x373),attackfunc,[0x0,0x0,0x0],_0x15158e[_0x25724d(0x286)],_0x386d68,_0x3766e7[_0x25724d(0xef)],_0x3766e7[_0x25724d(0xef)][_0x25724d(0x284)]),_0x11cb9c=_0x43c634[_0x25724d(0xdb)](!![])['avdamageac10'];if(!_0x5d85ed)_0x11cb9c=0x0;if(!_0x5d85ed||_0x43c634[_0x25724d(0xdb)](!![])[_0x25724d(0x2fb)]['length']>0x0){_0x11cb9c=0x0;let _0x2460e2=Math['ceil'](_0x15158e[_0x25724d(0x286)]);for(let _0x5ca76b=_0x2afc38-_0x2460e2;_0x5ca76b<_0x2afc38+_0x2460e2;_0x5ca76b++){for(let _0xc712e5=_0x1d01f2-_0x2460e2;_0xc712e5<_0x1d01f2+_0x2460e2;_0xc712e5++){if(!newgrid[_0x5ca76b]||!newgrid[_0x5ca76b][_0xc712e5])continue;if(newgrid[_0x5ca76b][_0xc712e5]['character']&&newgrid[_0x5ca76b][_0xc712e5][_0x25724d(0xef)]['pc']!==_0x3f1a96['pc']){if(_0x5ca76b!==_0x386d68[0x0]||_0xc712e5!==_0x386d68[0x1]){_0x172092=[_0x5ca76b,_0xc712e5];let _0x39a2f4=new Attack(_0x25724d(0x373),attackfunc,[0x0,0x0,0x0],_0x15158e[_0x25724d(0x286)],_0x172092,_0x3766e7[_0x25724d(0xef)],_0x3766e7[_0x25724d(0xef)][_0x25724d(0x284)]);_0x39a2f4['func'](!![])['errors'][_0x25724d(0x86)]==0x0&&(_0x39a2f4[_0x25724d(0xdb)](!![])[_0x25724d(0x131)]>=_0x11cb9c&&(_0x43c634=_0x39a2f4,_0x11cb9c=_0x43c634['func'](!![])[_0x25724d(0x131)]));}}}}}let _0x17753d=_0x43c634[_0x25724d(0xdb)](!![]);if(_0x17753d[_0x25724d(0x2fb)][_0x25724d(0x86)]==0x0&&_0x11cb9c>0x0)_0x3766e7['character'][_0x25724d(0x117)][_0x25724d(0x1c6)](_0x43c634);};return _0x1811c6[_0x882b04(0xdb)](!![])['errors'][_0x882b04(0x86)]==0x0&&(_0x3766e7[_0x882b04(0x2fe)]['push'](_0x4b604b),_0x3766e7[_0x882b04(0x2b9)]['push'](_0x4b604b),_0x3766e7[_0x882b04(0x2cc)][_0x882b04(0x1c6)](_0x882b04(0x1a2))),_0x3766e7;}function cleaveattackbig(_0x3c0019,_0x2079ac){const _0x2a76ba=_0x1fd1d8;let _0x1023a=[],_0x58a1e5=Math[_0x2a76ba(0xc6)](_0x3c0019[_0x2a76ba(0x290)][_0x2a76ba(0x286)]),[_0x1f4b57,_0x5840ea]=_0x3c0019[_0x2a76ba(0x284)];if(_0x3c0019[_0x2a76ba(0x24d)][_0x2a76ba(0x2ff)][0x1]>0x0){for(let _0x4cd83f=_0x1f4b57-_0x58a1e5;_0x4cd83f<_0x1f4b57+_0x58a1e5;_0x4cd83f++){for(let _0x110fbd=_0x5840ea-_0x58a1e5;_0x110fbd<_0x5840ea+_0x58a1e5;_0x110fbd++){if(_0x110fbd==_0x2079ac[0x1]&&_0x4cd83f==_0x2079ac[0x0])continue;let _0x243164=dist(_0x3c0019[_0x2a76ba(0x284)],[_0x4cd83f,_0x110fbd],!![])<=_0x3c0019[_0x2a76ba(0x290)][_0x2a76ba(0x286)];_0x243164&&newgrid[_0x4cd83f][_0x110fbd]&&newgrid[_0x4cd83f][_0x110fbd][_0x2a76ba(0xef)]!==null&&newgrid[_0x4cd83f][_0x110fbd][_0x2a76ba(0xef)]['pc']!==_0x3c0019[_0x2a76ba(0xef)]['pc']&&_0x1023a['push']([_0x4cd83f,_0x110fbd]);}}const _0x4ccdbc=function(){_0x1023a['forEach'](function([_0x246276,_0x5a32d1]){const _0x52c097=_0x438d;if(!![]){let _0x240e39=new Attack(_0x52c097(0x373),attackfunc,[0x0,0x0,0x0],1.9,[_0x246276,_0x5a32d1],_0x3c0019[_0x52c097(0xef)],_0x3c0019[_0x52c097(0xef)][_0x52c097(0x284)]);_0x240e39['reactable']=![];if(_0x240e39['func'](!![])[_0x52c097(0x2fb)][_0x52c097(0x86)]==0x0)_0x3c0019[_0x52c097(0xef)][_0x52c097(0x117)]['push'](_0x240e39);}});};_0x3c0019[_0x2a76ba(0x2fe)]['push'](_0x4ccdbc),_0x3c0019[_0x2a76ba(0x2b9)]['push'](_0x4ccdbc);if(_0x1023a[_0x2a76ba(0x86)]>0x0)_0x3c0019[_0x2a76ba(0x2cc)][_0x2a76ba(0x1c6)](_0x1023a[_0x2a76ba(0x86)]+0x1+_0x2a76ba(0x35d));}else _0x3c0019[_0x2a76ba(0x2cc)]=[];return _0x3c0019;}function sharpshooterpermute(_0x4c3c08){const _0x44b208=_0x1fd1d8;if(_0x4c3c08['weapon'][_0x44b208(0x286)]>1.9&&_0x4c3c08['weapon'][_0x44b208(0x1b2)]==!![]&&!_0x4c3c08[_0x44b208(0x290)][_0x44b208(0x98)]){if(!_0x4c3c08[_0x44b208(0x2cc)][_0x44b208(0x266)](_0x38db76=>_0x38db76=='Half\x20Cover-10'||_0x38db76==_0x44b208(0x15b)))_0x4c3c08[_0x44b208(0xe0)]+=0x3,_0x4c3c08['percenthitchance']+=0xf,_0x4c3c08[_0x44b208(0x185)]=_0x4c3c08[_0x44b208(0x185)][_0x44b208(0xbc)](_0x26183d=>_0x26183d+0x2),_0x4c3c08[_0x44b208(0x131)]+=0x1,_0x4c3c08[_0x44b208(0x2cc)][_0x44b208(0x1c6)](_0x44b208(0x8f));else{if(verbose)_0x4c3c08['modbreakdown']['push'](_0x44b208(0xa8));}}return _0x4c3c08;}function savageattack(_0x28a5bd,_0x18c1da){const _0x169500=_0x1fd1d8;let _0x1105a3=![],_0x1b470b=_0x28a5bd[_0x169500(0xef)];(_0x28a5bd['weapon'][_0x169500(0x2c7)]||_0x28a5bd[_0x169500(0x290)][_0x169500(0x2a4)])&&_0x1b470b[_0x169500(0x11d)][_0x169500(0x83)]==_0x1b470b[_0x169500(0x1c1)][_0x169500(0x83)]&&_0x28a5bd['weapon'][_0x169500(0x237)]==0x0?(_0x1105a3=!![],_0x28a5bd[_0x169500(0x35e)]+=_0x28a5bd[_0x169500(0x185)][0x1],_0x28a5bd[_0x169500(0x2cc)]['push']('Savage\x20Attack+'+_0x28a5bd['damagerange'][0x1])):_0x28a5bd[_0x169500(0x2cc)][_0x169500(0x1c6)](_0x169500(0x193));const _0x426b48=newgrid[_0x18c1da[0x0]][_0x18c1da[0x1]]['character'],_0x1e7744=function(_0x5ed8fe){const _0x5147eb=_0x169500;_0x426b48&&_0x426b48['hp']<=_0x5ed8fe&&(_0x28a5bd[_0x5147eb(0xef)]['tc'][0x0]+=0x2);};if(_0x1105a3)_0x28a5bd[_0x169500(0x1f9)][_0x169500(0x1c6)](_0x1e7744);return _0x28a5bd;}function rangedanimate([_0x3084e1,_0x219a34],[_0xa6de30,_0x521c3c],_0xe852b5){const _0x2fad2a=_0x1fd1d8,_0x30c9aa=linecharacter([_0x3084e1,_0x219a34],[_0xa6de30,_0x521c3c]);let _0x3d4326=bresenhamLine([_0x3084e1,_0x219a34],[_0xa6de30,_0x521c3c]);_0x3d4326[_0x2fad2a(0x1c4)](),addanimation(_0x3d4326,[_0x30c9aa],_0xe852b5);}function linecharacter([_0x3c2ab8,_0x26cb6f],[_0x159117,_0x59252f]){const _0x582756=_0x1fd1d8,_0x1d60c3=Math[_0x582756(0x1be)](_0x26cb6f-_0x59252f),_0x159bc0=Math[_0x582756(0x1be)](_0x3c2ab8-_0x159117);if(_0x1d60c3>0x2*_0x159bc0)symbol='-';else{if(_0x159bc0>0x2*_0x1d60c3)symbol='|';else Math['sign'](_0x26cb6f-_0x59252f)==Math[_0x582756(0x364)](_0x3c2ab8-_0x159117)?symbol='\x5c':symbol='/';}return symbol;}function linecharacterdiagonalpreference([_0x10ab8b,_0x402cd3],[_0x935b3e,_0x1dc75e]){const _0x6aec9b=_0x1fd1d8,_0x46dcd3=Math[_0x6aec9b(0x1be)](_0x402cd3-_0x1dc75e),_0x316669=Math[_0x6aec9b(0x1be)](_0x10ab8b-_0x935b3e);if(_0x46dcd3==0x2*_0x316669)symbol='-';else{if(_0x316669==0x2*_0x46dcd3)symbol='|';else Math[_0x6aec9b(0x364)](_0x402cd3-_0x1dc75e)==Math['sign'](_0x10ab8b-_0x935b3e)?symbol='\x5c':symbol='/';}return symbol;}function conditionattackpermute(_0x345d52){return function(_0xaff0fe,[_0x49f29a,_0x29b46b]){const _0x20ac61=_0x438d;return target=newgrid[_0x49f29a][_0x29b46b][_0x20ac61(0xef)],target&&_0xaff0fe['onhiteffects'][_0x20ac61(0x1c6)](addconditiondynamic(_0x345d52,!![],target)),_0xaff0fe;};}function grenadeattack(){const _0xb7ca4d=_0x1fd1d8,[_0x4e84d0,_0xd37c99]=this[_0xb7ca4d(0x331)],_0x43c25c=0x1,_0x4e5781=Math['floor'](_0x43c25c);for(let _0x2a1868=_0x4e84d0-_0x4e5781;_0x2a1868<=_0x4e84d0+_0x4e5781;_0x2a1868++){for(let _0x3177e3=_0xd37c99-_0x4e5781;_0x3177e3<=_0xd37c99+_0x4e5781;_0x3177e3++){newgrid[_0x2a1868][_0x3177e3][_0xb7ca4d(0xef)]!==null&&newgrid[_0x2a1868][_0x3177e3][_0xb7ca4d(0xef)]['pc']!==this[_0xb7ca4d(0xef)]['pc']&&newgrid[_0x2a1868][_0x3177e3][_0xb7ca4d(0xef)]['damage'](0xa);}}}function restfunc(){const _0x13d02b=_0x1fd1d8,_0x587b74=this[_0x13d02b(0xef)],[_0x44d643,_0x289d6f]=_0x587b74[_0x13d02b(0x284)];if(_0x587b74['pc']!==!![])return;addconditiondynamic(conditions[_0x13d02b(0x30c)],!![],_0x587b74)(),restcheck(),_0x587b74['pc']==!![]&&(_0x587b74[_0x13d02b(0x117)]=[],playerendturn());}function dashfunc(){const _0x5743fe=_0x1fd1d8;let _0x5a92fc=this['character'];_0x5a92fc['tc'][0x0]+=_0x5a92fc['tcmax'][0x0];const [_0x3e1b3b,_0x5a9c1e]=_0x5a92fc[_0x5743fe(0x284)];adduilabel(_0x5743fe(0x205),_0x5a92fc[_0x5743fe(0x284)],_0x5a92fc[_0x5743fe(0x334)],0x1,!![]);}function standgroundfunc(){const _0x4aa1a8=_0x1fd1d8;let _0x4cc9ec=this['character'];_0x4cc9ec['tc'][0x1]+=_0x4cc9ec['tcmax'][0x1];const [_0x3a1cc1,_0x52128f]=_0x4cc9ec[_0x4aa1a8(0x284)];adduilabel(_0x4aa1a8(0x279),_0x4cc9ec['pos'],_0x4cc9ec[_0x4aa1a8(0x334)],0x1,!![]);}function checkforaoomove([_0x5da75f,_0x26bdef],[_0x1fac33,_0x10a135],_0x3f9c3b){const _0x34cdac=_0x1fd1d8;for(let _0xc4a8f3=_0x5da75f-0x1;_0xc4a8f3<=_0x5da75f+0x1;_0xc4a8f3++){for(let _0x497c53=_0x26bdef-0x1;_0x497c53<=_0x26bdef+0x1;_0x497c53++){if(newgrid[_0xc4a8f3][_0x497c53]&&newgrid[_0xc4a8f3][_0x497c53][_0x34cdac(0xef)]&&newgrid[_0xc4a8f3][_0x497c53][_0x34cdac(0xef)]['pc']!==_0x3f9c3b['pc']){if(dist([_0x1fac33,_0x10a135],[_0xc4a8f3,_0x497c53])>1.8){if(newgrid[_0xc4a8f3][_0x497c53][_0x34cdac(0xef)]['tc'][0x2]>0x0)return!![];}}}}return![];}function checkforaooattack([_0x11065a,_0x59ad22],[_0x276325,_0x5c5b51],_0x2dbc49){const _0x58fb0f=_0x1fd1d8;for(let _0x13b455=_0x11065a-0x1;_0x13b455<=_0x11065a+0x1;_0x13b455++){for(let _0x57b4b6=_0x59ad22-0x1;_0x57b4b6<=_0x59ad22+0x1;_0x57b4b6++){if(newgrid[_0x13b455][_0x57b4b6]&&newgrid[_0x13b455][_0x57b4b6][_0x58fb0f(0xef)]&&newgrid[_0x13b455][_0x57b4b6][_0x58fb0f(0xef)]['pc']!==_0x2dbc49['pc']){if(dist([_0x11065a,_0x59ad22],[_0x276325,_0x5c5b51])>1.8){if(newgrid[_0x13b455][_0x57b4b6][_0x58fb0f(0xef)]['tc'][0x2]>0x0)return!![];}}}}return![];}function startoverwatch(){const _0x5bd751=_0x1fd1d8,_0x20c2ac=this['character'];if(_0x20c2ac['tc'][0x2]<0x1)return![];_0x20c2ac['tc'][0x0]=0x0,_0x20c2ac['tc'][0x1]=0x0,addconditiondynamic(conditions['Overwatch'],!![],_0x20c2ac)(),this[_0x5bd751(0xd9)]=this[_0x5bd751(0xef)][_0x5bd751(0x107)]['drawsound'];}function overwatch(_0x31dcf2,_0x39769a,_0x5f400a,_0x4232e1=![]){const _0x5d6961=_0x1fd1d8;if(lackscondition(conditions[_0x5d6961(0x30f)],_0x31dcf2))return;if(activecharacternonindex['pc']==_0x31dcf2['pc'])return;const _0x1efcda=_0x31dcf2,[_0x5a3ce5,_0x17bfaa]=_0x1efcda[_0x5d6961(0x284)],_0x278cd5=_0x1efcda[_0x5d6961(0x30b)](),_0x53c081=Math[_0x5d6961(0xfa)](_0x278cd5);for(let _0x1159d5=_0x5a3ce5-_0x53c081;_0x1159d5<=_0x5a3ce5+_0x53c081;_0x1159d5++){if(_0x1159d5<0x0||_0x1159d5>=mapsizey)continue;for(let _0x1a19ab=_0x17bfaa-_0x53c081;_0x1a19ab<=_0x17bfaa+_0x53c081;_0x1a19ab++){if(_0x1a19ab<0x0||_0x1a19ab>=mapsizex)continue;const _0x36bf3b=newgrid[_0x1159d5][_0x1a19ab]['character'];if(_0x36bf3b!==null&&_0x36bf3b['pc']!==_0x1efcda['pc']&&dist(_0x1efcda['pos'],_0x36bf3b[_0x5d6961(0x284)])<=_0x278cd5&&drawline(_0x1efcda[_0x5d6961(0x284)],_0x36bf3b[_0x5d6961(0x284)])<0x1&&(_0x1efcda['pc']==![]||newgrid[_0x1159d5][_0x1a19ab][_0x5d6961(0x123)]==!![])){if(_0x4232e1)return![];const _0x55fff7=actions[_0x5d6961(0x373)];let _0x5550dd=new Attack(..._0x55fff7,_0x278cd5,[_0x1159d5,_0x1a19ab],_0x1efcda,_0x1efcda['pos']);_0x5550dd[_0x5d6961(0x2ff)]=[0x0,0x0,0x1],canAffordAction(_0x5550dd,_0x1efcda)&&(_0x1efcda['actionqueue'][_0x5d6961(0x1c6)](_0x5550dd),move(_0x1efcda)),removecondition(_0x1efcda,_0x5d6961(0x30f));}}}}function removecondition(_0x52403c,_0x4e2c58){const _0x4459cb=_0x1fd1d8;for(let _0x3defa4=_0x52403c['conditions'][_0x4459cb(0x86)]-0x1;_0x3defa4>=0x0;_0x3defa4--){_0x52403c['conditions'][_0x3defa4][_0x4459cb(0x15f)]==_0x4e2c58&&_0x52403c[_0x4459cb(0x12d)][_0x4459cb(0x320)](_0x3defa4,0x1);}}function open(){const _0x2e7ec3=_0x1fd1d8,[_0x87bdf7,_0x48ffbe]=this[_0x2e7ec3(0x331)],_0x2cd38d=newgrid[_0x87bdf7][_0x48ffbe][_0x2e7ec3(0x274)][0x0];if(_0x2cd38d[_0x2e7ec3(0x339)]){if(_0x2cd38d[_0x2e7ec3(0x339)]()!==![])adduilabel('Open',this[_0x2e7ec3(0xef)][_0x2e7ec3(0x284)],this[_0x2e7ec3(0xef)][_0x2e7ec3(0x334)],0x1,!![],![]),newgrid[_0x87bdf7][_0x48ffbe][_0x2e7ec3(0x2b7)]();else return adduilabel(_0x2e7ec3(0x1b3),this[_0x2e7ec3(0xef)][_0x2e7ec3(0x284)],this['character']['color'],0x1,!![],![]),![];}}function interact(){const _0x4ee7ee=_0x1fd1d8,[_0x4a1dd3,_0x19b781]=this['target'],_0x51b2c3=newgrid[_0x4a1dd3][_0x19b781][_0x4ee7ee(0x274)][0x0];_0x51b2c3[_0x4ee7ee(0x22a)](this[_0x4ee7ee(0xef)]);}function canAffordAction(_0x14020d,_0x110ba2){const _0x46dddf=_0x1fd1d8;return!_0x110ba2['tc'][_0x46dddf(0x266)]((_0x3668de,_0xe89f83)=>_0x3668de<_0x14020d[_0x46dddf(0x2ff)][_0xe89f83]);}function burn(){const _0x5e28e1=this['character'];_0x5e28e1['damage'](0x1);}function objectburn(_0x5df51d){const _0x558890=_0x1fd1d8,[_0xb3a405,_0x1cb605]=_0x5df51d[_0x558890(0x284)],_0x14951e=newgrid[_0xb3a405][_0x1cb605][_0x558890(0xef)];_0x14951e!==null&&addconditiondynamic(conditions['Burning'],!![],_0x14951e)();}function generatehuntmap(_0x3d9c12,_0x19ee3d,_0x1e10c7=0x5){const _0x3bf1eb=_0x1fd1d8;class _0x4b1cdf{constructor(_0x152585,_0x3c24e6,_0x232278){const _0x3aa706=_0x438d;this[_0x3aa706(0x284)]=_0x152585[_0x3aa706(0x169)](),this[_0x3aa706(0x1af)]=_0x3c24e6,this[_0x3aa706(0xf3)]=_0x232278;}}const [_0x3e968b,_0x586ee3]=_0x3d9c12;let _0x1515be=new PriorityQueue((_0x84955e,_0x8c631d)=>_0x8c631d[_0x3bf1eb(0xf3)]-_0x84955e[_0x3bf1eb(0xf3)]);_0x1515be[_0x3bf1eb(0x261)](new _0x4b1cdf([_0x3e968b,_0x586ee3],null,0x1e));let _0x21242e={},_0x40af9e=0x0,_0x4778a7=0x0;while(!_0x1515be[_0x3bf1eb(0x127)]()&&_0x4778a7<0x1388){_0x4778a7++;const _0x2703d3=_0x1515be['dequeue']();_0x40af9e=Math[_0x3bf1eb(0x1be)](_0x2703d3['utility']-0xa);const _0x536286=_0x2703d3[_0x3bf1eb(0x284)],[_0x1c847e,_0x5b6db7]=_0x536286;if(!_0x21242e[_0x1c847e])_0x21242e[_0x1c847e]={};if(!_0x21242e[_0x1c847e][_0x5b6db7])_0x21242e[_0x1c847e][_0x5b6db7]=_0x2703d3[_0x3bf1eb(0xf3)];else continue;directions[_0x3bf1eb(0xb8)](function(_0x1c13fb){const _0x16c76d=_0x3bf1eb,_0x12491c=_0x536286[_0x16c76d(0xbc)]((_0x2b3da6,_0x292e8f)=>_0x2b3da6+_0x1c13fb[_0x292e8f]);if(newgrid[_0x12491c[0x0]]&&newgrid[_0x12491c[0x0]][_0x12491c[0x1]]!==undefined){const _0x28b550=newgrid[_0x12491c[0x0]][_0x12491c[0x1]];let _0xe479d3=_0x28b550[_0x16c76d(0x2a0)];if(_0x19ee3d[_0x16c76d(0x12b)][_0x12491c[0x0]+','+_0x12491c[0x1]]){const _0x39cfe2=_0x19ee3d[_0x16c76d(0x12b)][_0x12491c[0x0]+','+_0x12491c[0x1]],_0x51dc96=turncounter,_0x40d061=0x32,_0x28ea14=_0x51dc96-_0x39cfe2;if(chebyshevDistance(_0x12491c,_0x3d9c12)>0x1)_0xe479d3+=0xa;}if(_0x28b550[_0x16c76d(0xcd)]==!![])_0x1515be[_0x16c76d(0x261)](new _0x4b1cdf(_0x28b550['pos'],_0x2703d3,_0x2703d3[_0x16c76d(0xf3)]-_0xe479d3));else{if(!_0x21242e[_0x12491c[0x0]])_0x21242e[_0x12491c[0x0]]={};!_0x21242e[_0x12491c[0x0]][_0x12491c[0x1]]&&(_0x21242e[_0x12491c[0x0]][_0x12491c[0x1]]=-0x64);}}else{if(!_0x21242e[_0x12491c[0x0]])_0x21242e[_0x12491c[0x0]]={};!_0x21242e[_0x12491c[0x0]][_0x12491c[0x1]]&&(_0x21242e[_0x12491c[0x0]][_0x12491c[0x1]]=-0x64);}});}return _0x21242e;}function updatehuntmap(_0x3af62d,_0x3f07cc){const _0x1d66d4=_0x1fd1d8;_0x3f07cc[_0x1d66d4(0x322)][_0x1d66d4(0xb8)](function(_0x28d14e){const _0xa4c1cd=_0x1d66d4,[_0x553a8e,_0x411bf4]=_0x28d14e['pos'];newgrid[_0x553a8e][_0x411bf4][_0xa4c1cd(0xcd)]&&_0x3af62d[_0x553a8e]&&_0x3af62d[_0x553a8e][_0x411bf4]!==undefined&&(_0x3af62d[_0x553a8e][_0x411bf4]=0x0);});}function generatefleemap(_0x28b0da,_0x4fb34b,_0x3e8b25){const _0x7975da=_0x1fd1d8;class _0x459019{constructor(_0x52587f,_0x370d32,_0x283d08){const _0xea0ed=_0x438d;this[_0xea0ed(0x284)]=_0x52587f[_0xea0ed(0x169)](),this['parent']=_0x370d32,this['distance']=_0x283d08;}}let _0x3b65cb=new PriorityQueue((_0x56afb6,_0x24a2eb)=>_0x56afb6[_0x7975da(0x166)]-_0x24a2eb['distance']);Object['values'](_0x28b0da)[_0x7975da(0xb8)](function(_0xd777f3){const _0x2b44ec=_0x7975da,_0x431795=new _0x459019(_0xd777f3[_0x2b44ec(0xe9)],null,0x0);_0x3b65cb[_0x2b44ec(0x261)](_0x431795);});let _0x5bc297={};while(!_0x3b65cb['isEmpty']()){thisnode=_0x3b65cb[_0x7975da(0x105)]();if(thisnode[_0x7975da(0x166)]>_0x3e8b25)break;const _0x220f86=thisnode[_0x7975da(0x284)],[_0x501ccd,_0xb14abc]=_0x220f86;_0x5bc297[_0x501ccd+','+_0xb14abc]===undefined&&(directions[_0x7975da(0xb8)](function(_0x204ed2){const _0x36208a=_0x7975da,_0x2b988f=_0x220f86[_0x36208a(0xbc)]((_0x62f459,_0x496baa)=>_0x62f459+_0x204ed2[_0x496baa]);if(newgrid[_0x2b988f[0x0]]&&newgrid[_0x2b988f[0x0]][_0x2b988f[0x1]]){const _0x20979a=newgrid[_0x2b988f[0x0]][_0x2b988f[0x1]];_0x20979a[_0x36208a(0xcd)]==!![]&&_0x5bc297[_0x2b988f[0x0]+','+_0x2b988f[0x1]]===undefined&&_0x3b65cb[_0x36208a(0x261)](new _0x459019(_0x2b988f,thisnode,thisnode[_0x36208a(0x166)]+_0x20979a[_0x36208a(0x2a0)]));}}),_0x5bc297[_0x501ccd+','+_0xb14abc]=thisnode[_0x7975da(0x166)]);}return _0x5bc297;}function moveusecase(_0x404668,_0x1cd5bf,_0x13a555){const _0x53b3a0=_0x1fd1d8;let _0x43c5b7=_0x404668['tc'][0x0],_0x2a8996=_0x404668['tc'][0x1],_0x5cbae1=[];const [_0x55adc4,_0x2ef2c5]=_0x404668[_0x53b3a0(0x284)];for(let _0x207420=0x0;_0x207420<0x8;_0x207420++){let [_0x1e5edc,_0x405e90]=directions[_0x207420],[_0x484485,_0x1d0bc5]=[_0x55adc4+_0x1e5edc,_0x2ef2c5+_0x405e90],_0x4d329d;try{_0x4d329d=newgrid[_0x484485][_0x1d0bc5];}catch{continue;}if(!_0x4d329d||_0x4d329d[_0x53b3a0(0xef)]!==null)continue;const _0x9d1063=newgrid[_0x55adc4][_0x2ef2c5][_0x53b3a0(0x1e7)]-newgrid[_0x484485][_0x1d0bc5][_0x53b3a0(0x1e7)];if(Math[_0x53b3a0(0x1be)](_0x9d1063)>0x1)continue;if(!newgrid[_0x484485][_0x1d0bc5][_0x53b3a0(0xcd)])continue;if(newgrid[_0x484485][_0x1d0bc5][_0x53b3a0(0x274)][_0x53b3a0(0x86)]>0x0&&newgrid[_0x484485][_0x1d0bc5][_0x53b3a0(0x274)][0x0][_0x53b3a0(0x24d)]!=null){const _0x33c208=newgrid[_0x484485][_0x1d0bc5][_0x53b3a0(0x274)][0x0],_0x4ca342=_0x33c208[_0x53b3a0(0x24d)],_0x28cc52=new action(..._0x4ca342,[_0x484485,_0x1d0bc5],_0x1cd5bf,_0x404668['pos']);if(_0x28cc52['name']==_0x53b3a0(0x89)&&!_0x33c208[_0x53b3a0(0x371)]){const _0x46b35f=new ActionNode(_0x404668[_0x53b3a0(0x284)],_0x28cc52,_0x404668['tc']['slice'](),_0x404668['hazards'],_0x404668[_0x53b3a0(0x17a)],_0x404668,_0x13a555),_0xad99ac=new Move(_0x53b3a0(0x1c9),movefunc,[0x1,0x0,0x0],null,[_0x484485,_0x1d0bc5],_0x1cd5bf,_0x404668[_0x53b3a0(0x284)]),_0x115521=subtractcost(_0xad99ac,_0x404668['tc']),_0x18391c=_0xad99ac['warnings'][_0x53b3a0(0x86)];_0x5cbae1['push'](new ActionNode([_0x484485,_0x1d0bc5],_0xad99ac,_0x115521,_0x404668[_0x53b3a0(0xc9)]+_0x18391c,_0x404668[_0x53b3a0(0x17a)],_0x46b35f,_0x13a555));continue;}continue;}const _0x2635fc=new Move(_0x53b3a0(0x1c9),movefunc,[0x1,0x0,0x0],null,[_0x484485,_0x1d0bc5],_0x1cd5bf,_0x404668['pos']),_0x8252bd=subtractcost(_0x2635fc,_0x404668['tc']),_0x37f86a=_0x2635fc[_0x53b3a0(0x2b6)][_0x53b3a0(0x86)];_0x5cbae1[_0x53b3a0(0x1c6)](new ActionNode([_0x484485,_0x1d0bc5],_0x2635fc,_0x8252bd,_0x404668[_0x53b3a0(0xc9)]+_0x37f86a,_0x404668[_0x53b3a0(0x17a)],_0x404668,_0x13a555));}return _0x5cbae1;}function digusecase(_0x145b89,_0x2f356f,_0x3e8a55){const _0xd63daa=_0x1fd1d8;let _0x97bafa=_0x145b89['tc'][0x0],_0x54e758=_0x145b89['tc'][0x1],_0x4bc997=[];const [_0x4f830e,_0x1d8cf3]=_0x145b89[_0xd63daa(0x284)];for(let _0x2cd9eb=0x0;_0x2cd9eb<directions[_0xd63daa(0x86)];_0x2cd9eb++){const [_0x360111,_0x33e53e]=_0x145b89[_0xd63daa(0x284)][_0xd63daa(0xbc)]((_0x2a4dd2,_0x3400b0)=>_0x2a4dd2+directions[_0x2cd9eb][_0x3400b0]);if(newgrid[_0x360111]&&newgrid[_0x360111][_0x33e53e]&&newgrid[_0x360111][_0x33e53e][_0xd63daa(0xcd)]==![]){const _0x3f363c=new action(_0xd63daa(0x326),digfunc,[0x0,0x1,0x0,0x0],1.9,[_0x360111,_0x33e53e],_0x2f356f,[_0x4f830e,_0x1d8cf3]),_0x4e5859=subtractcost(_0x3f363c,_0x145b89['tc']),_0x27f09b=new ActionNode([_0x4f830e,_0x1d8cf3],_0x3f363c,_0x4e5859,[],0x0,_0x145b89,_0x3e8a55);_0x4bc997[_0xd63daa(0x1c6)](_0x27f09b);}}return _0x4bc997;}function stompusecase(_0x133d43,_0x3deea3,_0x2e0cf9){const _0x2689ad=_0x1fd1d8;let _0x557040=_0x133d43['tc'][0x0],_0x5bbbf4=_0x133d43['tc'][0x1],_0x3e4544=[];const [_0x491d3c,_0x1a008f]=_0x133d43[_0x2689ad(0x284)];if(_0x557040>0x0)for(let _0x26226e=_0x491d3c-0x1;_0x26226e<=_0x491d3c+0x1;_0x26226e++){if(!newgrid[_0x26226e])continue;for(let _0x465f6c=_0x1a008f-0x1;_0x465f6c<=_0x1a008f+0x1;_0x465f6c++){if(!newgrid[_0x26226e][_0x465f6c]||newgrid[_0x26226e][_0x465f6c][_0x2689ad(0xcd)]!==!![]||newgrid[_0x26226e][_0x465f6c]['character']!==null)continue;if(_0x465f6c==_0x1a008f&&_0x26226e==_0x491d3c)continue;const _0x50f93f=new Move(_0x2689ad(0x1c9),movefunc,[0x1,0x0,0x0],null,[_0x26226e,_0x465f6c],_0x3deea3,_0x133d43[_0x2689ad(0x284)]);_0x50f93f[_0x2689ad(0x138)]=0x14;const _0x51977b=subtractcost(_0x50f93f,_0x133d43['tc']),_0x5e24a0=_0x50f93f[_0x2689ad(0x2b6)][_0x2689ad(0x86)];if(_0x51977b[_0x2689ad(0x266)](_0x35fdcc=>_0x35fdcc<0x0,_0x51977b))continue;_0x3e4544['push'](new ActionNode([_0x26226e,_0x465f6c],_0x50f93f,_0x51977b,_0x133d43[_0x2689ad(0xc9)]+_0x5e24a0,_0x133d43[_0x2689ad(0x17a)],_0x133d43,_0x2e0cf9));}}return _0x3e4544;}function alertusecase(_0x5715dd,_0x50e959,_0xdfbac4){const _0x59f93e=_0x1fd1d8;let _0x1e0948=_0x5715dd['tc'][0x0],_0xdf25e=_0x5715dd['tc'][0x1],_0x10e7f5=[];const [_0x243971,_0x2d4df1]=_0x5715dd[_0x59f93e(0x284)];let _0x179c24=new action(_0x59f93e(0x243),chatfunc,[0x0,0x1,0x0],0x0,_0x5715dd[_0x59f93e(0x284)],_0x50e959,_0x5715dd[_0x59f93e(0x284)],[],soundeffects[_0x59f93e(0x218)]);_0x179c24[_0x59f93e(0x138)]=0x14;let _0x579b95=new ActionNode(_0x5715dd[_0x59f93e(0x284)],_0x179c24,subtractcost(_0x179c24,_0x5715dd['tc']),_0x5715dd[_0x59f93e(0xc9)],_0x5715dd[_0x59f93e(0x17a)],_0x5715dd,_0xdfbac4);if(_0xdf25e>=0x1)_0x10e7f5[_0x59f93e(0x1c6)](_0x579b95);return _0x10e7f5;}function chatusecase(_0x4c5652,_0x129d94,_0x59f201){const _0x606396=_0x1fd1d8;let _0x4f21e1=_0x4c5652['tc'][0x0],_0x52e59d=_0x4c5652['tc'][0x1],_0x107a5b=[];const [_0x54f468,_0xe13162]=_0x4c5652[_0x606396(0x284)];let _0x185873=new action(_0x606396(0x309),chatfunc,[0x0,0x1,0x0],0x0,_0x4c5652[_0x606396(0x284)],_0x129d94,_0x4c5652['pos'],[],soundeffects[_0x606396(0x35c)]);_0x185873[_0x606396(0x138)]=0x14;let _0x55da7a=new ActionNode(_0x4c5652[_0x606396(0x284)],_0x185873,subtractcost(_0x185873,_0x4c5652['tc']),_0x4c5652[_0x606396(0xc9)],_0x4c5652[_0x606396(0x17a)],_0x4c5652,_0x59f201);if(_0x52e59d>=0x1)_0x107a5b['push'](_0x55da7a);return _0x107a5b;}function attackusecase(_0x47a9ea,_0x268f7d,_0xbca7be){const _0x415ee1=_0x1fd1d8;let _0x2e2cc3=_0x47a9ea['tc'][0x0],_0x84ee02=_0x47a9ea['tc'][0x1],_0x3997b2=_0x47a9ea[_0x415ee1(0x324)],_0x425536=[];const [_0x5f0c74,_0x4b636c]=_0x47a9ea[_0x415ee1(0x284)];if(!_0x268f7d[_0x415ee1(0x7d)]||_0x268f7d[_0x415ee1(0x7d)]['length']==0x0)return _0x425536;for(let _0x352308=0x0;_0x352308<_0x268f7d['knownenemies']['length'];_0x352308++){let _0x1680f1=_0x268f7d['knownenemies'][_0x352308];const _0x103d65=_0x1680f1[_0x415ee1(0xef)],_0x192142=_0x1680f1[_0x415ee1(0xe9)],[_0x750a6c,_0x351c6f]=_0x47a9ea['pos'],_0x5acfdf=newgrid[_0x750a6c][_0x351c6f][_0x415ee1(0x1e7)],[_0x380f9e,_0x5cb014]=_0x192142,_0x41180f=newgrid[_0x380f9e][_0x5cb014]['elevation'];if(drawLine3D([_0x750a6c,_0x351c6f,_0x5acfdf+0x1],[_0x380f9e,_0x5cb014,_0x41180f])<0x1&&_0x103d65[_0x415ee1(0xd7)]==![]&&dist(_0x47a9ea[_0x415ee1(0x284)],_0x192142,!![])<_0x268f7d[_0x415ee1(0x30b)](_0x3997b2)){const _0x56e371=new Attack(_0x415ee1(0x373),attackfunc,[0x0,0x1,0x0],_0x268f7d['getrange'](_0x3997b2),_0x192142,_0x268f7d,_0x47a9ea[_0x415ee1(0x284)]),_0x1f7a92=_0x56e371[_0x415ee1(0xdb)](!![],_0x47a9ea[_0x415ee1(0x324)]),_0x1a02f7=subtractcost(_0x56e371,_0x47a9ea['tc']),_0x393a47=_0x56e371['warnings']['length'];_0x1f7a92['errors'][_0x415ee1(0x86)]==0x0&&_0x425536[_0x415ee1(0x1c6)](new ActionNode(_0x47a9ea[_0x415ee1(0x284)],_0x56e371,_0x1a02f7,_0x47a9ea[_0x415ee1(0xc9)]+_0x393a47,_0x47a9ea[_0x415ee1(0x17a)]+_0x1f7a92[_0x415ee1(0x131)],_0x47a9ea,_0xbca7be));}if(_0x268f7d[_0x415ee1(0x2a8)]){const _0x8870ef=new action(_0x415ee1(0x213),switchweapon,[0x0,0x0,0x0],0x0,_0x47a9ea[_0x415ee1(0x284)],_0x268f7d,_0x47a9ea[_0x415ee1(0x284)]),_0x2e1517=_0x268f7d[_0x415ee1(0x2a8)],_0xab483=new ActionNode(_0x47a9ea[_0x415ee1(0x284)],_0x8870ef,_0x47a9ea['tc']['slice'](),_0x47a9ea['hazards'],_0x47a9ea[_0x415ee1(0x17a)],_0x47a9ea,_0x47a9ea[_0x415ee1(0x2ed)],_0x2e1517);if(drawLine3D([_0x750a6c,_0x351c6f,_0x5acfdf+0x1],[_0x380f9e,_0x5cb014,_0x41180f])<0x1&&_0x103d65[_0x415ee1(0xd7)]==![]&&dist(_0x47a9ea['pos'],_0x103d65[_0x415ee1(0x284)],!![])<_0x268f7d[_0x415ee1(0x30b)](_0x2e1517)){const _0x187aaa=new Attack(_0x415ee1(0x373),attackfunc,[0x0,0x1,0x0],_0x268f7d['getrange'](_0x2e1517),_0x103d65[_0x415ee1(0x284)],_0x268f7d,_0x47a9ea[_0x415ee1(0x284)]),_0x2adf01=_0x187aaa[_0x415ee1(0xdb)](!![],_0x2e1517),_0x2cb9d4=subtractcost(_0x187aaa,_0x47a9ea['tc']),_0x5369ee=_0x187aaa[_0x415ee1(0x2b6)][_0x415ee1(0x86)];_0x2adf01[_0x415ee1(0x2fb)][_0x415ee1(0x86)]==0x0&&_0x425536[_0x415ee1(0x1c6)](new ActionNode(_0x47a9ea[_0x415ee1(0x284)],_0x187aaa,_0x2cb9d4,_0x47a9ea['hazards']+_0x5369ee,_0x47a9ea['damagepotential']+_0x2adf01[_0x415ee1(0x131)],_0xab483,_0xbca7be,_0x2e1517));}}}return _0x425536;}function dashusecase(_0x2e6635,_0x94ef50,_0x20bae6){const _0x225634=_0x1fd1d8;let _0x43c0df=_0x2e6635['tc'][0x0],_0x1e2ee9=_0x2e6635['tc'][0x1],_0x90b463=[];const [_0x2ed9ed,_0x1741e2]=_0x2e6635[_0x225634(0x284)];if(_0x1e2ee9>0x0&&_0x43c0df<=0x0){let _0x19d10a=new action(_0x225634(0x205),dashfunc,[0x0,_0x94ef50[_0x225634(0x149)][0x1],0x0],0x0,_0x94ef50[_0x225634(0x284)],_0x94ef50,_0x2e6635[_0x225634(0x284)]),_0x709fcc=subtractcost(_0x19d10a,_0x2e6635['tc']);_0x709fcc[0x0]+=_0x94ef50[_0x225634(0x149)][0x0];let _0x1fe782=new ActionNode(_0x2e6635[_0x225634(0x284)],_0x19d10a,_0x709fcc,_0x2e6635[_0x225634(0xc9)],_0x2e6635[_0x225634(0x17a)],_0x2e6635,_0x20bae6);_0x90b463[_0x225634(0x1c6)](_0x1fe782);}return _0x90b463;}function standgroundusecase(_0x126287,_0x43fd33,_0x19dbf8){const _0xe1983e=_0x1fd1d8;let _0x189885=_0x126287['tc'][0x0],_0x9cff03=_0x126287['tc'][0x1],_0x21fb84=[];const [_0x287e0a,_0xe370c8]=_0x126287[_0xe1983e(0x284)];if(_0x9cff03==0x0&&_0x189885==_0x43fd33[_0xe1983e(0x149)][0x0]){let _0x505d99=new action(_0xe1983e(0x279),standgroundfunc,[_0x43fd33[_0xe1983e(0x149)][0x0],0x0,0x0],0x0,_0x43fd33['pos'],_0x43fd33,_0x126287[_0xe1983e(0x284)]),_0x5004cd=subtractcost(_0x505d99,_0x126287['tc']);_0x5004cd[0x1]+=_0x43fd33[_0xe1983e(0x149)][0x1];let _0x53ebcc=new ActionNode(_0x126287[_0xe1983e(0x284)],_0x505d99,_0x5004cd,_0x126287[_0xe1983e(0xc9)],_0x126287[_0xe1983e(0x17a)],_0x126287,_0x19dbf8);_0x21fb84['push'](_0x53ebcc);}return _0x21fb84;}function defaultidle(_0x38a900,_0x1d696d){const _0x320702=_0x1fd1d8;let _0x2839b0=0x0;if(Math[_0x320702(0x222)]()>0.99)return 0x3e8;return _0x2839b0;}function defaultdwarf(_0x4a1a40,_0x1254b2){const _0x19f965=_0x1fd1d8,_0xf42de0=_0x4a1a40['tc'][0x1];return(0x5-_0xf42de0)*chebyshevDistance(_0x4a1a40['pos'],_0x1254b2[_0x19f965(0x284)])*Math[_0x19f965(0x222)]();}function defaulthostile(_0x42a46c,_0x322a2a){const _0x1c84da=_0x1fd1d8,[_0x468faf,_0x1bb5e3]=_0x42a46c['pos'],_0x10c687=newgrid[_0x468faf][_0x1bb5e3];_0x42a46c[_0x1c84da(0x265)]==null&&(_0x322a2a['knownenemies']=[],Object[_0x1c84da(0x10c)](_0x322a2a['visiblecharacters'])[_0x1c84da(0xb8)](function(_0x5b29ec){const _0x51dcaf=_0x1c84da;_0x5b29ec[_0x51dcaf(0xef)]['pc']!==_0x322a2a['pc']&&_0x322a2a[_0x51dcaf(0x7d)][_0x51dcaf(0x1c6)](_0x5b29ec);}));let _0x3f1f95=0x0,_0x3faadc=_0x42a46c[_0x1c84da(0xc9)];newgrid[_0x468faf][_0x1bb5e3][_0x1c84da(0x16c)]()[0x1]>0x0&&_0x3faadc++;const _0x3fcca9=_0x42a46c[_0x1c84da(0x17a)],_0x34cf3b=defaulttemperment(_0x42a46c,_0x322a2a);return _0x3f1f95-=_0x3faadc*0x64,_0x3f1f95+=_0x3fcca9*0xa,_0x3f1f95+=_0x34cf3b,_0x3f1f95;}function defaulthunting(_0x2b9aaf,_0x4171cb){const _0xf5dbdb=_0x1fd1d8,[_0x10aba7,_0x43b051]=_0x2b9aaf['pos'];let _0x20422f=0x0;_0x2b9aaf[_0xf5dbdb(0x265)]!==null&&(_0x20422f=_0x2b9aaf[_0xf5dbdb(0x2ed)]);;if(_0x2b9aaf[_0xf5dbdb(0x265)]==null&&!_0x4171cb['huntmap']){let _0x8fbf9e=0x63,_0x1e8fe3;Object[_0xf5dbdb(0x10c)](_0x4171cb[_0xf5dbdb(0x350)])['forEach'](function(_0x4e66b3){const _0x58f42f=_0xf5dbdb,_0xeab8df=_0x4e66b3[_0x58f42f(0xe9)],_0x3765fe=_0x4e66b3[_0x58f42f(0xef)],_0x15fba6=chebyshevDistance(_0x2b9aaf[_0x58f42f(0x284)],_0xeab8df)+_0x4e66b3['getage']()*0x4;_0x15fba6<_0x8fbf9e&&(_0x8fbf9e=_0x15fba6,_0x1e8fe3=_0x4e66b3);}),_0x1e8fe3&&(_0x4171cb['hunted']=_0x1e8fe3,_0x4171cb['huntmap']=generatehuntmap(_0x1e8fe3[_0xf5dbdb(0xe9)],_0x4171cb,0x14));}else _0x2b9aaf[_0xf5dbdb(0x265)]==null&&updatehuntmap(_0x4171cb['huntmap'],_0x4171cb);return _0x4171cb[_0xf5dbdb(0x1a4)]&&_0x4171cb[_0xf5dbdb(0x1a4)][_0x10aba7]&&_0x4171cb[_0xf5dbdb(0x1a4)][_0x10aba7][_0x43b051]?_0x4171cb[_0xf5dbdb(0x1a4)][_0x10aba7][_0x43b051]:chebyshevDistance([_0x10aba7,_0x43b051],_0x4171cb['pos'])+Math['random']()*0x3;}function defaultfleeing(_0x25ae74,_0x10ea51){const _0x1f37d5=_0x1fd1d8,[_0x2af7c5,_0x51b3f4]=_0x25ae74[_0x1f37d5(0x284)];let _0x1a624d=0x0;_0x25ae74[_0x1f37d5(0x265)]==null&&(_0x10ea51['knownenemies']=[],Object[_0x1f37d5(0x10c)](_0x10ea51['visiblecharacters'])[_0x1f37d5(0xb8)](function(_0xc85041){const _0x35a2b0=_0x1f37d5;_0xc85041['character']['pc']!==_0x10ea51['pc']&&_0x10ea51[_0x35a2b0(0x7d)][_0x35a2b0(0x1c6)](_0xc85041);}),_0x10ea51[_0x1f37d5(0x2ac)]=generatefleemap(_0x10ea51[_0x1f37d5(0x7d)],_0x10ea51,0x14));if(_0x10ea51[_0x1f37d5(0x2ac)]&&_0x10ea51[_0x1f37d5(0x2ac)][_0x2af7c5+','+_0x51b3f4])_0x1a624d+=_0x10ea51[_0x1f37d5(0x2ac)][_0x2af7c5+','+_0x51b3f4];else return 0x3e8;return _0x25ae74[_0x1f37d5(0xc9)]>0x0&&(_0x1a624d-=_0x25ae74['hazards']*0x5),_0x25ae74['damagepotential']>0x0&&(_0x1a624d+=_0x25ae74['damagepotential']),_0x1a624d>0xa&&_0x25ae74[_0x1f37d5(0x24d)]&&_0x25ae74[_0x1f37d5(0x24d)][_0x1f37d5(0x15f)]==_0x1f37d5(0x243)&&(_0x1a624d+=0x14),_0x1a624d;}function defaulttemperment(_0x2b5e1c,_0x25e7a6){const _0x32bf62=_0x1fd1d8,_0x3d4d5d=_0x2b5e1c['activeweapon'],[_0x2c2e38,_0x479ae4]=_0x2b5e1c['pos'];let _0x1fcb8e=0x270f,_0x17deb4=Math[_0x32bf62(0xfa)](_0x25e7a6[_0x32bf62(0x30b)](_0x3d4d5d)),_0x47e3eb,_0x5689e8;for(let _0x21378b=0x0;_0x21378b<_0x25e7a6[_0x32bf62(0x7d)][_0x32bf62(0x86)];_0x21378b++){_0x47e3eb=_0x25e7a6[_0x32bf62(0x7d)][_0x21378b];const _0x4c89f0=_0x47e3eb[_0x32bf62(0xef)],_0x3fff81=_0x47e3eb[_0x32bf62(0xe9)];_0x5689e8=Math[_0x32bf62(0xfa)](dist(_0x3fff81,[_0x2c2e38,_0x479ae4]));const _0x278562=[];if(_0x278562&&_0x278562['length'])walkdist=_0x278562[_0x32bf62(0x86)];_0x5689e8<_0x1fcb8e&&(_0x1fcb8e=_0x5689e8);}let _0xe44972=Math[_0x32bf62(0x1be)](_0x5689e8-_0x17deb4);if(_0x1fcb8e<=_0x25e7a6[_0x32bf62(0xae)](_0x3d4d5d))_0xe44972=0x32;return-_0xe44972;}function fleeingtemperment(_0x45b77d,_0x1fdc58){const _0x15fe21=_0x1fd1d8,[_0xfb4e94,_0x122a50]=_0x45b77d[_0x15fe21(0x284)];let _0x432c6e=0x270f;return _0x1fdc58['knownenemies'][_0x15fe21(0xb8)](function(_0x1a5c94){const _0x5121d0=_0x15fe21,_0x49f917=_0x1a5c94[_0x5121d0(0xef)],_0x9cd204=_0x1a5c94[_0x5121d0(0xe9)],_0x30bd82=Math['floor'](dist(_0x9cd204,[_0xfb4e94,_0x122a50]));_0x30bd82<_0x432c6e&&(_0x432c6e=_0x30bd82);}),-_0x432c6e;}function spot(_0x20df12,_0x5e89a7,_0x2bf64c){const _0x11dc18=_0x1fd1d8;if(_0x5e89a7&&_0x5e89a7[_0x11dc18(0x2a6)]==_0x20df12['index'])return;if(_0x5e89a7&&_0x5e89a7['pc']==_0x20df12['pc'])return;_0x20df12[_0x11dc18(0x19c)](),_0x20df12[_0x11dc18(0xb5)]={},_0x20df12['visibletiles']['forEach'](function(_0x216f48){const _0x3a0668=_0x11dc18,[_0x5ae5b4,_0x58ece3]=_0x216f48['pos'];if(_0x216f48[_0x3a0668(0xef)]!==null&&!_0x216f48[_0x3a0668(0xef)][_0x3a0668(0xd7)]){const _0x468a32=_0x216f48[_0x3a0668(0xef)];let _0x2b857b=_0x468a32['pos'][_0x3a0668(0x169)]();_0x5e89a7&&_0x468a32['index']==_0x5e89a7[_0x3a0668(0x2a6)]&&_0x2bf64c['name']=='Move'&&(_0x2b857b=_0x2bf64c[_0x3a0668(0x331)]),_0x20df12[_0x3a0668(0xb5)][_0x468a32[_0x3a0668(0x2a6)]]=new CharacterMemory(_0x468a32,_0x2b857b['slice']()),_0x468a32['pc']==!![]&&_0x20df12['knowncharacters'][_0x468a32[_0x3a0668(0x2a6)]]&&((_0x20df12['knowncharacters'][_0x468a32['index']][_0x3a0668(0xe9)][0x0]!=_0x20df12[_0x3a0668(0xb5)][_0x468a32[_0x3a0668(0x2a6)]][_0x3a0668(0xe9)][0x0]||_0x20df12[_0x3a0668(0x204)][_0x468a32['index']]['lastseen'][0x1]!=_0x20df12[_0x3a0668(0xb5)][_0x468a32[_0x3a0668(0x2a6)]][_0x3a0668(0xe9)][0x1])&&(_0x20df12[_0x3a0668(0x117)]=[])),!_0x20df12[_0x3a0668(0x204)][_0x468a32[_0x3a0668(0x2a6)]]&&_0x468a32['pc']==!![]&&(_0x20df12['actionqueue']=[]),_0x20df12[_0x3a0668(0x204)][_0x468a32['index']]=new CharacterMemory(_0x468a32,_0x2b857b[_0x3a0668(0x169)]());}}),Object[_0x11dc18(0x1f5)](_0x20df12['knowncharacters'])[_0x11dc18(0xb8)](function(_0x31dbac){const _0x24dfb1=_0x11dc18;if(!_0x20df12[_0x24dfb1(0xb5)][_0x31dbac]&&_0x20df12['knowncharacters'][_0x31dbac][_0x24dfb1(0xef)]['pc']!==_0x20df12['pc']){if(drawline(_0x20df12['pos'],_0x20df12[_0x24dfb1(0x204)][_0x31dbac][_0x24dfb1(0xe9)])>=0x1){let _0x4e2266=_0x20df12[_0x24dfb1(0x204)][_0x31dbac][_0x24dfb1(0xef)],_0x16ef1e=_0x20df12[_0x24dfb1(0x204)][_0x31dbac][_0x24dfb1(0xe9)];_0x20df12['visiblecharacters'][_0x31dbac]=new CharacterMemory(_0x4e2266,_0x16ef1e);}else{const _0x6f4bbe=_0x20df12[_0x24dfb1(0x204)][_0x31dbac][_0x24dfb1(0xef)],_0x4cfd61=_0x20df12['knowncharacters'][_0x31dbac][_0x24dfb1(0xe9)];_0x20df12[_0x24dfb1(0x350)][_0x31dbac]=new CharacterMemory(_0x6f4bbe,_0x4cfd61),delete _0x20df12[_0x24dfb1(0x204)][_0x31dbac],_0x20df12[_0x24dfb1(0x117)]=[];}}}),_0x20df12[_0x11dc18(0x299)]();}function attackofop(_0x159e27,_0x26e085,_0x29fc18){const _0x24106b=_0x1fd1d8;if(!_0x26e085||_0x26e085['pc']==_0x159e27['pc'])return;if(chebyshevDistance(_0x26e085[_0x24106b(0x284)],_0x159e27[_0x24106b(0x284)])==0x1&&_0x29fc18[_0x24106b(0x15f)]==_0x24106b(0x1c9)&&chebyshevDistance(_0x29fc18[_0x24106b(0x331)],_0x159e27[_0x24106b(0x284)])>0x1){let _0x49a1fe=new Attack('Attack',attackfunc,[0x0,0x0,0x1],_0x159e27[_0x24106b(0x30b)](),_0x26e085['pos'],_0x159e27,_0x159e27[_0x24106b(0x284)]);_0x159e27[_0x24106b(0x117)][_0x24106b(0x86)]>0x0&&(console[_0x24106b(0x35f)]('this\x20enemy\x20is\x20making\x20a\x20reaction,\x20and\x20their\x20action\x20queue\x20wasn\x27t\x20empty'),console[_0x24106b(0x35f)](_0x159e27),_0x159e27[_0x24106b(0x117)]=[]),canAffordAction(_0x49a1fe,_0x159e27)&&(_0x159e27['actionqueue'][_0x24106b(0x1c6)](_0x49a1fe),move(_0x159e27));}else{if(chebyshevDistance(_0x26e085['pos'],_0x159e27[_0x24106b(0x284)])==0x1&&_0x29fc18[_0x24106b(0x15f)]==_0x24106b(0x373)&&chebyshevDistance(_0x29fc18[_0x24106b(0x331)],_0x26e085[_0x24106b(0x284)])>0x1){let _0x409bc2=new Attack(_0x24106b(0x373),attackfunc,[0x0,0x0,0x1],_0x159e27['getrange'](),_0x26e085['pos'],_0x159e27,_0x159e27['pos']);_0x159e27['actionqueue'][_0x24106b(0x86)]>0x0&&(console[_0x24106b(0x35f)]('this\x20enemy\x20is\x20making\x20a\x20reaction,\x20and\x20their\x20action\x20queue\x20wasn\x27t\x20empty'),console[_0x24106b(0x35f)](_0x159e27),_0x159e27['aq']=[]),canAffordAction(_0x409bc2,_0x159e27)&&(_0x159e27[_0x24106b(0x117)][_0x24106b(0x1c6)](_0x409bc2),move(_0x159e27));}}}function defender(_0x39bb29,_0x9e97ab,_0x3387db){const _0x1d283a=_0x1fd1d8,[_0x46f457,_0x527ad9]=_0x39bb29['pos'];if(!_0x9e97ab||_0x9e97ab['pc']==_0x39bb29['pc'])return;if(_0x3387db[_0x1d283a(0x15f)]!==_0x1d283a(0x373))return;if(!(_0x39bb29[_0x1d283a(0x11d)]instanceof Shield))return;if(chebyshevDistance([_0x46f457,_0x527ad9],_0x3387db[_0x1d283a(0x331)])!==0x1)return;if(chebyshevDistance([_0x46f457,_0x527ad9],_0x9e97ab[_0x1d283a(0x284)])==0x1){let _0x599049=_0x3387db[_0x1d283a(0x331)][_0x1d283a(0x169)]();_0x3387db[_0x1d283a(0x331)]=[_0x46f457,_0x527ad9],adduilabel('*',_0x599049,[0x20,0x20,0x40],0x0,!![],![],![],![]);return;}else{let _0xf0b4f6=function(_0x43539d,_0x44217c){const _0x5b83e4=_0x1d283a;return _0x43539d[_0x5b83e4(0xd1)]=function(_0x343155,_0x5070ec){const _0x344b90=_0x5b83e4;return _0x39bb29['tc'][0x2]>0x0&&(_0x5070ec==!![]&&(_0x43539d[_0x344b90(0x185)][0x0]-=_0x39bb29[_0x344b90(0xde)][0x0],_0x43539d[_0x344b90(0x185)][0x0]=Math[_0x344b90(0x115)](_0x43539d['damagerange'][0x0],0x0),_0x43539d['damagerange'][0x1]-=_0x39bb29['stats'][0x0],_0x43539d[_0x344b90(0x185)][0x1]=Math[_0x344b90(0x115)](_0x43539d[_0x344b90(0x185)][0x1],0x0),_0x43539d[_0x344b90(0x2cc)]=[_0x344b90(0x164)+_0x39bb29[_0x344b90(0xde)][0x0]+_0x344b90(0x94)],adduilabel('*',_0x39bb29[_0x344b90(0x284)],[0x20,0x20,0x40],0x0,!![],![],![],![]),_0x39bb29['tc'][0x2]--)),[_0x343155,_0x5070ec];},_0x43539d;};_0x3387db[_0x1d283a(0xdb)]=function(_0x1fe27d,_0x533334){const _0x1f7075=_0x1d283a;return attackfunc[_0x1f7075(0x163)](_0x3387db,[_0x1fe27d,_0x533334,_0xf0b4f6]);};}}function riposte(_0x15e469,_0x4e273d,_0x140cbb){const _0x454e53=_0x1fd1d8,[_0x9c53c9,_0x2ced95]=_0x15e469[_0x454e53(0x284)];if(!_0x4e273d||_0x4e273d['pc']==_0x15e469['pc'])return;if(_0x140cbb[_0x454e53(0x15f)]!==_0x454e53(0x373))return;if(!(_0x15e469['offhanditem']instanceof Shield))return;if(chebyshevDistance([_0x9c53c9,_0x2ced95],_0x140cbb[_0x454e53(0x331)])>0x0)return;let _0x15d309=function(_0x444764,_0x24c4a5){const _0x2d15ba=_0x454e53;return _0x444764[_0x2d15ba(0xd1)]=function(_0x255598,_0x17b297){const _0x3ff6e9=_0x2d15ba;if(_0x15e469['tc'][0x2]>0x0){if(_0x17b297==!![]){_0x444764['damagerange'][0x0]-=_0x15e469['stats'][0x0],_0x444764['damagerange'][0x0]=Math['max'](_0x444764[_0x3ff6e9(0x185)][0x0],0x0),_0x444764[_0x3ff6e9(0x185)][0x1]-=_0x15e469[_0x3ff6e9(0xde)][0x0],_0x444764[_0x3ff6e9(0x185)][0x1]=Math[_0x3ff6e9(0x115)](_0x444764[_0x3ff6e9(0x185)][0x1],0x0),_0x444764['modbreakdown']=[_0x3ff6e9(0x164)+_0x15e469[_0x3ff6e9(0xde)][0x0]+_0x3ff6e9(0x94)],_0x15e469['tc'][0x2]--;let _0x751de6=new Attack('Attack',attackfunc,[0x0,0x0,0x0],_0x15e469['getrange'],_0x4e273d[_0x3ff6e9(0x284)],_0x15e469,[_0x9c53c9,_0x2ced95]);_0x751de6['func'](!![])[_0x3ff6e9(0x2fb)][_0x3ff6e9(0x86)]==0x0&&(_0x15e469['actionqueue'][_0x3ff6e9(0x171)](_0x751de6),move(_0x15e469));}}return[_0x255598,_0x17b297];},_0x444764;};_0x140cbb[_0x454e53(0xdb)]=function(_0x5a1dfa,_0x41edec){const _0x3f4c5f=_0x454e53;return attackfunc[_0x3f4c5f(0x163)](_0x140cbb,[_0x5a1dfa,_0x41edec,_0x15d309]);};}function blockhelper(){}function block(_0x1619af,_0x161fd9,_0x1b62da){const _0x537ebc=_0x1fd1d8,[_0x547d82,_0x10a94e]=_0x1619af['pos'];if(!_0x161fd9||_0x161fd9['pc']==_0x1619af['pc'])return;if(_0x1b62da[_0x537ebc(0x15f)]!=='Attack')return;if(!(_0x1619af[_0x537ebc(0x11d)]instanceof Shield))return;if(chebyshevDistance([_0x547d82,_0x10a94e],_0x1b62da[_0x537ebc(0x331)])>0x0)return;let _0x34d8ea=function(_0x17ee82,_0x1f0eb2){const _0x31b3b4=_0x537ebc;return _0x17ee82[_0x31b3b4(0xd1)]=function(_0x45c23a,_0x4a959d){const _0x1acb78=_0x31b3b4;if(_0x1619af['tc'][0x2]>0x0){if(_0x4a959d==!![]){let _0x22d8f9=Math[_0x1acb78(0x115)](0x1,_0x1619af[_0x1acb78(0xde)][0x0]);_0x17ee82[_0x1acb78(0x185)][0x0]-=_0x1619af['stats'][0x0],_0x17ee82[_0x1acb78(0x185)][0x0]=Math[_0x1acb78(0x115)](_0x17ee82['damagerange'][0x0],0x0),_0x17ee82[_0x1acb78(0x185)][0x1]-=_0x1619af['stats'][0x0],_0x17ee82['damagerange'][0x1]=Math[_0x1acb78(0x115)](_0x17ee82['damagerange'][0x1],0x0),_0x17ee82[_0x1acb78(0x2cc)]=[_0x1acb78(0x164)+_0x22d8f9+_0x1acb78(0x94)],_0x1619af['tc'][0x2]--;}}return[_0x45c23a,_0x4a959d];},_0x17ee82;};_0x1b62da[_0x537ebc(0xdb)]=function(_0x297405,_0x3369dc){return attackfunc['apply'](_0x1b62da,[_0x297405,_0x3369dc,_0x34d8ea]);};}function lightsensitive(_0x24d11c,_0x314743,_0x20331c){const _0x18ebc0=_0x1fd1d8;let [_0x3574ea,_0x19da1d]=_0x24d11c[_0x18ebc0(0x284)];newgrid[_0x3574ea][_0x19da1d][_0x18ebc0(0xf8)]>0x2&&addconditiondynamic(conditions['Stunned'],!![],_0x24d11c)();}function autopickup(_0x30307f,_0x13ad9b,_0x31440a){const _0x36a045=_0x1fd1d8,[_0x262280,_0x2c96df]=_0x30307f[_0x36a045(0x284)];if(newgrid[_0x262280][_0x2c96df][_0x36a045(0x274)]['length']>0x0&&(newgrid[_0x262280][_0x2c96df][_0x36a045(0x274)][0x0]instanceof Weapon||newgrid[_0x262280][_0x2c96df][_0x36a045(0x274)][0x0]instanceof Ammunition)){const _0x4adf50=newgrid[_0x262280][_0x2c96df]['objects'][0x0],_0x484dc9=[_0x30307f[_0x36a045(0x107)],_0x30307f[_0x36a045(0x2a8)]];let _0x21071d=![];_0x484dc9[_0x36a045(0xb8)](function(_0x413797){const _0x10699d=_0x36a045;if(_0x21071d==!![])return;if(_0x413797[_0x10699d(0x21c)]<_0x413797[_0x10699d(0x366)]&&_0x4adf50['basename']==_0x413797['basename']||_0x413797[_0x10699d(0x358)]==_0x4adf50[_0x10699d(0x83)]){if(_0x30307f[_0x10699d(0x117)]['length']==0x0)_0x21071d=!![],_0x30307f[_0x10699d(0x117)][_0x10699d(0x171)](new Get(_0x10699d(0x347),getfunc,[0x0,0x0,0x0],0x0,_0x30307f[_0x10699d(0x284)],_0x30307f,_0x30307f[_0x10699d(0x284)])),move(_0x30307f);else _0x30307f['actionqueue']['length']>0x0&&_0x30307f[_0x10699d(0x117)][0x0][_0x10699d(0x15f)]!==_0x10699d(0x347)&&(_0x21071d=!![],_0x30307f[_0x10699d(0x117)][_0x10699d(0x171)](new Get('Get',getfunc,[0x0,0x0,0x0],0x0,_0x30307f['pos'],_0x30307f,_0x30307f['pos'])));}});}}function spot2([_0x349b4f,_0x5d1ca9]){const _0xdb5eb4=_0x1fd1d8,_0x5a624d=newgrid[_0x349b4f][_0x5d1ca9];let _0x41da1f=[];_0x41da1f[_0xdb5eb4(0x1c6)](_0x5a624d);let _0x256ab1={};visiblecharacters=[];let _0x3e37a9=0x0;while(_0x41da1f[_0xdb5eb4(0x86)]>0x0&&_0x3e37a9<0x190){_0x3e37a9++;const _0x218db9=_0x41da1f[_0xdb5eb4(0x1c4)](),[_0x5d0b14,_0x1d48d2]=_0x218db9[_0xdb5eb4(0x284)];if(drawline([_0x5d0b14,_0x1d48d2],[_0x349b4f,_0x5d1ca9])!==![]){if(_0x218db9[_0xdb5eb4(0xef)]!==null&&(_0x5d0b14!==_0x349b4f||_0x1d48d2!==_0x5d1ca9))visiblecharacters['push'](_0x218db9['character']);for(let _0x126f10=_0x5d0b14-0x1;_0x126f10<=_0x5d0b14+0x1;_0x126f10++){for(let _0xa96c16=_0x1d48d2-0x1;_0xa96c16<=_0x1d48d2+0x1;_0xa96c16++){if(!_0x256ab1[_0x126f10])_0x256ab1[_0x126f10]={};!_0x256ab1[_0x126f10][_0xa96c16]&&(_0x256ab1[_0x126f10][_0xa96c16]=0x1,_0x41da1f[_0xdb5eb4(0x1c6)](newgrid[_0x126f10][_0xa96c16]));}}}}return visiblecharacters;}function hear(_0x2960c6,_0x3f2f69=!![],_0x2b9ee3=0x0,_0x137df6){const _0x5b2ace=_0x1fd1d8;if(chebyshevDistance(_0x2960c6[_0x5b2ace(0x284)],viewportpos)>_0x2960c6['volume']+0x14)return[];class _0x21e251{constructor(_0x2b2b1e,_0x5f4f37){const _0x5bdb70=_0x5b2ace;this[_0x5bdb70(0x284)]=_0x2b2b1e,this[_0x5bdb70(0x215)]=_0x5f4f37;}}const [_0x24a62d,_0x3fa3a1]=_0x2960c6['pos'];let _0x543413=[];const _0x3d4bd6=new _0x21e251(_0x2960c6[_0x5b2ace(0x284)],_0x2960c6['volume']);let _0xed7a92=new PriorityQueue((_0x4d1b35,_0x11674f)=>_0x11674f[_0x5b2ace(0x215)]-_0x4d1b35[_0x5b2ace(0x215)]);_0xed7a92[_0x5b2ace(0x261)](_0x3d4bd6);let _0x21b042=new Set(),_0x55e1b2=0x0,_0x447982=![];_0x2960c6['origin']['pc']==!![]&&(_0x447982=!![]);let _0x29d2af=[];_0x2b9ee3=0x0;if(newgrid[_0x24a62d][_0x3fa3a1][_0x5b2ace(0x123)]==!![])_0x447982=!![];while(!_0xed7a92['isEmpty']()&&_0x55e1b2<0x384){_0x55e1b2++;const _0x245ebf=_0xed7a92[_0x5b2ace(0x105)](),[_0x3e8d14,_0x2a58d5]=_0x245ebf[_0x5b2ace(0x284)],_0x2b26fb=newgrid[_0x3e8d14][_0x2a58d5],_0x11f058=_0x2b26fb[_0x5b2ace(0xef)],_0x51cb32=_0x3e8d14+','+_0x2a58d5;if(_0x21b042['has'](_0x51cb32))continue;_0x21b042[_0x5b2ace(0x1f8)](_0x51cb32);if(_0x245ebf[_0x5b2ace(0x215)]>=0x1){_0x29d2af[_0x5b2ace(0x1c6)]([_0x3e8d14,_0x2a58d5,_0x245ebf['volume']]);if(_0x11f058!==null){if(_0x11f058['pc']==!![]){_0x447982=!![];if(_0x2b9ee3==0x0)_0x2b9ee3=(_0x2960c6['volume']-_0x245ebf['volume'])*0x32;}_0x543413[_0x5b2ace(0x1c6)](_0x11f058);if(_0x3f2f69)_0x11f058['hear'](_0x2960c6,_0x245ebf[_0x5b2ace(0x215)]);}for(const _0x249348 of directions){const [_0x576aa1,_0xc28af8]=[_0x245ebf[_0x5b2ace(0x284)][0x0]+_0x249348[0x0],_0x245ebf[_0x5b2ace(0x284)][0x1]+_0x249348[0x1]],_0x11ca74=_0x576aa1+','+_0xc28af8;if(!newgrid[_0x576aa1]||!newgrid[_0x576aa1][_0xc28af8])continue;if(!_0x21b042[_0x5b2ace(0x1c0)](_0x11ca74)){let _0x433c51=0x1;newgrid[_0x576aa1][_0xc28af8][_0x5b2ace(0xcd)]==![]&&newgrid[_0x576aa1][_0xc28af8][_0x5b2ace(0xf6)]()>=0x1&&!newgrid[_0x576aa1][_0xc28af8][_0x5b2ace(0xe4)]&&(_0x433c51=0x5),Math['abs'](_0x576aa1-_0x3e8d14)!==0x0&&Math[_0x5b2ace(0x1be)](_0xc28af8-_0x2a58d5)!==0x0&&(_0x433c51*=1.4),_0xed7a92[_0x5b2ace(0x261)](new _0x21e251([_0x576aa1,_0xc28af8],_0x245ebf[_0x5b2ace(0x215)]-_0x433c51));}}}}if(newgrid[_0x24a62d][_0x3fa3a1]['visible']==!![])_0x2b9ee3=0x0;if(_0x447982==!![]){if(_0x2960c6['heard']!==!![]&&_0x3f2f69){let _0x2f2b8c;for(let _0x1503a6=0x0;_0x1503a6<playercs[_0x5b2ace(0x86)];_0x1503a6++){if(playercs[_0x1503a6][_0x5b2ace(0xd7)]==![]||gameover==!![]&&playercs[_0x1503a6]==deathcharacter)!_0x2f2b8c&&(_0x2f2b8c=playercs[_0x1503a6]);else _0x2f2b8c&&dist(_0x2f2b8c[_0x5b2ace(0x284)],[_0x24a62d,_0x3fa3a1])<dist(playercs[_0x1503a6][_0x5b2ace(0x284)],[_0x24a62d,_0x3fa3a1])&&(_0x2f2b8c=playercs[_0x1503a6]);_0x2f2b8c!=undefined&&_0x2f2b8c['hear'](_0x2960c6,0x1);}}for(let _0x1620d2=0x0;_0x1620d2<_0x29d2af[_0x5b2ace(0x86)];_0x1620d2++){const [_0x3c493f,_0x45f4cf,_0x84ebbf]=_0x29d2af[_0x1620d2];if(newgrid[_0x3c493f][_0x45f4cf][_0x5b2ace(0x123)]==!![]){let _0x1535e6=[_0x84ebbf/0x64,_0x84ebbf/0x64,_0x84ebbf/0x64];if(_0x137df6)_0x1535e6=[_0x137df6[0x0]*_0x84ebbf/0x64,_0x137df6[0x1]*_0x84ebbf/0x64,_0x137df6[0x2]*_0x84ebbf/0x64];adduilabel('$',[_0x3c493f,_0x45f4cf],_0x1535e6,0x0,!![],![],![],![],0.2,(_0x2960c6[_0x5b2ace(0x215)]-_0x84ebbf)*0x32+_0x2b9ee3),updatedsomething=!![];}}}let _0x48b179=performance[_0x5b2ace(0x273)]();return _0x543413;}function evaluateposition(_0x56d133){const _0x4833d5=_0x1fd1d8;let [_0x1b3ed1,_0x1668c3]=[0x0,0x0];for(let _0x8209c5=0x0;_0x8209c5<_0x56d133[_0x4833d5(0x86)];_0x8209c5++){[_0x1b3ed1,_0x1668c3]=_0x56d133[_0x8209c5];}}function dist(_0x558780,_0x5e3264,_0x554329=![],_0x233241=![]){const _0x3314c4=_0x1fd1d8;let _0x43c6c6=Math['abs'](_0x558780[0x0]-_0x5e3264[0x0]),_0x151597=Math[_0x3314c4(0x1be)](_0x558780[0x1]-_0x5e3264[0x1]),_0x49b04e=0x0;if(newgrid[_0x5e3264[0x0]]===undefined||newgrid[_0x5e3264[0x0]][_0x5e3264[0x1]]===undefined||newgrid[_0x558780[0x0]]===undefined||newgrid[_0x558780[0x0]][_0x558780[0x1]]===undefined)console[_0x3314c4(0x276)]();if(!_0x554329)_0x49b04e=newgrid[_0x5e3264[0x0]][_0x5e3264[0x1]][_0x3314c4(0x1e7)]-newgrid[_0x558780[0x0]][_0x558780[0x1]][_0x3314c4(0x1e7)];_0x233241&&(_0x49b04e=Math[_0x3314c4(0x115)](_0x49b04e,0x0));let _0x195f01=Math[_0x3314c4(0xe8)](_0x43c6c6**0x2+_0x151597**0x2+_0x49b04e**0x2);return _0x195f01;}function repeatchar(_0x1480a1,_0x24b1b3){let _0x5ec137='';for(let _0xd7e616=0x0;_0xd7e616<_0x24b1b3;_0xd7e616++){_0x5ec137+=_0x1480a1;}return _0x5ec137;}function addLineBreaks(_0x20aa5e,_0x54170d){const _0x293b2c=_0x1fd1d8;let _0x482160='';for(let _0x511368=0x0;_0x511368<_0x20aa5e[_0x293b2c(0x86)];_0x511368++){_0x482160+=_0x20aa5e[_0x511368],(_0x511368+0x1)%_0x54170d===0x0&&_0x511368!==_0x20aa5e[_0x293b2c(0x86)]-0x1&&(_0x482160+='<br>');}return _0x482160;}function roll(_0x144326,_0x5dd022){return randomNumber(_0x144326,0x1)+_0x5dd022;}function randomNumber(_0x4e0959,_0x457084=0x0){const _0xa274ca=_0x1fd1d8;return Math['floor'](Math[_0xa274ca(0x222)]()*(_0x4e0959-_0x457084)+_0x457084);}function _0x438d(_0x45de5e,_0x216543){const _0x417e90=_0x417e();return _0x438d=function(_0x438ddd,_0x5691ca){_0x438ddd=_0x438ddd-0x7a;let _0x41f170=_0x417e90[_0x438ddd];return _0x41f170;},_0x438d(_0x45de5e,_0x216543);}function bresenhamLine([_0x10de7c,_0x19e960],[_0x367c7d,_0x207a48]){const _0x17644=_0x1fd1d8;let _0x3a1fcb=[],_0x483c96=Math[_0x17644(0x1be)](_0x367c7d-_0x10de7c),_0x5caac5=Math['abs'](_0x207a48-_0x19e960),_0x75549a=_0x10de7c<_0x367c7d?0x1:-0x1,_0x496d1a=_0x19e960<_0x207a48?0x1:-0x1,_0x4bd8ee=_0x483c96-_0x5caac5;while(!![]){_0x3a1fcb['push']([_0x10de7c,_0x19e960]);if(_0x10de7c===_0x367c7d&&_0x19e960===_0x207a48)break;let _0x43ac79=0x2*_0x4bd8ee;_0x43ac79>-_0x5caac5&&(_0x4bd8ee-=_0x5caac5,_0x10de7c+=_0x75549a),_0x43ac79<_0x483c96&&(_0x4bd8ee+=_0x483c96,_0x19e960+=_0x496d1a);}return _0x3a1fcb;}function shuffle(_0x450def){const _0x148358=_0x1fd1d8;let _0x21c740=_0x450def['length'],_0x15c5c3,_0x22e5a0=_0x450def[_0x148358(0x169)]();while(_0x21c740>0x0){_0x15c5c3=Math[_0x148358(0xfa)](Math['random']()*_0x21c740),_0x21c740--,[_0x22e5a0[_0x21c740],_0x22e5a0[_0x15c5c3]]=[_0x22e5a0[_0x15c5c3],_0x22e5a0[_0x21c740]];}return _0x22e5a0;}function deepCopy3D(_0x5eea34){const _0x859d9=_0x1fd1d8;return _0x5eea34[_0x859d9(0xbc)](_0x3fa076=>_0x3fa076['map'](_0x4ea89c=>_0x4ea89c[_0x859d9(0xbc)](_0x238b9d=>_0x238b9d)));}function deepCopySubArray3D(_0x2bb544,_0xc82e8f,_0x9a6aa5,_0x1ae860,_0x41e1c7){const _0x4a0575=_0x1fd1d8;let _0x4e8fd5=[];for(let _0x3466ad=_0x9a6aa5;_0x3466ad<=_0x41e1c7;_0x3466ad++){_0x4e8fd5[_0x3466ad-_0x9a6aa5]=[];for(let _0x40014d=_0xc82e8f;_0x40014d<=_0x1ae860;_0x40014d++){_0x4e8fd5[_0x3466ad-_0x9a6aa5][_0x40014d-_0xc82e8f]=[];for(let _0x2dfcdf=0x0;_0x2dfcdf<_0x2bb544[0x0][0x0][_0x4a0575(0x86)];_0x2dfcdf++){_0x4e8fd5[_0x3466ad-_0x9a6aa5][_0x40014d-_0xc82e8f][_0x2dfcdf]=_0x2bb544[_0x3466ad][_0x40014d][_0x2dfcdf];}}}return _0x4e8fd5;}function deepCopySubArray2D(_0x28b136,_0x334232,_0x12d499,_0x3333c0,_0x226ad8){let _0x26d76c=[];for(let _0x162989=_0x12d499;_0x162989<=_0x226ad8;_0x162989++){_0x26d76c[_0x162989-_0x12d499]=[];for(let _0x53038d=_0x334232;_0x53038d<=_0x3333c0;_0x53038d++){_0x26d76c[_0x162989-_0x12d499][_0x53038d-_0x334232]=_0x28b136[_0x162989][_0x53038d];}}}function deepCopy2D(_0x2a2658){const _0xa06e10=_0x1fd1d8;let _0x1a345c=[];for(let _0x41e65d=0x0;_0x41e65d<_0x2a2658[_0xa06e10(0x86)];_0x41e65d++){_0x1a345c[_0x41e65d]=[];for(let _0x599892=0x0;_0x599892<_0x2a2658[0x0][_0xa06e10(0x86)];_0x599892++){_0x1a345c[_0x41e65d][_0x599892]=_0x2a2658[_0x41e65d][_0x599892];}}return _0x1a345c;}function partialFill(_0x927b61,_0x3b2f54,_0xca9445,_0x39698a,_0x38c035,_0x37c9d7){for(let _0x5cdcdf=_0xca9445;_0x5cdcdf<_0x38c035;_0x5cdcdf++){for(let _0x165009=_0x39698a;_0x165009<_0x37c9d7;_0x165009++){_0x927b61[_0x165009][_0x5cdcdf]=_0x3b2f54;}}}function shadowslope([_0x17a9e9,_0x1924cb],[_0x322372,_0x553cbe]){const _0x1409b0=_0x1fd1d8,_0x1ec607=Math[_0x1409b0(0x1be)](_0x553cbe-_0x1924cb),_0x4f3dfc=Math[_0x1409b0(0x1be)](_0x322372-_0x17a9e9),_0x216fa1=_0x4f3dfc/_0x1ec607,_0x249916=-_0x1ec607/_0x4f3dfc,_0x5de609=chebyshevDistance([_0x17a9e9,_0x1924cb],[_0x322372,_0x553cbe]);let _0x4f4a80=[_0x322372+_0x249916/Math[_0x1409b0(0xe8)](0x1+_0x249916**0x2),_0x553cbe+0x1/Math[_0x1409b0(0xe8)](0x1+_0x249916**0x2)];const _0x8c1dc9=Math[_0x1409b0(0x1be)](_0x4f4a80[0x1]-_0x1924cb),_0x112e52=Math[_0x1409b0(0x1be)](_0x4f4a80[0x0]-_0x17a9e9);let _0x278945=_0x112e52/_0x8c1dc9,_0x128349=_0x278945/0x2,_0x8862bf=Math['abs'](_0x216fa1-_0x128349);return;}function randomSymbol(_0x48cfc3){const _0x2a5dc0=_0x1fd1d8,_0x5ad492=_0x48cfc3[_0x2a5dc0(0x86)],_0xdc390a=randomNumber(_0x5ad492+0x1,0x1)-0x1;return _0x48cfc3[_0xdc390a];}function takeav(_0x217d88){const _0x5c7712=_0x1fd1d8;return _0x217d88[_0x5c7712(0x16b)]((_0x15e886,_0x160757)=>_0x15e886+_0x160757)/_0x217d88['length'];}function manhattanDistance(_0x204ad6,_0x22441c){const _0x3560ca=_0x1fd1d8;return Math['abs'](_0x204ad6[0x0]-_0x22441c[0x0])+Math[_0x3560ca(0x1be)](_0x204ad6[0x1]-_0x22441c[0x1]);}function convertColortoAbs(_0xc5ea8){const _0x6f58d6=_0xc5ea8['map'](_0x3bf898=>_0x3bf898/0x100);return _0x6f58d6;}function convertAbstoColor(_0x36eaca){const _0x6090e7=_0x36eaca['map'](_0x593eec=>_0x593eec*0x100);return _0x6090e7;}function randomint(_0x1dc3c1,_0x4bff7f){const _0x573a0e=_0x1fd1d8;return _0x1dc3c1>_0x4bff7f&&([_0x1dc3c1,_0x4bff7f]=[_0x4bff7f,_0x1dc3c1]),Math[_0x573a0e(0xfa)](Math[_0x573a0e(0x222)]()*(_0x4bff7f-_0x1dc3c1+0x1))+_0x1dc3c1;}function chebyshevDistance(_0x3ae7f6,_0x17e9ef){const _0x757324=_0x1fd1d8,[_0x42ad5,_0x3a0fcd]=_0x3ae7f6,[_0x5bfc8c,_0x2f4869]=_0x17e9ef;return Math[_0x757324(0x115)](Math['abs'](_0x5bfc8c-_0x42ad5),Math[_0x757324(0x1be)](_0x2f4869-_0x3a0fcd));}function combineFunctions(_0x4ec14a,_0x1d9592){const _0x1a1c06=_0x1fd1d8,_0x4e6c10=_0x4ec14a['bind'](this),_0x2d3233=_0x1d9592[_0x1a1c06(0xca)](this);return()=>{_0x4e6c10(),_0x2d3233();};}const conditions={'Stunned':new condition(_0x1fd1d8(0x217),skipturn,skipturn,0x1,!![]),'Stunnedlite':new condition(_0x1fd1d8(0x217),skipturn,skipturn,0x1,![]),'Surprised':new condition(_0x1fd1d8(0x13a),skipturnandyelp,skipturn,0x1,!![]),'Prone':new condition(_0x1fd1d8(0x1fa),losemove,losemove,0x1,![]),'Poisoned':new condition('Poisoned',()=>{},takedamage(0x1),0x2,![]),'Bleeding':new condition(_0x1fd1d8(0xc5),()=>{},takedamage(0x1),0x3,![]),'Unconscious':new condition(_0x1fd1d8(0xab),skipturn,0x1,![]),'Confident':new condition(_0x1fd1d8(0x7f),damagebonus(0x2),null,0x2,![],damagebonus(-0x2)),'Blind':new condition(_0x1fd1d8(0x147),null,null,0x1,![],null,null),'Burning':new condition(_0x1fd1d8(0x14c),burn,null,0x0,![],null),'OnFire':new condition(_0x1fd1d8(0x2ba),burn,burn,0x3,![],null),'Overwatch':new condition('Overwatch',null,null,0x0,![],null),'Resting':new condition(_0x1fd1d8(0x30c),()=>{},()=>{},0x0,![],()=>{}),'Restrained':new condition(_0x1fd1d8(0x129),skipturn,skipturn,0x1,![]),'Asleep':new condition(_0x1fd1d8(0xa2),skipturn,skipturn,0x1,![])},keybindings={'Aim':_0x1fd1d8(0x1da),'Dash':_0x1fd1d8(0x13e),'Standground':'s\x20-\x20stand\x20ground','Overwatch':_0x1fd1d8(0x305),'SwitchHands':'X\x20-\x20switch\x20hands','SwitchWeapons':_0x1fd1d8(0x2d7),'GetItem':_0x1fd1d8(0x210),'LeaveItem':'l\x20-\x20Leave\x20Item','LeaveItemOffhand':'L\x20-\x20Leave\x20Offhand\x20Item','Numbers':_0x1fd1d8(0x329),'Space':'Space\x20-\x20advance\x20turn'};let procgendebug=![],characterindex=0x0,cornershadows=![],partiallos=![],memorytilebrightness=0x6;const dontcaredistance=0x32,enemysightrange=0x1e,playersightrange=0x1e,mapsizex=0x64*0x4,mapsizey=0x34*0x4;let shrink=0x1,mult=0x1,viewportsizex=0x30*mult,viewportsizey=0x18*mult,fontsize=0x1a/mult;const enemypool=[Goblin,Goblin_Dagger,Goblin_Swordsman,Goblin_Spearman,Hobgoblin,Ogre,Skulker,Giant],clickfuncs={'Raise':function([_0x58de38,_0x4bad61]){const _0x53fcb3=_0x1fd1d8,_0x12a307=newgrid[_0x58de38][_0x4bad61][_0x53fcb3(0x1e7)];newgrid[_0x58de38][_0x4bad61]=new Tile(...tiletypes['RoughStoneFloor'],[_0x58de38,_0x4bad61]),newgrid[_0x58de38][_0x4bad61][_0x53fcb3(0x1e7)]=_0x12a307+0x1;},'Lower':function([_0x26bf79,_0x2e8a98]){const _0x4b02f3=_0x1fd1d8,_0x1ce6a4=newgrid[_0x26bf79][_0x2e8a98][_0x4b02f3(0x1e7)];newgrid[_0x26bf79][_0x2e8a98]=new Tile(...tiletypes[_0x4b02f3(0xa3)],[_0x26bf79,_0x2e8a98]),newgrid[_0x26bf79][_0x2e8a98][_0x4b02f3(0x1e7)]=_0x1ce6a4-0x1;},'Clear':([_0x4ae8e2,_0x359649])=>newgrid[_0x4ae8e2][_0x359649]=new Tile(...tiletypes[_0x1fd1d8(0x32a)],[_0x4ae8e2,_0x359649]),'Wall':([_0x4d0f6d,_0x234ce9])=>newgrid[_0x4d0f6d][_0x234ce9]=new Tile(...tiletypes[_0x1fd1d8(0x132)],[_0x4d0f6d,_0x234ce9])};let clickfunc=clickfuncs[_0x1fd1d8(0xf7)];const directionsincl=[[0x0,0x0],[-0x1,0x0],[0x1,0x0],[0x0,-0x1],[0x0,0x1],[-0x1,-0x1],[0x1,-0x1],[0x1,0x1],[-0x1,0x1]],directions=[[-0x1,0x0],[0x1,0x0],[0x0,-0x1],[0x0,0x1],[-0x1,-0x1],[0x1,-0x1],[0x1,0x1],[-0x1,0x1]],cardinaldirections=[[-0x1,0x0],[0x1,0x0],[0x0,-0x1],[0x0,0x1]],directionsextra=[[-0x1,0x0],[0x1,0x0],[0x0,-0x1],[0x0,0x1],[-0x1,-0x1],[0x1,-0x1],[0x1,0x1],[-0x1,0x1],[0x2,0x0],[0x2,0x1],[0x2,-0x1],[-0x2,0x0],[-0x2,0x1],[-0x2,-0x1],[0x0,0x2],[0x1,0x2],[-0x1,0x2],[0x0,-0x2],[0x1,-0x2],[-0x1,-0x2]],directionsextraincl=[[0x0,0x0],[-0x1,0x0],[0x1,0x0],[0x0,-0x1],[0x0,0x1],[-0x1,-0x1],[0x1,-0x1],[0x1,0x1],[-0x1,0x1],[0x2,0x0],[0x2,0x1],[0x2,-0x1],[-0x2,0x0],[-0x2,0x1],[-0x2,-0x1],[0x0,0x2],[0x1,0x2],[-0x1,0x2],[0x0,-0x2],[-0x1,-0x2],[-0x1,-0x2]],materials={'metal':[0.5,0.5,0.5],'water':[0.1,0.25,0.35],'stone':[0.6,0.6,0.6],'dirt':[0.7,0.5,0.4],'mud':[0.3,0.2,0.2],'abyss':[0x0,0x0,0x0],'crystal':[0x3,0x3,0x3],'brick':[0x1,0x1,0x1],'moss':[0.3,0.6,0.2],'wood':[0.5,0.25,0.2],'fire':[0x1,0.25,0.1],'marble':[0x1,0x1,0x1],'bone':[0x1,0x1,0x1],'blood':[0x1,0x0,0x0]},tiletypes={'Water':[_0x1fd1d8(0x88),materials[_0x1fd1d8(0x2a7)],'~',!![],0x2,0x1],'DirtFloor':[_0x1fd1d8(0x126),materials[_0x1fd1d8(0x258)],'B7',!![],0x1,0x1],'StoneFloor':['Stone\x20Floor',materials['stone'],'B7',!![],0x1,0x1],'CavernWall':['Cavern\x20Wall',materials[_0x1fd1d8(0xa0)],'#',![],null,0x0],'MossFloor':[_0x1fd1d8(0x7c),materials[_0x1fd1d8(0x280)],_0x1fd1d8(0x29e),!![],0x1,0x1],'RoughStoneFloor':[_0x1fd1d8(0xd2),materials[_0x1fd1d8(0xa0)],'B7',!![],0x1,0x1],'RoughStoneWall':[_0x1fd1d8(0x1db),materials[_0x1fd1d8(0xa0)],'=',![],null,0x0],'SmoothstoneFloor':[_0x1fd1d8(0x18f),materials[_0x1fd1d8(0xa0)],'0060',!![],0x1,0x1],'MossyWall':[_0x1fd1d8(0x7a),materials[_0x1fd1d8(0x280)],'#',![],null,0x0],'WoodFloor':[_0x1fd1d8(0x32d),materials['wood'],'B7',!![],0x1,0x1],'WoodWall':[_0x1fd1d8(0xf9),materials[_0x1fd1d8(0x141)],'#',![],null,0x0],'MudFloor':[_0x1fd1d8(0x152),materials[_0x1fd1d8(0x2f8)],'B7',!![],0x1,0x1],'MudWall':[_0x1fd1d8(0xc4),materials[_0x1fd1d8(0x2f8)],'#',![],null,0x0]},tiletypesarr=[tiletypes[_0x1fd1d8(0x88)],tiletypes[_0x1fd1d8(0x32a)],tiletypes[_0x1fd1d8(0x1fb)],tiletypes[_0x1fd1d8(0x132)],tiletypes[_0x1fd1d8(0xd0)],tiletypes['RoughStoneFloor'],tiletypes[_0x1fd1d8(0x16e)]],actions={'SwitchWeapon':[_0x1fd1d8(0x213),switchweapon,[0x0,0x0,0x0]],'HalfAttack':[_0x1fd1d8(0x373),attackfunc,[0x0,0.5,0x0]],'Attack':[_0x1fd1d8(0x373),attackfunc,[0x0,0x1,0x0]],'Open':[_0x1fd1d8(0x89),open,[0x0,0x0,0x0],1.9],'Dash':['Dash',dashfunc,[0x0,0x1,0x0]],'Interact':[_0x1fd1d8(0x18a),interact,[0x0,0x0,0x0],1.9]},statblocks={'Deserter':[0x3,0x0,0x2],'Exile':[0x1,0x2,0x0],'Wanderer':[0x1,0x2,0x0],'Berserker':[0x3,0x0,0x2],'Goblin':[0x0,0x0,0x0]};let tempwallsymbol='#',baselightrange=0x6,invlightrange=0x1/baselightrange,brightnessadjust=0x2,viewportoffsety=0x0,viewportoffsetx=0x0,throttleRate=0xa,lastCall=0x0,enemyturnstart=0x0,soundoffset=2.5,now=0x0,lastframe=0x0,frameticker=0x14,timeticker=0x0,checkedframe=![],blankpixelcount=0x0,noiseupdateticker=0x0;const noiseupdaterate=0x64,noisethreshold=0.5,waterthreshhold=0.6,noiseamount=0.1,lightflickerthreshhold=0.8,tileabsorbs=[materials[_0x1fd1d8(0x2a7)],materials['dirt'],materials['stone'],materials['stone'],materials[_0x1fd1d8(0x280)],materials[_0x1fd1d8(0xa0)],materials[_0x1fd1d8(0xa0)],materials[_0x1fd1d8(0x148)],materials[_0x1fd1d8(0x82)]];let diffgens=0x2;const cdiff=0x1/0x14;let gamma=1.4,ticktimer=0x64,renderedlastframe=!![],updatedlighting=!![],updatedsomething=!![],renderqueue=[];function updatelightmap(){let [_0x4a0387,_0x284cb3,_0x40eb15,_0x5a7005]=getlightingsize();updatelos(_0x4a0387,_0x284cb3,_0x40eb15,_0x5a7005),updatelighting(_0x4a0387,_0x284cb3,_0x40eb15,_0x5a7005),updatediffusion(_0x4a0387,_0x284cb3,_0x40eb15,_0x5a7005);}function getlightingsize(){let _0x10fac1=0x4,_0x4f9412=viewportpos[0x1]-viewportsizex/0x2-_0x10fac1,_0x29eff8=viewportpos[0x0]-viewportsizey/0x2-_0x10fac1,_0x201980=viewportpos[0x1]+viewportsizex/0x2+_0x10fac1,_0x55f3a7=viewportpos[0x0]+viewportsizey/0x2+_0x10fac1;return _0x29eff8<0x0&&(_0x29eff8=0x0,_0x55f3a7=viewportsizey+_0x10fac1),_0x55f3a7>mapsizey&&(_0x55f3a7=mapsizey,_0x29eff8=mapsizey-(viewportsizey+_0x10fac1)),_0x4f9412<0x0&&(_0x4f9412=0x0,_0x201980=viewportsizex+_0x10fac1),_0x201980>mapsizex&&(_0x201980=mapsizex,_0x4f9412=mapsizex-(viewportsizex+_0x10fac1)),[_0x4f9412,_0x29eff8,_0x201980,_0x55f3a7];}function updatelos(_0x5a05aa,_0x100e4f,_0x2d62ec,_0x217225){const _0x4177de=_0x1fd1d8;for(let _0x2230f1=_0x100e4f;_0x2230f1<_0x217225;_0x2230f1++){for(let _0x173f40=_0x5a05aa;_0x173f40<_0x2d62ec;_0x173f40++){newgrid[_0x2230f1][_0x173f40][_0x4177de(0x123)]=![];}}for(let _0x509385=_0x100e4f;_0x509385<_0x217225;_0x509385++){for(let _0x2e908f=_0x5a05aa;_0x2e908f<_0x2d62ec;_0x2e908f++){if(newgrid[_0x509385][_0x2e908f][_0x4177de(0xf6)]()>=0x1){newgrid[_0x509385][_0x2e908f]['visible']=!![];continue;}newgrid[_0x509385][_0x2e908f][_0x4177de(0x2bb)]=![];for(let _0x54e56c=0x0;_0x54e56c<playercs['length'];_0x54e56c++){if(playercs[_0x54e56c][_0x4177de(0xd7)]==!![]&&gameover==![])continue;else{if(gameover==!![]&&!playercs[_0x54e56c]==deathcharacter)continue;}const _0x18c405=drawLine3D([...playercs[_0x54e56c][_0x4177de(0x284)],newgrid[playercs[_0x54e56c][_0x4177de(0x284)][0x0]][playercs[_0x54e56c]['pos'][0x1]][_0x4177de(0x1e7)]+0x1],[_0x509385,_0x2e908f,newgrid[_0x509385][_0x2e908f][_0x4177de(0x1e7)]]);if(_0x18c405<0x1){newgrid[_0x509385][_0x2e908f][_0x4177de(0x123)]=!![];for(let _0x35f41b=_0x509385-0x1;_0x35f41b<=_0x509385+0x1;_0x35f41b++){if(_0x35f41b>0x0&&_0x35f41b<mapsizey)for(let _0x5f50dd=_0x2e908f-0x1;_0x5f50dd<=_0x2e908f+0x1;_0x5f50dd++){_0x5f50dd>0x0&&_0x5f50dd<mapsizex&&Math[_0x4177de(0x1be)](newgrid[_0x509385][_0x2e908f][_0x4177de(0x1e7)]-newgrid[_0x35f41b][_0x5f50dd][_0x4177de(0x1e7)])<0x2&&(newgrid[_0x35f41b][_0x5f50dd][_0x4177de(0x123)]=!![]);}}}_0x18c405&&(newgrid[_0x509385][_0x2e908f][_0x4177de(0x2bb)]=!![]);}}}}function updatelighting(_0x4c4d4a,_0x5efb4f,_0x3fa85e,_0x384954,_0x2c84d4=![]){const _0x34c753=_0x1fd1d8;let _0x5b7c07=[],_0x38d077=[];for(let _0x9bf02c=_0x5efb4f;_0x9bf02c<_0x384954;_0x9bf02c++){for(let _0x2626ea=_0x4c4d4a;_0x2626ea<_0x3fa85e;_0x2626ea++){let _0x1fa1ab=[];_0x1fa1ab=newgrid[_0x9bf02c][_0x2626ea][_0x34c753(0xbb)]();for(let _0x441ca0=0x0;_0x441ca0<_0x1fa1ab['length'];_0x441ca0++){let _0xd61fb0=_0x1fa1ab[_0x441ca0];_0xd61fb0[_0x34c753(0x284)]=[_0x9bf02c,_0x2626ea][_0x34c753(0x169)](),_0x5b7c07['push'](_0xd61fb0);}}}let _0x10396f;for(let _0x6a3721=_0x5efb4f;_0x6a3721<_0x384954;_0x6a3721++){for(let _0x4cde64=_0x4c4d4a;_0x4cde64<_0x3fa85e;_0x4cde64++){_0x10396f=newgrid[_0x6a3721][_0x4cde64];if(_0x2c84d4==![])_0x10396f[_0x34c753(0x96)]=null;_0x10396f[_0x34c753(0xf8)]=0x0;if(_0x10396f['visible']!==![]){for(let _0x1a709f=0x0;_0x1a709f<_0x5b7c07['length'];_0x1a709f++){let _0x44870d=_0x5b7c07[_0x1a709f],[_0x2aa5e3,_0x4940bd]=_0x44870d[_0x34c753(0x284)];if(Math[_0x34c753(0x1be)](_0x2aa5e3-_0x6a3721)>_0x44870d[_0x34c753(0x9d)]*baselightrange+0x2||Math[_0x34c753(0x1be)](_0x4940bd-_0x4cde64)>_0x44870d[_0x34c753(0x9d)]*baselightrange+0x2)continue;let [_0x4fe3be,_0x23eee2]=getlighting(_0x6a3721,_0x4cde64,_0x5b7c07[_0x1a709f]);_0x23eee2=Math[_0x34c753(0x115)](_0x23eee2,newgrid[_0x6a3721][_0x4cde64]['lightlevel']),_0x10396f[_0x34c753(0xf8)]=_0x23eee2;if(_0x2c84d4)continue;if(_0x10396f[_0x34c753(0x96)]===null){_0x10396f[_0x34c753(0x96)]=_0x4fe3be;continue;}_0x10396f[_0x34c753(0x96)][0x0]+=_0x4fe3be[0x0],_0x10396f['light'][0x1]+=_0x4fe3be[0x1],_0x10396f['light'][0x2]+=_0x4fe3be[0x2];}_0x10396f['lightlevel']==0x0&&_0x38d077[_0x34c753(0x1c6)](_0x10396f);}_0x10396f['light']===null&&(_0x10396f['light']=[0x0,0x0,0x0]);}}if(_0x2c84d4)return;let _0x51fcd6=[];for(let _0x1fd93f=0x0;_0x1fd93f<_0x38d077[_0x34c753(0x86)];_0x1fd93f++){_0x10396f=_0x38d077[_0x1fd93f],_0x10396f[_0x34c753(0xf8)]<0x1&&(_0x10396f[_0x34c753(0x123)]=![],_0x51fcd6[_0x34c753(0x1c6)](_0x10396f));}let [_0xa4060b,_0x2c7c2c]=[0x0,0x0],[_0x288610,_0x23c108]=[0x0,0x0],_0x41f778=[];for(let _0x1890a9=0x0;_0x1890a9<_0x51fcd6[_0x34c753(0x86)];_0x1890a9++){_0x10396f=_0x51fcd6[_0x1890a9];let [_0x1fa36e,_0x1555b8]=_0x10396f['pos'];for(let _0x2b2b74=0x0;_0x2b2b74<0x14;_0x2b2b74++){[_0xa4060b,_0x2c7c2c]=directionsextra[_0x2b2b74],[_0x288610,_0x23c108]=[_0x1fa36e+_0xa4060b,_0x1555b8+_0x2c7c2c];if(_0x288610<0x0||_0x288610>=mapsizey||_0x23c108<0x0||_0x23c108>=mapsizex)continue;let _0x542d49=0x0;_0x2b2b74>0x7&&(_0x542d49=drawline([_0x1fa36e,_0x1555b8],[_0x288610,_0x23c108]));if(_0x542d49>=0x1)continue;newgrid[_0x288610][_0x23c108][_0x34c753(0x123)]==!![]&&newgrid[_0x288610][_0x23c108]['readOpacity']()<0x1&&_0x41f778[_0x34c753(0x1c6)](_0x10396f);}}for(let _0x37c5cd=0x0;_0x37c5cd<_0x41f778[_0x34c753(0x86)];_0x37c5cd++){_0x10396f=_0x41f778[_0x37c5cd],_0x10396f['visible']=!![];}for(let _0xf3228f=0x0;_0xf3228f<playercs[_0x34c753(0x86)];_0xf3228f++){let _0x11a4a5=playercs[_0xf3228f];if(_0x11a4a5['dead'])continue;let [_0x560131,_0x341bbb]=_0x11a4a5[_0x34c753(0x284)];for(let _0x4f16ea=0x0;_0x4f16ea<0x14;_0x4f16ea++){let [_0x393473,_0x2d9d82]=directionsextraincl[_0x4f16ea],[_0x1a673a,_0x8c7c2d]=[_0x560131+_0x393473,_0x341bbb+_0x2d9d82],_0x5d2de1;if(_0x1a673a>_0x384954||_0x1a673a<_0x5efb4f||_0x8c7c2d>_0x3fa85e||_0x8c7c2d<_0x4c4d4a)continue;if(newgrid[_0x1a673a][_0x8c7c2d]['lightlevel']>=0x1)continue;let _0x167f2c=dist([_0x1a673a,_0x8c7c2d],_0x11a4a5[_0x34c753(0x284)]),_0x22a7d3=Math[_0x34c753(0x115)](0x1,Math['round'](_0x167f2c)),_0x374906=0x0;if(_0x4f16ea>0x8)_0x374906=drawline(_0x11a4a5[_0x34c753(0x284)],[_0x1a673a,_0x8c7c2d],![],!![]);_0x374906<0x1&&(newgrid[_0x1a673a][_0x8c7c2d]['visible']=!![],newgrid[_0x1a673a][_0x8c7c2d][_0x34c753(0x96)][0x0]+=0x10/_0x22a7d3,newgrid[_0x1a673a][_0x8c7c2d][_0x34c753(0x96)][0x1]+=0x10/_0x22a7d3,newgrid[_0x1a673a][_0x8c7c2d][_0x34c753(0x96)][0x2]+=0x10/_0x22a7d3);}}}function prunesightmap(_0x5871bd,_0x33c272,_0x1b5ac9,_0x41b52a){const _0x4844b5=_0x1fd1d8;for(let _0x15bcd2=_0x33c272;_0x15bcd2<_0x41b52a;_0x15bcd2++){for(let _0x3cf95b=_0x5871bd;_0x3cf95b<_0x1b5ac9;_0x3cf95b++){if(newgrid[_0x15bcd2][_0x3cf95b]['lightlevel']<0x1&&newgrid[_0x15bcd2][_0x3cf95b][_0x4844b5(0x123)]!==![]){!procgendebug&&(newgrid[_0x15bcd2][_0x3cf95b][_0x4844b5(0x123)]=![]);for(let _0x5c603a=_0x15bcd2-0x2;_0x5c603a<=_0x15bcd2+0x2;_0x5c603a++){if(_0x5c603a>0x0&&_0x5c603a<mapsizey)for(let _0x29b88d=_0x3cf95b-0x2;_0x29b88d<=_0x3cf95b+0x2;_0x29b88d++){if(!newgrid[_0x5c603a]||!newgrid[_0x5c603a][_0x29b88d])continue;if(newgrid[_0x5c603a][_0x29b88d][_0x4844b5(0xf8)]<0x1)continue;if(_0x29b88d>0x0&&_0x29b88d<mapsizex){const _0xf8b2b9=drawline([_0x15bcd2,_0x3cf95b],[_0x5c603a,_0x29b88d]);if(newgrid[_0x5c603a][_0x29b88d]['readOpacity']()<0x1&&_0xf8b2b9<0x1){newgrid[_0x15bcd2][_0x3cf95b][_0x4844b5(0x123)]=!![];break;}}}}}if(newgrid[_0x15bcd2][_0x3cf95b][_0x4844b5(0xf8)]<0x1||newgrid[_0x15bcd2][_0x3cf95b]['visible']==![])for(let _0x368672=0x0;_0x368672<playercs[_0x4844b5(0x86)];_0x368672++){let _0x59c4ab=playercs[_0x368672];if(_0x59c4ab[_0x4844b5(0xd7)])continue;let _0x366689=dist([_0x15bcd2,_0x3cf95b],_0x59c4ab[_0x4844b5(0x284)]);if(_0x366689>=3.5)continue;let _0x3e445a=Math[_0x4844b5(0x115)](0x1,Math[_0x4844b5(0x8a)](_0x366689)),_0x33e3f3=drawline(_0x59c4ab[_0x4844b5(0x284)],[_0x15bcd2,_0x3cf95b],![],!![]);_0x33e3f3<0x1&&(newgrid[_0x15bcd2][_0x3cf95b][_0x4844b5(0x123)]=!![],newgrid[_0x15bcd2][_0x3cf95b][_0x4844b5(0x96)][0x0]+=0x10/_0x3e445a,newgrid[_0x15bcd2][_0x3cf95b][_0x4844b5(0x96)][0x1]+=0x10/_0x3e445a,newgrid[_0x15bcd2][_0x3cf95b][_0x4844b5(0x96)][0x2]+=0x10/_0x3e445a);}}}}function updatediffusion(_0x5643ac,_0x5f4fb7,_0x17fe27,_0x2244eb){const _0x10e35e=_0x1fd1d8,_0x2eb888=directions['length'],_0x11d770=[0x0,0x0,0x0],_0x4e888e=[0x0,0x0,0x0];let _0x3fcf61=0x0,_0x53f26d=[];for(let _0x30e24e=0x0;_0x30e24e<diffgens;_0x30e24e++){_0x53f26d=[];for(let _0x30cf70=_0x5f4fb7;_0x30cf70<_0x2244eb;_0x30cf70++){for(let _0x20f60c=_0x5643ac;_0x20f60c<_0x17fe27;_0x20f60c++){const _0x28b2ff=newgrid[_0x30cf70][_0x20f60c]['light'],_0x77cc14=newgrid[_0x30cf70][_0x20f60c][_0x10e35e(0x1ad)],_0x423de1=newgrid[_0x30cf70][_0x20f60c]['elevation'];let _0x233ddf=[0x0,0x0,0x0];if(newgrid[_0x30cf70][_0x20f60c][_0x10e35e(0xf6)]()>=0x1)continue;for(let _0x950cbf=0x0;_0x950cbf<_0x2eb888;_0x950cbf++){const _0x4161ea=directions[_0x950cbf],[_0x2a4a79,_0x3d9e7f]=[_0x4161ea[0x0]+_0x30cf70,_0x4161ea[0x1]+_0x20f60c];if(newgrid[_0x2a4a79]&&newgrid[_0x2a4a79][_0x3d9e7f]){if(newgrid[_0x2a4a79][_0x3d9e7f]['visible']==![])continue;if(newgrid[_0x2a4a79][_0x3d9e7f][_0x10e35e(0xf6)]()>=0x1)continue;const _0x4e1d19=newgrid[_0x2a4a79][_0x3d9e7f]['light'],_0x180a05=newgrid[_0x2a4a79][_0x3d9e7f][_0x10e35e(0x1ad)];for(let _0xe46fab=0x0;_0xe46fab<0x3;_0xe46fab++){_0x11d770[_0xe46fab]=cdiff*_0x4e1d19[_0xe46fab]*_0x180a05[_0xe46fab],_0x4e888e[_0xe46fab]=cdiff*_0x28b2ff[_0xe46fab]*_0x77cc14[_0xe46fab];}_0x3fcf61=(_0x4e888e[0x0]+_0x4e888e[0x1]+_0x4e888e[0x2])/0x3;if(_0x423de1<=newgrid[_0x2a4a79][_0x3d9e7f][_0x10e35e(0x1e7)])for(let _0x3d498b=0x0;_0x3d498b<0x3;_0x3d498b++){_0x233ddf[_0x3d498b]+=_0x11d770[_0x3d498b];}}}_0x53f26d[_0x10e35e(0x1c6)](newgrid[_0x30cf70][_0x20f60c]),_0x53f26d[_0x10e35e(0x1c6)](_0x233ddf);}}for(let _0x311def=0x0;_0x311def<_0x53f26d[_0x10e35e(0x86)];_0x311def+=0x2){let _0x55df8d=_0x53f26d[_0x311def],_0x36b3eb=_0x53f26d[_0x311def+0x1];_0x55df8d['light'][0x0]+=_0x36b3eb[0x0],_0x55df8d[_0x10e35e(0x96)][0x1]+=_0x36b3eb[0x1],_0x55df8d[_0x10e35e(0x96)][0x2]+=_0x36b3eb[0x2];}}}function getlighting(_0x6682fa,_0x2a5d3a,_0x190707){const _0x5f1087=_0x1fd1d8;let _0x5156b4=[_0x190707['color'][0x0],_0x190707[_0x5f1087(0x334)][0x1],_0x190707[_0x5f1087(0x334)][0x2]];const [_0x174310,_0x2c1f36]=_0x190707[_0x5f1087(0x284)];let _0x2098eb=_0x190707[_0x5f1087(0x2c6)],_0x111ea1=_0x190707[_0x5f1087(0x284)];const _0x27bbca=newgrid[_0x190707[_0x5f1087(0x284)][0x0]][_0x190707[_0x5f1087(0x284)][0x1]];let _0xc1cd16=_0x27bbca[_0x5f1087(0x1e7)]+0x1,_0x46ba74=dist([_0x6682fa,_0x2a5d3a],[_0x174310,_0x2c1f36]);const _0x4fbfd8=newgrid[_0x6682fa][_0x2a5d3a]['elevation'];if(_0xc1cd16!==newgrid[_0x6682fa][_0x2a5d3a]['elevation'])_0x46ba74=Math[_0x5f1087(0xe8)](_0x46ba74**0x2+Math[_0x5f1087(0x1be)](_0xc1cd16-_0x4fbfd8)**0x2);let _0x41852f=Math[_0x5f1087(0x1ac)](Math['round'](_0x190707['radiance']-(_0x46ba74-0x1)/baselightrange),_0x190707[_0x5f1087(0x9d)]);if(_0x41852f<=0x0)return[[0x0,0x0,0x0],0x0];const _0x4adc34=drawLine3D([..._0x111ea1,_0xc1cd16],[_0x6682fa,_0x2a5d3a,_0x4fbfd8]);if(_0x4adc34>=0x1)return[[0x0,0x0,0x0],0x0];_0x41852f=Math['round'](_0x190707[_0x5f1087(0x9d)]-(_0x46ba74-0x1)*(0x1+_0x4adc34)/baselightrange);for(let _0xf7167f=0x0;_0xf7167f<0x3;_0xf7167f++){_0x5156b4[_0xf7167f]=Math['round'](_0x5156b4[_0xf7167f]*noisemap[_0x174310][_0x2c1f36]*(0x1/((_0x46ba74/_0x2098eb[_0xf7167f])**0x2+0.5))*(0x1-_0x4adc34));}return[_0x5156b4,_0x41852f];}function generate(){const _0x55ef93=_0x1fd1d8;if(tutorial){tutorialgen();return;}playercs=[],nonpcs=[];let [_0x8c6f6a,_0x5857eb]=region2gen(mapsizey,mapsizex,0x1e,0xa0),_0x3c1da2=perlinNoise(mapsizex,mapsizey,0x5),_0x4133ed=![];for(let _0xd28a53=0x0;_0xd28a53<_0x5857eb[_0x55ef93(0x86)];_0xd28a53++){_0x4133ed=![];if(Math['random']()>0.5){}let _0x2c137e=_0x5857eb[_0xd28a53],[_0x52532d,_0x3e6962]=_0x2c137e[_0x55ef93(0x284)],_0x463961=_0x2c137e[_0x55ef93(0x1bf)];for(let _0x42f142=0x0;_0x42f142<_0x463961['length'];_0x42f142++){for(let _0xcfebd4=0x0;_0xcfebd4<_0x463961[0x0][_0x55ef93(0x86)];_0xcfebd4++){let [_0x9c3593,_0x144bc0]=[_0x42f142+_0x52532d,_0xcfebd4+_0x3e6962];if(_0x2c137e['boss']||_0x2c137e[_0x55ef93(0x2de)]||_0x2c137e[_0x55ef93(0x259)])(_0x463961[_0x42f142][_0xcfebd4]==0x1||_0x463961[_0x42f142][_0xcfebd4]==0x2||_0x463961[_0x42f142][_0xcfebd4]==0x3||_0x463961[_0x42f142][_0xcfebd4]==0x4)&&(newgrid[_0x9c3593][_0x144bc0]=new Tile(...tiletypes[_0x55ef93(0x1dc)],[_0x9c3593,_0x144bc0])),newgrid[_0x9c3593][_0x144bc0][_0x55ef93(0xcd)]==![]&&newgrid[_0x9c3593][_0x144bc0][_0x55ef93(0x274)]['length']==0x0&&_0x463961[_0x42f142][_0xcfebd4]==0x5&&(newgrid[_0x9c3593][_0x144bc0]=new Tile(...tiletypes[_0x55ef93(0x93)],[_0x9c3593,_0x144bc0]));else{if(_0x463961[_0x42f142][_0xcfebd4]==0x1||_0x463961[_0x42f142][_0xcfebd4]==0x2||_0x463961[_0x42f142][_0xcfebd4]==0x3||_0x463961[_0x42f142][_0xcfebd4]==0x4){if(_0x8c6f6a[_0x9c3593][_0x144bc0]==0x4&&_0x3c1da2[_0x9c3593][_0x144bc0]>0.1){newgrid[_0x9c3593][_0x144bc0]=new Tile(...tiletypes['DirtFloor'],[_0x9c3593,_0x144bc0]);if(_0x3c1da2[_0x9c3593][_0x144bc0]>0.2)newgrid[_0x9c3593][_0x144bc0]=new Tile(...tiletypes[_0x55ef93(0xd0)],[_0x9c3593,_0x144bc0]);if(_0x3c1da2[_0x9c3593][_0x144bc0]>0.3&&Math[_0x55ef93(0x222)]()<_0x3c1da2[_0x9c3593][_0x144bc0])newgrid[_0x9c3593][_0x144bc0][_0x55ef93(0x29b)](new TallGrass());else{if(_0x3c1da2[_0x9c3593][_0x144bc0]>0.4)newgrid[_0x9c3593][_0x144bc0][_0x55ef93(0x248)](new Water());}}else{if(_0x2c137e['dungeon'])newgrid[_0x9c3593][_0x144bc0]=new Tile(...tiletypes[_0x55ef93(0x1b0)],[_0x9c3593,_0x144bc0]);else newgrid[_0x9c3593][_0x144bc0]=new Tile(...tiletypes['StoneFloor'],[_0x9c3593,_0x144bc0]);_0x3c1da2[_0x9c3593][_0x144bc0]>0.3&&(newgrid[_0x9c3593][_0x144bc0]=new Tile(...tiletypes[_0x55ef93(0xd0)],[_0x9c3593,_0x144bc0]));}}_0x4133ed===!![]&&_0x463961[_0x42f142][_0xcfebd4]!==0x0&&_0x463961[_0x42f142][_0xcfebd4]!==0x6&&(newgrid[_0x9c3593][_0x144bc0][_0x55ef93(0x1e7)]=0x2,(_0x463961[_0x42f142][_0xcfebd4]==0x2||_0x463961[_0x42f142][_0xcfebd4]==0x3||_0x463961[_0x42f142][_0xcfebd4]==0x4)&&(newgrid[_0x9c3593][_0x144bc0]=new Tile(...tiletypes['DirtFloor'],[_0x9c3593,_0x144bc0]),newgrid[_0x9c3593][_0x144bc0][_0x55ef93(0x1e7)]=0x1));if(newgrid[_0x9c3593][_0x144bc0][_0x55ef93(0xcd)]==![]&&newgrid[_0x9c3593][_0x144bc0][_0x55ef93(0x274)]['length']==0x0&&_0x3c1da2[_0x9c3593][_0x144bc0]>0.3)newgrid[_0x9c3593][_0x144bc0]=new Tile(...tiletypes[_0x55ef93(0x192)],[_0x9c3593,_0x144bc0]);}}}for(let _0x557c52=0x0;_0x557c52<_0x2c137e['doors'][_0x55ef93(0x86)];_0x557c52++){let [_0x60aee6,_0x252005]=_0x2c137e[_0x55ef93(0x253)][_0x557c52],[_0x38d704,_0x27e397]=[_0x60aee6+_0x52532d,_0x252005+_0x3e6962];newgrid[_0x38d704][_0x27e397][_0x55ef93(0x29b)](new door([_0x38d704,_0x27e397]));}let [_0xa47ea0,_0x559246]=_0x2c137e[_0x55ef93(0x284)];for(let _0x47f03e=0x0;_0x47f03e<_0x2c137e[_0x55ef93(0x2e5)][_0x55ef93(0x86)];_0x47f03e++){let [_0x396458,_0x455257]=_0x2c137e[_0x55ef93(0x2e5)][_0x47f03e],[_0x412e5a,_0x141f8d]=[_0x396458+_0xa47ea0,_0x455257+_0x559246],_0x389df7=_0x2c137e[_0x55ef93(0x36a)][_0x47f03e];switch(_0x389df7){case 0x0:newgrid[_0x412e5a][_0x141f8d][_0x55ef93(0x313)](new Deserter([_0x412e5a,_0x141f8d]));break;case 0x1:newgrid[_0x412e5a][_0x141f8d]['addCharacter'](new Goblin([_0x412e5a,_0x141f8d]));break;case 0x2:if(Math['random']()>0.33)newgrid[_0x412e5a][_0x141f8d]['addCharacter'](new Goblin_Dagger([_0x412e5a,_0x141f8d]));else newgrid[_0x412e5a][_0x141f8d][_0x55ef93(0x313)](new Goblin_Shortbow([_0x412e5a,_0x141f8d]));break;case 0x3:switch(Math['floor'](Math[_0x55ef93(0x222)]()*0x4)){case 0x1:newgrid[_0x412e5a][_0x141f8d][_0x55ef93(0x313)](new Goblin_Shortbow([_0x412e5a,_0x141f8d]));break;case 0x2:newgrid[_0x412e5a][_0x141f8d][_0x55ef93(0x313)](new Goblin_Spearman([_0x412e5a,_0x141f8d]));break;case 0x3:newgrid[_0x412e5a][_0x141f8d][_0x55ef93(0x313)](new Goblin_Swordsman([_0x412e5a,_0x141f8d]));break;}break;case 0x4:switch(Math[_0x55ef93(0xfa)](Math['random']()*0x4)){case 0x0:newgrid[_0x412e5a][_0x141f8d]['addCharacter'](new Skulker([_0x412e5a,_0x141f8d]));break;case 0x1:newgrid[_0x412e5a][_0x141f8d][_0x55ef93(0x313)](new Ogre([_0x412e5a,_0x141f8d]));break;default:newgrid[_0x412e5a][_0x141f8d][_0x55ef93(0x313)](new Hobgoblin([_0x412e5a,_0x141f8d]));break;}break;case 0x5:newgrid[_0x412e5a][_0x141f8d]['addCharacter'](new Goblin_Hivequeen([_0x412e5a,_0x141f8d]));break;case 0x6:newgrid[_0x412e5a][_0x141f8d]['addObject'](new Spawning_Membrane([_0x412e5a,_0x141f8d]));break;case 0x7:newgrid[_0x412e5a][_0x141f8d]['addObject'](new Chest([_0x412e5a,_0x141f8d]));break;case 0x8:newgrid[_0x412e5a][_0x141f8d][_0x55ef93(0x313)](new Giant([_0x412e5a,_0x141f8d]));break;case 0x9:newgrid[_0x412e5a][_0x141f8d]['addObject'](new spikeTrap([_0x412e5a,_0x141f8d]));break;case 0xa:newgrid[_0x412e5a][_0x141f8d]['addCharacter'](new Hobgoblin_Warlord([_0x412e5a,_0x141f8d]));break;case 0xb:newgrid[_0x412e5a][_0x141f8d]['addObject'](new Spawning_Membrane_Special());break;}}for(let _0x4acf40=0x0;_0x4acf40<_0x2c137e['pittiles']['length'];_0x4acf40++){let [_0x19b7ff,_0x1cd6d2]=_0x2c137e['pittiles'][_0x4acf40],[_0x1dd069,_0x2601fa]=[_0x19b7ff+_0xa47ea0,_0x1cd6d2+_0x559246];newgrid[_0x1dd069][_0x2601fa]=new Tile(...tiletypes[_0x55ef93(0x1fb)],[_0x1dd069,_0x2601fa]),newgrid[_0x1dd069][_0x2601fa][_0x55ef93(0x1e7)]=-0x2;}}activecharacternonindex=playercs[0x0];}function tutorialgen(){const _0x5c0a72=_0x1fd1d8;newgrid[0x64][0xc8][_0x5c0a72(0x313)](new Deserter([0x64,0xc8])),newgrid[0x5a][0xc8][_0x5c0a72(0x313)](new Goblin([0x5a,0xc8])),activecharacternonindex=playercs[0x0];return;}let successes=0x0,failures=0x0;function region1gen(..._0x441df8){let _0xe21dda=[[0xa,0x1]];return generatenoise(..._0x441df8,_0xe21dda);}function region2gen(..._0x4c1a78){let _0x34dd95=[[0x5,0x1],[0x9,0x1]];return generatenoise(..._0x4c1a78,_0x34dd95);}function generatenoise(_0x40d67f,_0x320fd4,_0x551802,_0x3f8813=0x32,_0x321c00){const _0x2b07b0=_0x1fd1d8;class _0x2a22e2{constructor(){const _0x303acc=_0x438d;this[_0x303acc(0x36a)]=[],this['neighborsnonindex']=[],this[_0x303acc(0x28f)]=[],this[_0x303acc(0x2e5)]=[],this['walls']=[],this[_0x303acc(0x1e8)]=[],this[_0x303acc(0x356)]=[],this[_0x303acc(0x253)]=[],this[_0x303acc(0x1d8)]=0x0;}['generategrid'](){const _0x175d4a=_0x438d;let _0x484cbd=this,_0x387814=[],_0xb70a38=_0x484cbd[_0x175d4a(0x1ae)][_0x175d4a(0xcc)](_0x484cbd[_0x175d4a(0x1e8)]),[_0x54aeea,_0x5b5f48]=[0x3e7,0x0],[_0xadfde8,_0x4e41b7]=[0x3e7,0x0];for(let _0x339096=0x0;_0x339096<_0xb70a38[_0x175d4a(0x86)];_0x339096++){let [_0x4ccadc,_0x1e3c1a]=_0xb70a38[_0x339096];if(_0x1e3c1a<_0x54aeea)_0x54aeea=_0x1e3c1a;if(_0x1e3c1a>_0x5b5f48)_0x5b5f48=_0x1e3c1a;if(_0x4ccadc<_0xadfde8)_0xadfde8=_0x4ccadc;if(_0x4ccadc>_0x4e41b7)_0x4e41b7=_0x4ccadc;}let _0x59a1d9=_0x5b5f48-_0x54aeea+0x1,_0x3a075e=_0x4e41b7-_0xadfde8+0x1;for(let _0xa8bb53=0x0;_0xa8bb53<_0x3a075e;_0xa8bb53++){_0x387814[_0xa8bb53]=[];for(let _0x4f90a2=0x0;_0x4f90a2<_0x59a1d9;_0x4f90a2++){_0x387814[_0xa8bb53][_0x4f90a2]=0x0;}}for(let _0x33b9b3=0x0;_0x33b9b3<_0x484cbd['tiles'][_0x175d4a(0x86)];_0x33b9b3++){let [_0x47b8f3,_0x5a94d5]=_0x484cbd[_0x175d4a(0x1ae)][_0x33b9b3];_0x387814[_0x47b8f3-_0xadfde8][_0x5a94d5-_0x54aeea]=0x1;}for(let _0x54fb65=0x0;_0x54fb65<_0x484cbd[_0x175d4a(0x1e8)][_0x175d4a(0x86)];_0x54fb65++){let [_0x298984,_0x249157]=_0x484cbd['walltiles'][_0x54fb65];_0x387814[_0x298984-_0xadfde8][_0x249157-_0x54aeea]=0x5;}this[_0x175d4a(0x284)]=[_0xadfde8,_0x54aeea],this[_0x175d4a(0x1bf)]=_0x387814;}[_0x2b07b0(0x33c)](){const _0x20360a=_0x2b07b0,_0x3035f1=this,_0x55a25c=this[_0x20360a(0x1bf)],[_0xe2ae8e,_0x52ee71]=this[_0x20360a(0x284)];for(let _0x404cd0=0x0;_0x404cd0<_0x3035f1[_0x20360a(0x134)][_0x20360a(0x86)];_0x404cd0++){let _0x5e1683=_0x3035f1[_0x20360a(0x10e)][_0x3035f1[_0x20360a(0x28f)][_0x404cd0]],_0x2897ab=this[_0x20360a(0x134)][_0x404cd0],_0x39dd3b=![],_0x23ed3d=![],_0x4fba39=0x1;if(_0x2897ab[_0x20360a(0x197)]<=_0x3035f1[_0x20360a(0x197)])_0x39dd3b=!![];if(_0x2897ab[_0x20360a(0x197)]>=_0x3035f1[_0x20360a(0x197)])_0x23ed3d=!![];if(_0x39dd3b)_0x4fba39+=0x1;if(_0x23ed3d)_0x4fba39+=0x2;let [_0x303f9d,_0x4d5a45]=[0x0,0x0];for(let _0x19bcac=0x0;_0x19bcac<_0x5e1683[_0x20360a(0x86)];_0x19bcac++){_0x4d5a45+=_0x5e1683[_0x19bcac][0x1],_0x303f9d+=_0x5e1683[_0x19bcac][0x0];}let [_0x20c5bb,_0x5cc131]=[_0x303f9d/_0x5e1683['length'],_0x4d5a45/_0x5e1683['length']];_0x5e1683=_0x5e1683[_0x20360a(0x33a)](([_0x14475c,_0x2c5084],[_0x41454c,_0x60494e])=>_0x5252d7([_0x14475c,_0x2c5084],[_0x20c5bb,_0x5cc131])-_0x5252d7([_0x41454c,_0x60494e],[_0x20c5bb,_0x5cc131]));for(let _0x4b2c32=0x0;_0x4b2c32<0x1;_0x4b2c32++){let [_0x4fbfc8,_0x3f2346]=_0x5e1683[_0x4b2c32];_0x55a25c[_0x4fbfc8-_0xe2ae8e][_0x3f2346-_0x52ee71]=_0x4fba39;}}let _0x2ff44b=!![];for(let _0x328d7b=0x0;_0x328d7b<this['roomgrid'][_0x20360a(0x86)];_0x328d7b++){for(let _0x1df5a5=0x0;_0x1df5a5<this[_0x20360a(0x1bf)][0x0][_0x20360a(0x86)];_0x1df5a5++){(this[_0x20360a(0x1bf)][_0x328d7b][_0x1df5a5]==0x3||this[_0x20360a(0x1bf)][_0x328d7b][_0x1df5a5]==0x4)&&(_0x2ff44b=![]);}}this[_0x20360a(0x1f6)]=_0x2ff44b;function _0x5252d7([_0x4a102f,_0x13c09b],[_0x5db0e4,_0x55849b]){const _0x5464eb=_0x20360a;return Math[_0x5464eb(0xe8)]((_0x4a102f-_0x5db0e4)**0x2+(_0x13c09b-_0x55849b)**0x2);}}[_0x2b07b0(0x2bf)](){const _0x563da3=_0x2b07b0;let _0x1767e6=this['depth'],_0x1e6d17=0x3,_0x58516b=0x0;if(_0x1767e6<0x4)while(_0x58516b<_0x1e6d17){let _0x26e954=Math[_0x563da3(0xc6)](Math[_0x563da3(0x222)]()*0x2);this[_0x563da3(0x36a)][_0x563da3(0x1c6)](_0x26e954),_0x58516b+=_0x26e954;}else{if(_0x1767e6<0x8){_0x1e6d17=0x5;while(_0x58516b<_0x1e6d17){let _0x242cca=Math[_0x563da3(0xc6)](Math[_0x563da3(0x222)]()*0x3);this[_0x563da3(0x36a)][_0x563da3(0x1c6)](_0x242cca),_0x58516b+=_0x242cca;}}else{_0x1e6d17=0x8;while(_0x58516b<_0x1e6d17){let _0x1844c2=Math[_0x563da3(0xc6)](Math[_0x563da3(0x222)]()*0x4);this[_0x563da3(0x36a)][_0x563da3(0x1c6)](_0x1844c2),_0x58516b+=_0x1844c2;}}}if(this[_0x563da3(0x25a)]&&!this['ruins']){this[_0x563da3(0x36a)][_0x563da3(0x1c6)](Math[_0x563da3(0x1ac)](0x4,_0x1767e6)),this[_0x563da3(0x36a)][_0x563da3(0x1c6)](Math[_0x563da3(0x1ac)](0x4,_0x1767e6));if(Math[_0x563da3(0x222)]()>0.5)this['enemies']['push'](0x7);let _0xb0b594=0x4;for(let _0x15c041=0x0;_0x15c041<_0xb0b594;_0x15c041++){this['enemies'][_0x563da3(0x1c6)](0x9);}}this[_0x563da3(0xd5)]&&(this[_0x563da3(0x36a)]=[0x5,0x6,0x6,0x6,0x6,0x6,0x6,0x6,0x6,0x6,0x6,0x6,0x6,0x6]);this[_0x563da3(0x2de)]&&(this[_0x563da3(0x36a)]['push'](0x6),this[_0x563da3(0x36a)][_0x563da3(0x1c6)](0x6),this[_0x563da3(0x36a)][_0x563da3(0x1c6)](0x6),this[_0x563da3(0x36a)][_0x563da3(0x1c6)](0x6),this[_0x563da3(0x36a)][_0x563da3(0x1c6)](0x6));this[_0x563da3(0x289)]&&this['enemies'][_0x563da3(0x1c6)](Math['min'](0x4,_0x1767e6));this[_0x563da3(0x14e)]&&(this['enemies'][_0x563da3(0x1c6)](0x8),this['enemies'][_0x563da3(0x1c6)](0x7));if(this[_0x563da3(0x259)])this[_0x563da3(0x36a)]=[0x0,0xb,0xb,0xb];else{}let _0x3ea4c5=[],_0x32257d=[];for(let _0x367df0=0x0;_0x367df0<this[_0x563da3(0x1bf)]['length'];_0x367df0++){_0x3ea4c5[_0x367df0]=[];for(let _0x88ac9=0x0;_0x88ac9<this[_0x563da3(0x1bf)][0x0][_0x563da3(0x86)];_0x88ac9++){if(this['roomgrid'][_0x367df0][_0x88ac9]==0x2||this[_0x563da3(0x1bf)][_0x367df0][_0x88ac9]==0x4)_0x32257d[_0x563da3(0x1c6)]([_0x367df0,_0x88ac9]);_0x3ea4c5[_0x367df0][_0x88ac9]=null;}}let _0x2ba607=0x0;while(_0x32257d[_0x563da3(0x86)]>0x0){let _0x41bab2=_0x32257d[_0x563da3(0x86)];for(let _0xda3369=0x0;_0xda3369<_0x41bab2;_0xda3369++){let [_0x21290b,_0x2a36ee]=_0x32257d['shift']();if(_0x3ea4c5[_0x21290b]===undefined||_0x3ea4c5[_0x21290b][_0x2a36ee]===undefined)continue;if(_0x3ea4c5[_0x21290b][_0x2a36ee]!==null)continue;if(this['roomgrid'][_0x21290b][_0x2a36ee]!==0x1)continue;_0x3ea4c5[_0x21290b][_0x2a36ee]=_0x2ba607;for(let _0x2f7f39=0x0;_0x2f7f39<0x4;_0x2f7f39++){let [_0x1ed4c4,_0x2b1dd2]=directions[_0x2f7f39],[_0x1e4e74,_0x11c6df]=[_0x21290b+_0x1ed4c4,_0x2a36ee+_0x2b1dd2];_0x32257d[_0x563da3(0x1c6)]([_0x1e4e74,_0x11c6df]);}}_0x2ba607++;}for(let _0x529b9f=0x0;_0x529b9f<this['enemies'][_0x563da3(0x86)];_0x529b9f++){let _0x5c3dd2=0x5,_0x1ccd60=0x4,_0x32a4aa=this['enemies'][_0x529b9f];_0x32a4aa==0x1&&(_0x5c3dd2=0x5+Math[_0x563da3(0x8a)](Math['random']()*0x4),_0x1ccd60=0x4);_0x32a4aa==0x2&&(_0x5c3dd2=0xa,_0x1ccd60=0x5);_0x32a4aa==0x3&&(_0x5c3dd2=0x14,_0x1ccd60=0x1);let _0x36c25d,_0x1364c4;for(let _0x24081c=0x0;_0x24081c<this['roomgrid']['length'];_0x24081c++){for(let _0x131b6f=0x0;_0x131b6f<this[_0x563da3(0x1bf)][0x0]['length'];_0x131b6f++){if(this['roomgrid'][_0x24081c][_0x131b6f]!==0x1)continue;if(_0x3ea4c5[_0x24081c][_0x131b6f]===undefined)continue;let _0x181437=0x0;if(_0x5c3dd2!=0x0)_0x181437=Math[_0x563da3(0x1be)](_0x3ea4c5[_0x24081c][_0x131b6f]-_0x5c3dd2);let _0x528751=![],_0x1d4133;for(let _0x197b84=0x0;_0x197b84<this[_0x563da3(0x2e5)][_0x563da3(0x86)];_0x197b84++){let [_0x1b4951,_0x29ea92]=this['spawnpoints'][_0x197b84];_0x29ea92==_0x131b6f&&_0x1b4951==_0x24081c&&(_0x528751=!![]),_0x1d4133=Math['max'](-_0x1ccd60,-Math['sqrt'](Math[_0x563da3(0x115)](Math['abs'](_0x29ea92-_0x131b6f),Math[_0x563da3(0x1be)](_0x1b4951-_0x24081c)))),_0x181437+=_0x1d4133;}if(_0x528751)continue;if(_0x32a4aa==0x6||_0x32a4aa==0x9)_0x181437=Math['random']();(_0x181437<_0x1364c4||_0x1364c4===undefined)&&(_0x36c25d=[_0x24081c,_0x131b6f],_0x1364c4=_0x181437);}}if(_0x36c25d)this['spawnpoints'][_0x563da3(0x1c6)](_0x36c25d);}}[_0x2b07b0(0x92)](){const _0x83dd40=_0x2b07b0;let _0x12a92b=Math[_0x83dd40(0xfa)](Math[_0x83dd40(0x222)]()*this['roomgrid'][_0x83dd40(0x86)]),_0x1034eb=Math[_0x83dd40(0xfa)](Math['random']()*this[_0x83dd40(0x1bf)][0x0]['length']);if(this[_0x83dd40(0x1bf)][_0x12a92b][_0x1034eb]==0x0)return this[_0x83dd40(0x92)]();else return[_0x12a92b,_0x1034eb];}[_0x2b07b0(0x281)]([_0x24742c,_0x5448bb]){const _0x5374a3=_0x2b07b0;let _0x1e4450=0x3e7,_0x433b97,_0x563c97=[[_0x24742c,_0x5448bb]];const _0x142f98=this[_0x5374a3(0x1bf)];let _0x565934={};while(_0x563c97[_0x5374a3(0x86)]>0x0){let [_0x2ecfc4,_0x12aae1]=_0x563c97[_0x5374a3(0x1c4)]();if(_0x565934[_0x2ecfc4+','+_0x12aae1])continue;if(!_0x142f98[_0x2ecfc4]||!_0x142f98[_0x2ecfc4][_0x12aae1])continue;let _0x171822=Math[_0x5374a3(0x1be)](_0x2ecfc4-_0x24742c)+Math[_0x5374a3(0x1be)](_0x12aae1-_0x5448bb);if(_0x142f98[_0x2ecfc4][_0x12aae1]!==0x0){if(_0x142f98[_0x2ecfc4][_0x12aae1]==0x2&&!(_0x1e4450<_0x171822))_0x1e4450=_0x171822;_0x565934[_0x2ecfc4+','+_0x12aae1]=0x1,_0x563c97[_0x5374a3(0x1c6)]([_0x2ecfc4+0x1,_0x12aae1]),_0x563c97[_0x5374a3(0x1c6)]([_0x2ecfc4-0x1,_0x12aae1]),_0x563c97[_0x5374a3(0x1c6)]([_0x2ecfc4,_0x12aae1+0x1]),_0x563c97[_0x5374a3(0x1c6)]([_0x2ecfc4,_0x12aae1-0x1]);}}return-Math[_0x5374a3(0x1be)](_0x1e4450-0x3);}['restructure'](){const _0xcb8f94=_0x2b07b0,_0x104752=this;this[_0xcb8f94(0xf2)]=[];let _0x397474=this['roomgrid'],_0x3fe518=[],_0x14ba1c=0x0,_0x3003a7=0x0;if((this[_0xcb8f94(0x25a)]||this['miniboss'])&&!this['boss']&&!this['bossbuffer']&&!this['origin']){for(let _0x2ed9d0=0x0;_0x2ed9d0<this[_0xcb8f94(0x1bf)][_0xcb8f94(0x86)];_0x2ed9d0++){for(let _0x2e63bf=0x0;_0x2e63bf<this[_0xcb8f94(0x1bf)][0x0][_0xcb8f94(0x86)];_0x2e63bf++){if(_0x397474[_0x2ed9d0][_0x2e63bf]==0x2||_0x397474[_0x2ed9d0][_0x2e63bf]==0x3||_0x397474[_0x2ed9d0][_0x2e63bf]==0x4)_0x3fe518[_0xcb8f94(0x1c6)]([_0x2ed9d0,_0x2e63bf]);else{if(_0x397474[_0x2ed9d0][_0x2e63bf]==0x1)_0x14ba1c++,_0x3003a7++,_0x397474[_0x2ed9d0][_0x2e63bf]=0x0;else{if(_0x397474[_0x2ed9d0][_0x2e63bf]==0x5)_0x3003a7++,_0x397474[_0x2ed9d0][_0x2e63bf]=0x0;else _0x397474[_0x2ed9d0][_0x2e63bf]==0x0&&(_0x397474[_0x2ed9d0][_0x2e63bf]=0x6);}}}}let [_0x33d383,_0x47e65f]=_0x3fe518['shift'](),_0x7e62ea=[[_0x33d383,_0x47e65f]],_0x548b84=[],_0x23ab6c=[],_0x1d6e8e=0x0;while(_0x7e62ea[_0xcb8f94(0x86)]>0x0||_0x3fe518[_0xcb8f94(0x86)]>0x0||_0x1d6e8e<_0x14ba1c/0x2){let _0x4a1275=![];while(_0x7e62ea[_0xcb8f94(0x86)]==0x0&&_0x23ab6c[_0xcb8f94(0x86)]>0x0){if(_0x3fe518['length']>0x0){let _0x133def=_0x3fe518[0x0];_0x23ab6c=_0x25132d(_0x23ab6c);}let _0x27744c=_0x23ab6c[_0xcb8f94(0x1c4)]();_0x4f4bd8(_0x27744c),_0x7e62ea[_0xcb8f94(0x86)]>0x0&&successes++;}if(_0x7e62ea[_0xcb8f94(0x86)]==0x0&&_0x548b84[_0xcb8f94(0x86)]>0x0){let _0x546648=_0x3fe518[0x0];_0x546648!==undefined&&_0x548b84[_0xcb8f94(0x33a)](([_0x33d102,_0xf36c7f],[_0x6e75ce,_0xd58ec9])=>_0x23cffd([_0x33d102,_0xf36c7f],_0x546648)-_0x23cffd([_0x6e75ce,_0xd58ec9],_0x546648));let _0x35ea42=_0x548b84[_0xcb8f94(0x1c4)]();_0x4f4bd8(_0x35ea42),_0x7e62ea['push'](_0x35ea42),_0x7e62ea['length']>0x0?(failures++,_0x4a1275=!![]):successes++;}let [_0x404feb,_0x5d804b]=_0x7e62ea[_0xcb8f94(0x1c4)]();if(_0x397474[_0x404feb][_0x5d804b]==0x1)continue;_0x397474[_0x404feb][_0x5d804b]=0x1,_0x1d6e8e++;for(let _0x121b94=0x0;_0x121b94<_0x3fe518[_0xcb8f94(0x86)];_0x121b94++){let [_0xebd645,_0x3f9f0d]=_0x3fe518[_0x121b94];if(_0xebd645==_0x404feb&&_0x3f9f0d==_0x5d804b){_0x3fe518['splice'](_0x121b94,0x1);break;}}let _0x51b766=_0x25132d(cardinaldirections);for(let _0x48c9cc=0x0;_0x48c9cc<0x4;_0x48c9cc++){let [_0x155dd3,_0x54f313]=_0x51b766[_0x48c9cc],[_0xcf87b6,_0x33973c]=[_0x404feb+_0x155dd3,_0x5d804b+_0x54f313],[_0x1c8f74,_0x5cd429]=[_0x404feb+0x2*_0x155dd3,_0x5d804b+0x2*_0x54f313];if(_0x397474[_0xcf87b6]===undefined||_0x397474[_0xcf87b6][_0x33973c]===undefined||_0x397474[_0xcf87b6][_0x33973c]==0x6)continue;if(_0x397474[_0xcf87b6][_0x33973c]!==0x0&&_0x397474[_0xcf87b6][_0x33973c]!==0x1&&_0x397474[_0xcf87b6][_0x33973c]!==0x5)_0x7e62ea['push']([_0xcf87b6,_0x33973c]);else{if(_0x397474[_0xcf87b6][_0x33973c]==0x0||_0x397474[_0xcf87b6][_0x33973c]==0x5){_0x548b84[_0xcb8f94(0x1c6)]([_0xcf87b6,_0x33973c,[_0x155dd3,_0x54f313]]);if(_0x397474[_0x1c8f74]===undefined||_0x397474[_0x1c8f74][_0x5cd429]===undefined)continue;if(_0x397474[_0x1c8f74][_0x5cd429]==0x6)continue;if(_0x397474[_0x1c8f74][_0x5cd429]==0x1&&Math[_0xcb8f94(0x222)]()>0.5&&this[_0xcb8f94(0x1d0)])_0x7e62ea['push']([_0xcf87b6,_0x33973c,[_0x155dd3,_0x54f313]]);else _0x23ab6c[_0xcb8f94(0x1c6)]([_0xcf87b6,_0x33973c,[_0x155dd3,_0x54f313]]);}}}}function _0x4f4bd8([_0x47c3d2,_0x9625e6,[_0x3462c5,_0x177f95]]){const _0x5c0f9d=_0xcb8f94;let _0x3b5df1=0x2,_0x2c4df6=0x2;Math['random']()>0.5&&(_0x2c4df6++,_0x3b5df1++);let _0x4be458=0x4,_0x4c7e64=![];Math[_0x5c0f9d(0x222)]()>0.5&&(_0x4be458=0x5,_0x4c7e64=!![]);let _0xf1ed51=0x0,_0x5a3a1a=![],_0x159300=!![],_0x1fa649=[],_0x41fb75=[],_0x156714=!![];while(_0x159300==!![]&&Math[_0x5c0f9d(0x115)](_0x3b5df1,_0x2c4df6)<=_0x4be458){_0x4c7e64==!![]&&(_0x3b5df1=Math[_0x5c0f9d(0x115)](_0x3b5df1,_0x2c4df6),_0x2c4df6=_0x3b5df1);let [_0x73b298,_0x1f8a3c]=[_0x47c3d2+_0x3462c5*_0x2c4df6,_0x9625e6+_0x177f95*_0x3b5df1],_0x1fbe10=[],_0x532447=[];for(let _0x2ebe0c=_0x73b298-_0x2c4df6;_0x2ebe0c<=_0x73b298+_0x2c4df6;_0x2ebe0c++){for(let _0x1fd912=_0x1f8a3c-_0x3b5df1;_0x1fd912<=_0x1f8a3c+_0x3b5df1;_0x1fd912++){if(_0x4c7e64&&_0x23cffd([_0x2ebe0c,_0x1fd912],[_0x73b298,_0x1f8a3c])>=_0x2c4df6)continue;let _0x37257e=Math[_0x5c0f9d(0x1be)](_0x1fd912-_0x1f8a3c),_0x298eae=Math[_0x5c0f9d(0x1be)](_0x2ebe0c-_0x73b298);if(_0x397474[_0x2ebe0c]===undefined||_0x397474[_0x2ebe0c][_0x1fd912]===undefined){_0x159300=![];break;}if(_0x397474[_0x2ebe0c][_0x1fd912]==0x1){_0x159300=![];break;}if(_0x37257e>=_0x3b5df1||_0x298eae>=_0x2c4df6)_0x397474[_0x2ebe0c][_0x1fd912]!==0x6&&_0x532447[_0x5c0f9d(0x1c6)]([_0x2ebe0c,_0x1fd912]);else{if(_0x397474[_0x2ebe0c][_0x1fd912]==0x6){_0x159300=![];break;}else _0x1fbe10[_0x5c0f9d(0x1c6)]([_0x2ebe0c,_0x1fd912]);}}if(!_0x159300)break;}if(Math[_0x5c0f9d(0x222)]()>0.5)_0x3b5df1++,_0x2c4df6++;else{if(Math[_0x5c0f9d(0x222)]()>0.5)_0x3b5df1++;else _0x2c4df6++;}_0x159300&&(_0x156714=![],_0x41fb75=_0x532447[_0x5c0f9d(0x169)](),_0x1fa649=_0x1fbe10[_0x5c0f9d(0x169)]());}if(!_0x156714){for(let _0x325cc3=0x0;_0x325cc3<_0x1fa649['length'];_0x325cc3++){let [_0x338f98,_0x46813d]=_0x1fa649[_0x325cc3];_0x397474[_0x338f98][_0x46813d]=0x2;}for(let _0x409494=0x0;_0x409494<_0x41fb75[_0x5c0f9d(0x86)];_0x409494++){let [_0x13fa07,_0x1e55cf]=_0x41fb75[_0x409494];_0x397474[_0x13fa07][_0x1e55cf]=0x5;}let _0x5e412a=[],_0x8a39ac=[[_0x47c3d2,_0x9625e6]];while(_0x8a39ac[_0x5c0f9d(0x86)]>0x0){let [_0x2bae19,_0x4bd509]=_0x8a39ac[_0x5c0f9d(0x1c4)](),[_0x557b2f,_0x2ec989]=[_0x2bae19+_0x3462c5,_0x4bd509+_0x177f95],[_0x3637c0,_0x269e62]=[_0x2bae19-_0x3462c5,_0x4bd509-_0x177f95];if(_0x2bae19<0x2||_0x2bae19>_0x397474[_0x5c0f9d(0x86)]-0x2||_0x4bd509<0x2||_0x4bd509>_0x397474[0x0][_0x5c0f9d(0x86)]-0x2)continue;if(_0x397474[_0x2bae19]===undefined||_0x397474[_0x2bae19][_0x4bd509]===undefined)continue;let _0x511e3e=![];_0x397474[_0x557b2f][_0x2ec989]==0x2&&_0x397474[_0x3637c0][_0x269e62]==0x1&&(_0x511e3e=!![]);if(!_0x511e3e)continue;let _0x5326bd=![];for(let _0x2b4df8=0x0;_0x2b4df8<_0x5e412a[_0x5c0f9d(0x86)];_0x2b4df8++){let _0x9473db=_0x5e412a[_0x2b4df8];if(_0x9473db[0x0]==_0x2bae19&&_0x9473db[0x1]==_0x4bd509)_0x5326bd=!![];}if(_0x5326bd)continue;_0x5e412a[_0x5c0f9d(0x1c6)]([_0x2bae19,_0x4bd509]);for(let _0x24fb95=0x0;_0x24fb95<0x4;_0x24fb95++){let [_0xa7a7ef,_0x3e7b9d]=cardinaldirections[_0x24fb95],[_0x14e026,_0x1b2855]=[_0x2bae19+_0xa7a7ef,_0x4bd509+_0x3e7b9d];_0x8a39ac['push']([_0x14e026,_0x1b2855]);}}_0x5e412a=_0x25132d(_0x5e412a);let _0x6a86e8=_0x5e412a[_0x5c0f9d(0x86)],_0x1a58ef=Math[_0x5c0f9d(0x115)](_0x3b5df1,_0x2c4df6)<0x5;!_0x1a58ef&&(_0x6a86e8=0x1);if(_0x5e412a[_0x5c0f9d(0x86)]==0x0)_0x5e412a=[[_0x47c3d2,_0x9625e6]];for(let _0x318ff2=0x0;_0x318ff2<_0x6a86e8;_0x318ff2++){let _0x29f1ed=_0x5e412a[_0x318ff2];_0x7e62ea[_0x5c0f9d(0x1c6)](_0x29f1ed),!_0x1a58ef&&!_0x104752['ruins']&&_0x104752[_0x5c0f9d(0x253)][_0x5c0f9d(0x1c6)](_0x29f1ed);}}}}else{let _0x43add6=[],_0x553a16=[],_0x20b71f=[];for(let _0x5d05ec=0x0;_0x5d05ec<this[_0xcb8f94(0x1bf)]['length'];_0x5d05ec++){_0x43add6[_0x5d05ec]=[];for(let _0x207fcc=0x0;_0x207fcc<this['roomgrid'][0x0][_0xcb8f94(0x86)];_0x207fcc++){_0x43add6[_0x5d05ec][_0x207fcc]=0x0;}}for(let _0x2f2a9f=0x0;_0x2f2a9f<this[_0xcb8f94(0x1bf)]['length'];_0x2f2a9f++){for(let _0x4c9192=0x0;_0x4c9192<this[_0xcb8f94(0x1bf)][0x0][_0xcb8f94(0x86)];_0x4c9192++){if(_0x397474[_0x2f2a9f][_0x4c9192]==0x5&&_0x43add6[_0x2f2a9f][_0x4c9192]==0x0){_0x553a16=[],_0x20b71f=[],_0x553a16[_0xcb8f94(0x1c6)]([_0x2f2a9f,_0x4c9192]);let _0x2561c4=!![];while(_0x553a16[_0xcb8f94(0x86)]>0x0&&_0x2561c4==!![]){let [_0x14ee1e,_0x11955d]=_0x553a16[_0xcb8f94(0x1c4)]();for(let _0x2ac51c=0x0;_0x2ac51c<0x4;_0x2ac51c++){let [_0x37a001,_0x2c67e3]=cardinaldirections[_0x2ac51c],[_0x56ff57,_0x12ca59]=[_0x14ee1e+_0x37a001,_0x11955d+_0x2c67e3];if(_0x397474[_0x56ff57]===undefined||_0x397474[_0x56ff57][_0x12ca59]===undefined){_0x2561c4=![];continue;}_0x397474[_0x56ff57][_0x12ca59]==0x5&&_0x43add6[_0x56ff57][_0x12ca59]==0x0&&(_0x553a16[_0xcb8f94(0x1c6)]([_0x56ff57,_0x12ca59]),_0x20b71f[_0xcb8f94(0x1c6)]([_0x56ff57,_0x12ca59]),_0x43add6[_0x56ff57][_0x12ca59]=0x1),(_0x397474[_0x56ff57][_0x12ca59]!==0x5&&_0x397474[_0x56ff57][_0x12ca59]!==0x1||_0x43add6[_0x56ff57][_0x12ca59]==0x2)&&(_0x2561c4=![]);}}if(_0x2561c4==!![]&&_0x20b71f[_0xcb8f94(0x86)]>0xf)for(let _0x36c21b=0x0;_0x36c21b<_0x20b71f[_0xcb8f94(0x86)];_0x36c21b++){let [_0x27fc36,_0x495976]=_0x20b71f[_0x36c21b];_0x43add6[_0x27fc36][_0x495976]=0x2,this[_0xcb8f94(0x356)][_0xcb8f94(0x1c6)]([_0x27fc36,_0x495976]);}else for(let _0x32ca32=0x0;_0x32ca32<_0x20b71f[_0xcb8f94(0x86)];_0x32ca32++){let [_0x572fc9,_0x213f47]=_0x20b71f[_0x32ca32];_0x43add6[_0x572fc9][_0x213f47]=0x2;}}}}}function _0x8c0874([_0x365244,_0x356911],[_0x2649da,_0x145d31]){const _0x56cfd3=_0xcb8f94;let _0x197597=[],_0xbaba09=Math[_0x56cfd3(0x1be)](_0x2649da-_0x365244),_0x4ebfcf=Math['abs'](_0x145d31-_0x356911),_0x202034=_0x365244<_0x2649da?0x1:-0x1,_0x5593d9=_0x356911<_0x145d31?0x1:-0x1,_0x4b64c7=_0xbaba09-_0x4ebfcf;while(!![]){_0x197597[_0x56cfd3(0x1c6)]([_0x365244,_0x356911]);if(_0x365244===_0x2649da&&_0x356911===_0x145d31)break;let _0x2f116b=0x2*_0x4b64c7;_0x2f116b>-_0x4ebfcf&&(_0x4b64c7-=_0x4ebfcf,_0x365244+=_0x202034),_0x2f116b<_0xbaba09&&(_0x4b64c7+=_0xbaba09,_0x356911+=_0x5593d9);}return _0x197597;}function _0x578ffb(_0x313326,_0xf8b893){const _0x105062=_0xcb8f94,[_0x58cd24,_0x4619fa]=_0x313326,[_0x26add9,_0x54c2bf]=_0xf8b893;return Math[_0x105062(0x115)](Math[_0x105062(0x1be)](_0x26add9-_0x58cd24),Math['abs'](_0x54c2bf-_0x4619fa));}function _0x97df5(_0x2fc9f5,_0x401482){const _0xfa6d40=_0xcb8f94;return Math[_0xfa6d40(0x1be)](_0x2fc9f5[0x0]-_0x401482[0x0])+Math['abs'](_0x2fc9f5[0x1]-_0x401482[0x1]);}function _0x25132d(_0x52b9e5){const _0x62aaa3=_0xcb8f94;let _0xbea6f3=_0x52b9e5[_0x62aaa3(0x86)],_0x5df5e3,_0x497b0b=_0x52b9e5[_0x62aaa3(0x169)]();while(_0xbea6f3>0x0){_0x5df5e3=Math[_0x62aaa3(0xfa)](Math[_0x62aaa3(0x222)]()*_0xbea6f3),_0xbea6f3--,[_0x497b0b[_0xbea6f3],_0x497b0b[_0x5df5e3]]=[_0x497b0b[_0x5df5e3],_0x497b0b[_0xbea6f3]];}return _0x497b0b;}function _0x23cffd([_0x4b02c9,_0x4ca5f2],[_0x5abaaf,_0x4d1d6a]){const _0x3b219c=_0xcb8f94;return Math[_0x3b219c(0xe8)]((_0x4b02c9-_0x5abaaf)**0x2+(_0x4ca5f2-_0x4d1d6a)**0x2);}}}let _0x3618f2=[];for(let _0x4f16a4=0x0;_0x4f16a4<_0x321c00['length'];_0x4f16a4++){let [_0xf51a0f,_0x57004b]=_0x321c00[_0x4f16a4],_0x4ac799=perlinNoise(_0x320fd4,_0x40d67f,_0xf51a0f);_0x3618f2['push'](_0x4ac799);}let _0xb5c9c1=[],_0x275726=[],_0x48e1fd=[],_0x25d282=[];for(let _0x1c041b=0x0;_0x1c041b<_0x40d67f;_0x1c041b++){_0x48e1fd[_0x1c041b]=[],_0xb5c9c1[_0x1c041b]=[],_0x275726[_0x1c041b]=[];for(let _0x588208=0x0;_0x588208<_0x320fd4;_0x588208++){_0xb5c9c1[_0x1c041b][_0x588208]=0x0;let _0x5234b7=0x0;_0x5234b7+=Math['max'](_0x588208-(_0x320fd4-_0x551802),0x0)/_0x551802,_0x5234b7+=Math[_0x2b07b0(0x115)](_0x1c041b-(_0x40d67f-_0x551802),0x0)/_0x551802,_0x5234b7+=Math['max'](-_0x588208+_0x551802,0x0)/_0x551802,_0x5234b7+=Math[_0x2b07b0(0x115)](-_0x1c041b+_0x551802,0x0)/_0x551802;let _0x570236=0x0;_0x570236+=Math[_0x2b07b0(0x115)](_0x588208-(_0x320fd4-_0x551802*0x4),0x0)/(_0x551802*0x4),_0x570236+=Math[_0x2b07b0(0x115)](_0x1c041b-(_0x40d67f-_0x551802*0x4),0x0)/(_0x551802*0x4),_0x570236+=Math[_0x2b07b0(0x115)](-_0x588208+_0x551802*0x4,0x0)/(_0x551802*0x4),_0x570236+=Math['max'](-_0x1c041b+_0x551802*0x4,0x0)/(_0x551802*0x4),_0x48e1fd[_0x1c041b][_0x588208]=0x0;for(let _0x57e4df=0x0;_0x57e4df<_0x3618f2[_0x2b07b0(0x86)];_0x57e4df++){let [_0x55490,_0x2720b2]=_0x321c00[_0x57e4df];_0xb5c9c1[_0x1c041b][_0x588208]+=_0x3618f2[_0x57e4df][_0x1c041b][_0x588208]*_0x2720b2+_0x5234b7+_0x570236/0x10;}_0x275726[_0x1c041b][_0x588208]=null;}}let _0xd23c3a=0x0,_0x2ec6a6=(_0x40d67f-0x2*_0x551802)*(_0x320fd4-0x2*_0x551802)/2.5,_0x1af9f4=0x98967f,_0x11a329=0.15,[_0x263464,_0x5d14fa]=[_0x40d67f/0x2,_0x320fd4/0x2],[_0x45cf04,_0x30d206]=[_0x263464,_0x5d14fa];while(_0xb5c9c1[_0x45cf04][_0x30d206]>_0x11a329){let _0x28c7ce=_0x820ff3(cardinaldirections);for(let _0x4d75d2=0x0;_0x4d75d2<0x1;_0x4d75d2++){_0x45cf04+=_0x28c7ce[_0x4d75d2][0x0],_0x30d206+=_0x28c7ce[_0x4d75d2][0x1];}}let _0x235f3b=[[_0x45cf04,_0x30d206]],_0x185156=[],_0x5d7098=![];while((_0xd23c3a<_0x2ec6a6||_0x5d7098==![])&&_0xd23c3a<_0x1af9f4){let _0x52d8e2;if(_0x185156[_0x2b07b0(0x86)]>0x0)_0x52d8e2=_0x185156[_0x2b07b0(0x1c4)]();else{let _0x58dd52=0x1,_0x59d5f0=0x0;for(let _0x27fc88=0x0;_0x27fc88<_0x235f3b['length'];_0x27fc88++){let _0x323856=_0xb5c9c1[_0x235f3b[_0x27fc88][0x0]][_0x235f3b[_0x27fc88][0x1]];if(_0x323856<_0x11a329){_0x52d8e2=_0x235f3b['splice'](_0x27fc88,0x1)[0x0];break;}else _0x323856<_0x58dd52&&(_0x58dd52=_0x323856,_0x59d5f0=_0x27fc88);_0x27fc88==_0x235f3b[_0x2b07b0(0x86)]-0x1&&(_0x52d8e2=_0x235f3b[_0x2b07b0(0x320)](_0x59d5f0,0x1)[0x0]);}}if(!_0x52d8e2)break;let [_0x23abf1,_0x49edfb]=_0x52d8e2;_0x9f5a8d(_0x52d8e2);function _0x9f5a8d([_0x8a9150,_0x24320c]){const _0x44b450=_0x2b07b0;if(_0x8a9150==0x0||_0x8a9150>=_0x40d67f-0x1)return;if(_0x24320c==0x0||_0x24320c>=_0x320fd4-0x1)return;if(_0x48e1fd[_0x8a9150][_0x24320c]==0x0){_0x48e1fd[_0x8a9150][_0x24320c]=0x1;_0xb5c9c1[_0x8a9150][_0x24320c]>_0x11a329?(_0x5d7098=!![],_0x48e1fd[_0x8a9150][_0x24320c]=0x1):_0x5d7098=![];_0xb5c9c1[_0x8a9150][_0x24320c]<_0x11a329-0.1&&(_0x48e1fd[_0x8a9150][_0x24320c]=0x4);let _0x1a9cdd=_0x820ff3(cardinaldirections);for(let _0x39352e=0x0;_0x39352e<0x4;_0x39352e++){let [_0x4131b5,_0x3a92a6]=[_0x8a9150+_0x1a9cdd[_0x39352e][0x0],_0x24320c+_0x1a9cdd[_0x39352e][0x1]];_0x48e1fd[_0x4131b5][_0x3a92a6]==0x0&&(_0xb5c9c1[_0x4131b5][_0x3a92a6]<_0x11a329?_0x185156[_0x44b450(0x1c6)]([_0x4131b5,_0x3a92a6]):_0x235f3b[_0x44b450(0x1c6)]([_0x4131b5,_0x3a92a6]));}if(_0xd23c3a>_0x2ec6a6){}_0xd23c3a++;}}}[_0x275726,[tx,ty]]=_0x2c0095([[_0x45cf04,_0x30d206]]);let [_0x55cb5f,_0x21f6fd]=[tx,ty],[_0x44b830,[_0x309aaa,_0x280bfe]]=_0x2c0095([[tx,ty]]),_0x31c2ab=[];_0x27c001([[_0x55cb5f,_0x21f6fd],[_0x309aaa,_0x280bfe]],_0x3f8813);let _0xadede7=_0x7607aa([_0x55cb5f,_0x21f6fd],[_0x309aaa,_0x280bfe],_0x44b830,_0xd23c3a/0x3),_0x5b8f97,_0x1955ff;for(let _0xf4f101=0x0;_0xf4f101<_0xadede7[_0x2b07b0(0x86)];_0xf4f101++){let [_0xdb8175,_0x28cf10]=_0xadede7[_0xf4f101];_0x31c2ab[_0x25d282[_0xdb8175][_0x28cf10]][_0x2b07b0(0x317)]=!![],_0xf4f101==_0xadede7[_0x2b07b0(0x86)]-0x1&&(_0x31c2ab[_0x25d282[_0xdb8175][_0x28cf10]][_0x2b07b0(0x259)]=!![],_0x5b8f97=_0x31c2ab[_0x25d282[_0xdb8175][_0x28cf10]]),_0xf4f101==0x0&&(_0x31c2ab[_0x25d282[_0xdb8175][_0x28cf10]][_0x2b07b0(0xd5)]=!![],_0x1955ff=_0x31c2ab[_0x25d282[_0xdb8175][_0x28cf10]]);}_0x853ed2(_0x5b8f97,0x0),_0x21e534(_0x5b8f97,0x0),_0x4d2f36();let _0x45fc3e=_0x1955ff['depth'],_0x2183df=Math[_0x2b07b0(0xc6)](_0x45fc3e/0x2);for(let _0x2deb25=0x0;_0x2deb25<_0x31c2ab[_0x2b07b0(0x86)];_0x2deb25++){let _0x2761f0=_0x31c2ab[_0x2deb25];if(_0x2761f0[_0x2b07b0(0x197)]==_0x2183df&&_0x2761f0['onhotpath']==!![])_0x2761f0[_0x2b07b0(0x14e)]=!![];else Math[_0x2b07b0(0x1be)](_0x2761f0[_0x2b07b0(0x197)]-_0x2183df)==0x1&&_0x2761f0['onhotpath']==!![]&&(_0x2761f0['halfbossbuffer']=!![]);_0x2761f0['depth']>_0x45fc3e*(0x3/0x4)&&_0x2761f0['onhotpath']==!![]&&(_0x2761f0[_0x2b07b0(0x2de)]=!![]);}for(let _0xe0607=0x0;_0xe0607<_0x31c2ab['length'];_0xe0607++){let _0x5eb618=_0x31c2ab[_0xe0607];if(_0x5eb618[_0x2b07b0(0x197)]%0x2==0x1)_0x5eb618[_0x2b07b0(0x25a)]=!![];_0x5eb618[_0x2b07b0(0x25a)]=Math[_0x2b07b0(0x222)]()>0.8;if(_0x5eb618[_0x2b07b0(0x14e)]===!![])_0x5eb618['dungeon']=!![];if(_0x5eb618[_0x2b07b0(0x255)]===!![])_0x5eb618[_0x2b07b0(0x25a)]=!![];if(_0x5eb618[_0x2b07b0(0x25a)]&&(Math[_0x2b07b0(0x222)]()>0.5||_0x5eb618[_0x2b07b0(0x197)]<_0x45fc3e/0x2))_0x5eb618[_0x2b07b0(0x1d0)]=!![];_0x5eb618['miniboss']=_0x5eb618[_0x2b07b0(0x81)]>0x2&&_0x5eb618[_0x2b07b0(0x1d8)]==_0x5eb618['hotdepth'];if(_0x5eb618[_0x2b07b0(0x25a)]&&Math[_0x2b07b0(0x222)]()>0.75)_0x5eb618[_0x2b07b0(0x289)]=!![];_0x5eb618[_0x2b07b0(0x33c)](),_0x5eb618[_0x2b07b0(0xdc)](),_0x5eb618[_0x2b07b0(0x2bf)]();}for(let _0x2ea61e=0x0;_0x2ea61e<_0x31c2ab[_0x2b07b0(0x86)];_0x2ea61e++){let _0x2cab04=_0x31c2ab[_0x2ea61e];_0x2cab04[_0x2b07b0(0x33c)]();}function _0x853ed2(_0x386d28,_0x31b298,_0x29e256){const _0x3f5b36=_0x2b07b0;_0x386d28['depth']=_0x31b298;for(let _0x4bd8c4=0x0;_0x4bd8c4<_0x386d28[_0x3f5b36(0x28f)]['length'];_0x4bd8c4++){let _0x153046=_0x31c2ab[_0x386d28['neighbors'][_0x4bd8c4]];(_0x153046[_0x3f5b36(0x197)]===undefined||_0x153046['depth']>_0x31b298+0x1)&&_0x853ed2(_0x153046,_0x31b298+0x1,_0x386d28);}}function _0x21e534(_0x95096d,_0x49af27,_0x49694b){const _0x171d2c=_0x2b07b0;_0x95096d[_0x171d2c(0x81)]=_0x49af27;_0x95096d['onhotpath']==!![]&&(_0x95096d['hotdepth']=0x0);for(let _0x42069c=0x0;_0x42069c<_0x95096d[_0x171d2c(0x28f)][_0x171d2c(0x86)];_0x42069c++){let _0x301274=_0x31c2ab[_0x95096d[_0x171d2c(0x28f)][_0x42069c]];(_0x301274[_0x171d2c(0x81)]===undefined||_0x301274[_0x171d2c(0x81)]>_0x95096d['hotdepth']+0x1)&&_0x21e534(_0x301274,_0x95096d['hotdepth']+0x1,_0x95096d);}}function _0x4d2f36(){const _0x553c60=_0x2b07b0;let _0x2c51a0=!![],_0x32375d=0x0;while(_0x2c51a0==!![]&&_0x32375d<0x64){_0x2c51a0=![];for(let _0x46bbc4=0x0;_0x46bbc4<_0x31c2ab[_0x553c60(0x86)];_0x46bbc4++){let _0x28ca88=_0x31c2ab[_0x46bbc4];_0x28ca88['maxhotdepth']<_0x28ca88[_0x553c60(0x81)]&&(_0x28ca88['maxhotdepth']=_0x28ca88[_0x553c60(0x81)],_0x2c51a0=!![]);for(let _0x1b48ab=0x0;_0x1b48ab<_0x28ca88[_0x553c60(0x28f)][_0x553c60(0x86)];_0x1b48ab++){let _0x2ecac3=_0x31c2ab[_0x28ca88[_0x553c60(0x28f)][_0x1b48ab]];_0x2ecac3[_0x553c60(0x1d8)]<_0x28ca88[_0x553c60(0x1d8)]&&_0x2ecac3[_0x553c60(0x1d8)]!==0x0&&(_0x2ecac3[_0x553c60(0x1d8)]=_0x28ca88[_0x553c60(0x1d8)],_0x2c51a0=!![]);}}_0x32375d++;}}function _0x355796([_0x5cf602,_0xeec656],[_0x34ec4f,_0x1f91b4],_0x15ef3b){const _0x53de75=_0x2b07b0;let [_0x2c531e,_0x5ca395]=[_0x34ec4f,_0x1f91b4],_0x25c747=[];while(_0x15ef3b[_0x2c531e][_0x5ca395]!==0x0){_0x25c747[_0x53de75(0x1c6)]([_0x2c531e,_0x5ca395]);for(let _0xbbd6d0=0x0;_0xbbd6d0<0x4;_0xbbd6d0++){let [_0x19aa6b,_0x424c20]=directions[_0xbbd6d0],[_0x545fc3,_0x314046]=[_0x2c531e+_0x19aa6b,_0x5ca395+_0x424c20];if(_0x15ef3b[_0x545fc3][_0x314046]!==null&&_0x15ef3b[_0x545fc3][_0x314046]<_0x15ef3b[_0x2c531e][_0x5ca395]){[_0x2c531e,_0x5ca395]=[_0x545fc3,_0x314046];break;}}}return _0x25c747;}function _0x7494a1([_0x2bc89d,_0x142e48],[_0x51dc07,_0x232b3f],_0x1c72da){const _0x282237=_0x2b07b0;let _0x36225a=[],_0xd4e49f=[[_0x51dc07,_0x232b3f]];while(_0xd4e49f[_0x282237(0x86)]>0x0){let [_0x20b39e,_0x13995a]=_0xd4e49f[_0x282237(0x1c4)]();_0x36225a['push']([_0x20b39e,_0x13995a]);for(let _0x379299=0x0;_0x379299<0x4;_0x379299++){let [_0x1607ed,_0xef35a1]=cardinaldirections[_0x379299],[_0x51cb95,_0x48056e]=[_0x20b39e+_0x1607ed,_0x13995a+_0xef35a1];_0x1c72da[_0x51cb95][_0x48056e]!==null&&_0x1c72da[_0x51cb95][_0x48056e]<_0x1c72da[_0x20b39e][_0x13995a]&&_0xd4e49f[_0x282237(0x1c6)]([_0x51cb95,_0x48056e]);}_0x1c72da[_0x20b39e][_0x13995a]=null;}return _0x36225a;}function _0x7607aa([_0x569b3b,_0x1e62be],[_0x183f3a,_0x19e0c7],_0x8b3105,_0x47db6e){const _0x256313=_0x2b07b0;let _0x4708c4=0x0,_0x4c2f98=[];while(_0x4c2f98[_0x256313(0x86)]<_0x47db6e){_0x4c2f98=[];let _0x3933b2=[[_0x183f3a,_0x19e0c7]],_0x595756=[];for(let _0x1a8219=0x0;_0x1a8219<_0x8b3105[_0x256313(0x86)];_0x1a8219++){_0x595756[_0x1a8219]=[];for(let _0x363175=0x0;_0x363175<_0x8b3105[0x0][_0x256313(0x86)];_0x363175++){_0x595756[_0x1a8219][_0x363175]=_0x8b3105[_0x1a8219][_0x363175];}}while(_0x3933b2[_0x256313(0x86)]>0x0){let [_0x309ec5,_0x16f59d]=_0x3933b2[_0x256313(0x1c4)]();_0x4c2f98[_0x256313(0x1c6)]([_0x309ec5,_0x16f59d]);for(let _0x4bdf8f=0x0;_0x4bdf8f<0x4;_0x4bdf8f++){let [_0x46a3cd,_0x531f30]=cardinaldirections[_0x4bdf8f],[_0x27b86a,_0x6460a]=[_0x309ec5+_0x46a3cd,_0x16f59d+_0x531f30];_0x595756[_0x27b86a][_0x6460a]!==null&&(_0x595756[_0x27b86a][_0x6460a]<_0x595756[_0x309ec5][_0x16f59d]||Math[_0x256313(0x222)]()<_0x4708c4)&&_0x3933b2[_0x256313(0x1c6)]([_0x27b86a,_0x6460a]);}_0x595756[_0x309ec5][_0x16f59d]=null;}if(_0x4708c4<0.4)_0x4708c4+=0.1;else _0x4708c4+=0.01;}return _0x4c2f98;}function _0x27c001(_0x4770d5,_0x374eed){const _0x4c7066=_0x2b07b0;for(let _0x2ddb62=0x0;_0x2ddb62<_0x40d67f;_0x2ddb62++){_0x25d282[_0x2ddb62]=[];for(let _0x4d0b2f=0x0;_0x4d0b2f<_0x320fd4;_0x4d0b2f++){_0x25d282[_0x2ddb62][_0x4d0b2f]=null;}}let _0x43ca1c=[..._0x4770d5];while(_0x43ca1c[_0x4c7066(0x86)]<=_0x374eed){let _0x48a7e3=_0x2c0095(_0x43ca1c),_0x3fadf8=_0x48a7e3[0x1];_0x43ca1c['push'](_0x3fadf8);}let _0x4893c1=[];for(let _0x2a5b7a=0x0;_0x2a5b7a<_0x43ca1c[_0x4c7066(0x86)];_0x2a5b7a++){let [_0x30d4a4,_0x47cc8c]=_0x43ca1c[_0x2a5b7a];_0x25d282[_0x30d4a4][_0x47cc8c]=_0x2a5b7a,_0x31c2ab[_0x2a5b7a]=new _0x2a22e2(),_0x31c2ab[_0x2a5b7a][_0x4c7066(0x22e)]=_0x48e1fd,_0x31c2ab[_0x2a5b7a][_0x4c7066(0x1ae)]=[[_0x30d4a4,_0x47cc8c]],_0x4893c1[_0x4c7066(0x1c6)]([_0x30d4a4,_0x47cc8c]);}let _0x177af6=_0x4893c1[_0x4c7066(0x169)](),_0x51482d=[];while(_0x177af6[_0x4c7066(0x86)]>0x0){let [_0x4b0fdc,_0x17bab6]=_0x177af6[_0x4c7066(0x1c4)](),_0x24fb94=_0x25d282[_0x4b0fdc][_0x17bab6],_0x27b2cd=_0x820ff3(cardinaldirections);for(let _0x2d3ce2=0x0;_0x2d3ce2<0x4;_0x2d3ce2++){let [_0x57c6a9,_0x1fdb1c]=_0x27b2cd[_0x2d3ce2],[_0x226be3,_0x37f4bc]=[_0x4b0fdc+_0x57c6a9,_0x17bab6+_0x1fdb1c],_0x2fcae7=_0x25d282[_0x226be3][_0x37f4bc];_0x2fcae7===null&&(_0x48e1fd[_0x226be3][_0x37f4bc]!==0x0?(_0x25d282[_0x226be3][_0x37f4bc]=_0x24fb94,_0x31c2ab[_0x24fb94][_0x4c7066(0x1ae)][_0x4c7066(0x1c6)]([_0x226be3,_0x37f4bc]),_0x177af6[_0x4c7066(0x1c6)]([_0x226be3,_0x37f4bc])):(_0x25d282[_0x226be3][_0x37f4bc]=_0x24fb94,_0x31c2ab[_0x24fb94][_0x4c7066(0x1e8)]['push']([_0x226be3,_0x37f4bc]),_0x51482d[_0x4c7066(0x1c6)]([_0x226be3,_0x37f4bc])));if(_0x48e1fd[_0x226be3][_0x37f4bc]!==0x0&&_0x25d282[_0x226be3][_0x37f4bc]!==null&&_0x25d282[_0x226be3][_0x37f4bc]!==_0x24fb94){!_0x31c2ab[_0x24fb94][_0x4c7066(0x26e)]&&(_0x31c2ab[_0x24fb94]['edgetiles']=[]);_0x31c2ab[_0x24fb94][_0x4c7066(0x26e)][_0x4c7066(0x1c6)]([_0x4b0fdc,_0x17bab6]);if(!_0x31c2ab[_0x24fb94][_0x4c7066(0x10e)])_0x31c2ab[_0x24fb94]['edges']={};if(!_0x31c2ab[_0x24fb94]['edges'][_0x2fcae7])_0x31c2ab[_0x24fb94][_0x4c7066(0x10e)][_0x2fcae7]=[];_0x31c2ab[_0x24fb94][_0x4c7066(0x10e)][_0x2fcae7][_0x4c7066(0x1c6)]([_0x4b0fdc,_0x17bab6]),!_0x31c2ab[_0x24fb94][_0x4c7066(0x28f)]&&(_0x31c2ab[_0x24fb94]['neighbors']=[]),!_0x31c2ab[_0x24fb94][_0x4c7066(0x28f)][_0x4c7066(0x295)](_0x2fcae7)&&(_0x31c2ab[_0x24fb94][_0x4c7066(0x28f)][_0x4c7066(0x1c6)](_0x2fcae7),_0x31c2ab[_0x24fb94]['neighborsnonindex'][_0x4c7066(0x1c6)](_0x31c2ab[_0x2fcae7])),!_0x31c2ab[_0x2fcae7]['neighbors'][_0x4c7066(0x295)](_0x24fb94)&&(_0x31c2ab[_0x2fcae7]['neighbors'][_0x4c7066(0x1c6)](_0x24fb94),_0x31c2ab[_0x2fcae7][_0x4c7066(0x134)][_0x4c7066(0x1c6)](_0x31c2ab[_0x24fb94]));}}}let _0x3b51ec=_0x51482d[_0x4c7066(0x169)]();while(_0x3b51ec[_0x4c7066(0x86)]>0x0){let [_0x55cb7,_0x1aceb0]=_0x3b51ec[_0x4c7066(0x1c4)](),_0xc2c6f7=_0x25d282[_0x55cb7][_0x1aceb0];for(let _0x54ece5=0x0;_0x54ece5<0x4;_0x54ece5++){let [_0x1e8c70,_0x4d1a77]=cardinaldirections[_0x54ece5],[_0x37a7f9,_0x53a05e]=[_0x55cb7+_0x1e8c70,_0x1aceb0+_0x4d1a77];if(_0x25d282[_0x37a7f9]===undefined||_0x25d282[_0x37a7f9][_0x53a05e]===undefined)continue;if(_0x25d282[_0x37a7f9][_0x53a05e]===_0xc2c6f7||_0x25d282[_0x37a7f9][_0x53a05e]!==null)continue;_0x25d282[_0x37a7f9][_0x53a05e]=_0xc2c6f7,_0x31c2ab[_0xc2c6f7]['walltiles'][_0x4c7066(0x1c6)]([_0x37a7f9,_0x53a05e]),_0x31c2ab[_0xc2c6f7][_0x4c7066(0x1e8)]['length']<_0x31c2ab[_0xc2c6f7][_0x4c7066(0x1ae)][_0x4c7066(0x86)]&&_0x3b51ec[_0x4c7066(0x1c6)]([_0x37a7f9,_0x53a05e]);}}for(let _0x272ccb=0x0;_0x272ccb<_0x31c2ab[_0x4c7066(0x86)];_0x272ccb++){_0x31c2ab[_0x272ccb][_0x4c7066(0x283)]();}}function _0x2c0095(_0x127ab1){const _0x4ae41e=_0x2b07b0;let _0x243301=[];for(let _0x34251d=0x0;_0x34251d<_0x40d67f;_0x34251d++){_0x243301[_0x34251d]=[];for(let _0x30007e=0x0;_0x30007e<_0x320fd4;_0x30007e++){_0x243301[_0x34251d][_0x30007e]=null;}}dtiles=_0x127ab1['slice'](),steps=0x0;let [_0x48b390,_0x5aef69]=[0x0,0x0],[_0x433f22,_0x234222]=[0x0,0x0],_0x4d6697=[];while(dtiles[_0x4ae41e(0x86)]>0x0){_0x4d6697=dtiles[_0x4ae41e(0x169)](),dtiles=[];for(let _0x2f6128=0x0;_0x2f6128<_0x4d6697[_0x4ae41e(0x86)];_0x2f6128++){[_0x433f22,_0x234222]=_0x4d6697[_0x2f6128];if(_0x48e1fd[_0x433f22][_0x234222]!==0x0){if(_0x243301[_0x433f22][_0x234222]===null){_0x243301[_0x433f22][_0x234222]=steps;let _0x3e1ce9=_0x820ff3(cardinaldirections);[_0x48b390,_0x5aef69]=[_0x433f22,_0x234222];for(let _0x28f9c7=0x0;_0x28f9c7<0x4;_0x28f9c7++){dtiles[_0x4ae41e(0x1c6)]([_0x433f22+_0x3e1ce9[_0x28f9c7][0x0],_0x234222+_0x3e1ce9[_0x28f9c7][0x1]]);}}}}steps++;}return[_0x243301,[_0x48b390,_0x5aef69]];}function _0x820ff3(_0x2e9086){const _0x3061c3=_0x2b07b0;let _0xa214ac=_0x2e9086[_0x3061c3(0x86)],_0x1f2c92,_0x37b0bb=_0x2e9086[_0x3061c3(0x169)]();while(_0xa214ac>0x0){_0x1f2c92=Math[_0x3061c3(0xfa)](Math[_0x3061c3(0x222)]()*_0xa214ac),_0xa214ac--,[_0x37b0bb[_0xa214ac],_0x37b0bb[_0x1f2c92]]=[_0x37b0bb[_0x1f2c92],_0x37b0bb[_0xa214ac]];}return _0x37b0bb;}return[_0x48e1fd,_0x31c2ab];}function perlinNoise(_0x9ca71b,_0x208e11,_0x12c5e8){const _0x2c3527=_0x1fd1d8;let _0x5d6867={'rand_vect':function(){const _0x527732=_0x438d;let _0x2d399c=Math[_0x527732(0x222)]()*0x2*Math['PI'];return{'x':Math['cos'](_0x2d399c),'y':Math[_0x527732(0x200)](_0x2d399c)};},'dot_prod_grid':function(_0x20ee14,_0x4be430,_0x35bb40,_0xa23f3c){const _0x3b0a07=_0x438d;let _0x3f23a4,_0x5df644={'x':_0x20ee14-_0x35bb40,'y':_0x4be430-_0xa23f3c};return this[_0x3b0a07(0x80)][[_0x35bb40,_0xa23f3c]]?_0x3f23a4=this[_0x3b0a07(0x80)][[_0x35bb40,_0xa23f3c]]:(_0x3f23a4=this[_0x3b0a07(0x34f)](),this['gradients'][[_0x35bb40,_0xa23f3c]]=_0x3f23a4),_0x5df644['x']*_0x3f23a4['x']+_0x5df644['y']*_0x3f23a4['y'];},'smootherstep':function(_0x5e7a90){return 0x6*_0x5e7a90**0x5-0xf*_0x5e7a90**0x4+0xa*_0x5e7a90**0x3;},'interp':function(_0x244aaf,_0x122894,_0x3f1d33){const _0x1b3e49=_0x438d;return _0x122894+this[_0x1b3e49(0x9e)](_0x244aaf)*(_0x3f1d33-_0x122894);},'seed':function(){const _0x549fdf=_0x438d;this[_0x549fdf(0x80)]={};},'get':function(_0x11a9b5,_0xc444c3){const _0x206c12=_0x438d;let _0x198a77=Math['floor'](_0x11a9b5),_0x5617d9=Math[_0x206c12(0xfa)](_0xc444c3),_0x3d65bc=this['dot_prod_grid'](_0x11a9b5,_0xc444c3,_0x198a77,_0x5617d9),_0x520308=this['dot_prod_grid'](_0x11a9b5,_0xc444c3,_0x198a77+0x1,_0x5617d9),_0x4ded26=this['dot_prod_grid'](_0x11a9b5,_0xc444c3,_0x198a77,_0x5617d9+0x1),_0x407611=this[_0x206c12(0x311)](_0x11a9b5,_0xc444c3,_0x198a77+0x1,_0x5617d9+0x1),_0x3ee41b=this[_0x206c12(0x24e)](_0x11a9b5-_0x198a77,_0x3d65bc,_0x520308),_0x35328f=this[_0x206c12(0x24e)](_0x11a9b5-_0x198a77,_0x4ded26,_0x407611),_0x2e2098=this[_0x206c12(0x24e)](_0xc444c3-_0x5617d9,_0x3ee41b,_0x35328f);return _0x2e2098;}};const _0x3ec213=Math[_0x2c3527(0x222)]();_0x5d6867['seed'](_0x3ec213);let _0x1c48e5=[];for(let _0x818760=0x0;_0x818760<_0x208e11;_0x818760++){_0x1c48e5[_0x818760]=[];for(let _0x206f8c=0x0;_0x206f8c<_0x9ca71b;_0x206f8c++){_0x1c48e5[_0x818760][_0x206f8c]=_0x5d6867['get']((_0x818760+_0x3ec213)/_0x12c5e8,(_0x206f8c+_0x3ec213)/_0x12c5e8);}}return _0x1c48e5;}gameText=document[_0x1fd1d8(0xda)]('game-text'),canvas=document[_0x1fd1d8(0xda)](_0x1fd1d8(0xb0));const ctx=canvas[_0x1fd1d8(0x32e)]('2d'),ratio=window[_0x1fd1d8(0x2aa)];let width=window['innerWidth'],height=window[_0x1fd1d8(0x2f0)];canvas['width']=width*ratio,canvas[_0x1fd1d8(0x20c)]=height*ratio,canvas[_0x1fd1d8(0x99)][_0x1fd1d8(0x2e3)]=width+'px',canvas['style']['height']=height+'px';const offscreen=document['createElement'](_0x1fd1d8(0x28e)),offCtx=offscreen[_0x1fd1d8(0x32e)]('2d');canvas[_0x1fd1d8(0x8d)](_0x1fd1d8(0x10b),function(_0x1d5c63){const _0x4366ef=_0x1fd1d8;let _0x281448=getMousePos(canvas,_0x1d5c63),_0x25a185=viewportpos[0x0]+Math[_0x4366ef(0xfa)](_0x281448[0x0]/fontsize)-viewportsizey/0x2,_0x1ea8b1=viewportpos[0x1]+Math[_0x4366ef(0xfa)](_0x281448[0x1]/fontsize)-viewportsizex/0x2;newpos=[_0x25a185,_0x1ea8b1],(newpos[0x0]!==cursorpos[0x0]||newpos[0x1]!==cursorpos[0x1])&&(updatedsomething=!![],cursorpos[0x0]=newpos[0x0],cursorpos[0x1]=newpos[0x1]);});function getMousePos(_0x489fc9,_0x247d2d){const _0x58e18c=_0x1fd1d8;var _0x10d1e9=_0x489fc9[_0x58e18c(0x1c8)]();return[_0x247d2d['clientY']-_0x10d1e9[_0x58e18c(0x122)],_0x247d2d['clientX']-_0x10d1e9[_0x58e18c(0x21e)]];}canvas[_0x1fd1d8(0x8d)](_0x1fd1d8(0x121),_0x5ad614=>{const _0x3ac4ba=_0x1fd1d8;keyglossary=![];if(controllock==!![])return;if(_0x5ad614['button']==0x0){if(_0x5ad614[_0x3ac4ba(0xf4)]){moveallplayers();return;}controllock==![]&&uilock==![]&&moveplayer();if(controllock==![]&&uilock==!![]&&uilocktype==_0x3ac4ba(0x155)){let _0x3ad659=playercs[activecharacter],_0x5b298e=actions['Attack'];_0x3ad659[_0x3ac4ba(0x117)]['push'](new Attack(..._0x5b298e,_0x3ad659[_0x3ac4ba(0x30b)](),cursorpos,_0x3ad659,_0x3ad659[_0x3ac4ba(0x284)])),canAffordAction(_0x3ad659[_0x3ac4ba(0x117)][0x0],_0x3ad659)&&playertick(_0x3ad659),uilock=![];}if(controllock==![]&&uilock==!![]&&uilocktype=='jump'){const _0x90f64e=activecharacternonindex,_0xc4847c=Math[_0x3ac4ba(0x115)](_0x90f64e[_0x3ac4ba(0xde)][0x0]+0.5,0x2),_0x5e2f36=new Jump(_0xc4847c,cursorpos,_0x90f64e,_0x90f64e[_0x3ac4ba(0x284)]);_0x90f64e[_0x3ac4ba(0x117)][_0x3ac4ba(0x1c6)](_0x5e2f36),canAffordAction(_0x90f64e['actionqueue'][0x0],_0x90f64e)&&playertick(_0x90f64e),uilock=![];}if(controllock==![]&&uilock==!![]&&uilocktype==_0x3ac4ba(0x2b5)){const _0x2808be=activecharacternonindex,_0x1f8f5e=new Kick(cursorpos,_0x2808be,_0x2808be[_0x3ac4ba(0x284)]);_0x2808be[_0x3ac4ba(0x117)]['push'](_0x1f8f5e),canAffordAction(_0x2808be['actionqueue'][0x0],_0x2808be)&&playertick(_0x2808be),uilock=![];}}}),document['addEventListener'](_0x1fd1d8(0x203),function(_0x3bd93d){const _0x6ee488=_0x1fd1d8;if(_0x3bd93d['repeat'])return;const _0x4407d0=activecharacternonindex;if(controllock==!![]){activecharacternonindex['pc']==!![]&&(activecharacternonindex[_0x6ee488(0x117)]=[],bufferedinputs=[]);return;}if(_0x3bd93d[_0x6ee488(0x11b)]===_0x6ee488(0x13d)||_0x3bd93d[_0x6ee488(0x1a8)]==='\x20'){if(_0x3bd93d['ctrlKey']&&controllock==![])while(controllock==![]){playerendturn();}else controllock==![]&&playerendturn();}_0x3bd93d[_0x6ee488(0x1a8)]==_0x6ee488(0x16a)&&(ctrl=!![]);_0x3bd93d[_0x6ee488(0x1a8)]=='m'&&(uilock==![]?(uilock=!![],uilocktype=_0x6ee488(0xbc),updatedsomething=!![]):(uilock=![],updatedsomething=!![]));if(_0x3bd93d['key']=='o'){if(uilock)uilock=![];controllock==![]&&uilock==![]&&(_0x4407d0['tc'][0x1]>=0x1&&(_0x4407d0[_0x6ee488(0x117)]=[],_0x4407d0[_0x6ee488(0x117)]['push'](new action('Overwatch',startoverwatch,[0x0,0x1,0x0],0x0,_0x4407d0['pos'],_0x4407d0,_0x4407d0[_0x6ee488(0x284)])),move(_0x4407d0)));}_0x3bd93d[_0x6ee488(0x1a8)]=='j'&&(r=playercs[activecharacter],_0x4407d0['tc'][0x1]>=0x1&&(uilock==![]?(uilock=!![],updatedsomething=!![]):(uilock=![],updatedsomething=!![])),uilocktype='jump');_0x3bd93d[_0x6ee488(0x1a8)]=='k'&&(r=playercs[activecharacter],_0x4407d0['tc'][0x1]>=0x1&&(uilock==![]?(uilock=!![],updatedsomething=!![]):(uilock=![],updatedsomething=!![])),uilocktype='kick');_0x3bd93d[_0x6ee488(0x1a8)]==='d'&&(controllock==![]&&(_0x4407d0['tc'][0x1]>=0x1&&(_0x4407d0[_0x6ee488(0x117)]['push'](new action(_0x6ee488(0x205),dashfunc,[0x0,0x1,0x0],0x0,_0x4407d0[_0x6ee488(0x284)],_0x4407d0,_0x4407d0['pos'])),playertick(_0x4407d0))));_0x3bd93d[_0x6ee488(0x1a8)]==='s'&&(controllock==![]&&(_0x4407d0['tc'][0x0]>=_0x4407d0[_0x6ee488(0x149)][0x0]&&(_0x4407d0[_0x6ee488(0x117)][_0x6ee488(0x1c6)](new action('Stand\x20Ground',standgroundfunc,[_0x4407d0[_0x6ee488(0x149)][0x0],0x0,0x0],0x0,_0x4407d0['pos'],_0x4407d0,_0x4407d0[_0x6ee488(0x284)])),playertick(_0x4407d0))));_0x3bd93d[_0x6ee488(0x1a8)]==='<'&&xstep<0x2&&(xstep+=0.5,ystep+=0.5,updatemap());_0x3bd93d[_0x6ee488(0x1a8)]==='>'&&xstep>0x1&&(xstep-=0.5,ystep-=0.5,updatemap());_0x3bd93d['key']===_0x6ee488(0x25f)&&viewfinderpos[0x1]>0x1&&(viewfinderpos[0x1]-=Math[_0x6ee488(0xc6)](xstep),updatemap());_0x3bd93d['key']==='ArrowRight'&&viewfinderpos[0x1]<mapsizex&&(viewfinderpos[0x1]+=Math[_0x6ee488(0xc6)](xstep),updatemap());_0x3bd93d[_0x6ee488(0x1a8)]===_0x6ee488(0x21d)&&viewfinderpos[0x0]>0x1&&(viewfinderpos[0x0]-=Math[_0x6ee488(0xc6)](ystep),updatemap());_0x3bd93d[_0x6ee488(0x1a8)]===_0x6ee488(0x187)&&viewfinderpos[0x0]<mapsizey&&(viewfinderpos[0x0]+=Math[_0x6ee488(0xc6)](ystep),updatemap());if(_0x3bd93d['key']==='a'){if(controllock==![]){const _0x3bb596=playercs[activecharacter];_0x3bb596['tc'][0x1]>=0x1&&(uilock==![]?(uilock=!![],updatedsomething=!![]):(uilock=![],updatedsomething=!![])),uilocktype='attack';}}if(_0x3bd93d[_0x6ee488(0x1a8)]==='D'){autodash=!autodash;if(autodash)adduilabel(_0x6ee488(0x2dd),activecharacternonindex['pos'],[0x80,0x80,0x80],0x0,!![]);else adduilabel(_0x6ee488(0x146),activecharacternonindex['pos'],[0x80,0x80,0x80],0x0,!![]);}if(_0x3bd93d[_0x6ee488(0x1a8)]==='S'){autosg=!autosg;if(autosg)adduilabel(_0x6ee488(0x297),activecharacternonindex[_0x6ee488(0x284)],[0x80,0x80,0x80],0x0,!![]);else adduilabel(_0x6ee488(0x194),activecharacternonindex[_0x6ee488(0x284)],[0x80,0x80,0x80],0x0,!![]);}if(_0x3bd93d[_0x6ee488(0x1a8)]==='A'){autoadv=!autoadv;if(autoadv)adduilabel(_0x6ee488(0x1b8),activecharacternonindex[_0x6ee488(0x284)],[0x80,0x80,0x80],0x0,!![]);else adduilabel('auto-advance\x20disabled',activecharacternonindex['pos'],[0x80,0x80,0x80],0x0,!![]);}if(_0x3bd93d['key']==='x'){if(controllock===![]){const _0x4b9eb5=playercs[activecharacter],_0x2d24cd=new action(...actions[_0x6ee488(0xa4)],0x0,_0x4b9eb5[_0x6ee488(0x284)],_0x4b9eb5,_0x4b9eb5[_0x6ee488(0x284)]);_0x4b9eb5['actionqueue'][_0x6ee488(0x1c6)](_0x2d24cd),playertick();}}if(_0x3bd93d[_0x6ee488(0x1a8)]==='X'){if(controllock===![]){const _0x3afcc0=playercs[activecharacter];let _0x99f251=[0x0,0x0,0x0];if(_0x3afcc0[_0x6ee488(0x107)][_0x6ee488(0x15f)]!=='Unarmed')_0x99f251=[0x0,0x1,0x0];const _0x352f8a=new action(_0x6ee488(0x213),switchweaponalt,_0x99f251,0x0,_0x3afcc0[_0x6ee488(0x284)],_0x3afcc0,_0x3afcc0[_0x6ee488(0x284)]);_0x3afcc0['actionqueue'][_0x6ee488(0x1c6)](_0x352f8a),playertick();}}if(_0x3bd93d['key']==='g'){if(controllock===![]&&uilock===![]){const _0x5c129b=playercs[activecharacter];newgrid[_0x5c129b[_0x6ee488(0x284)][0x0]][_0x5c129b[_0x6ee488(0x284)][0x1]]['objects'][_0x6ee488(0x86)]>0x0&&newgrid[_0x5c129b[_0x6ee488(0x284)][0x0]][_0x5c129b[_0x6ee488(0x284)][0x1]][_0x6ee488(0x274)][0x0]instanceof Item&&(_0x5c129b[_0x6ee488(0x117)][_0x6ee488(0x1c6)](new action(_0x6ee488(0x347),getfunc,[0x0,0x0,0x0],0x0,_0x5c129b['pos'],_0x5c129b,_0x5c129b['pos'])),playertick());}}if(_0x3bd93d['key']==='l'){if(controllock===![]&&uilock===![]){const _0x46762f=playercs[activecharacter];_0x46762f[_0x6ee488(0x117)]['push'](new action('Leave',leavefunc,[0x0,0x0,0x0],0x0,_0x46762f[_0x6ee488(0x284)],_0x46762f,_0x46762f[_0x6ee488(0x284)])),playertick();}}if(_0x3bd93d[_0x6ee488(0x1a8)]==='L'){if(controllock===![]&&uilock===![]){const _0x16dd06=playercs[activecharacter];_0x16dd06[_0x6ee488(0x117)]['push'](new action(_0x6ee488(0x22b),leavefuncoffhand,[0x0,0x0,0x0],0x0,_0x16dd06[_0x6ee488(0x284)],_0x16dd06,_0x16dd06[_0x6ee488(0x284)])),playertick();}}_0x3bd93d[_0x6ee488(0x1a8)]==='+'&&brightnessadjust<5.1&&(brightnessadjust+=0.1,console[_0x6ee488(0x35f)](brightnessadjust),updatedsomething=!![]);_0x3bd93d['key']==='-'&&brightnessadjust>0.4&&(brightnessadjust-=0.1,console['log'](brightnessadjust),updatedsomething=!![]);if(_0x3bd93d[_0x6ee488(0x1a8)]==='?')keyglossary=!keyglossary,updatedsomething=!![];else _0x3bd93d['key']!=_0x6ee488(0x368)&&(keyglossary=![],updatedsomething=!![]);if(!isNaN(_0x3bd93d[_0x6ee488(0x1a8)])){const _0x2972b1=_0x3bd93d[_0x6ee488(0x1a8)]-0x1;_0x2972b1>-0x1&&playercs['length']>0x0&&playercs['length']>_0x2972b1&&(playercs[_0x2972b1]&&playercs[_0x2972b1][_0x6ee488(0xd7)]==![]&&(uilock=![],activecharacter=_0x2972b1,activecharacternonindex=playercs[_0x2972b1]));}}),document[_0x1fd1d8(0x8d)](_0x1fd1d8(0x9b),function(_0x27bf43){const _0x13e7f4=_0x1fd1d8;_0x27bf43[_0x13e7f4(0x1a8)]==_0x13e7f4(0x16a)&&(ctrl=![]);});let viewportpos=[0x32,0x32],gameover=![],won=![],deathcharacter=null,cursorpos=[0x0,0x0],keyglossary=![],itemmap=[],grid,newgrid=[],noisemap=new Array(mapsizey)[_0x1fd1d8(0x216)](null)['map'](()=>new Array(mapsizex)[_0x1fd1d8(0x216)](0x1)),animationelements=[],nonpcshere=[],objectshere=[],envobjects=[],playercs=[],nonpcs=[],turncounter=0x0,activecharacter=0x0,activecharacternonindex=null,tickcounter=0x0,ctrl=![],autodash=![],autosg=![],autoadv=![],bufferedinputs=[],controllock=![],uilock=![],uilocktype=_0x1fd1d8(0x155),showdetails=!![],map=[],xstep=0x2,ystep=0x2,viewfinderpos=[0x0,0x0],tutorial=![],verbose=!![],lightsources=[],messageQueue=[],isProcessing=![];gridinit();function gridinit(){const _0x2fe2b0=_0x1fd1d8;for(let _0x3c1e6a=0x0;_0x3c1e6a<mapsizey;_0x3c1e6a++){newgrid[_0x3c1e6a]=[];for(let _0x3fd9f0=0x0;_0x3fd9f0<mapsizex;_0x3fd9f0++){newgrid[_0x3c1e6a][_0x3fd9f0]=0x0;}}envobjects=[],score=0x0;for(let _0x4b61cc=0x0;_0x4b61cc<mapsizey;_0x4b61cc++){for(let _0x10b4e1=0x0;_0x10b4e1<mapsizex;_0x10b4e1++){if(!newgrid[_0x4b61cc][_0x10b4e1])newgrid[_0x4b61cc][_0x10b4e1]=new Tile(...tiletypesarr[0x3],[_0x4b61cc,_0x10b4e1]);if(tutorial)newgrid[_0x4b61cc][_0x10b4e1]=new Tile(...tiletypesarr[0x2],[_0x4b61cc,_0x10b4e1]);}}generate(),updatecharacters();for(let _0x2f3fd5=0x0;_0x2f3fd5<mapsizey;_0x2f3fd5++){for(let _0x619781=0x0;_0x619781<mapsizex;_0x619781++){}}const [_0x45c530,_0x2c9f45]=[mapsizey/0x2,mapsizex/0x2];elevupdate(),updateGrid(),updatecharactershere(),updateGrid(),drawGrid(!![]),nonpcs[_0x2fe2b0(0xb8)](function(_0x2c5476){spot(_0x2c5476);}),updatemap();}function updatemap(){const _0x37f87e=_0x1fd1d8;for(let _0x1763ac=0x0;_0x1763ac<viewportsizey;_0x1763ac++){map[_0x1763ac]=[];for(let _0x549e5b=0x0;_0x549e5b<viewportsizex;_0x549e5b++){map[_0x1763ac][_0x549e5b]=[0x0,0x0,0x0];let _0x2a91ba=![],_0x2a42e3=![],_0x2462bb=[0x0,0x0,0x0],_0x2c3e05=[],_0xa9f186=![],_0x255c42='',_0x43d908=[0x0,0x0,0x0];for(let _0x1428c5=0x0;_0x1428c5<ystep;_0x1428c5++){for(let _0x30c0a6=0x0;_0x30c0a6<xstep;_0x30c0a6++){let [_0x405663,_0x37ded9]=[viewfinderpos[0x0]-ystep*viewportsizey/0x2,viewfinderpos[0x1]-xstep*viewportsizex/0x2],[_0x3849fe,_0xebf375]=[_0x405663+_0x1763ac*ystep+_0x1428c5,_0x37ded9+_0x549e5b*xstep+_0x30c0a6];[_0x3849fe,_0xebf375]=[Math[_0x37f87e(0xfa)](_0x3849fe),Math['floor'](_0xebf375)];if(!newgrid[_0x3849fe]||!newgrid[_0x3849fe][_0xebf375])continue;if(!newgrid[_0x3849fe][_0xebf375][_0x37f87e(0x27a)])continue;if(newgrid[_0x3849fe][_0xebf375][_0x37f87e(0xcd)]==!![]){_0x2a91ba=!![],_0x2c3e05['push'](newgrid[_0x3849fe][_0xebf375]['absorbtionBase'][_0x37f87e(0x169)]()),_0x255c42=newgrid[_0x3849fe][_0xebf375][_0x37f87e(0x1d9)];if(newgrid[_0x3849fe][_0xebf375][_0x37f87e(0xef)]&&newgrid[_0x3849fe][_0xebf375]['character']['pc']==!![]){}}else{let _0x2dd933=newgrid[_0x3849fe][_0xebf375][_0x37f87e(0x1ad)][_0x37f87e(0x169)]();for(let _0x1d1042=0x0;_0x1d1042<0x3;_0x1d1042++){_0x2dd933[_0x1d1042]=_0x2dd933[_0x1d1042]/0x2;}_0x2c3e05[_0x37f87e(0x1c6)](_0x2dd933);}}}for(let _0x33527f=0x0;_0x33527f<_0x2c3e05[_0x37f87e(0x86)];_0x33527f++){for(let _0x25c455=0x0;_0x25c455<0x3;_0x25c455++){_0x2462bb[_0x25c455]+=_0x2c3e05[_0x33527f][_0x25c455]/(_0x2c3e05[_0x37f87e(0x86)]*0x2);}}_0x2462bb[0x0]*=0.9,_0x2462bb[0x1]*=0.7,_0x2462bb[0x2]*=0.5;if(_0x2a91ba)map[_0x1763ac][_0x549e5b]=_0x2462bb[_0x37f87e(0x169)]();else _0xa9f186&&(map[_0x1763ac][_0x549e5b]=_0x2462bb[_0x37f87e(0x169)]());}}}function elevupdate(){const _0x3e62ae=_0x1fd1d8;for(let _0xb00abb=0x0;_0xb00abb<mapsizey;_0xb00abb++){for(let _0x3b4010=0x0;_0x3b4010<mapsizex;_0x3b4010++){if(!newgrid[_0xb00abb][_0x3b4010][_0x3e62ae(0xcd)])continue;const _0x541738=[_0xb00abb,_0x3b4010],_0x302e5b=[],_0x3b3b30=[],_0x4a2423=[],_0x2c65f9=[];cardinaldirections[_0x3e62ae(0xb8)](function(_0x2e1bf5){const _0x46ec0a=_0x3e62ae,[_0x4dab63,_0x25d0b3]=_0x2e1bf5[_0x46ec0a(0xbc)]((_0x5c448c,_0x5e0e7c)=>_0x5c448c+_0x541738[_0x5e0e7c]);newgrid[_0x4dab63]&&newgrid[_0x4dab63][_0x25d0b3]&&(newgrid[_0x4dab63][_0x25d0b3][_0x46ec0a(0xcd)]&&(newgrid[_0xb00abb][_0x3b4010][_0x46ec0a(0x1e7)]-newgrid[_0x4dab63][_0x25d0b3][_0x46ec0a(0x1e7)]<=-0x2&&(_0x302e5b[_0x46ec0a(0x1c6)](_0x4dab63),_0x3b3b30[_0x46ec0a(0x1c6)](_0x25d0b3))));}),directions[_0x3e62ae(0xb8)](function(_0x3d7b24){const _0x122321=_0x3e62ae,[_0x3ec59f,_0x32c359]=_0x3d7b24['map']((_0x1774cd,_0x1a113f)=>_0x1774cd+_0x541738[_0x1a113f]);newgrid[_0x3ec59f]&&newgrid[_0x3ec59f][_0x32c359]&&(newgrid[_0x3ec59f][_0x32c359]['traversable']&&(newgrid[_0xb00abb][_0x3b4010]['elevation']-newgrid[_0x3ec59f][_0x32c359][_0x122321(0x1e7)]<=-0x2&&(_0x4a2423[_0x122321(0x1c6)](_0x3ec59f),_0x2c65f9[_0x122321(0x1c6)](_0x32c359))));});if(_0x302e5b['length']>0x0){if(newgrid[_0xb00abb][_0x3b4010][_0x3e62ae(0x9a)]==!![])break;let _0x5a8e3d=[takeav(_0x4a2423),takeav(_0x2c65f9)];newgrid[_0xb00abb][_0x3b4010][_0x3e62ae(0xcd)]=![],newgrid[_0xb00abb][_0x3b4010][_0x3e62ae(0xe4)]=!![],newgrid[_0xb00abb][_0x3b4010]['symbolBase']=linecharacter([_0xb00abb,_0x3b4010],_0x5a8e3d),newgrid[_0xb00abb][_0x3b4010]['delta']=[Math['ceil'](Math['abs'](_0x5a8e3d[0x0]-_0xb00abb))*Math['sign'](_0x5a8e3d[0x0]-_0xb00abb),Math['ceil'](Math[_0x3e62ae(0x1be)](_0x5a8e3d[0x1]-_0x3b4010))*Math['sign'](_0x5a8e3d[0x1]-_0x3b4010)];}}}for(let _0x3c512a=0x0;_0x3c512a<mapsizey;_0x3c512a++){for(let _0x3cd92c=0x0;_0x3cd92c<mapsizex;_0x3cd92c++){const _0xca1e49=newgrid[_0x3c512a][_0x3cd92c],_0x18ed0c=_0xca1e49[_0x3e62ae(0x1e7)];let _0x2492d8=[],_0x4128e1=[];cardinaldirections[_0x3e62ae(0xb8)](function(_0x34dd56){const _0x593516=_0x3e62ae,[_0x54efd1,_0x2d22cf]=_0x34dd56[_0x593516(0xbc)]((_0x603094,_0x5de52d)=>_0x603094+[_0x3c512a,_0x3cd92c][_0x5de52d]);if(newgrid[_0x54efd1]&&newgrid[_0x54efd1][_0x2d22cf]){if(newgrid[_0x54efd1][_0x2d22cf]['elevation']==_0x18ed0c-0x1)_0x2492d8[_0x593516(0x1c6)]([_0x54efd1,_0x2d22cf]);if(newgrid[_0x54efd1][_0x2d22cf]['elevation']==_0x18ed0c+0x1)_0x4128e1[_0x593516(0x1c6)]([_0x54efd1,_0x2d22cf]);}});if(_0x4128e1['length']>0x0&&_0x2492d8['length']>0x0){let _0x348433=![];newgrid[_0x3c512a][_0x3cd92c][_0x3e62ae(0xcd)]&&(newgrid[_0x3c512a][_0x3cd92c][_0x3e62ae(0x9a)]=!![],_0x4128e1[_0x3e62ae(0xb8)](function([_0x72f298,_0x2fa228]){const _0x124367=_0x3e62ae;_0x2492d8[_0x124367(0xb8)](function([_0x421158,_0x195b76]){const _0x4be818=_0x124367;let _0x263cd3=_0x72f298-_0x421158,_0x46d786=_0x2fa228-_0x195b76;_0x263cd3==0x2&&_0x46d786==0x0&&(newgrid[_0x3c512a][_0x3cd92c][_0x4be818(0xcd)]=!![],newgrid[_0x3c512a][_0x3cd92c][_0x4be818(0x1d9)]=_0x4be818(0x34c),_0x348433=!![]),_0x263cd3==-0x2&&_0x46d786==0x0&&(newgrid[_0x3c512a][_0x3cd92c][_0x4be818(0xcd)]=!![],newgrid[_0x3c512a][_0x3cd92c]['symbolBase']=_0x4be818(0x338),_0x348433=!![]),_0x46d786==0x2&&_0x263cd3==0x0&&(newgrid[_0x3c512a][_0x3cd92c][_0x4be818(0xcd)]=!![],newgrid[_0x3c512a][_0x3cd92c][_0x4be818(0x1d9)]=_0x4be818(0x2b0),_0x348433=!![]),_0x46d786==-0x2&&_0x263cd3==0x0&&(newgrid[_0x3c512a][_0x3cd92c]['traversable']=!![],newgrid[_0x3c512a][_0x3cd92c][_0x4be818(0x1d9)]=_0x4be818(0x1b6),_0x348433=!![]);});}),_0x348433==![]&&(newgrid[_0x3c512a][_0x3cd92c]['traversable']=!![],newgrid[_0x3c512a][_0x3cd92c][_0x3e62ae(0x1d9)]='*'));}}}}function alinedraw(_0x4f5285,_0x9a2e42,_0x5f1c72){const _0x5971a5=_0x1fd1d8;if(!playercs[activecharacter])return;if(!_0x4f5285||_0x4f5285['length']==0x0)return;const _0x71c543=translateAStoAQ(_0x4f5285,_0x5f1c72);let _0x30ddb7=_0x5f1c72['tc']['slice'](),_0x170274=_0x5f1c72[_0x5971a5(0x284)],_0x6cb148=![];for(let _0xaaff2f=0x0;_0xaaff2f<_0x71c543[_0x5971a5(0x86)];_0xaaff2f++){const [_0x5afb71,_0xc2a2c5]=_0x71c543[_0xaaff2f][_0x5971a5(0x331)];_0xaaff2f>0x0&&(_0x170274=_0x71c543[_0xaaff2f-0x1][_0x5971a5(0x331)]);_0x30ddb7[0x0]-_0x71c543[_0xaaff2f]['cost'][0x0]<0x0&&_0x30ddb7[0x1]>0x0&&autodash==!![]&&(_0x30ddb7[0x0]+=_0x5f1c72[_0x5971a5(0x149)][0x0],_0x30ddb7[0x1]-=0x1,_0x6cb148=!![]);if(_0x30ddb7[0x0]>=_0x71c543[_0xaaff2f][_0x5971a5(0x2ff)][0x0]&&_0x30ddb7[0x1]>=_0x71c543[_0xaaff2f][_0x5971a5(0x2ff)][0x1]){if(_0x71c543[_0xaaff2f][_0x5971a5(0x15f)]==_0x5971a5(0x1c9)){cost=_0x71c543[_0xaaff2f][_0x5971a5(0x2ff)][0x0];let _0x28dfd3=[0.25*cost**0x2,0.25,0.25];_0x6cb148==!![]&&(_0x28dfd3[0x0]=_0x28dfd3[0x0],_0x28dfd3[0x1]=_0x28dfd3[0x1],_0x28dfd3[0x2]=_0x28dfd3[0x2]/0x2),newgrid[_0x5afb71][_0xc2a2c5][_0x5971a5(0xdf)][_0x5971a5(0x1c6)](new uielement('',_0x28dfd3,[_0x5afb71,_0xc2a2c5]));}if(_0x71c543[_0xaaff2f]['name']==_0x5971a5(0x373)){const _0x14a894=bresenhamLine(_0x170274,_0x71c543[_0xaaff2f][_0x5971a5(0x331)]);let _0x53b8e9=linecharacter(_0x170274,_0x71c543[_0xaaff2f][_0x5971a5(0x331)]);for(let _0x3e0c26=0x1;_0x3e0c26<_0x14a894[_0x5971a5(0x86)];_0x3e0c26++){const [_0x420d42,_0x49ad95]=_0x14a894[_0x3e0c26];if(_0x3e0c26==_0x14a894['length']-0x1)_0x53b8e9='x';newgrid[_0x420d42][_0x49ad95][_0x5971a5(0xdf)][_0x5971a5(0x1c6)](new uielement(_0x53b8e9,[0x1,0x1,0x1],[_0x420d42,_0x49ad95]));}}let _0x4f4e50=Math[_0x5971a5(0x200)](now/0x64)*0x20+0x60;if(_0x71c543[_0xaaff2f][_0x5971a5(0x2b6)]['length']!==0x0)adduilabel(_0x71c543[_0xaaff2f][_0x5971a5(0x2b6)][0x0],_0x71c543[_0xaaff2f][_0x5971a5(0x284)],[_0x4f4e50,0x0,0x0],0x1,![],![]);_0x30ddb7=_0x30ddb7[_0x5971a5(0xbc)]((_0x426b8f,_0x168ed5)=>_0x426b8f-_0x71c543[_0xaaff2f]['cost'][_0x168ed5]);}else return _0x30ddb7;if(_0xaaff2f==_0x71c543['length']-0x1)return _0x30ddb7;}}function addanimation(_0x5f1a4c,_0xbcf2e3,_0x37740f,_0x3b4620=0.5,_0x13d276=!![],_0x7c2c20=![],_0x1127fd=0x0){const _0x3f9ade=_0x1fd1d8;let _0x547545=_0x5f1a4c[_0x3f9ade(0x86)];for(let _0x4a7b14=0x0;_0x4a7b14<_0x547545;_0x4a7b14++){const [_0x6a5be7,_0xc2da90]=_0x5f1a4c[_0x4a7b14];if(!newgrid[_0x6a5be7]||!newgrid[_0x6a5be7][_0xc2da90])continue;let _0x2850bb=_0xbcf2e3[_0x4a7b14%_0xbcf2e3[_0x3f9ade(0x86)]];(newgrid[_0x6a5be7][_0xc2da90][_0x3f9ade(0x123)]==!![]||_0x7c2c20==!![])&&newgrid[_0x6a5be7][_0xc2da90][_0x3f9ade(0xdf)][_0x3f9ade(0x1c6)](new uielement(_0x2850bb,_0x37740f,_0x5f1a4c[_0x4a7b14],_0x13d276,_0x7c2c20,[now+_0x1127fd+_0x3b4620*0x3e8,now+_0x1127fd]));}updatedsomething=!![];}updateGrid();function noiseupdate(){const _0x357349=_0x1fd1d8;if(procgendebug)return;let _0x13359e=viewportpos[0x1]-Math[_0x357349(0xfa)](viewportsizex/0x2),_0x568625=viewportpos[0x0]-Math[_0x357349(0xfa)](viewportsizey/0x2),_0x48de73=viewportpos[0x1]+Math[_0x357349(0xfa)](viewportsizex/0x2),_0xcdf3fe=viewportpos[0x0]+Math['floor'](viewportsizey/0x2);_0x568625<0x0&&(_0x568625=0x0,_0xcdf3fe=viewportsizey);_0xcdf3fe>mapsizey&&(_0xcdf3fe=mapsizey,_0x568625=mapsizey-viewportsizey);_0x13359e<0x0&&(_0x13359e=0x0,_0x48de73=viewportsizex);_0x48de73>mapsizex&&(_0x48de73=mapsizex,_0x13359e=mapsizex-viewportsizex);let _0x538afc=![];for(let _0x58d89a=_0x568625;_0x58d89a<_0xcdf3fe;_0x58d89a++){for(let _0x302671=_0x13359e;_0x302671<_0x48de73;_0x302671++){if(newgrid[_0x58d89a][_0x302671][_0x357349(0x123)]!==![]){let _0x359235=takeav(newgrid[_0x58d89a][_0x302671][_0x357349(0x96)])/0x100;const _0x2425d3=newgrid[_0x58d89a][_0x302671]['readLightsource']();if(Math[_0x357349(0x222)]()>noisethreshold+_0x359235**0.05*0.5){let _0x571f84=0x1-noiseamount+Math[_0x357349(0x222)]()*noiseamount*0x2;noisemap[_0x58d89a][_0x302671]=_0x571f84;}_0x2425d3[_0x357349(0xb8)](function(_0x533298){const _0x109142=_0x357349;if(_0x533298&&(Math[_0x109142(0x222)]()>lightflickerthreshhold||_0x533298['radiance']==0x1&&Math['random']()>noisethreshold)){_0x538afc=!![];let _0x53bc1f=0x1-noiseamount+Math[_0x109142(0x222)]()*noiseamount*0x2;noisemap[_0x58d89a][_0x302671]=_0x53bc1f;}});}}}if(_0x538afc)updatedlighting=!![];else updatedsomething=!![];updateambientsound();}function updateGrid(){if(gameover)return;let _0x38c002=_0x461a36();_0x38c002&&dist(_0x38c002,viewportpos)>0x2&&(viewportpos[0x0]=_0x38c002[0x0],viewportpos[0x1]=_0x38c002[0x1],viewportpos[0x0]-viewportsizey/0x2<0x0&&(viewportpos[0x0]=viewportsizey/0x2),viewportpos[0x1]-viewportsizex/0x2<0x0&&(viewportpos[0x1]=viewportsizex/0x2),viewportpos[0x0]+viewportsizey/0x2>mapsizey&&(viewportpos[0x0]=mapsizey-viewportsizey/0x2),viewportpos[0x1]+viewportsizex/0x2>mapsizex&&(viewportpos[0x1]=mapsizex-viewportsizex/0x2));viewfinderpos=viewportpos['slice'](),updatemap();function _0x461a36(){const _0xf54748=_0x438d;let _0x4ab9d1=[],_0x4e25c7=[],_0x597876=[];for(let _0x290984=0x0;_0x290984<playercs[_0xf54748(0x86)];_0x290984++){if(playercs[_0x290984][_0xf54748(0xd7)]==![]){_0x4e25c7[_0xf54748(0x1c6)](playercs[_0x290984][_0xf54748(0x284)][0x0]),_0x597876[_0xf54748(0x1c6)](playercs[_0x290984]['pos'][0x1]);break;}}if(_0x4e25c7[_0xf54748(0x86)]==0x0)return;return _0x4ab9d1=[Math['round'](takeav(_0x4e25c7)),Math[_0xf54748(0x8a)](takeav(_0x597876))],_0x4ab9d1;}}function updateconditions(_0x4242bd){const _0x35f292=_0x1fd1d8;for(let _0x3e8fab=_0x4242bd['conditions'][_0x35f292(0x86)]-0x1;_0x3e8fab>=0x0;_0x3e8fab--){_0x4242bd[_0x35f292(0x12d)][_0x3e8fab][_0x35f292(0x1f2)]--,_0x4242bd[_0x35f292(0x12d)][_0x3e8fab][_0x35f292(0x1f2)]<=-0x1?(_0x4242bd[_0x35f292(0x12d)][_0x3e8fab][_0x35f292(0x302)]!=null&&_0x4242bd[_0x35f292(0x12d)][_0x3e8fab]['endeffect'](),_0x4242bd['conditions'][_0x35f292(0x320)](_0x3e8fab,0x1)):_0x4242bd[_0x35f292(0x12d)][_0x3e8fab][_0x35f292(0x8c)]();}}function updatetraitspassive(){const _0x10f599=_0x1fd1d8;for(let _0x5c6e76=0x0;_0x5c6e76<nonpcshere[_0x10f599(0x86)];_0x5c6e76++){const _0x162e6a=nonpcshere[_0x5c6e76];if(_0x162e6a[_0x10f599(0xd7)]===!![])continue;else for(let _0x2d57bb=0x0;_0x2d57bb<_0x162e6a[_0x10f599(0xc8)][_0x10f599(0x86)];_0x2d57bb++){const _0x79fd21=_0x162e6a[_0x10f599(0xc8)][_0x2d57bb];_0x79fd21['passive']==!![]&&(_0x79fd21['trigger']()==!![]&&_0x79fd21[_0x10f599(0xba)]());}}for(let _0x5be404=0x0;_0x5be404<playercs[_0x10f599(0x86)];_0x5be404++){const _0x269d4a=playercs[_0x5be404];if(_0x269d4a['dead']==!![])continue;else for(let _0x5231ed=0x0;_0x5231ed<_0x269d4a[_0x10f599(0xc8)][_0x10f599(0x86)];_0x5231ed++){const _0x10c6d0=_0x269d4a[_0x10f599(0xc8)][_0x5231ed];_0x10c6d0[_0x10f599(0x31f)]==!![]&&(_0x10c6d0[_0x10f599(0x13b)]()==!![]&&_0x10c6d0[_0x10f599(0xba)]());}}for(let _0x5da1ae=0x0;_0x5da1ae<objectshere[_0x10f599(0x86)];_0x5da1ae++){const _0x34ef13=objectshere[_0x5da1ae];for(let _0x1d6d8b=0x0;_0x1d6d8b<_0x34ef13[_0x10f599(0x16d)][_0x10f599(0x86)];_0x1d6d8b++){const _0x315131=_0x34ef13[_0x10f599(0x16d)][_0x1d6d8b];_0x315131(_0x34ef13);}}}function updatetraitsactive(_0x8fe8f7){const _0x41db4e=_0x1fd1d8;for(let _0x231a06=0x0;_0x231a06<_0x8fe8f7['traits'][_0x41db4e(0x86)];_0x231a06++){const _0x3d6e90=_0x8fe8f7[_0x41db4e(0xc8)][_0x231a06];_0x3d6e90[_0x41db4e(0x238)]==!![]&&_0x3d6e90[_0x41db4e(0x13b)]()==!![]&&_0x3d6e90['effect']();}}function startplayerturn(){const _0x45e123=_0x1fd1d8;if(won)controllock=!![];else{if(gameover){enemyturn();return;}};let _0x4dd94b,_0x1309e2=![];for(let _0x2e7f35=0x0;_0x2e7f35<playercs[_0x45e123(0x86)];_0x2e7f35++){_0x4dd94b=playercs[_0x2e7f35];if(_0x4dd94b[_0x45e123(0xd7)]==![])_0x1309e2=!![];_0x4dd94b['tc']=_0x4dd94b[_0x45e123(0x149)][_0x45e123(0x169)](),updateconditions(_0x4dd94b);}!_0x1309e2?(controllock=!![],gameover=!![]):playerturn();}function playerturn(){const _0x80061e=_0x1fd1d8;activecharacter==0x0&&turncounter++,pc=playercs[activecharacter],pc[_0x80061e(0xd7)]==!![]&&playerendturn(),controllock=![],activecharacternonindex=playercs[activecharacter];}function playertick(){const _0xd40566=_0x1fd1d8;if(gameover)return;controllock=!![];let _0x2f5b29=playercs[activecharacter];_0x2f5b29['hp']<=0x0&&(_0x2f5b29['dead']=!![]);if(_0x2f5b29[_0xd40566(0xd7)]==!![]){playerendturn();return;}if(_0x2f5b29['actionqueue']['length']>0x0){let _0x523549=0x1;canAffordAction(_0x2f5b29[_0xd40566(0x117)][0x0],_0x2f5b29)?(_0x2f5b29[_0xd40566(0x117)][0x1]&&_0x2f5b29['actionqueue'][0x1]['cost'][0x1]>0x0&&_0x2f5b29[_0xd40566(0x117)][0x1][_0xd40566(0x15f)]!==_0xd40566(0x205)&&(_0x523549=2.5),_0x2f5b29[_0xd40566(0x117)][0x0][_0xd40566(0x2ff)][0x1]>0x0&&_0x2f5b29['actionqueue'][0x0][_0xd40566(0x15f)]!=='Dash'&&(_0x523549=2.5),move(_0x2f5b29),updatetraitspassive()):_0x2f5b29[_0xd40566(0x117)]=[];setTimeout(playertick,ticktimer*_0x523549),updateGrid();return;}else playercs[activecharacter][_0xd40566(0x117)]=[];playercs[activecharacter][_0xd40566(0x117)][_0xd40566(0x86)]==0x0&&(playercs[activecharacter]['tc'][0x0]==0x0&&playercs[activecharacter]['tc'][0x1]==0x0&&bufferedinputs[_0xd40566(0x86)]==0x0&&autoadv?playerendturn():releasecontrollock());}function releasecontrollock(){controllock=![],triggerbufferedinput();}function playerendturn(){const _0x366d26=_0x1fd1d8;updatetraitspassive(),updatecharactershere(),nonpcshere=shuffle(nonpcshere),uilock=![];if(gameover==![]){activecharacter++;if(activecharacter<playercs[_0x366d26(0x86)]){if(playercs[activecharacter][_0x366d26(0xd7)]==!![]){playerendturn();return;}playerturn();return;}}activecharacter=0x0,controllock=!![],updateEnvironment(),setTimeout(enemyturn,ticktimer);}function restcheck(){const _0x235a1a=_0x1fd1d8;let _0x5c7a02=0x0;playercs[_0x235a1a(0xb8)](function(_0x50fd39){const _0xe5358f=_0x235a1a;(lackscondition(conditions[_0xe5358f(0x30c)],_0x50fd39)!==!![]||_0x50fd39[_0xe5358f(0xd7)]==!![]||lackscondition(conditions['Overwatch'],_0x50fd39)!==!![])&&_0x5c7a02++;}),_0x5c7a02==playercs[_0x235a1a(0x86)]&&playercs[_0x235a1a(0xb8)](function(_0x29edec){const _0x1cf4fb=_0x235a1a;!_0x29edec[_0x1cf4fb(0xd7)]&&_0x29edec['hp']<_0x29edec[_0x1cf4fb(0x2e2)]&&(_0x29edec[_0x1cf4fb(0x1a5)](_0x29edec[_0x1cf4fb(0x2e2)]-_0x29edec['hp']),directions[_0x1cf4fb(0xb8)](function(_0x315d2c){const _0x3c647a=_0x1cf4fb,[_0x4fe28c,_0x36ddc3]=_0x315d2c[_0x3c647a(0xbc)]((_0x43c6ac,_0x5eca24)=>_0x43c6ac+_0x29edec['pos'][_0x5eca24]);if(newgrid[_0x4fe28c][_0x36ddc3][_0x3c647a(0x274)][_0x3c647a(0x86)]>0x0){const _0x28486b=newgrid[_0x4fe28c][_0x36ddc3][_0x3c647a(0x274)][0x0];_0x28486b instanceof bonfire&&_0x28486b[_0x3c647a(0x195)]();}}));});}function updateEnvironment(){const _0x2e161c=_0x1fd1d8;let _0x20f6c8=envobjects['slice']();envobjects=[];while(_0x20f6c8[_0x2e161c(0x86)]>0x0){const _0x35f75a=_0x20f6c8[_0x2e161c(0x1c4)]();_0x35f75a[_0x2e161c(0x160)]();}}function enemyturn(){const _0x3c0b03=_0x1fd1d8;if(activecharacter==0x0)enemyturnstart=performance[_0x3c0b03(0x273)]();if(activecharacter>=nonpcshere[_0x3c0b03(0x86)]){activecharacter=0x0,startplayerturn();return;}let _0x26f340=nonpcshere[activecharacter];activecharacternonindex=_0x26f340,activecharacter++;if(manhattanDistance(_0x26f340[_0x3c0b03(0x284)],viewportpos)<dontcaredistance&&_0x26f340[_0x3c0b03(0xd7)]==![]){_0x26f340['tc']=_0x26f340[_0x3c0b03(0x149)][_0x3c0b03(0x169)](),tickcounter=0x0,updateconditions(_0x26f340),updatetraitsactive(_0x26f340),_0x16383b(_0x26f340);return;}enemyturn();function _0x16383b(_0x1c5d0e){const _0x460edf=_0x3c0b03;let _0x2d99d2=0x1;tickcounter++;if(tickcounter>0x14){_0x1c5d0e['actionqueue']=[],enemyturn();return;}if(_0x1c5d0e['hp']<=0x0)_0x1c5d0e['dead']=!![];if(_0x1c5d0e['dead']==!![]){enemyturn();return;}if(_0x1c5d0e['tc'][0x0]>0x0||_0x1c5d0e['tc'][0x1]>0x0){if(_0x1c5d0e[_0x460edf(0x117)]['length']>0x0){if(canAffordAction(_0x1c5d0e['actionqueue'][0x0],_0x1c5d0e)){_0x1c5d0e['actionqueue'][0x1]&&_0x1c5d0e[_0x460edf(0x117)][0x1][_0x460edf(0x15f)]==_0x460edf(0x165)&&gameover==!![]&&(_0x2d99d2=Math['round'](Math[_0x460edf(0x222)]()*0x32));_0x1c5d0e[_0x460edf(0x117)][0x0][_0x460edf(0x2ff)][0x1]>0x0&&(_0x2d99d2=0x5);(!_0x1c5d0e[_0x460edf(0x117)][0x1]||_0x1c5d0e[_0x460edf(0x117)][0x1][_0x460edf(0x2ff)][0x1]>0x0)&&(_0x2d99d2=0x5);const [_0x194e27,_0x6d6383]=_0x1c5d0e[_0x460edf(0x117)][0x0]['target'];newgrid[_0x1c5d0e[_0x460edf(0x284)][0x0]][_0x1c5d0e['pos'][0x1]][_0x460edf(0x123)]!==!![]&&newgrid[_0x194e27][_0x6d6383][_0x460edf(0x123)]!==!![]&&(_0x2d99d2=0x0),move(_0x1c5d0e);}else{_0x1c5d0e[_0x460edf(0x117)]=[],enemyturn();return;}}else{let _0x1b0925=planturn(_0x1c5d0e);if(_0x1b0925[_0x460edf(0x86)]>0x0){_0x1c5d0e[_0x460edf(0x117)]=_0x1b0925['slice'](),_0x1c5d0e['actionqueue']['push'](new endTurn(_0x460edf(0x165),endturnfunc,[0x0,0x0,0x0],0x0,_0x1c5d0e['pos'],_0x1c5d0e,_0x1c5d0e[_0x460edf(0x284)]));if(_0x1c5d0e['actionqueue'][_0x460edf(0x86)]<0x2){enemyturn();return;}}else{_0x1c5d0e[_0x460edf(0x117)]=[],enemyturn();return;}}}_0x1c5d0e['tc'][0x0]>0x0||_0x1c5d0e['tc'][0x1]>0x0?(newgrid[_0x1c5d0e[_0x460edf(0x284)][0x0]][_0x1c5d0e[_0x460edf(0x284)][0x1]][_0x460edf(0x123)]!==!![]&&(_0x2d99d2=0x0),_0x1c5d0e[_0x460edf(0x117)][0x0]&&_0x1c5d0e['actionqueue'][0x0]['loudness']&&_0x1c5d0e[_0x460edf(0x117)][0x0][_0x460edf(0x138)]>=chebyshevDistance(viewportpos,_0x1c5d0e['pos'])&&(_0x2d99d2=Math[_0x460edf(0x115)](0x1,_0x2d99d2)),setTimeout(function(){_0x16383b(_0x1c5d0e),updateGrid();},ticktimer*_0x2d99d2)):(_0x1c5d0e[_0x460edf(0x117)]=[],enemyturn());}}function aStar(_0x4e8ed5,_0xcd292c,_0x2783c7=0x4b,_0x4c7b36=0x0){const _0x52e8fb=_0x1fd1d8,_0x4a9aeb=mapsizey,_0x2f5b2b=mapsizex;let _0x52c159=[[-0x1,0x0],[0x1,0x0],[0x0,-0x1],[0x0,0x1],[-0x1,-0x1],[0x1,-0x1],[0x1,0x1],[-0x1,0x1]];function _0x47d393(_0x3d56fd,_0x2021ac){const _0x492b09=_0x438d;let _0x323177=!![];return newgrid[_0x3d56fd][_0x2021ac][_0x492b09(0xef)]!==null&&((_0x3d56fd!==_0x4e8ed5[0x0]||_0x2021ac!==_0x4e8ed5[0x1])&&((_0x3d56fd!==_0xcd292c[0x0]||_0x2021ac!==_0xcd292c[0x1])&&(_0x323177=![]))),_0x3d56fd>=0x0&&_0x2021ac>=0x0&&_0x3d56fd<_0x4a9aeb&&_0x2021ac<_0x2f5b2b&&newgrid[_0x3d56fd][_0x2021ac]['traversable']===!![]&&_0x323177==!![];}const _0x1f49b3=new PriorityQueue((_0x3c8b2b,_0x330e14)=>_0x3c8b2b['f']-_0x330e14['f']),_0x33d542=new Array(_0x4a9aeb)[_0x52e8fb(0x216)](null)[_0x52e8fb(0xbc)](()=>new Array(_0x2f5b2b)[_0x52e8fb(0x216)](Infinity)),[_0x377f75,_0x3b65fe]=_0x4e8ed5;_0x33d542[_0x377f75][_0x3b65fe]=0x0,_0x1f49b3[_0x52e8fb(0x261)]({'x':_0x3b65fe,'y':_0x377f75,'f':0x0});let _0x53cec0=bresenhamLine(_0x4e8ed5,_0xcd292c),_0x10f7c0=0x1,_0x3aab0b=0x0;while(!_0x1f49b3[_0x52e8fb(0x127)]()){const _0x9b1c4=_0x1f49b3[_0x52e8fb(0x105)]();if(_0x9b1c4['x']===_0xcd292c[0x1]&&_0x9b1c4['y']===_0xcd292c[0x0]||dist([_0x9b1c4['y'],_0x9b1c4['x']],_0xcd292c)<=_0x4c7b36){const _0x37c928=[];let _0x20d715=_0x9b1c4;while(_0x20d715){_0x37c928[_0x52e8fb(0x1c6)]([_0x20d715['y']-_0x4e8ed5[0x0],_0x20d715['x']-_0x4e8ed5[0x1]]),_0x20d715=_0x20d715[_0x52e8fb(0x1af)];}return _0x37c928['pop'](),_0x37c928[_0x52e8fb(0x229)]();}_0x53cec0[_0x52e8fb(0x86)]>=_0x10f7c0-0x1&&((_0x9b1c4['y']!=_0x53cec0[_0x10f7c0-0x1][0x0]||_0x9b1c4['x']!=_0x53cec0[_0x10f7c0-0x1][0x1])&&(_0x53cec0=bresenhamLine([_0x9b1c4['y'],_0x9b1c4['x']],_0xcd292c),_0x10f7c0=0x1));if(_0x3aab0b>_0x2783c7)break;for(const [_0x592cd1,_0x53a327]of _0x52c159){const _0x4195c5=_0x9b1c4['y']+_0x53a327,_0x50509c=_0x9b1c4['x']+_0x592cd1;if(_0x47d393(_0x4195c5,_0x50509c)&&Math[_0x52e8fb(0x1be)](newgrid[_0x4195c5][_0x50509c]['elevation']-newgrid[_0x9b1c4['y']][_0x9b1c4['x']][_0x52e8fb(0x1e7)])<0x2){let _0x3ffe1b=_0x33d542[_0x9b1c4['y']][_0x9b1c4['x']]+newgrid[_0x9b1c4['y']][_0x9b1c4['x']][_0x52e8fb(0x2a0)];if(_0x3ffe1b<_0x33d542[_0x4195c5][_0x50509c]){_0x33d542[_0x4195c5][_0x50509c]=_0x3ffe1b;const _0x58e7ce=Math[_0x52e8fb(0x1be)](_0x4195c5-_0xcd292c[0x0]),_0x56c128=Math['abs'](_0x50509c-_0xcd292c[0x1]);let _0x27f23b;_0x58e7ce>_0x56c128?_0x27f23b=_0x58e7ce+0.9*_0x56c128:_0x27f23b=_0x56c128+0.9*_0x58e7ce;_0x53cec0[_0x52e8fb(0x86)]>_0x10f7c0&&(_0x4195c5==_0x53cec0[_0x10f7c0][0x0]&&_0x50509c==_0x53cec0[_0x10f7c0][0x1]&&(_0x27f23b=-0.1));const _0x28a55c=_0x3ffe1b+_0x27f23b;_0x1f49b3[_0x52e8fb(0x261)]({'x':_0x50509c,'y':_0x4195c5,'f':_0x28a55c,'parent':_0x9b1c4});}}}_0x10f7c0++,_0x3aab0b++;}return null;}function translateAStoAQ(_0x17b0eb,_0x4d28ce,_0x293b48=![]){const _0x59fd55=_0x1fd1d8;let _0x430641=[],_0x1d4883=[];if(_0x17b0eb)for(let _0x2ff5d0=0x0;_0x2ff5d0<_0x17b0eb[_0x59fd55(0x86)];_0x2ff5d0++){_0x1d4883[_0x59fd55(0x1c6)](_0x17b0eb[_0x2ff5d0]['map']((_0x3afbfb,_0x1e74ce)=>_0x3afbfb+_0x4d28ce[_0x59fd55(0x284)][_0x1e74ce])),_0x2ff5d0==0x0?_0x430641[_0x59fd55(0x1c6)](_0x17b0eb[_0x2ff5d0]):_0x430641[_0x59fd55(0x1c6)](_0x17b0eb[_0x2ff5d0]['map']((_0x203723,_0x335215)=>_0x203723-_0x17b0eb[_0x2ff5d0-0x1][_0x335215]));}let [_0x54beb0,_0x1e40ae]=_0x4d28ce['pos'];_0x1d4883[_0x59fd55(0x86)]>0x0&&([_0x54beb0,_0x1e40ae]=_0x1d4883[_0x1d4883['length']-0x1]);const _0x31f536=newgrid[_0x54beb0][_0x1e40ae]['character'],_0x2c3f93=newgrid[cursorpos[0x0]][cursorpos[0x1]][_0x59fd55(0x274)][0x0];let _0x37ea5b=![],_0x4ea16f=![],_0x389c9a;_0x31f536!==null&&_0x31f536['pc']!==_0x4d28ce['pc']&&_0x293b48==![]&&(_0x37ea5b=!![]);_0x2c3f93&&_0x37ea5b==![]&&_0x2c3f93[_0x59fd55(0x24d)]!==null&&(_0x4ea16f=!![]);let _0x5b5bd6=[];if(_0x37ea5b&&(_0x4d28ce[_0x59fd55(0x107)][_0x59fd55(0x1a9)]||_0x4d28ce[_0x59fd55(0x107)][_0x59fd55(0x358)]&&!_0x4d28ce[_0x59fd55(0x110)][_0x4d28ce[_0x59fd55(0x107)][_0x59fd55(0x358)]]))return _0x5b5bd6;let _0xaa9686=_0x4d28ce[_0x59fd55(0x284)],_0xca3e9d;_0x4ea16f&&dist(_0xaa9686,_0x2c3f93[_0x59fd55(0x284)])<_0x2c3f93[_0x59fd55(0x24d)][0x3]&&_0x5b5bd6[_0x59fd55(0x1c6)](new action(..._0x2c3f93[_0x59fd55(0x24d)],_0x2c3f93[_0x59fd55(0x284)],_0x4d28ce,_0xaa9686));for(let _0x289cd7=0x0;_0x289cd7<_0x430641[_0x59fd55(0x86)];_0x289cd7++){_0x289cd7>0x0&&(_0xaa9686=_0x1d4883[_0x289cd7-0x1]);_0xca3e9d=_0x1d4883[_0x289cd7];let _0x2852eb=_0x4d28ce['getrange']();if(_0x4d28ce[_0x59fd55(0x107)][_0x59fd55(0x98)]==!![])_0x2852eb=1.9;if(_0x37ea5b&&dist(_0xaa9686,_0x31f536[_0x59fd55(0x284)])<=_0x2852eb&&drawline(_0xaa9686,_0x31f536[_0x59fd55(0x284)])<0x1){let _0x216a60=actions['Attack'];_0x5b5bd6[_0x59fd55(0x1c6)](new Attack(..._0x216a60,_0x4d28ce[_0x59fd55(0x30b)](),_0x31f536['pos'],_0x4d28ce,_0xaa9686));break;}else{if(_0x4ea16f&&dist(_0xaa9686,_0x2c3f93[_0x59fd55(0x284)])<_0x2c3f93['action'][0x3]){_0x5b5bd6[_0x59fd55(0x1c6)](new action(..._0x2c3f93[_0x59fd55(0x24d)],_0x2c3f93[_0x59fd55(0x284)],_0x4d28ce,_0xaa9686));break;}else{let _0x34afdc=[newgrid[_0x1d4883[_0x289cd7][0x0]][_0x1d4883[_0x289cd7][0x1]][_0x59fd55(0x2a0)],0x0,0x0];_0x4d28ce[_0x59fd55(0x103)]?_0x5b5bd6['push'](new _0x4d28ce[(_0x59fd55(0x103))](_0x59fd55(0x1c9),movefunc,_0x34afdc,0x1,_0x1d4883[_0x289cd7],_0x4d28ce,_0xaa9686)):_0x5b5bd6['push'](new Move(_0x59fd55(0x1c9),movefunc,_0x34afdc,0x1,_0x1d4883[_0x289cd7],_0x4d28ce,_0xaa9686));}}}return _0x5b5bd6;}function moveplayer(_0x2902f9=![],_0x207b66=[0x0,0x0]){const _0x5d9843=_0x1fd1d8;let [_0x568eae,_0x19b40b]=cursorpos;_0x2902f9&&([_0x568eae,_0x19b40b]=_0x207b66);const _0xc5617c=newgrid[_0x568eae][_0x19b40b];if(_0xc5617c['character']&&_0xc5617c[_0x5d9843(0xef)]['pc']==!![]&&!_0x2902f9){activecharacternonindex=_0xc5617c[_0x5d9843(0xef)];for(let _0x4394e1=0x0;_0x4394e1<playercs[_0x5d9843(0x86)];_0x4394e1++){playercs[_0x4394e1][_0x5d9843(0x2a6)]==activecharacternonindex[_0x5d9843(0x2a6)]&&(activecharacter=_0x4394e1);}return![];}if(_0xc5617c[_0x5d9843(0x27a)]==![])return![];let _0x320cdb=aStar(playercs[activecharacter][_0x5d9843(0x284)],[_0x568eae,_0x19b40b]),_0x572e0f=null;if(_0xc5617c['objects'][_0x5d9843(0x86)]>0x0&&_0xc5617c[_0x5d9843(0xef)]==null){const _0xe0d34d=_0xc5617c[_0x5d9843(0x274)][0x0];_0xe0d34d['action']!==null&&(_0x320cdb=aStar(playercs[activecharacter][_0x5d9843(0x284)],[_0x568eae,_0x19b40b],0x1f4,1.9),_0x572e0f=_0xe0d34d['action']);}if(!_0x320cdb)return![];playercs[activecharacter]['actionqueue']=translateAStoAQ(_0x320cdb,playercs[activecharacter])[_0x5d9843(0x169)]();_0x572e0f!==null&&playercs[activecharacter][_0x5d9843(0x117)][_0x5d9843(0x1c6)](new action(..._0x572e0f,[_0x568eae,_0x19b40b],playercs[activecharacter]));let _0x1214d6=0x0;for(let _0x3a43ee=0x0;_0x3a43ee<playercs[activecharacter]['actionqueue'][_0x5d9843(0x86)];_0x3a43ee++){_0x1214d6+=playercs[activecharacter]['actionqueue'][_0x3a43ee][_0x5d9843(0x2ff)][0x0];}let _0x551e76=0x0;for(let _0xde0af3=0x0;_0xde0af3<playercs[activecharacter][_0x5d9843(0x117)][_0x5d9843(0x86)];_0xde0af3++){_0x551e76+=playercs[activecharacter]['actionqueue'][_0xde0af3]['cost'][0x1];}autodash==!![]&&(_0x1214d6>playercs[activecharacter]['tc'][0x0]&&(playercs[activecharacter]['tc'][0x1]>=0x1&&playercs[activecharacter][_0x5d9843(0x117)][_0x5d9843(0x171)](new action('Dash',dashfunc,[0x0,0x1,0x0],0x0,playercs[activecharacter]['pos'],playercs[activecharacter]))));autosg==!![]&&(_0x551e76>playercs[activecharacter]['tc'][0x1]&&_0x1214d6<=playercs[activecharacter]['tc'][0x0]-playercs[activecharacter][_0x5d9843(0x149)][0x0]&&(playercs[activecharacter]['tc'][0x0]>=playercs[activecharacter][_0x5d9843(0x149)][0x0]&&playercs[activecharacter][_0x5d9843(0x117)][_0x5d9843(0x171)](new action('Stand\x20Ground',standgroundfunc,[playercs[activecharacter][_0x5d9843(0x149)][0x0],0x0,0x0],0x0,playercs[activecharacter]['pos'],playercs[activecharacter]))));if(playercs[activecharacter][_0x5d9843(0x117)][_0x5d9843(0x86)]>0x0)return playertick(),!![];}function moveallplayers(){const _0xea1385=_0x1fd1d8;for(let _0x573d3b=0x0;_0x573d3b<playercs[_0xea1385(0x86)];_0x573d3b++){let _0x2c0c70=playercs[_0x573d3b],_0x49307e=cursorpos[_0xea1385(0x169)]();_0x2c0c70[_0xea1385(0xd7)]==![]&&bufferedinputs[_0xea1385(0x1c6)](function(){activecharacter=_0x573d3b,activecharacternonindex=playercs[_0x573d3b];let _0x2a313f=moveplayer(!![],_0x49307e);if(!_0x2a313f)bufferedinputs=[];});}triggerbufferedinput();}function triggerbufferedinput(){const _0x4e996f=_0x1fd1d8;let _0x29a872=bufferedinputs[_0x4e996f(0x1c4)]();_0x29a872&&_0x29a872();}function move(_0x30dc01){const _0x1523d0=_0x1fd1d8;if(_0x30dc01[_0x1523d0(0xd7)]==!![])return;const [_0x2c3886,_0x53b100]=_0x30dc01[_0x1523d0(0x284)],_0x33edfc=_0x30dc01['actionqueue'][_0x1523d0(0x1c4)](),[_0x2e5e17,_0x27440f]=_0x33edfc['target'];if(!_0x33edfc)return;const _0x1ca116=_0x30dc01['tc'][_0x1523d0(0x169)]();if(_0x30dc01['tc'][0x2]<_0x33edfc[_0x1523d0(0x2ff)][0x2])return;_0x30dc01['tc'][0x2]-=_0x33edfc['cost'][0x2];if(_0x33edfc instanceof Attack){let _0x33b189=_0x33edfc[_0x1523d0(0xdb)](!![]);if(_0x33b189[_0x1523d0(0x2fb)]['length']>0x0)_0x33edfc[_0x1523d0(0x1f3)]=![];}if(_0x33edfc[_0x1523d0(0x1f3)])_0x441657(newgrid[_0x2c3886][_0x53b100],_0x30dc01,_0x33edfc);if(_0x30dc01['tc'][0x0]<_0x33edfc[_0x1523d0(0x2ff)][0x0]||_0x30dc01['tc'][0x1]<_0x33edfc[_0x1523d0(0x2ff)][0x1])return;if(_0x30dc01['tc'][0x3]&&_0x33edfc[_0x1523d0(0x2ff)][0x3]&&_0x30dc01['tc'][0x3]<_0x33edfc[_0x1523d0(0x2ff)][0x3])return;_0x30dc01['tc'][0x0]-=_0x33edfc['cost'][0x0],_0x30dc01['tc'][0x1]-=_0x33edfc[_0x1523d0(0x2ff)][0x1];if(_0x33edfc[_0x1523d0(0x2ff)][0x3])_0x30dc01['tc'][0x3]-=_0x33edfc['cost'][0x3];if(_0x30dc01[_0x1523d0(0xd7)]==!![]){}else{if(_0x33edfc[_0x1523d0(0xdb)]()!==![]){if(_0x33edfc[_0x1523d0(0x1f3)])_0x441657(newgrid[_0x2e5e17][_0x27440f],_0x30dc01,_0x33edfc);if(_0x33edfc[_0x1523d0(0x138)]){let _0x386c01=new Sound([_0x2e5e17,_0x27440f],_0x33edfc[_0x1523d0(0x138)],_0x30dc01,_0x33edfc['name']);_0x33edfc[_0x1523d0(0x157)]&&(_0x386c01[_0x1523d0(0x1d1)]=_0x33edfc[_0x1523d0(0x157)]),_0x33edfc[_0x1523d0(0xd9)]&&(_0x386c01['soundeffect']=_0x33edfc[_0x1523d0(0xd9)]),hear(_0x386c01);}}else _0x30dc01['tc']=_0x1ca116['slice']();}function _0x441657(_0x1ed288,_0x1a7f2e,_0x3aa1b9){const _0x4e0f07=_0x1523d0;let [_0xff2bf6,_0x2ef9c1,_0x2cd952,_0x349692]=getlightingsize();updatelighting(_0xff2bf6,_0x2ef9c1,_0x2cd952,_0x349692,!![]);let _0x2bf600={},_0x1f0836=[_0x1ed288,newgrid[_0x3aa1b9[_0x4e0f07(0x331)][0x0]][_0x3aa1b9[_0x4e0f07(0x331)][0x1]]];_0x1f0836[_0x4e0f07(0xb8)](function(_0x46358d){const _0x1b9b9c=_0x4e0f07;_0x46358d['charactersinview'][_0x1b9b9c(0xb8)](function(_0x8040db){const _0x443429=_0x1b9b9c;if(_0x8040db['pc']==!![]||_0x8040db[_0x443429(0xd7)]==!![]){}else _0x2bf600[_0x8040db[_0x443429(0x2a6)]]=_0x8040db;}),_0x46358d['visible']==!![]&&playercs[_0x1b9b9c(0xb8)](function(_0x42b754){const _0x4ddc96=_0x1b9b9c;if(_0x42b754[_0x4ddc96(0xd7)]==![])_0x2bf600[_0x42b754[_0x4ddc96(0x2a6)]]=_0x42b754;}),_0x46358d['objecttriggers']&&_0x46358d[_0x1b9b9c(0x365)][_0x1b9b9c(0xb8)](function(_0x377863){const _0x8675e7=_0x1b9b9c;_0x377863[_0x8675e7(0x12e)](_0x46358d,_0x1a7f2e,_0x3aa1b9);});}),Object[_0x4e0f07(0x10c)](_0x2bf600)[_0x4e0f07(0xb8)](function(_0x9151ac){const _0x5855ef=_0x4e0f07;_0x9151ac[_0x5855ef(0x18e)]['forEach'](function(_0x5985d4){_0x5985d4(_0x9151ac,_0x1a7f2e,_0x3aa1b9);});}),_0x1a7f2e[_0x4e0f07(0x18e)][_0x4e0f07(0xb8)](function(_0x2ddac0){_0x2ddac0(_0x1a7f2e,null,null);});}updatedsomething=!![];}function adduilabel(_0x52fad8,_0x3ff258,_0x1ada5f,_0x13ef7c,_0x5c0688=![],_0x619d12=![],_0x4e1378=![],_0x6f9eb3,_0x3aaa31=0x1,_0x3a633a=0x0,_0x364810){const _0x58cb69=_0x1fd1d8,[_0x285aa2,_0x2bee00]=_0x3ff258;let _0x5afe9b=[];if(!newgrid[_0x285aa2]||!newgrid[_0x285aa2][_0x2bee00])return _0x5afe9b;let _0x3fb895=!![];if(newgrid[_0x285aa2][_0x2bee00]['visible']===!![]||_0x6f9eb3){let _0x293822=Math[_0x58cb69(0xc6)](_0x52fad8['length']/0x2-0x1);if(_0x4e1378)_0x293822=0x0;_0x619d12==!![]&&(_0x293822=0x0);let _0x50f036=!![];(!_0x52fad8[_0x58cb69(0x86)]||_0x52fad8['length']==0x0||_0x52fad8[0x0]=='\x20'||_0x52fad8[0x0]=='$'||_0x52fad8[0x0]=='^')&&(_0x3fb895=![]);(_0x5c0688!==!![]||_0x6f9eb3==![])&&(_0x3fb895=![]);let _0xca762f=0x0;while(_0x50f036==!![]&&_0xca762f<0xa){_0x50f036==![];for(let _0x5b6d05=0x0;_0x5b6d05<_0x52fad8['length'];_0x5b6d05++){let [_0x316b7a,_0x1544e0]=[_0x285aa2-_0x13ef7c,_0x2bee00-_0x293822+_0x5b6d05];if(!newgrid[_0x316b7a]||!newgrid[_0x316b7a][_0x1544e0])break;for(let _0x3237ce=0x0;_0x3237ce<newgrid[_0x316b7a][_0x1544e0][_0x58cb69(0xdf)][_0x58cb69(0x86)];_0x3237ce++){let _0x280a30=newgrid[_0x316b7a][_0x1544e0][_0x58cb69(0xdf)][_0x3237ce];if(_0x3fb895&&_0x280a30[_0x58cb69(0x128)]){let _0x24bd27=Math[_0x58cb69(0x364)](_0x316b7a-viewportpos[0x0]);if(_0x24bd27==0x0)_0x24bd27=0x1;_0x50f036=!![],_0x13ef7c+=0x1;}}if(_0x5c0688!==!![]||_0x6f9eb3==!![]){if(_0x316b7a>viewportpos[0x0]+viewportsizey/0x2){_0x50f036=!![],_0x13ef7c++;break;}if(_0x1544e0>viewportpos[0x1]+viewportsizex/0x2-0x1){_0x50f036=!![],_0x293822++;break;}if(_0x316b7a<viewportpos[0x0]-viewportsizey/0x2){_0x50f036=!![],_0x13ef7c--;break;}if(_0x1544e0<viewportpos[0x1]-viewportsizex/0x2){_0x50f036=!![],_0x293822--;break;};}}_0xca762f++;}if(_0x5c0688==![]){let _0x5cbea0;for(let _0x5defc7=0x0;_0x5defc7<_0x52fad8[_0x58cb69(0x86)];_0x5defc7++){let [_0x449fa5,_0x4f9fcb]=[_0x285aa2-_0x13ef7c,_0x2bee00-_0x293822+_0x5defc7];if(!newgrid[_0x449fa5]||!newgrid[_0x449fa5][_0x4f9fcb])continue;if(viewportpos[0x0]+viewportsizey/0x2-0x1<_0x449fa5)continue;if(viewportpos[0x1]+viewportsizex/0x2-0x1<_0x4f9fcb)continue;if(viewportpos[0x0]-viewportsizey/0x2>_0x449fa5)continue;if(viewportpos[0x1]-viewportsizex/0x2>_0x4f9fcb)continue;_0x5cbea0=new uielement(_0x52fad8[_0x58cb69(0x349)](_0x5defc7),_0x1ada5f,[_0x449fa5,_0x4f9fcb],![],![],null,_0x364810),_0x5afe9b[_0x58cb69(0x1c6)](_0x5cbea0),newgrid[_0x449fa5][_0x4f9fcb]['uiElements'][_0x58cb69(0x1c6)](_0x5cbea0);}}else{line=[];for(let _0x1432de=0x0;_0x1432de<_0x52fad8['length'];_0x1432de++){line[_0x58cb69(0x1c6)]([_0x285aa2-_0x13ef7c,_0x2bee00-_0x293822+_0x1432de]);}let _0x32c3e=line[_0x58cb69(0x86)],_0x570e60;for(let _0x34933e=0x0;_0x34933e<_0x32c3e;_0x34933e++){const [_0x10e985,_0x395209]=line[_0x34933e];if(!newgrid[_0x10e985]||!newgrid[_0x10e985][_0x395209])continue;let _0x41c573=_0x52fad8[_0x34933e%_0x52fad8[_0x58cb69(0x86)]];_0x570e60=new uielement(_0x41c573,_0x1ada5f,line[_0x34933e],_0x5c0688,_0x6f9eb3,[now+_0x3a633a+_0x3aaa31*0x3e8,now+_0x3a633a]),newgrid[_0x10e985][_0x395209][_0x58cb69(0xdf)]['push'](_0x570e60),_0x5afe9b[_0x58cb69(0x1c6)](_0x570e60);}updatedsomething=!![];}}return _0x5afe9b['length']>0x0&&_0x5afe9b[_0x58cb69(0xb8)](_0x4105cc=>_0x4105cc[_0x58cb69(0x128)]=_0x3fb895),_0x5afe9b;}function drawGrid(_0x5bf42d=![]){const _0x46f6b2=_0x1fd1d8;now=performance['now'](),requestAnimationFrame(function(){const _0x80c34f=_0x438d;drawGrid(!![]),now-noiseupdateticker>noiseupdaterate&&(noiseupdate(),noiseupdateticker=performance[_0x80c34f(0x273)]());});if(now-lastCall<throttleRate||updatedlighting==![]&&updatedsomething==![])return;width=window['innerWidth'],height=window[_0x46f6b2(0x2f0)],offscreen[_0x46f6b2(0x2e3)]=window[_0x46f6b2(0x341)]*ratio,offscreen['height']=window[_0x46f6b2(0x2f0)]*ratio,offscreen[_0x46f6b2(0x99)][_0x46f6b2(0x2e3)]=width+'px',offscreen[_0x46f6b2(0x99)][_0x46f6b2(0x20c)]=height+'px',offscreen['getContext']('2d')[_0x46f6b2(0x254)](ratio,ratio);Math[_0x46f6b2(0xfa)](now/0x3e8)>lastframe&&(frameticker=0x0,lastframe=now/0x3e8);lastCall=now;keyglossary&&Object[_0x46f6b2(0x10c)](keybindings)[_0x46f6b2(0xb8)](function(_0xe3ddf4,_0x306dd9){adduilabel(_0xe3ddf4,[viewportpos[0x0],viewportpos[0x1]-viewportsizex/0x2],[0x80,0x80,0x80],-(viewportsizey/0x2)+_0x306dd9+0x3,![],![],!![],!![]);});_0x5bf42d&&updatedlighting&&(updatelightmap(),updatedlighting=![]);let _0x452bff=viewportpos[0x1]-Math['floor'](viewportsizex/0x2),_0x5e29d8=viewportpos[0x0]-Math[_0x46f6b2(0xfa)](viewportsizey/0x2),_0x3d85ad=viewportpos[0x1]+Math[_0x46f6b2(0xfa)](viewportsizex/0x2),_0x2a93b5=viewportpos[0x0]+Math['floor'](viewportsizey/0x2);if(controllock==![]){const _0x5e054d=activecharacternonindex;adduilabel('$',_0x5e054d[_0x46f6b2(0x284)],[0x0,0.25,0x0],0x0,![],![],![],!![]);}if(controllock==![]&&newgrid[cursorpos[0x0]][cursorpos[0x1]][_0x46f6b2(0x27a)]==!![]&&uilock==![]){for(let _0x20dfd2=0x0;_0x20dfd2<playercs['length'];_0x20dfd2++){if(playercs[_0x20dfd2]['dead']==!![])continue;if(ctrl&&_0x20dfd2!==activecharacter)alinedraw(aStar(playercs[_0x20dfd2][_0x46f6b2(0x284)],cursorpos),playercs[_0x20dfd2]['tc'],playercs[_0x20dfd2]);}let _0x51d455=alinedraw(aStar(playercs[activecharacter][_0x46f6b2(0x284)],cursorpos),playercs[activecharacter]['tc'],playercs[activecharacter]);_0x244061(_0x51d455);}else{if(uilock==!![]&&(uilocktype==_0x46f6b2(0x155)||uilocktype=='kick')){let _0x3e2cf7=![],_0x2aec81=activecharacternonindex;_0x2aec81['tc'][0x1]<0x1&&(uilock=![]);let _0xdb6425=new Attack(...actions[_0x46f6b2(0x373)],_0x2aec81[_0x46f6b2(0x30b)](),cursorpos,_0x2aec81,_0x2aec81[_0x46f6b2(0x284)]);if(uilocktype==_0x46f6b2(0x2b5))_0xdb6425=new Kick(cursorpos,_0x2aec81,_0x2aec81[_0x46f6b2(0x284)]);let _0x51b3fc=_0xdb6425[_0x46f6b2(0x286)],_0x1b2aae=Math[_0x46f6b2(0xc6)](_0xdb6425[_0x46f6b2(0x286)]);const _0x315d30=_0x2aec81[_0x46f6b2(0xae)]();for(let _0x2c74d6=_0x2aec81[_0x46f6b2(0x284)][0x0]-_0x1b2aae;_0x2c74d6<=_0x2aec81['pos'][0x0]+_0x1b2aae;_0x2c74d6++){for(let _0x197c8c=_0x2aec81['pos'][0x1]-_0x1b2aae;_0x197c8c<=_0x2aec81[_0x46f6b2(0x284)][0x1]+_0x1b2aae;_0x197c8c++){if(newgrid[_0x2c74d6]===undefined||newgrid[_0x2c74d6][_0x197c8c]===undefined)continue;let _0x4bdfc6=new Attack(...actions['Attack'],_0x2aec81[_0x46f6b2(0x30b)](),[_0x2c74d6,_0x197c8c],_0x2aec81,_0x2aec81[_0x46f6b2(0x284)]);if(_0x4bdfc6[_0x46f6b2(0xdb)](!![])[_0x46f6b2(0x2fb)][_0x46f6b2(0x86)]>0x0)continue;dist(_0x2aec81[_0x46f6b2(0x284)],[_0x2c74d6,_0x197c8c],![],!![])<=_0x51b3fc&&adduilabel('$',[_0x2c74d6,_0x197c8c],[0.2,0.2,0.1],0x0,![],![],![],!![]);}}const _0x398e4b=_0xdb6425['func'](!![]);if(_0x398e4b[_0x46f6b2(0x2fb)]&&_0x398e4b[_0x46f6b2(0x2fb)][_0x46f6b2(0x86)]==0x0){let _0x5ed1e1=bresenhamLine(_0x2aec81[_0x46f6b2(0x284)],cursorpos);const _0x1bf692=linecharacter([_0x5ed1e1[0x0][0x0],_0x5ed1e1[0x0][0x1]],[_0x5ed1e1[_0x5ed1e1[_0x46f6b2(0x86)]-0x1][0x0],_0x5ed1e1[_0x5ed1e1[_0x46f6b2(0x86)]-0x1][0x1]]);if(dist(_0x2aec81['pos'],cursorpos,!![])<=_0x51b3fc&&dist(_0x2aec81[_0x46f6b2(0x284)],cursorpos,!![])>_0x315d30){_0x5ed1e1[_0x46f6b2(0x1c4)]();for(let _0x186709=0x0;_0x186709<_0x5ed1e1[_0x46f6b2(0x86)];_0x186709++){const [_0x395c3a,_0xf6f285]=_0x5ed1e1[_0x186709];let _0x43b4b0=[0x0,0x0,0x0];if(newgrid[_0x395c3a][_0xf6f285][_0x46f6b2(0xf6)](undefined,_0x2aec81['pos'])>0x0)_0x43b4b0=[0x80,0x0,0x0];if(newgrid[_0x395c3a][_0xf6f285][_0x46f6b2(0x123)]==!![])newgrid[_0x395c3a][_0xf6f285]['uiElements'][_0x46f6b2(0x1c6)](new uielement(_0x1bf692,_0x43b4b0,[0x0,0x0]));}}}if(newgrid[cursorpos[0x0]][cursorpos[0x1]][_0x46f6b2(0xef)]&&newgrid[cursorpos[0x0]][cursorpos[0x1]][_0x46f6b2(0xef)]['pc']!==activecharacternonindex['pc']){hypoattack=_0xdb6425[_0x46f6b2(0xdb)](!![]);if(hypoattack[_0x46f6b2(0x2fb)][_0x46f6b2(0x86)]>0x0)for(let _0x40f92e=0x0;_0x40f92e<hypoattack[_0x46f6b2(0x2fb)][_0x46f6b2(0x86)];_0x40f92e++){}else{_0x3e2cf7=!![];const _0x37a73a=hypoattack[_0x46f6b2(0x185)][0x0]['toString']()+'-'+hypoattack[_0x46f6b2(0x185)][0x1][_0x46f6b2(0x33e)](),_0xaddf62=Math[_0x46f6b2(0x8a)](hypoattack[_0x46f6b2(0x35e)])['toString']()+'%';adduilabel(_0xaddf62,cursorpos,[(0x1-hypoattack[_0x46f6b2(0x35e)]/0x64)*0x80,hypoattack[_0x46f6b2(0x35e)]/0x64*0x80,0x0],0x2,![],![]),adduilabel(_0x37a73a,cursorpos,[0x80,0x0,0x0],0x1,![],![]),_0x244061(_0x2aec81['tc'][_0x46f6b2(0xbc)]((_0x4e04d5,_0x52eacd)=>_0x4e04d5-_0xdb6425[_0x46f6b2(0x2ff)][_0x52eacd]));for(let _0x4e9fd3=0x0;_0x4e9fd3<hypoattack['modbreakdown'][_0x46f6b2(0x86)];_0x4e9fd3++){const _0x29d9a2=hypoattack[_0x46f6b2(0x2cc)][_0x4e9fd3];let _0x248779=[0x80,0x80,0x80];adduilabel(_0x29d9a2,cursorpos,_0x248779,_0x4e9fd3+0x3,![]);}}}_0x3e2cf7==![]&&_0x244061();}else{if(uilock==!![]&&uilocktype==_0x46f6b2(0x211)){let _0x469a42=activecharacternonindex;_0x469a42['tc'][0x1]<0x1&&(uilock=![]);let _0x5f5883=new Jump(Math['max'](_0x469a42[_0x46f6b2(0xde)][0x0]+0.5,0x2),cursorpos,_0x469a42,_0x469a42[_0x46f6b2(0x284)]),_0x2ab953=_0x5f5883[_0x46f6b2(0x286)],_0x22ab63=Math['ceil'](_0x5f5883[_0x46f6b2(0x286)]);for(let _0x36720a=0x0;_0x36720a<_0x5f5883[_0x46f6b2(0x2b6)][_0x46f6b2(0x86)];_0x36720a++){let _0x5593f8=Math['sin'](now)*0x20+0x60;adduilabel(_0x5f5883[_0x46f6b2(0x2b6)][_0x36720a],_0x5f5883['target'],[_0x5593f8,0x0,0x0],_0x36720a+0x1,![],![]);}for(let _0x1e02b2=_0x469a42[_0x46f6b2(0x284)][0x0]-_0x22ab63;_0x1e02b2<=_0x469a42[_0x46f6b2(0x284)][0x0]+_0x22ab63;_0x1e02b2++){for(let _0x9a9b4f=_0x469a42[_0x46f6b2(0x284)][0x1]-_0x22ab63;_0x9a9b4f<=_0x469a42[_0x46f6b2(0x284)][0x1]+_0x22ab63;_0x9a9b4f++){const _0x40dfde=dist(_0x469a42[_0x46f6b2(0x284)],[_0x1e02b2,_0x9a9b4f],![],!![]);_0x40dfde<=Math['min'](_0x2ab953,_0x22ab63)&&adduilabel('$',[_0x1e02b2,_0x9a9b4f],[0.2,0.2,0.1],0x0,![],![],![],!![]);}}}else{if(uilock==!![]&&uilocktype==_0x46f6b2(0xbc))for(let _0x19d7f3=0x0;_0x19d7f3<viewportsizex*viewportsizey;_0x19d7f3++){let [_0x2f7b71,_0x2e1fb7]=[_0x5e29d8+_0x19d7f3%viewportsizey,_0x452bff+Math[_0x46f6b2(0xfa)](_0x19d7f3/viewportsizey)],[_0x264152,_0x32cd96]=[_0x2f7b71-_0x5e29d8,_0x2e1fb7-_0x452bff],_0x21f160=[0x0,0x0,0x0],_0x2872c8=[0x0,0x0,0x0],_0x292c0f=![],_0xa1fa41=![];map[_0x264152][_0x32cd96]&&(_0x21f160=map[_0x264152][_0x32cd96],map[_0x264152][_0x32cd96][0x3]&&(_0x2872c8=map[_0x264152][_0x32cd96][0x3],_0x292c0f=!![]));adduilabel('_',[_0x2f7b71,_0x2e1fb7],_0x21f160,0x0,![],![],![],!![]);if(_0x292c0f)adduilabel('@',[_0x2f7b71,_0x2e1fb7],_0x2872c8,0x0,![],![],![],!![]);}else activecharacternonindex&&_0x244061();}}}if(activecharacternonindex['pc']==!![]&&controllock==![]&&uilock==![])newgrid[cursorpos[0x0]][cursorpos[0x1]]['cursorread']();let _0x47510c=adduilabel('x',cursorpos,[0x80,0x80,0x80],0x0,![],![],![],!![]);if(_0x47510c&&_0x47510c[0x0])_0x47510c[0x0]['cursor']=!![];offCtx[_0x46f6b2(0x208)](0x0,0x0,offscreen[_0x46f6b2(0x2e3)],offscreen['height']),offCtx[_0x46f6b2(0x1e6)]=fontsize+_0x46f6b2(0x256);let _0x302ad5='',_0xe51348,_0x3566f8,_0x2f6f94,_0x42d5bb=[];for(let _0x55d999=_0x5e29d8;_0x55d999<_0x2a93b5;_0x55d999++){for(let _0x36b07a=_0x452bff;_0x36b07a<_0x3d85ad;_0x36b07a++){_0x3566f8=newgrid[_0x55d999][_0x36b07a],_0xe51348=_0x3566f8['read'](!![]),_0x42d5bb[_0x46f6b2(0x1c6)](_0xe51348);const _0x110540=(_0x36b07a-_0x452bff)*fontsize,_0x104b47=(_0x55d999-_0x5e29d8)*fontsize;(!_0x2f6f94||_0x2f6f94[0x0]!==_0xe51348[0x1][0x0]||_0x2f6f94[0x1]!==_0xe51348[0x1][0x1]||_0x2f6f94[0x2]!==_0xe51348[0x1][0x2])&&(offCtx['fillStyle']=_0x46f6b2(0x20e)+_0xe51348[0x1]+')'),offCtx[_0x46f6b2(0x1b5)](_0x110540,_0x104b47,fontsize,fontsize),_0x2f6f94=_0xe51348[0x1];}}let _0x4b5378=0x0;for(let _0x40dc9c=_0x5e29d8;_0x40dc9c<_0x2a93b5;_0x40dc9c++){for(let _0x43ecff=_0x452bff;_0x43ecff<_0x3d85ad;_0x43ecff++){_0xe51348=_0x42d5bb[_0x4b5378],_0x302ad5=_0xe51348[0x2];while(_0x302ad5['length']>0x1&&(_0x302ad5[0x0]=='&'||_0x302ad5[0x0]=='#'||_0x302ad5[0x0]=='x')){_0x302ad5=_0x302ad5['slice'](0x1);}const _0x5f1ff6=(_0x43ecff-_0x452bff)*fontsize,_0xf908b0=(_0x40dc9c-_0x5e29d8)*fontsize;(!_0x2f6f94||_0x2f6f94[0x0]!==_0xe51348[0x0][0x0]||_0x2f6f94[0x1]!==_0xe51348[0x0][0x1]||_0x2f6f94[0x2]!==_0xe51348[0x0][0x2])&&(offCtx[_0x46f6b2(0x36b)]='rgb('+_0xe51348[0x0]+')'),_0x302ad5['length']>0x1?offCtx['fillText'](String[_0x46f6b2(0x2da)](parseInt(_0x302ad5,0x10)),_0x5f1ff6,_0xf908b0+fontsize,fontsize):offCtx[_0x46f6b2(0xe3)](_0x302ad5,_0x5f1ff6,_0xf908b0+fontsize,fontsize),_0x4b5378++,_0x2f6f94=_0xe51348[0x0];}}renderqueue['push'](offscreen),renderedlastframe=![];renderqueue['length']>0x0&&requestAnimationFrame(()=>{const _0x112ea1=_0x46f6b2;canvas[_0x112ea1(0x2e3)]=width*ratio,canvas[_0x112ea1(0x20c)]=height*ratio,canvas[_0x112ea1(0x99)]['width']=width+'px',canvas[_0x112ea1(0x99)][_0x112ea1(0x20c)]=height+'px';const _0x4060e6=renderqueue[_0x112ea1(0x1c4)]();ctx[_0x112ea1(0x8b)](_0x4060e6,0x0,0x0),renderedlastframe=!![],frameticker++,updatedsomething=![],performance[_0x112ea1(0x273)]()-noiseupdateticker>noiseupdaterate&&(noiseupdate(),noiseupdateticker=performance[_0x112ea1(0x273)]());});uielements=[];function _0x244061(_0x223199=activecharacternonindex['tc']){const _0xc0cfc1=_0x46f6b2;let _0x365cef=activecharacternonindex,_0x27be09=_0x365cef['tc']['slice'](),_0x162433='',_0x53977b='',_0x15c552='';for(let _0x24930e=0x0;_0x24930e<_0x27be09[0x0];_0x24930e++){_0x24930e<_0x223199[0x0]?_0x53977b+='o':_0x53977b+='x';}for(let _0x377c21=_0x27be09[0x0];_0x377c21<_0x365cef[_0xc0cfc1(0x149)][0x0];_0x377c21++){_0x53977b+='.';}for(let _0x2ddd6c=0x0;_0x2ddd6c<_0x27be09[0x1];_0x2ddd6c++){_0x2ddd6c<_0x223199[0x1]?_0x162433+='o':_0x162433+='x';}for(let _0x7ffa01=_0x27be09[0x1];_0x7ffa01<_0x365cef[_0xc0cfc1(0x149)][0x1];_0x7ffa01++){_0x162433+='.';}for(let _0x18b293=0x0;_0x18b293<_0x365cef['conditions'][_0xc0cfc1(0x86)];_0x18b293++){_0x15c552+=_0x365cef[_0xc0cfc1(0x12d)][_0x18b293][_0xc0cfc1(0x15f)];}let _0x46e04f=viewportsizex/0x2,_0x3c5f77=viewportsizey/0x2-0x1;if(won){let _0x46dab9=Math[_0xc0cfc1(0x200)](now/0x3e8)*0x20+0x60;adduilabel('The\x20Scourge\x20has\x20been\x20beaten\x20back...',viewportpos,[_0x46dab9,_0x46dab9/0x2,0x0],0x0,![],![],![],!![]);return;}if(gameover){adduilabel(_0xc0cfc1(0xc0),viewportpos,[0x40,0x40,0x40],0x0,![],![],![],!![]);return;}if(_0x365cef['pc']===!![]){adduilabel(_0x162433,[viewportpos[0x0]+_0x3c5f77,viewportpos[0x1]-_0x46e04f],[0x80,0x0,0x0],0x1,![],![],!![],!![],undefined,undefined,_0xc0cfc1(0x20f)),adduilabel(_0x53977b,[viewportpos[0x0]+_0x3c5f77,viewportpos[0x1]-_0x46e04f],[0x0,0x80,0x0],0x0,![],![],!![],!![],undefined,undefined,_0xc0cfc1(0x1c9)),adduilabel(_0x15c552,[viewportpos[0x0]+_0x3c5f77,viewportpos[0x1]-_0x46e04f],[0x80,0x0,0x0],0x2,![],![],!![],!![]);const _0x3daa2a=_0x365cef['primaryitem'][_0xc0cfc1(0x15f)]['toString']();let _0x382209=[0x80,0x80,0x80];if(_0x365cef[_0xc0cfc1(0x107)]['absorbtion'])_0x382209=convertAbstoColor(_0x365cef['primaryitem'][_0xc0cfc1(0x97)]);adduilabel(_0x3daa2a,[viewportpos[0x0]+_0x3c5f77,viewportpos[0x1]+_0x46e04f-_0x3daa2a[_0xc0cfc1(0x86)]],_0x382209,0x0,![],![],!![],!![],undefined,undefined,'Main\x20Hand');const _0x296012=_0x365cef['secondaryitem'][_0xc0cfc1(0x15f)][_0xc0cfc1(0x33e)]();_0x382209=[0x40,0x40,0x40];if(_0x365cef[_0xc0cfc1(0x2a8)][_0xc0cfc1(0x97)])_0x382209=convertAbstoColor(_0x365cef[_0xc0cfc1(0x2a8)]['absorbtion'])[_0xc0cfc1(0xbc)](_0xefa8be=>_0xefa8be/0x2);if(_0x296012!=='Unarmed')adduilabel(_0x296012,[viewportpos[0x0]+_0x3c5f77,viewportpos[0x1]+_0x46e04f-_0x296012[_0xc0cfc1(0x86)]],_0x382209,0x1,![],![],!![],!![],undefined,undefined,_0xc0cfc1(0x17c));const _0x3173f7=_0x365cef[_0xc0cfc1(0x11d)][_0xc0cfc1(0x15f)][_0xc0cfc1(0x33e)]();_0x382209=[0x40,0x40,0x40];if(_0x365cef[_0xc0cfc1(0x11d)]['absorbtion'])_0x382209=convertAbstoColor(_0x365cef[_0xc0cfc1(0x11d)][_0xc0cfc1(0x97)])[_0xc0cfc1(0xbc)](_0x3fc98c=>_0x3fc98c/0x2);if(_0x3173f7!==_0xc0cfc1(0x173))adduilabel(_0x3173f7,[viewportpos[0x0]+_0x3c5f77,viewportpos[0x1]+_0x46e04f-_0x3173f7[_0xc0cfc1(0x86)]],_0x382209,0x2,![],![],!![],!![],undefined,undefined,'Offhand');}for(let _0x542e86=0x0;_0x542e86<playercs[_0xc0cfc1(0x86)]+0x1;_0x542e86++){if(_0x542e86==playercs['length']){let _0x1c234e=_0xc0cfc1(0x108);if(activecharacternonindex['pc']!==!![])_0x1c234e=_0xc0cfc1(0x348);adduilabel(_0x1c234e,[viewportpos[0x0]-_0x3c5f77,viewportpos[0x1]-_0x46e04f+0x1],[0x40,0x0,0x0],-_0x542e86*0x2,![],!![],![],!![]);break;}let _0x309fe3=playercs[_0x542e86],_0x50a180=_0x309fe3[_0xc0cfc1(0x334)],_0xc8e509=_0x309fe3[_0xc0cfc1(0x15f)],_0x4d334c=_0x309fe3['tc'][0x1],_0x29a0a3=_0x309fe3['tc'][0x0],_0x76e51d=_0x309fe3['tc'][0x2];activecharacternonindex===_0x309fe3?_0xc8e509+='<':_0x50a180=_0x50a180[_0xc0cfc1(0xbc)](_0xd3009a=>_0xd3009a/0x2);if(_0x309fe3[_0xc0cfc1(0xd7)]==!![])_0x50a180=_0x50a180[_0xc0cfc1(0xbc)](_0x335376=>_0x335376/0x2);else{let _0x47c08e=adduilabel(_0x4d334c[_0xc0cfc1(0x33e)](),[viewportpos[0x0]-_0x3c5f77,viewportpos[0x1]-_0x46e04f+0x1],[0x40,0x0,0x0],-_0x542e86*0x2-0x1,![],!![],![],!![],undefined,undefined,'Actions'),_0x24d6fa=adduilabel(_0x29a0a3[_0xc0cfc1(0x33e)](),[viewportpos[0x0]-_0x3c5f77,viewportpos[0x1]-_0x46e04f+0x2],[0x0,0x40,0x0],-_0x542e86*0x2-0x1,![],!![],![],!![],undefined,undefined,_0xc0cfc1(0x1c9));for(let _0x5a1fb9=0x0;_0x5a1fb9<_0x24d6fa[_0xc0cfc1(0x86)];_0x5a1fb9++){const [_0x5af75c,_0x56d333]=activecharacternonindex[_0xc0cfc1(0x284)];_0x24d6fa[_0x5a1fb9]['redirect']=newgrid[_0x5af75c][_0x56d333];}let _0x510273=adduilabel(_0x76e51d['toString'](),[viewportpos[0x0]-_0x3c5f77,viewportpos[0x1]-_0x46e04f+0x3],[0x20,0x20,0x40],-_0x542e86*0x2-0x1,![],!![],![],!![],undefined,undefined,_0xc0cfc1(0x2d2));}adduilabel(_0xc8e509,[viewportpos[0x0]-_0x3c5f77,viewportpos[0x1]-_0x46e04f+0x1],_0x50a180,-_0x542e86*0x2,![],!![],![],!![]);}}}function drawline(_0x396d4b,_0x5bd6ff,_0x52bf58=![]){const _0x30ce84=_0x1fd1d8,[_0xe85c5e,_0x385695]=_0x396d4b,[_0x31bf10,_0x12396d]=_0x5bd6ff;let _0xa99a65=newgrid[_0xe85c5e][_0x385695][_0x30ce84(0x1e7)],_0x5902a3=newgrid[_0x31bf10][_0x12396d][_0x30ce84(0x1e7)];if(_0xa99a65!==_0x5902a3&&!_0x52bf58)return drawLine3D([_0xe85c5e,_0x385695,_0xa99a65],[_0x31bf10,_0x12396d,_0x5902a3]);const _0x4a031d=Math[_0x30ce84(0x1be)](_0x12396d-_0x385695),_0x309c18=Math[_0x30ce84(0x1be)](_0x31bf10-_0xe85c5e),_0x5c18d0=_0x385695<_0x12396d?0x1:-0x1,_0x40c563=_0xe85c5e<_0x31bf10?0x1:-0x1;let _0x2f3cde=_0x4a031d-_0x309c18,_0x2059ad=_0x385695,_0x1375cb=_0xe85c5e,_0x2fd31f=0x0;while(!![]){if(_0x2059ad===_0x12396d&&_0x1375cb===_0x31bf10)return _0x2fd31f;(_0x2059ad!=_0x385695||_0x1375cb!=_0xe85c5e)&&(_0x2fd31f+=newgrid[_0x1375cb][_0x2059ad][_0x30ce84(0xf6)](_0xa99a65,_0x396d4b));if(_0x2fd31f>=0x1)return 0x1;const _0x4cfc27=0x2*_0x2f3cde;_0x4cfc27>-_0x309c18&&(_0x2f3cde-=_0x309c18,_0x2059ad+=_0x5c18d0),_0x4cfc27<_0x4a031d&&(_0x2f3cde+=_0x4a031d,_0x1375cb+=_0x40c563),_0x4cfc27>-_0x309c18&&_0x4cfc27<_0x4a031d&&(cornershadows&&(newgrid[_0x1375cb][_0x2059ad-_0x5c18d0][_0x30ce84(0xf6)]()==0x1&&(_0x2fd31f+=0.5*newgrid[_0x1375cb][_0x2059ad-_0x5c18d0][_0x30ce84(0xf6)]()),newgrid[_0x1375cb-_0x40c563][_0x2059ad][_0x30ce84(0xf6)]()==0x1&&(_0x2fd31f+=0.5*newgrid[_0x1375cb-_0x40c563][_0x2059ad][_0x30ce84(0xf6)]())));}}function drawLine3D(_0x582699,_0x575be6){const _0x473178=_0x1fd1d8;let [_0x3fa411,_0x4a32b5,_0x105855]=_0x582699,[_0x5ad815,_0x5d8962,_0x5d9bd2]=_0x575be6;const _0x453d41=Math[_0x473178(0x1be)](_0x5d9bd2-_0x105855),_0x4c7b88=Math[_0x473178(0x1be)](_0x5d8962-_0x4a32b5),_0x39fc8a=Math[_0x473178(0x1be)](_0x5ad815-_0x3fa411),_0x54dc5b=_0x105855<_0x5d9bd2?0x1:-0x1,_0x36dfa9=_0x4a32b5<_0x5d8962?0x1:-0x1,_0x38eff7=_0x3fa411<_0x5ad815?0x1:-0x1;let _0x187341=0x0,_0x1fcc1d=_0x3fa411,_0x37efa1=_0x4a32b5,_0x4fc449=_0x105855,_0x305553,_0x3f1d2d;if(_0x4c7b88>=_0x39fc8a&&_0x4c7b88>=_0x453d41){_0x305553=0x2*_0x39fc8a-_0x4c7b88,_0x3f1d2d=0x2*_0x453d41-_0x4c7b88;for(let _0x3e308a=0x0;_0x3e308a<=_0x4c7b88;_0x3e308a++){if(_0x1fcc1d==_0x5ad815&&_0x37efa1==_0x5d8962)return _0x187341;if(_0x37efa1!=_0x4a32b5||_0x1fcc1d!=_0x3fa411)_0x187341+=newgrid[_0x1fcc1d][_0x37efa1][_0x473178(0xf6)](_0x4fc449,_0x582699);if(_0x187341>=0x1)return 0x1;_0x305553>0x0&&(_0x1fcc1d+=_0x38eff7,_0x305553-=0x2*_0x4c7b88),_0x3f1d2d>0x0&&(_0x4fc449+=_0x54dc5b,_0x3f1d2d-=0x2*_0x4c7b88),_0x305553+=0x2*_0x39fc8a,_0x3f1d2d+=0x2*_0x453d41,_0x37efa1+=_0x36dfa9;}}else{if(_0x39fc8a>=_0x4c7b88&&_0x39fc8a>=_0x453d41){_0x305553=0x2*_0x4c7b88-_0x39fc8a,_0x3f1d2d=0x2*_0x453d41-_0x39fc8a;for(let _0x1ea5be=0x0;_0x1ea5be<=_0x39fc8a;_0x1ea5be++){if(_0x1fcc1d==_0x5ad815&&_0x37efa1==_0x5d8962)return _0x187341;if(_0x37efa1!=_0x4a32b5||_0x1fcc1d!=_0x3fa411)_0x187341+=newgrid[_0x1fcc1d][_0x37efa1][_0x473178(0xf6)](_0x4fc449,_0x582699);if(_0x187341>=0x1)return 0x1;_0x305553>0x0&&(_0x37efa1+=_0x36dfa9,_0x305553-=0x2*_0x39fc8a),_0x3f1d2d>0x0&&(_0x4fc449+=_0x54dc5b,_0x3f1d2d-=0x2*_0x39fc8a),_0x305553+=0x2*_0x4c7b88,_0x3f1d2d+=0x2*_0x453d41,_0x1fcc1d+=_0x38eff7;}}else{_0x305553=0x2*_0x39fc8a-_0x453d41,_0x3f1d2d=0x2*_0x4c7b88-_0x453d41;for(let _0x4f8927=0x0;_0x4f8927<=_0x453d41;_0x4f8927++){if(_0x1fcc1d==_0x5ad815&&_0x37efa1==_0x5d8962&&_0x4fc449==_0x5d9bd2)return _0x187341;if(_0x37efa1!=_0x4a32b5||_0x1fcc1d!=_0x3fa411)_0x187341+=newgrid[_0x1fcc1d][_0x37efa1][_0x473178(0xf6)](_0x4fc449,_0x582699);if(_0x187341>=0x1)return 0x1;_0x305553>0x0&&(_0x1fcc1d+=_0x38eff7,_0x305553-=0x2*_0x453d41),_0x3f1d2d>0x0&&(_0x37efa1+=_0x36dfa9,_0x3f1d2d-=0x2*_0x453d41),_0x305553+=0x2*_0x39fc8a,_0x3f1d2d+=0x2*_0x4c7b88,_0x4fc449+=_0x54dc5b;}}}}const turndiscountrate=0.5;function planturn(_0x57423f){const _0x28af7d=_0x1fd1d8;let _0x1305f4=performance['now']();spot(_0x57423f);let _0x1c960e=new Map();const _0x1f5280=_0x57423f['state']['utilityfunction'],_0x13e09e=new ActionNode(_0x57423f[_0x28af7d(0x284)],null,_0x57423f['tc'],0x0,0x0,null,-Infinity,_0x57423f[_0x28af7d(0x107)]),_0x509ff2=[_0x13e09e];let _0x2774fc=_0x13e09e,_0x361c6b=_0x1f5280(_0x13e09e,_0x57423f),_0x15155e=_0x361c6b,_0x45cadb=0x0,_0x30f996=0x0;if(_0x57423f[_0x28af7d(0x168)]['name']==_0x28af7d(0xc1))return[];while(_0x509ff2[_0x28af7d(0x86)]>0x0){_0x45cadb++;let _0x485f0a=_0x509ff2[_0x28af7d(0x1c4)](),[_0x1295fc,_0xcc47a8]=_0x485f0a['pos'],{tc:_0x45a134,utility:_0x19e2e5,damagepotential:_0x5284b6,hazards:_0x394ec2}=_0x485f0a,[_0x3fe8bd,_0x44c30f]=_0x45a134,_0x52b448=![],_0xaef8=0x0;if(_0x44c30f<0x0)continue;_0x3fe8bd<0x0&&(_0xaef8=Math[_0x28af7d(0x115)](0x1,Math[_0x28af7d(0xc6)](Math[_0x28af7d(0x1be)](_0x3fe8bd/_0x57423f['tcmax'][0x0])),_0xaef8));if(_0xaef8>0x1)continue;const _0x5a4a28=_0x1295fc+','+_0xcc47a8;!_0x1c960e[_0x28af7d(0x1c0)](_0x5a4a28)&&_0x1c960e[_0x28af7d(0x21b)](_0x5a4a28,[]);let _0x55b07e=_0x1c960e[_0x28af7d(0x293)](_0x5a4a28),_0x44e806;for(let _0x111823=0x0;_0x111823<_0x55b07e['length'];_0x111823++){_0x44e806=_0x55b07e[_0x111823],_0x30f996++;if(_0x44c30f<=_0x44e806['tc'][0x1]&&_0x3fe8bd<=_0x44e806['tc'][0x0]&&_0x5284b6<=_0x44e806[_0x28af7d(0x17a)]&&_0x394ec2>=_0x44e806[_0x28af7d(0xc9)]&&_0x19e2e5<=_0x44e806[_0x28af7d(0xf3)]){_0x52b448=!![];break;}}if(_0x52b448)continue;_0x55b07e[_0x28af7d(0x1c6)](_0x485f0a);_0x19e2e5>_0x15155e&&(_0x2774fc=_0x485f0a,_0x15155e=_0x19e2e5);const _0x5ba727=[];for(let _0x528891=0x0;_0x528891<_0x57423f['state'][_0x28af7d(0x1ba)][_0x28af7d(0x86)];_0x528891++){_0x5ba727[_0x28af7d(0x1c6)](_0x57423f[_0x28af7d(0x1ba)][_0x528891]);}let _0x4d518e,_0x3128cf;for(let _0x591490=0x0;_0x591490<_0x5ba727['length'];_0x591490++){_0x4d518e=_0x5ba727[_0x591490],_0x3128cf=_0x4d518e(_0x485f0a,_0x57423f,_0x19e2e5);for(let _0x29a363=0x0;_0x29a363<_0x3128cf[_0x28af7d(0x86)];_0x29a363++){let _0xfe77ca=_0x3128cf[_0x29a363],_0x3b7819=_0x1f5280(_0xfe77ca,_0x57423f);_0x3b7819*=turndiscountrate**_0xaef8,_0xfe77ca[_0x28af7d(0xf3)]=_0x3b7819,_0x509ff2[_0x28af7d(0x1c6)](_0xfe77ca);}}}return _0x1233c6(_0x2774fc);function _0x1233c6(_0x28ec58){const _0x26d0a5=_0x28af7d;let _0x10309e=[];while(_0x28ec58['tc']&&_0x28ec58['tc'][0x0]<0x0){_0x28ec58=_0x28ec58[_0x26d0a5(0x265)];}while(_0x28ec58[_0x26d0a5(0x24d)]!=null){_0x10309e[_0x26d0a5(0x171)](_0x28ec58[_0x26d0a5(0x24d)]),_0x28ec58=_0x28ec58[_0x26d0a5(0x265)];}return _0x10309e;}}function subtractcost(_0x40da24,_0x8b215f){const _0x3ac916=_0x1fd1d8,_0x16075f=_0x40da24[_0x3ac916(0x2ff)],_0x45ed08=[_0x8b215f[0x0]-_0x16075f[0x0],_0x8b215f[0x1]-_0x16075f[0x1],_0x8b215f[0x2]-_0x16075f[0x2]];return _0x45ed08;}class ActionNode{constructor(_0x21b54a,_0x73a287,_0x5408fc,_0x5ee693,_0x21c655,_0x4a97cf,_0x6815ce,_0x48e1ae){const _0x5bec3e=_0x1fd1d8;this[_0x5bec3e(0x284)]=_0x21b54a,this[_0x5bec3e(0x24d)]=_0x73a287;if(_0x5408fc)this['tc']=_0x5408fc[_0x5bec3e(0x169)]();else this['tc']=[];this[_0x5bec3e(0xc9)]=_0x5ee693,this[_0x5bec3e(0x17a)]=_0x21c655,this[_0x5bec3e(0x265)]=_0x4a97cf,this[_0x5bec3e(0x2ed)]=_0x6815ce,this[_0x5bec3e(0x324)]=_0x48e1ae||this[_0x5bec3e(0x265)]['activeweapon'];}}